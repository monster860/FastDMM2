!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=121)}([function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){var r=n(2),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(a(r,t),t.Buffer=o),o.prototype=Object.create(i.prototype),a(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(139),i=n(140),a=n(69);function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=f.prototype:(null===e&&(e=new f(t)),e.length=t),e}function f(e,t,n){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);f.TYPED_ARRAY_SUPPORT?(e=t).__proto__=f.prototype:e=d(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!f.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(f.isBuffer(t)){var n=0|u(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):d(e,t);if("Buffer"===t.type&&a(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t){if(h(t),e=s(e,t<0?0:0|u(t)),!f.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|u(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function u(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(f.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(e).length;default:if(r)return U(e).length;t=(""+t).toLowerCase(),r=!0}}function b(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return M(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=f.from(t,r)),f.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,i);if("number"==typeof t)return t&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){var a,o=1,s=e.length,f=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,f/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var h=-1;for(a=n;a<s;a++)if(c(e,a)===c(t,-1===h?0:a-h)){if(-1===h&&(h=a),a-h+1===f)return h*o}else-1!==h&&(a-=a-h),h=-1}else for(n+f>s&&(n=s-f),a=n;a>=0;a--){for(var l=!0,d=0;d<f;d++)if(c(e,a+d)!==c(t,d)){l=!1;break}if(l)return a}return-1}function v(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function y(e,t,n,r){return q(U(t,e.length-n),e,n,r)}function w(e,t,n,r){return q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function x(e,t,n,r){return w(e,t,n,r)}function E(e,t,n,r){return q(F(t),e,n,r)}function k(e,t,n,r){return q(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function M(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,f,c=e[i],h=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=n)switch(l){case 1:c<128&&(h=c);break;case 2:128==(192&(a=e[i+1]))&&(f=(31&c)<<6|63&a)>127&&(h=f);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(f=(15&c)<<12|(63&a)<<6|63&o)>2047&&(f<55296||f>57343)&&(h=f);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(f=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&f<1114112&&(h=f)}null===h?(h=65533,l=1):h>65535&&(h-=65536,r.push(h>>>10&1023|55296),h=56320|1023&h),r.push(h),i+=l}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=f,t.SlowBuffer=function(e){+e!=e&&(e=0);return f.alloc(+e)},t.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),f.poolSize=8192,f._augment=function(e){return e.__proto__=f.prototype,e},f.from=function(e,t,n){return c(null,e,t,n)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(e,t,n){return function(e,t,n,r){return h(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},f.allocUnsafe=function(e){return l(null,e)},f.allocUnsafeSlow=function(e){return l(null,e)},f.isBuffer=function(e){return!(null==e||!e._isBuffer)},f.compare=function(e,t){if(!f.isBuffer(e)||!f.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return f.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=f.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!f.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},f.byteLength=p,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},f.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},f.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},f.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?M(this,0,e):b.apply(this,arguments)},f.prototype.equals=function(e){if(!f.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===f.compare(this,e)},f.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},f.prototype.compare=function(e,t,n,r,i){if(!f.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),c=this.slice(r,i),h=e.slice(t,n),l=0;l<s;++l)if(c[l]!==h[l]){a=c[l],o=h[l];break}return a<o?-1:o<a?1:0},f.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},f.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},f.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},f.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return y(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function T(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=D(e[a]);return i}function R(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function z(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,n,r,i,a){if(!f.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function L(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function B(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function j(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function O(e,t,n,r,a){return a||j(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function P(e,t,n,r,a){return a||j(e,0,n,8),i.write(e,t,n,r,52,8),n+8}f.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),f.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=f.prototype;else{var i=t-e;n=new f(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},f.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||z(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},f.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||z(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},f.prototype.readUInt8=function(e,t){return t||z(e,1,this.length),this[e]},f.prototype.readUInt16LE=function(e,t){return t||z(e,2,this.length),this[e]|this[e+1]<<8},f.prototype.readUInt16BE=function(e,t){return t||z(e,2,this.length),this[e]<<8|this[e+1]},f.prototype.readUInt32LE=function(e,t){return t||z(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},f.prototype.readUInt32BE=function(e,t){return t||z(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},f.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||z(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},f.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||z(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},f.prototype.readInt8=function(e,t){return t||z(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},f.prototype.readInt16LE=function(e,t){t||z(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},f.prototype.readInt16BE=function(e,t){t||z(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},f.prototype.readInt32LE=function(e,t){return t||z(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},f.prototype.readInt32BE=function(e,t){return t||z(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},f.prototype.readFloatLE=function(e,t){return t||z(e,4,this.length),i.read(this,e,!0,23,4)},f.prototype.readFloatBE=function(e,t){return t||z(e,4,this.length),i.read(this,e,!1,23,4)},f.prototype.readDoubleLE=function(e,t){return t||z(e,8,this.length),i.read(this,e,!0,52,8)},f.prototype.readDoubleBE=function(e,t){return t||z(e,8,this.length),i.read(this,e,!1,52,8)},f.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||C(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},f.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||C(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},f.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,1,255,0),f.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},f.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},f.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},f.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):B(this,e,t,!0),t+4},f.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},f.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);C(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},f.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);C(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},f.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,1,127,-128),f.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},f.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},f.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},f.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):B(this,e,t,!0),t+4},f.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),f.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},f.prototype.writeFloatLE=function(e,t,n){return O(this,e,t,!0,n)},f.prototype.writeFloatBE=function(e,t,n){return O(this,e,t,!1,n)},f.prototype.writeDoubleLE=function(e,t,n){return P(this,e,t,!0,n)},f.prototype.writeDoubleBE=function(e,t,n){return P(this,e,t,!1,n)},f.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},f.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!f.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=f.isBuffer(e)?e:U(new f(e,r).toString()),s=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function D(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function F(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(10))},function(e,t,n){(function(t){var r=n(227),i=n(15),a=n(30),o=n(61),s=n(238);function f(){}function c(e,n){var i=t.concat([t(e),n]);return r(i)}function h(e,n){this.length=s(4),this.type=t(n),this.data=s(e),this.length.write32(e),this.data.attach(this)}f.inherits=function(e){i.inherits(e,f)},f.make=function(e,n){var r=function n(r,i){return this instanceof n?(this.type=e,t.isBuffer(r)?(this._rawData=r,void(this.initialize&&this.initialize(r,i))):this.create(r)):new n(r,i)};return f.inherits(r),r},f.prototype.getParser=function(e){return new o(e||this._rawData)},f.prototype.getComputedCrc=function(){return c(this.type,this._rawData)},f.prototype.create=function(e){Object.keys(e).forEach(function(t){this[t]||(this[t]=e[t])}.bind(this))},f.prototype.inflate=function(e){var t,n;return this.compressedProfile?(t="compressedProfile",n="profile"):(t="compressedText",n="text"),e||(e=function(){}),this[n]?e(null,this[n]):(a.inflate(this[t],(function(t,r){if(t)return e(t);this[n]=r.toString().replace(/\u0000$/,""),e(null,this[n])})),this)},f.prototype.out=function(e){if(!this.writeData)throw new Error("Needs implementation");var t=this.writeData(this._outputPrepare());t&&e(t.done())},f.prototype.length=function(){throw new Error("Need implementation")},f.prototype.set=function(e,t){return void 0===t||t===this[e]||(this[e]=t,this._buffer=null),this},f.prototype.get=function(e){return this[e]},f.prototype._outputPrepare=function(e){if(void 0===e&&(e=this.length?this.length():null),"number"!=typeof e||isNaN(e))throw new TypeError("Argument must be a number, got "+e);var t=new h(e,this.type);return this._rawData=t.data,t},h.prototype.done=function(e){return this.result=t.concat([this.length,this.type,this.data,c(this.type,this.data)]),e?e(this.result):this.result},e.exports=f}).call(this,n(2).Buffer)},function(e,t,n){(function(e){!function(e,t){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function a(e,t,n){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var o;"object"==typeof e?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{o=n(176).Buffer}catch(e){}function s(e,t,n){for(var r=0,i=Math.min(e.length,n),a=t;a<i;a++){var o=e.charCodeAt(a)-48;r<<=4,r|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return r}function f(e,t,n,r){for(var i=0,a=Math.min(e.length,n),o=t;o<a;o++){var s=e.charCodeAt(o)-48;i*=r,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}a.isBN=function(e){return e instanceof a||null!==e&&"object"==typeof e&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&i++,16===t?this._parseHex(e,i):this._parseBase(e,t,i),"-"===e[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),t,n)},a.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},a.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o,s=0;if("be"===n)for(i=e.length-1,a=0;i>=0;i-=3)o=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);else if("le"===n)for(i=0,a=0;i<e.length;i+=3)o=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);return this.strip()},a.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,i,a=0;for(n=e.length-6,r=0;n>=t;n-=6)i=s(e,n,n+6),this.words[r]|=i<<a&67108863,this.words[r+1]|=i>>>26-a&4194303,(a+=24)>=26&&(a-=26,r++);n+6!==t&&(i=s(e,t,n+6),this.words[r]|=i<<a&67108863,this.words[r+1]|=i>>>26-a&4194303),this.strip()},a.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var a=e.length-n,o=a%r,s=Math.min(a,a-o)+n,c=0,h=n;h<s;h+=r)c=f(e,h,h+r,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var l=1;for(c=f(e,h,e.length,t),h=0;h<o;h++)l*=t;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},a.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],a=0|t.words[0],o=i*a,s=67108863&o,f=o/67108864|0;n.words[0]=s;for(var c=1;c<r;c++){for(var h=f>>>26,l=67108863&f,d=Math.min(c,t.length-1),u=Math.max(0,c-e.length+1);u<=d;u++){var p=c-u|0;h+=(o=(i=0|e.words[p])*(a=0|t.words[u])+l)/67108864|0,l=67108863&o}n.words[c]=0|l,f=0|h}return 0!==f?n.words[c]=0|f:n.length--,n.strip()}a.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,a=0,o=0;o<this.length;o++){var s=this.words[o],f=(16777215&(s<<i|a)).toString(16);n=0!==(a=s>>>24-i&16777215)||o!==this.length-1?c[6-f.length]+f+n:f+n,(i+=2)>=26&&(i-=26,o--)}for(0!==a&&(n=a.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var d=h[e],u=l[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var b=p.modn(u).toString(e);n=(p=p.idivn(u)).isZero()?b+n:c[d-b.length]+b+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(e,t){return r(void 0!==o),this.toArrayLike(o,e,t)},a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},a.prototype.toArrayLike=function(e,t,n){var i=this.byteLength(),a=n||Math.max(1,i);r(i<=a,"byte array longer than desired length"),r(a>0,"Requested array length <= 0"),this.strip();var o,s,f="le"===t,c=new e(a),h=this.clone();if(f){for(s=0;!h.isZero();s++)o=h.andln(255),h.iushrn(8),c[s]=o;for(;s<a;s++)c[s]=0}else{for(s=0;s<a-i;s++)c[s]=0;for(s=0;!h.isZero();s++)o=h.andln(255),h.iushrn(8),c[a-s-1]=o}return c},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},a.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},a.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},a.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},a.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,a=0;a<r.length;a++)t=(0|n.words[a])+(0|r.words[a])+i,this.words[a]=67108863&t,i=t>>>26;for(;0!==i&&a<n.length;a++)t=(0|n.words[a])+i,this.words[a]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var a=0,o=0;o<r.length;o++)a=(t=(0|n.words[o])-(0|r.words[o])+a)>>26,this.words[o]=67108863&t;for(;0!==a&&o<n.length;o++)a=(t=(0|n.words[o])+a)>>26,this.words[o]=67108863&t;if(0===a&&o<n.length&&n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this.length=Math.max(this.length,o),n!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var u=function(e,t,n){var r,i,a,o=e.words,s=t.words,f=n.words,c=0,h=0|o[0],l=8191&h,d=h>>>13,u=0|o[1],p=8191&u,b=u>>>13,m=0|o[2],_=8191&m,g=m>>>13,v=0|o[3],y=8191&v,w=v>>>13,x=0|o[4],E=8191&x,k=x>>>13,S=0|o[5],M=8191&S,A=S>>>13,I=0|o[6],T=8191&I,R=I>>>13,z=0|o[7],C=8191&z,L=z>>>13,B=0|o[8],j=8191&B,O=B>>>13,P=0|o[9],N=8191&P,D=P>>>13,U=0|s[0],F=8191&U,q=U>>>13,$=0|s[1],H=8191&$,K=$>>>13,Y=0|s[2],Z=8191&Y,W=Y>>>13,G=0|s[3],X=8191&G,V=G>>>13,J=0|s[4],Q=8191&J,ee=J>>>13,te=0|s[5],ne=8191&te,re=te>>>13,ie=0|s[6],ae=8191&ie,oe=ie>>>13,se=0|s[7],fe=8191&se,ce=se>>>13,he=0|s[8],le=8191&he,de=he>>>13,ue=0|s[9],pe=8191&ue,be=ue>>>13;n.negative=e.negative^t.negative,n.length=19;var me=(c+(r=Math.imul(l,F))|0)+((8191&(i=(i=Math.imul(l,q))+Math.imul(d,F)|0))<<13)|0;c=((a=Math.imul(d,q))+(i>>>13)|0)+(me>>>26)|0,me&=67108863,r=Math.imul(p,F),i=(i=Math.imul(p,q))+Math.imul(b,F)|0,a=Math.imul(b,q);var _e=(c+(r=r+Math.imul(l,H)|0)|0)+((8191&(i=(i=i+Math.imul(l,K)|0)+Math.imul(d,H)|0))<<13)|0;c=((a=a+Math.imul(d,K)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(_,F),i=(i=Math.imul(_,q))+Math.imul(g,F)|0,a=Math.imul(g,q),r=r+Math.imul(p,H)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(b,H)|0,a=a+Math.imul(b,K)|0;var ge=(c+(r=r+Math.imul(l,Z)|0)|0)+((8191&(i=(i=i+Math.imul(l,W)|0)+Math.imul(d,Z)|0))<<13)|0;c=((a=a+Math.imul(d,W)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(y,F),i=(i=Math.imul(y,q))+Math.imul(w,F)|0,a=Math.imul(w,q),r=r+Math.imul(_,H)|0,i=(i=i+Math.imul(_,K)|0)+Math.imul(g,H)|0,a=a+Math.imul(g,K)|0,r=r+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,W)|0)+Math.imul(b,Z)|0,a=a+Math.imul(b,W)|0;var ve=(c+(r=r+Math.imul(l,X)|0)|0)+((8191&(i=(i=i+Math.imul(l,V)|0)+Math.imul(d,X)|0))<<13)|0;c=((a=a+Math.imul(d,V)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(E,F),i=(i=Math.imul(E,q))+Math.imul(k,F)|0,a=Math.imul(k,q),r=r+Math.imul(y,H)|0,i=(i=i+Math.imul(y,K)|0)+Math.imul(w,H)|0,a=a+Math.imul(w,K)|0,r=r+Math.imul(_,Z)|0,i=(i=i+Math.imul(_,W)|0)+Math.imul(g,Z)|0,a=a+Math.imul(g,W)|0,r=r+Math.imul(p,X)|0,i=(i=i+Math.imul(p,V)|0)+Math.imul(b,X)|0,a=a+Math.imul(b,V)|0;var ye=(c+(r=r+Math.imul(l,Q)|0)|0)+((8191&(i=(i=i+Math.imul(l,ee)|0)+Math.imul(d,Q)|0))<<13)|0;c=((a=a+Math.imul(d,ee)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(M,F),i=(i=Math.imul(M,q))+Math.imul(A,F)|0,a=Math.imul(A,q),r=r+Math.imul(E,H)|0,i=(i=i+Math.imul(E,K)|0)+Math.imul(k,H)|0,a=a+Math.imul(k,K)|0,r=r+Math.imul(y,Z)|0,i=(i=i+Math.imul(y,W)|0)+Math.imul(w,Z)|0,a=a+Math.imul(w,W)|0,r=r+Math.imul(_,X)|0,i=(i=i+Math.imul(_,V)|0)+Math.imul(g,X)|0,a=a+Math.imul(g,V)|0,r=r+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(b,Q)|0,a=a+Math.imul(b,ee)|0;var we=(c+(r=r+Math.imul(l,ne)|0)|0)+((8191&(i=(i=i+Math.imul(l,re)|0)+Math.imul(d,ne)|0))<<13)|0;c=((a=a+Math.imul(d,re)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(T,F),i=(i=Math.imul(T,q))+Math.imul(R,F)|0,a=Math.imul(R,q),r=r+Math.imul(M,H)|0,i=(i=i+Math.imul(M,K)|0)+Math.imul(A,H)|0,a=a+Math.imul(A,K)|0,r=r+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,W)|0)+Math.imul(k,Z)|0,a=a+Math.imul(k,W)|0,r=r+Math.imul(y,X)|0,i=(i=i+Math.imul(y,V)|0)+Math.imul(w,X)|0,a=a+Math.imul(w,V)|0,r=r+Math.imul(_,Q)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul(g,Q)|0,a=a+Math.imul(g,ee)|0,r=r+Math.imul(p,ne)|0,i=(i=i+Math.imul(p,re)|0)+Math.imul(b,ne)|0,a=a+Math.imul(b,re)|0;var xe=(c+(r=r+Math.imul(l,ae)|0)|0)+((8191&(i=(i=i+Math.imul(l,oe)|0)+Math.imul(d,ae)|0))<<13)|0;c=((a=a+Math.imul(d,oe)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(C,F),i=(i=Math.imul(C,q))+Math.imul(L,F)|0,a=Math.imul(L,q),r=r+Math.imul(T,H)|0,i=(i=i+Math.imul(T,K)|0)+Math.imul(R,H)|0,a=a+Math.imul(R,K)|0,r=r+Math.imul(M,Z)|0,i=(i=i+Math.imul(M,W)|0)+Math.imul(A,Z)|0,a=a+Math.imul(A,W)|0,r=r+Math.imul(E,X)|0,i=(i=i+Math.imul(E,V)|0)+Math.imul(k,X)|0,a=a+Math.imul(k,V)|0,r=r+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(w,Q)|0,a=a+Math.imul(w,ee)|0,r=r+Math.imul(_,ne)|0,i=(i=i+Math.imul(_,re)|0)+Math.imul(g,ne)|0,a=a+Math.imul(g,re)|0,r=r+Math.imul(p,ae)|0,i=(i=i+Math.imul(p,oe)|0)+Math.imul(b,ae)|0,a=a+Math.imul(b,oe)|0;var Ee=(c+(r=r+Math.imul(l,fe)|0)|0)+((8191&(i=(i=i+Math.imul(l,ce)|0)+Math.imul(d,fe)|0))<<13)|0;c=((a=a+Math.imul(d,ce)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(j,F),i=(i=Math.imul(j,q))+Math.imul(O,F)|0,a=Math.imul(O,q),r=r+Math.imul(C,H)|0,i=(i=i+Math.imul(C,K)|0)+Math.imul(L,H)|0,a=a+Math.imul(L,K)|0,r=r+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,W)|0)+Math.imul(R,Z)|0,a=a+Math.imul(R,W)|0,r=r+Math.imul(M,X)|0,i=(i=i+Math.imul(M,V)|0)+Math.imul(A,X)|0,a=a+Math.imul(A,V)|0,r=r+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,ee)|0)+Math.imul(k,Q)|0,a=a+Math.imul(k,ee)|0,r=r+Math.imul(y,ne)|0,i=(i=i+Math.imul(y,re)|0)+Math.imul(w,ne)|0,a=a+Math.imul(w,re)|0,r=r+Math.imul(_,ae)|0,i=(i=i+Math.imul(_,oe)|0)+Math.imul(g,ae)|0,a=a+Math.imul(g,oe)|0,r=r+Math.imul(p,fe)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(b,fe)|0,a=a+Math.imul(b,ce)|0;var ke=(c+(r=r+Math.imul(l,le)|0)|0)+((8191&(i=(i=i+Math.imul(l,de)|0)+Math.imul(d,le)|0))<<13)|0;c=((a=a+Math.imul(d,de)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(N,F),i=(i=Math.imul(N,q))+Math.imul(D,F)|0,a=Math.imul(D,q),r=r+Math.imul(j,H)|0,i=(i=i+Math.imul(j,K)|0)+Math.imul(O,H)|0,a=a+Math.imul(O,K)|0,r=r+Math.imul(C,Z)|0,i=(i=i+Math.imul(C,W)|0)+Math.imul(L,Z)|0,a=a+Math.imul(L,W)|0,r=r+Math.imul(T,X)|0,i=(i=i+Math.imul(T,V)|0)+Math.imul(R,X)|0,a=a+Math.imul(R,V)|0,r=r+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,ee)|0)+Math.imul(A,Q)|0,a=a+Math.imul(A,ee)|0,r=r+Math.imul(E,ne)|0,i=(i=i+Math.imul(E,re)|0)+Math.imul(k,ne)|0,a=a+Math.imul(k,re)|0,r=r+Math.imul(y,ae)|0,i=(i=i+Math.imul(y,oe)|0)+Math.imul(w,ae)|0,a=a+Math.imul(w,oe)|0,r=r+Math.imul(_,fe)|0,i=(i=i+Math.imul(_,ce)|0)+Math.imul(g,fe)|0,a=a+Math.imul(g,ce)|0,r=r+Math.imul(p,le)|0,i=(i=i+Math.imul(p,de)|0)+Math.imul(b,le)|0,a=a+Math.imul(b,de)|0;var Se=(c+(r=r+Math.imul(l,pe)|0)|0)+((8191&(i=(i=i+Math.imul(l,be)|0)+Math.imul(d,pe)|0))<<13)|0;c=((a=a+Math.imul(d,be)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(N,H),i=(i=Math.imul(N,K))+Math.imul(D,H)|0,a=Math.imul(D,K),r=r+Math.imul(j,Z)|0,i=(i=i+Math.imul(j,W)|0)+Math.imul(O,Z)|0,a=a+Math.imul(O,W)|0,r=r+Math.imul(C,X)|0,i=(i=i+Math.imul(C,V)|0)+Math.imul(L,X)|0,a=a+Math.imul(L,V)|0,r=r+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(R,Q)|0,a=a+Math.imul(R,ee)|0,r=r+Math.imul(M,ne)|0,i=(i=i+Math.imul(M,re)|0)+Math.imul(A,ne)|0,a=a+Math.imul(A,re)|0,r=r+Math.imul(E,ae)|0,i=(i=i+Math.imul(E,oe)|0)+Math.imul(k,ae)|0,a=a+Math.imul(k,oe)|0,r=r+Math.imul(y,fe)|0,i=(i=i+Math.imul(y,ce)|0)+Math.imul(w,fe)|0,a=a+Math.imul(w,ce)|0,r=r+Math.imul(_,le)|0,i=(i=i+Math.imul(_,de)|0)+Math.imul(g,le)|0,a=a+Math.imul(g,de)|0;var Me=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,be)|0)+Math.imul(b,pe)|0))<<13)|0;c=((a=a+Math.imul(b,be)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(N,Z),i=(i=Math.imul(N,W))+Math.imul(D,Z)|0,a=Math.imul(D,W),r=r+Math.imul(j,X)|0,i=(i=i+Math.imul(j,V)|0)+Math.imul(O,X)|0,a=a+Math.imul(O,V)|0,r=r+Math.imul(C,Q)|0,i=(i=i+Math.imul(C,ee)|0)+Math.imul(L,Q)|0,a=a+Math.imul(L,ee)|0,r=r+Math.imul(T,ne)|0,i=(i=i+Math.imul(T,re)|0)+Math.imul(R,ne)|0,a=a+Math.imul(R,re)|0,r=r+Math.imul(M,ae)|0,i=(i=i+Math.imul(M,oe)|0)+Math.imul(A,ae)|0,a=a+Math.imul(A,oe)|0,r=r+Math.imul(E,fe)|0,i=(i=i+Math.imul(E,ce)|0)+Math.imul(k,fe)|0,a=a+Math.imul(k,ce)|0,r=r+Math.imul(y,le)|0,i=(i=i+Math.imul(y,de)|0)+Math.imul(w,le)|0,a=a+Math.imul(w,de)|0;var Ae=(c+(r=r+Math.imul(_,pe)|0)|0)+((8191&(i=(i=i+Math.imul(_,be)|0)+Math.imul(g,pe)|0))<<13)|0;c=((a=a+Math.imul(g,be)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(N,X),i=(i=Math.imul(N,V))+Math.imul(D,X)|0,a=Math.imul(D,V),r=r+Math.imul(j,Q)|0,i=(i=i+Math.imul(j,ee)|0)+Math.imul(O,Q)|0,a=a+Math.imul(O,ee)|0,r=r+Math.imul(C,ne)|0,i=(i=i+Math.imul(C,re)|0)+Math.imul(L,ne)|0,a=a+Math.imul(L,re)|0,r=r+Math.imul(T,ae)|0,i=(i=i+Math.imul(T,oe)|0)+Math.imul(R,ae)|0,a=a+Math.imul(R,oe)|0,r=r+Math.imul(M,fe)|0,i=(i=i+Math.imul(M,ce)|0)+Math.imul(A,fe)|0,a=a+Math.imul(A,ce)|0,r=r+Math.imul(E,le)|0,i=(i=i+Math.imul(E,de)|0)+Math.imul(k,le)|0,a=a+Math.imul(k,de)|0;var Ie=(c+(r=r+Math.imul(y,pe)|0)|0)+((8191&(i=(i=i+Math.imul(y,be)|0)+Math.imul(w,pe)|0))<<13)|0;c=((a=a+Math.imul(w,be)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(N,Q),i=(i=Math.imul(N,ee))+Math.imul(D,Q)|0,a=Math.imul(D,ee),r=r+Math.imul(j,ne)|0,i=(i=i+Math.imul(j,re)|0)+Math.imul(O,ne)|0,a=a+Math.imul(O,re)|0,r=r+Math.imul(C,ae)|0,i=(i=i+Math.imul(C,oe)|0)+Math.imul(L,ae)|0,a=a+Math.imul(L,oe)|0,r=r+Math.imul(T,fe)|0,i=(i=i+Math.imul(T,ce)|0)+Math.imul(R,fe)|0,a=a+Math.imul(R,ce)|0,r=r+Math.imul(M,le)|0,i=(i=i+Math.imul(M,de)|0)+Math.imul(A,le)|0,a=a+Math.imul(A,de)|0;var Te=(c+(r=r+Math.imul(E,pe)|0)|0)+((8191&(i=(i=i+Math.imul(E,be)|0)+Math.imul(k,pe)|0))<<13)|0;c=((a=a+Math.imul(k,be)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(N,ne),i=(i=Math.imul(N,re))+Math.imul(D,ne)|0,a=Math.imul(D,re),r=r+Math.imul(j,ae)|0,i=(i=i+Math.imul(j,oe)|0)+Math.imul(O,ae)|0,a=a+Math.imul(O,oe)|0,r=r+Math.imul(C,fe)|0,i=(i=i+Math.imul(C,ce)|0)+Math.imul(L,fe)|0,a=a+Math.imul(L,ce)|0,r=r+Math.imul(T,le)|0,i=(i=i+Math.imul(T,de)|0)+Math.imul(R,le)|0,a=a+Math.imul(R,de)|0;var Re=(c+(r=r+Math.imul(M,pe)|0)|0)+((8191&(i=(i=i+Math.imul(M,be)|0)+Math.imul(A,pe)|0))<<13)|0;c=((a=a+Math.imul(A,be)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,r=Math.imul(N,ae),i=(i=Math.imul(N,oe))+Math.imul(D,ae)|0,a=Math.imul(D,oe),r=r+Math.imul(j,fe)|0,i=(i=i+Math.imul(j,ce)|0)+Math.imul(O,fe)|0,a=a+Math.imul(O,ce)|0,r=r+Math.imul(C,le)|0,i=(i=i+Math.imul(C,de)|0)+Math.imul(L,le)|0,a=a+Math.imul(L,de)|0;var ze=(c+(r=r+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,be)|0)+Math.imul(R,pe)|0))<<13)|0;c=((a=a+Math.imul(R,be)|0)+(i>>>13)|0)+(ze>>>26)|0,ze&=67108863,r=Math.imul(N,fe),i=(i=Math.imul(N,ce))+Math.imul(D,fe)|0,a=Math.imul(D,ce),r=r+Math.imul(j,le)|0,i=(i=i+Math.imul(j,de)|0)+Math.imul(O,le)|0,a=a+Math.imul(O,de)|0;var Ce=(c+(r=r+Math.imul(C,pe)|0)|0)+((8191&(i=(i=i+Math.imul(C,be)|0)+Math.imul(L,pe)|0))<<13)|0;c=((a=a+Math.imul(L,be)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(N,le),i=(i=Math.imul(N,de))+Math.imul(D,le)|0,a=Math.imul(D,de);var Le=(c+(r=r+Math.imul(j,pe)|0)|0)+((8191&(i=(i=i+Math.imul(j,be)|0)+Math.imul(O,pe)|0))<<13)|0;c=((a=a+Math.imul(O,be)|0)+(i>>>13)|0)+(Le>>>26)|0,Le&=67108863;var Be=(c+(r=Math.imul(N,pe))|0)+((8191&(i=(i=Math.imul(N,be))+Math.imul(D,pe)|0))<<13)|0;return c=((a=Math.imul(D,be))+(i>>>13)|0)+(Be>>>26)|0,Be&=67108863,f[0]=me,f[1]=_e,f[2]=ge,f[3]=ve,f[4]=ye,f[5]=we,f[6]=xe,f[7]=Ee,f[8]=ke,f[9]=Se,f[10]=Me,f[11]=Ae,f[12]=Ie,f[13]=Te,f[14]=Re,f[15]=ze,f[16]=Ce,f[17]=Le,f[18]=Be,0!==c&&(f[19]=c,n.length++),n};function p(e,t,n){return(new b).mulp(e,t,n)}function b(e,t){this.x=e,this.y=t}Math.imul||(u=d),a.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?u(this,e,t):n<63?d(this,e,t):n<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,a=0;a<n.length-1;a++){var o=i;i=0;for(var s=67108863&r,f=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=f;c++){var h=a-c,l=(0|e.words[h])*(0|t.words[c]),d=67108863&l;s=67108863&(d=d+s|0),i+=(o=(o=o+(l/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}n.words[a]=s,r=o,o=i}return 0!==r?n.words[a]=r:n.length--,n.strip()}(this,e,t):p(this,e,t)},b.prototype.makeRBT=function(e){for(var t=new Array(e),n=a.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},b.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},b.prototype.permute=function(e,t,n,r,i,a){for(var o=0;o<a;o++)r[o]=t[e[o]],i[o]=n[e[o]]},b.prototype.transform=function(e,t,n,r,i,a){this.permute(a,e,t,n,r,i);for(var o=1;o<i;o<<=1)for(var s=o<<1,f=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),h=0;h<i;h+=s)for(var l=f,d=c,u=0;u<o;u++){var p=n[h+u],b=r[h+u],m=n[h+u+o],_=r[h+u+o],g=l*m-d*_;_=l*_+d*m,m=g,n[h+u]=p+m,r[h+u]=b+_,n[h+u+o]=p-m,r[h+u+o]=b-_,u!==s&&(g=f*l-c*d,d=f*d+c*l,l=g)}},b.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},b.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},b.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},b.prototype.convert13b=function(e,t,n,i){for(var a=0,o=0;o<t;o++)a+=0|e[o],n[2*o]=8191&a,a>>>=13,n[2*o+1]=8191&a,a>>>=13;for(o=2*t;o<i;++o)n[o]=0;r(0===a),r(0==(-8192&a))},b.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},b.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),a=this.stub(r),o=new Array(r),s=new Array(r),f=new Array(r),c=new Array(r),h=new Array(r),l=new Array(r),d=n.words;d.length=r,this.convert13b(e.words,e.length,o,r),this.convert13b(t.words,t.length,c,r),this.transform(o,a,s,f,r,i),this.transform(c,a,h,l,r,i);for(var u=0;u<r;u++){var p=s[u]*h[u]-f[u]*l[u];f[u]=s[u]*l[u]+f[u]*h[u],s[u]=p}return this.conjugate(s,f,r),this.transform(s,f,d,a,r,i),this.conjugate(d,a,r),this.normalize13b(d,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),p(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,a=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=a>>>26,this.words[n]=67108863&a}return 0!==t&&(this.words[n]=t,this.length++),this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=(e.words[r]&1<<i)>>>i}return t}(e);if(0===t.length)return new a(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var i=n.sqr();r<t.length;r++,i=i.sqr())0!==t[r]&&(n=n.mul(i));return n},a.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,a=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(t=0;t<this.length;t++){var s=this.words[t]&a,f=(0|this.words[t])-s<<n;this.words[t]=f|o,o=s>>>26-n}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},a.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var a=e%26,o=Math.min((e-a)/26,this.length),s=67108863^67108863>>>a<<a,f=n;if(i-=o,i=Math.max(0,i),f){for(var c=0;c<o;c++)f.words[c]=this.words[c];f.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var h=0;for(c=this.length-1;c>=0&&(0!==h||c>=i);c--){var l=0|this.words[c];this.words[c]=h<<26-a|l>>>a,h=l&s}return f&&0!==h&&(f.words[f.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},a.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,n){var i,a,o=e.length+n;this._expand(o);var s=0;for(i=0;i<e.length;i++){a=(0|this.words[i+n])+s;var f=(0|e.words[i])*t;s=((a-=67108863&f)>>26)-(f/67108864|0),this.words[i+n]=67108863&a}for(;i<this.length-n;i++)s=(a=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&a;if(0===s)return this.strip();for(r(-1===s),s=0,i=0;i<this.length;i++)s=(a=-(0|this.words[i])+s)>>26,this.words[i]=67108863&a;return this.negative=1,this.strip()},a.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),i=e,o=0|i.words[i.length-1];0!==(n=26-this._countBits(o))&&(i=i.ushln(n),r.iushln(n),o=0|i.words[i.length-1]);var s,f=r.length-i.length;if("mod"!==t){(s=new a(null)).length=f+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var h=r.clone()._ishlnsubmul(i,1,f);0===h.negative&&(r=h,s&&(s.words[f]=1));for(var l=f-1;l>=0;l--){var d=67108864*(0|r.words[i.length+l])+(0|r.words[i.length+l-1]);for(d=Math.min(d/o|0,67108863),r._ishlnsubmul(i,d,l);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(i,1,l),r.isZero()||(r.negative^=1);s&&(s.words[l]=d)}return s&&s.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},a.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(i=s.div.neg()),"div"!==t&&(o=s.mod.neg(),n&&0!==o.negative&&o.iadd(e)),{div:i,mod:o}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(o=s.mod.neg(),n&&0!==o.negative&&o.isub(e)),{div:s.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,o,s},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),a=n.cmp(r);return a<0||1===i&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+(0|this.words[i]))%e;return n},a.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new a(1),o=new a(0),s=new a(0),f=new a(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var h=n.clone(),l=t.clone();!t.isZero();){for(var d=0,u=1;0==(t.words[0]&u)&&d<26;++d,u<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(h),o.isub(l)),i.iushrn(1),o.iushrn(1);for(var p=0,b=1;0==(n.words[0]&b)&&p<26;++p,b<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(s.isOdd()||f.isOdd())&&(s.iadd(h),f.isub(l)),s.iushrn(1),f.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(s),o.isub(f)):(n.isub(t),s.isub(i),f.isub(o))}return{a:s,b:f,gcd:n.iushln(c)}},a.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,o=new a(1),s=new a(0),f=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,h=1;0==(t.words[0]&h)&&c<26;++c,h<<=1);if(c>0)for(t.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(f),o.iushrn(1);for(var l=0,d=1;0==(n.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(n.iushrn(l);l-- >0;)s.isOdd()&&s.iadd(f),s.iushrn(1);t.cmp(n)>=0?(t.isub(n),o.isub(s)):(n.isub(t),s.isub(o))}return(i=0===t.cmpn(1)?o:s).cmpn(0)<0&&i.iadd(e),i},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var a=t;t=n,n=a}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var a=i,o=n;0!==a&&o<this.length;o++){var s=0|this.words[o];a=(s+=a)>>>26,s&=67108863,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new x(e)},a.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var m={k256:null,p224:null,p192:null,p25519:null};function _(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function y(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(e){if("string"==typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function E(e){x.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var e=new a(null);return e.words=new Array(Math.ceil(this.n/13)),e},_.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):n.strip(),n},_.prototype.split=function(e,t){e.iushrn(this.n,0,t)},_.prototype.imulK=function(e){return e.imul(this.k)},i(g,_),g.prototype.split=function(e,t){for(var n=Math.min(e.length,9),r=0;r<n;r++)t.words[r]=e.words[r];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,r=10;r<e.length;r++){var a=0|e.words[r];e.words[r-10]=(4194303&a)<<4|i>>>22,i=a}i>>>=22,e.words[r-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},g.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(v,_),i(y,_),i(w,_),w.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(m[e])return m[e];var t;if("k256"===e)t=new g;else if("p224"===e)t=new v;else if("p192"===e)t=new y;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new w}return m[e]=t,t},x.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},x.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},x.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},x.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},x.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},x.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},x.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},x.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},x.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},x.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},x.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},x.prototype.isqr=function(e){return this.imul(e,e.clone())},x.prototype.sqr=function(e){return this.mul(e,e)},x.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new a(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);r(!i.isZero());var s=new a(1).toRed(this),f=s.redNeg(),c=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new a(2*h*h).toRed(this);0!==this.pow(h,c).cmp(f);)h.redIAdd(f);for(var l=this.pow(h,i),d=this.pow(e,i.addn(1).iushrn(1)),u=this.pow(e,i),p=o;0!==u.cmp(s);){for(var b=u,m=0;0!==b.cmp(s);m++)b=b.redSqr();r(m<p);var _=this.pow(l,new a(1).iushln(p-m-1));d=d.redMul(_),l=_.redSqr(),u=u.redMul(l),p=m}return d},x.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},x.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new a(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var i=n[0],o=0,s=0,f=t.bitLength()%26;for(0===f&&(f=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],h=f-1;h>=0;h--){var l=c>>h&1;i!==n[0]&&(i=this.sqr(i)),0!==l||0!==o?(o<<=1,o|=l,(4===++s||0===r&&0===h)&&(i=this.mul(i,n[o]),s=0,o=0)):s=0}f=26}return i},x.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},x.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new E(e)},i(E,x),E.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},E.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},E.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},E.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,n(175)(e))},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var f,c=[],h=!1,l=-1;function d(){h&&f&&(h=!1,f.length?c=f.concat(c):l=-1,c.length&&u())}function u(){if(!h){var e=s(d);h=!0;for(var t=c.length;t;){for(f=c,c=[];++l<t;)f&&f[l].run();l=-1,t=c.length}f=null,h=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function b(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||h||s(u)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=b,i.addListener=b,i.once=b,i.off=b,i.removeListener=b,i.removeAllListeners=b,i.emit=b,i.prependListener=b,i.prependOnceListener=b,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},function(e,t,n){"use strict";const r=n(43),i=n(67),{CommentToken:a,SymbolToken:o,StringToken:s,NewlineToken:f}=n(44),{Tile:c,Instance:h}=n(135),l=n(18),d=n(138),{shuffle:u}=n(38);let p=0;class b extends l{constructor(e,t,n,l,d,u=!1){if(super(),this.context=e,this.modified=!1,this.filename=t,this.z_levels=[],this.format="standard",this.is_crlf=!0,this.original_keys=new Map,this.running_object_count=new Map,this.external_handle=null,this.tab_elem=null,this.undo_frames=[],this.redo_frames=[],this.undo_frame=[],this.last_change_index=++p,this.mapwindow_x=1,this.mapwindow_y=1,this.mapwindow_z=1,this.mapwindow_zoom=1,this.mapwindow_log_zoom=0,"number"==typeof n){this.maxx=n,this.maxy=l,this.maxz=d;for(let e=0;e<d;e++){let t=[];this.z_levels.push(t);for(let r=0;r<l;r++){let i=[];t.push(i);for(let t=0;t<n;t++)i.push(new c(this,t+1,r+1,e+1,void 0,u))}}}else{this.maxx=0,this.maxy=0,this.maxz=0;let e=n,l=new Map,d=1;this.is_crlf=e.includes("\r");let u=new r.TokenPointer(i(t,e));if(u.tokens[0]instanceof a){let e=u.tokens[0].value;e.includes("dmm2tgm.py")?this.format="tgm":e.includes("maphash")&&(this.format="maphash")}let p=u.get_next();for(;p;)if(p instanceof f)u.advance(),p=u.get_next();else if(p instanceof s){let e=p.value[0];if(d=e.length,u.advance(),p=u.get_next(),!(p instanceof o&&"="==p.value))throw new Error(`Unexpected ${p} at ${p.format_pos()}`);if(u.advance(),p=u.get_next(),!(p instanceof o&&"("==p.value))throw new Error(`Unexpected ${p} at ${p.format_pos()}`);u.advance(),p=u.get_next();let t=[];for(;p&&!(p instanceof o&&")"==p.value);){for(;p instanceof f;)u.advance(),p=u.get_next();if(t.length){if(!(p instanceof o&&","==p.value))throw new Error(`Unexpected ${p} at ${p.format_pos()}`);u.advance(),p=u.get_next()}for(;p instanceof f;)u.advance(),p=u.get_next();let e=r.parse_primary(u).evaluate_constant();for(t.push(new h(this.context,e.path,e.vars)),p=u.get_next();p instanceof f;)u.advance(),p=u.get_next()}let n="("+t.join(",")+")";if(this.original_keys.has(n)?console.warn(`Duplicate key - ${n} is both ${e} and ${this.original_keys.get(n)}`):this.original_keys.set(n,e),!(p instanceof o&&")"==p.value))throw new Error(`Unexpected ${p} at ${p.format_pos()}`);if(u.advance(),p=u.get_next(),!(p instanceof f))throw new Error(`Unexpected ${p} at ${p.format_pos()}`);u.advance(),p=u.get_next(),l.has(e)||l.set(e,t)}else{if(!(p instanceof o&&"("==p.value))throw new Error(`Unexpected ${p} at ${p.format_pos()}`);{u.advance(),p=u.get_next();let e=+r.parse_expression(u).evaluate_constant();if(p=u.get_next(),!(p instanceof o&&","==p.value))throw new Error(`Unexpected ${p} at ${p.format_pos()}`);u.advance(),p=u.get_next();let t=+r.parse_expression(u).evaluate_constant();if(p=u.get_next(),!(p instanceof o&&","==p.value))throw new Error(`Unexpected ${p} at ${p.format_pos()}`);u.advance(),p=u.get_next();let n=+r.parse_expression(u).evaluate_constant();if(p=u.get_next(),!(p instanceof o&&")"==p.value))throw new Error(`Unexpected ${p} at ${p.format_pos()}`);if(u.advance(),p=u.get_next(),!(p instanceof o&&"="==p.value))throw new Error(`Unexpected ${p} at ${p.format_pos()}`);if(u.advance(),p=u.get_next(),!(p instanceof s))throw new Error(`Unexpected ${p} at ${p.format_pos()}`);let i=p.value[0].trim().split(/\r?\n/g);u.advance(),p=u.get_next();let a=this.z_levels[n-1];a||(a=[],this.z_levels[n-1]=a),this.maxz=Math.max(this.maxz,n);for(let n of i){if(n=n.trim(),!n.length)continue;this.maxy=Math.max(this.maxy,t);let r=a[t-1];r||(r=[],a[t-1]=r);let i=e;for(let e=0;e<n.length;e+=d){let t=l.get(n.substring(e,e+d));t||console.error("Key "+n.substring(e,e+d)+" does not exist!");let a=[];for(let e of t)a.push(e.copy());r[i-1]=new c(this,0,0,0,a,!0),this.maxx=Math.max(this.maxx,i),i++}t++}}}for(let e of this.z_levels)e.reverse();for(let[e,t,n]of this.all_coordinates()){let r=this.get_tile(e,t,n);r.x=e,r.y=t,r.z=n}}}handle_instance_added(e,t=1){let n=this.running_object_count.get(e)||0;n+=t,n<=0?this.running_object_count.delete(e):this.running_object_count.set(e,n),this.emit("instance_added",e,t)}handle_instance_removed(e,t=1){let n=this.running_object_count.get(e)||0;n-=t,n<=0?this.running_object_count.delete(e):this.running_object_count.set(e,n),this.emit("instance_removed",e,t)}push_undo(){this.undo_frame.length&&(this.undo_frames.push(this.undo_frame),this.undo_frame=[],this.redo_frames.length=0)}undo(){if(this.push_undo(),this.undo_frames.length<=0)return;let e=this.undo_frames.pop();this.do_undo_frame(e),this.undo_frame&&this.undo_frame.length&&(this.redo_frames.push(this.undo_frame),this.undo_frame=[])}redo(){if(this.redo_frames.length){let e=this.redo_frames.pop();this.do_undo_frame(e),this.undo_frame&&this.undo_frame.length&&(this.undo_frames.push(this.undo_frame),this.undo_frame=[])}}do_undo_frame(e){for(let t=e.length-1;t>=0;t--)e[t][1].apply(e[t][0],e[t].slice(2))}get_tile(e,t,n){if(!(e<1||t<1||n<1||e>this.maxx||t>this.maxy||n>this.maxz))return this.z_levels[n-1][t-1][e-1]}*all_coordinates(){for(let e=1;e<=this.maxz;e++)for(let t=1;t<=this.maxy;t++)for(let n=1;n<=this.maxx;n++)yield[n,t,e]}toString(e=this.format){let t="",n=new Map;if("tgm"==e?t+="//MAP CONVERTED BY dmm2tgm.py THIS HEADER COMMENT PREVENTS RECONVERSION, DO NOT REMOVE\n":"maphash"==e&&(t+="// This map has been converted using maphash\n"),"maphash"==e){let e=new Map;for(let[t,n,r]of this.all_coordinates()){let i=this.get_tile(t,n,r).toString();e.set(i,(e.get(i)||0)+1)}let r=1;for(;e.size>52**r;)r++;let i=new Set,a=[],o=(e,t)=>e[1]==t[1]?t[1]-e[1]:e[0]>t[0]?1:e[0]<t[0]?-1:0;for(let[t]of[...e].sort(o)){let e,r;for(r=0;r<1e4;r++){let n=parseInt(d.createHash("sha1").update(t.substring(1,t.length-1)+r,"utf8").digest("hex").substring(0,4),16),a=m(n);if(!i.has(a)&&n<65535){e=a;break}}if(i.add(e),a[r]=(a[r]||0)+1,!e)throw new Error("Could not find a key");n.set(t,e)}for(let e=1;e<a.length;e++)a[e]&&console.log(a[e]+" "+e+"x collisions");for(let[e,r]of[...n].sort((e,t)=>g(e[1],t[1])))t+=`"${r}" = ${e}\n`;t+="\n"}else{let r=new Set,i=new Set;for(let[t,a,o]of this.all_coordinates()){let s=this.get_tile(t,a,o);if(r.add(s.toString("tgm"==e)),this.original_keys.has(s.toString(!1))){let t=this.original_keys.get(s.toString(!1));i.add(t),n.set(s.toString("tgm"==e),t)}}console.log(`Using ${i.size}/${this.original_keys.size} original keys`);let a=i.size?[...i][0].length:1;for(;r.size>52**a;)a++,i=new Set([...i].map(e=>"a"+e)),n=new Map([...n].map(e=>[e[0],"a"+e[1]]));let o=[],s=Math.min(65535,52**a);for(let e=0;e<s;e++){let t=m(e,a);i.has(t)||o.push(t)}u(o),console.log(o);let f=o[Symbol.iterator](),c=0;for(let e of r){let t=n.get(e)||f.next().value;n.has(e)||(n.set(e,t),c++)}let h=[...n].sort((e,t)=>g(e[1],t[1]));for(let[e,n]of h)t+=`"${n}" = ${e}\n`;console.log(`Using ${c} new keys`),t+="\n"}for(let r=1;r<=this.maxz;r++){if("tgm"==e||"maphash"==e)for(let i=1;i<=this.maxx;i++){t+=`(${i},1,${r}) = {"\n`;for(let a=this.maxy;a>=1;a--){let o=n.get(this.get_tile(i,a,r).toString("tgm"==e));if(!o)throw console.error(n),new Error("Instance "+this.get_tile(i,a,r).toString("tgm"==e)+" doesn't exist!");t+=o,t+="\n"}t+='"}\n'}else{t+=`(1,1,${r}) = {"\n`;for(let i=this.maxy;i>=1;i--){for(let a=1;a<=this.maxx;a++)t+=n.get(this.get_tile(a,i,r).toString("tgm"==e));t+="\n"}t+='"}\n'}r!=this.maxz&&(t+="\n")}return t=t.replace(/\r?\n/g,this.is_crlf?"\r\n":"\n"),t}download(e=this.filename.substring(this.filename.indexOf("/")+1)){let t=this.toString(),n=new Blob([t],{type:"text/plain"}),r=document.createElement("a"),i=URL.createObjectURL(n);r.href=i,r.download=e,r.click(),setTimeout(()=>{URL.revokeObjectURL(i)},1e3)}}function m(e,t=3){let n=[];for(let r=0;r<t;r++){let t=e%52;t<26?n.push(String.fromCharCode(97+t)):n.push(String.fromCharCode(39+t)),e=Math.floor(e/52)}return n.reverse().join("")}function _(e){let t=0;for(let n=0;n<e.length;n++){t*=52;let r=e[n];t+=r>="a"&&r<="z"?r.charCodeAt(0)-"a".charCodeAt(0):r.charCodeAt(0)-"A".charCodeAt(0)+26}return t}function g(e,t){return _(e)-_(t)}b.Tile=c,b.Instance=h,e.exports=b},function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=n,n.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}},function(e,t,n){"use strict";var r=t,i=n(4),a=n(8),o=n(93);r.assert=a,r.toArray=o.toArray,r.zero2=o.zero2,r.toHex=o.toHex,r.encode=o.encode,r.getNAF=function(e,t,n){var r=new Array(Math.max(e.bitLength(),n)+1);r.fill(0);for(var i=1<<t+1,a=e.clone(),o=0;o<r.length;o++){var s,f=a.andln(i-1);a.isOdd()?(s=f>(i>>1)-1?(i>>1)-f:f,a.isubn(s)):s=0,r[o]=s,a.iushrn(1)}return r},r.getJSF=function(e,t){var n=[[],[]];e=e.clone(),t=t.clone();for(var r=0,i=0;e.cmpn(-r)>0||t.cmpn(-i)>0;){var a,o,s,f=e.andln(3)+r&3,c=t.andln(3)+i&3;if(3===f&&(f=-1),3===c&&(c=-1),0==(1&f))a=0;else a=3!==(s=e.andln(7)+r&7)&&5!==s||2!==c?f:-f;if(n[0].push(a),0==(1&c))o=0;else o=3!==(s=t.andln(7)+i&7)&&5!==s||2!==f?c:-c;n[1].push(o),2*r===a+1&&(r=1-r),2*i===o+1&&(i=1-i),e.iushrn(1),t.iushrn(1)}return n},r.cachedProperty=function(e,t,n){var r="_"+t;e.prototype[t]=function(){return void 0!==this[r]?this[r]:this[r]=n.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new i(e,"hex","le")}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r=n(8),i=n(0);function a(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function o(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function s(e){return 1===e.length?"0"+e:e}function f(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=i,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)n.push(parseInt(e[i]+e[i+1],16))}else for(var r=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);o<128?n[r++]=o:o<2048?(n[r++]=o>>6|192,n[r++]=63&o|128):a(e,i)?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++i)),n[r++]=o>>18|240,n[r++]=o>>12&63|128,n[r++]=o>>6&63|128,n[r++]=63&o|128):(n[r++]=o>>12|224,n[r++]=o>>6&63|128,n[r++]=63&o|128)}else for(i=0;i<e.length;i++)n[i]=0|e[i];return n},t.toHex=function(e){for(var t="",n=0;n<e.length;n++)t+=s(e[n].toString(16));return t},t.htonl=o,t.toHex32=function(e,t){for(var n="",r=0;r<e.length;r++){var i=e[r];"little"===t&&(i=o(i)),n+=f(i.toString(16))}return n},t.zero2=s,t.zero8=f,t.join32=function(e,t,n,i){var a=n-t;r(a%4==0);for(var o=new Array(a/4),s=0,f=t;s<o.length;s++,f+=4){var c;c="big"===i?e[f]<<24|e[f+1]<<16|e[f+2]<<8|e[f+3]:e[f+3]<<24|e[f+2]<<16|e[f+1]<<8|e[f],o[s]=c>>>0}return o},t.split32=function(e,t){for(var n=new Array(4*e.length),r=0,i=0;r<e.length;r++,i+=4){var a=e[r];"big"===t?(n[i]=a>>>24,n[i+1]=a>>>16&255,n[i+2]=a>>>8&255,n[i+3]=255&a):(n[i+3]=a>>>24,n[i+2]=a>>>16&255,n[i+1]=a>>>8&255,n[i]=255&a)}return n},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,n){return e+t+n>>>0},t.sum32_4=function(e,t,n,r){return e+t+n+r>>>0},t.sum32_5=function(e,t,n,r,i){return e+t+n+r+i>>>0},t.sum64=function(e,t,n,r){var i=e[t],a=r+e[t+1]>>>0,o=(a<r?1:0)+n+i;e[t]=o>>>0,e[t+1]=a},t.sum64_hi=function(e,t,n,r){return(t+r>>>0<t?1:0)+e+n>>>0},t.sum64_lo=function(e,t,n,r){return t+r>>>0},t.sum64_4_hi=function(e,t,n,r,i,a,o,s){var f=0,c=t;return f+=(c=c+r>>>0)<t?1:0,f+=(c=c+a>>>0)<a?1:0,e+n+i+o+(f+=(c=c+s>>>0)<s?1:0)>>>0},t.sum64_4_lo=function(e,t,n,r,i,a,o,s){return t+r+a+s>>>0},t.sum64_5_hi=function(e,t,n,r,i,a,o,s,f,c){var h=0,l=t;return h+=(l=l+r>>>0)<t?1:0,h+=(l=l+a>>>0)<a?1:0,h+=(l=l+s>>>0)<s?1:0,e+n+i+o+f+(h+=(l=l+c>>>0)<c?1:0)>>>0},t.sum64_5_lo=function(e,t,n,r,i,a,o,s,f,c){return t+r+a+s+c>>>0},t.rotr64_hi=function(e,t,n){return(t<<32-n|e>>>n)>>>0},t.rotr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0},t.shr64_hi=function(e,t,n){return e>>>n},t.shr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0}},function(e,t,n){"use strict";const r=n(18);e.exports=class extends r{constructor(e,{width:t=400,height:n=400,title:r="",can_close:i=!0,modal:a=!1}={}){super();var o=document.documentElement.clientWidth/2-t/2,s=document.documentElement.clientHeight/2-n/2;this.close_response=null,this.container_obj=document.createElement("div"),Object.assign(this.container_obj.style,{width:t+"px",height:n+"px",left:o+"px",top:s+"px"}),this.container_obj.classList.add("uiframe-container"),this.panel_obj=document.createElement("div"),this.panel_obj.classList.add("uiframe"),this.panel_obj.tabIndex=-1,this.header_obj=document.createElement("div"),this.header_obj.classList.add("uiframe-header"),this.title_node=document.createTextNode(r),this.header_obj.appendChild(this.title_node),this.content_obj=document.createElement("div"),this.content_obj.classList.add("uiframe-content"),this.footer_obj=document.createElement("div"),this.footer_obj.classList.add("uiframe-footer"),this.panel_obj.appendChild(this.header_obj),this.panel_obj.appendChild(this.content_obj),this.panel_obj.appendChild(this.footer_obj),this.container_obj.appendChild(this.panel_obj),a?(this.frame_container_obj=document.createElement("div"),this.frame_container_obj.classList.add("uiframe-modal"),this.frame_container_obj.appendChild(this.container_obj),document.body.appendChild(this.frame_container_obj),this.content_obj.focus()):(this.frame_container_obj=document.getElementById("uiframes-container"),this.frame_container_obj.appendChild(this.container_obj)),this.header_obj.addEventListener("mousedown",this._start_drag.bind(this)),this.container_obj.addEventListener("mousedown",this._start_resize.bind(this)),this.container_obj.addEventListener("mousemove",this._container_mousemove.bind(this)),this.container_obj.addEventListener("mouseout",this._container_mouseout.bind(this)),this.can_close=i,this.editor=e,i&&(this.close_button=document.createElement("div"),this.close_button.classList.add("uiframe-close-button"),this.header_obj.appendChild(this.close_button),this.close_button.addEventListener("click",()=>{this.close()}),this.close_button.addEventListener("mousedown",e=>{e.preventDefault()}))}_start_drag(e){if(!e.defaultPrevented&&e.target==this.header_obj){var t=(this.container_obj.offsetWidth-this.panel_obj.offsetWidth)/2;e.preventDefault(),this.panel_obj.focus();var n=e.clientX,r=e.clientY,i=e=>{var i=e.clientX-n,a=e.clientY-r;n=e.clientX,r=e.clientY;var{left:o,top:s}=this.container_obj.getBoundingClientRect();this.container_obj.style.left=Math.min(document.documentElement.clientWidth-160-t,Math.max(-t,o+i))+"px",this.container_obj.style.top=Math.min(document.documentElement.clientHeight-35-t,Math.max(-t,s+a))+"px",this.emit("move")},a=()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",a)}}_resize_meta(e){var t=(this.container_obj.offsetWidth-this.panel_obj.offsetWidth)/2,n=this.panel_obj.offsetWidth,r=this.panel_obj.offsetHeight,i={drag_right:!1,drag_left:!1,drag_up:!1,drag_down:!1,cursor:"default"};return e.target==this.container_obj&&(e.offsetX<t&&(i.drag_left=!0),e.offsetY<t&&(i.drag_up=!0),e.offsetX>n+t&&(i.drag_right=!0),e.offsetY>r+t&&(i.drag_down=!0),i.drag_left&&i.drag_down||i.drag_up&&i.drag_right?i.cursor="nesw-resize":i.drag_left&&i.drag_up||i.drag_down&&i.drag_right?i.cursor="nwse-resize":i.drag_left||i.drag_right?i.cursor="ew-resize":(i.drag_up||i.drag_down)&&(i.cursor="ns-resize")),i.can_resize=i.drag_right||i.drag_left||i.drag_up||i.drag_down,i}_start_resize(e){this.container_obj!=this.frame_container_obj.lastChild&&this.frame_container_obj.appendChild(this.container_obj);var t=this._resize_meta(e);if(t.can_resize){var n=(this.container_obj.offsetWidth-this.panel_obj.offsetWidth)/2;e.preventDefault(),this.panel_obj.focus();var r=e.clientX,i=e.clientY,a=e=>{var a=e.clientX-r,o=e.clientY-i;r=e.clientX,i=e.clientY;var{left:s,top:f}=this.container_obj.getBoundingClientRect();t.drag_left?(this.container_obj.style.left=Math.min(document.documentElement.clientWidth-160-n,Math.max(-n,s+a))+"px",this.container_obj.style.width=Math.max(160,this.panel_obj.clientWidth-a)+"px"):t.drag_right&&(this.container_obj.style.width=Math.max(160,this.panel_obj.clientWidth+a)+"px"),t.drag_up?(this.container_obj.style.top=Math.min(document.documentElement.clientHeight-35-n,Math.max(-n,f+o))+"px",this.container_obj.style.height=Math.max(35,this.panel_obj.clientHeight-o)+"px"):t.drag_down&&(this.container_obj.style.height=Math.max(35,this.panel_obj.clientHeight+o)+"px"),this.emit("resize")},o=()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",o)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",o)}}_container_mousemove(e){var t=this._resize_meta(e);this.container_obj.style.cursor=t.cursor}_container_mouseout(){this.container_obj.style.cursor="default"}get title(){return this.title_node.textContent}set title(e){this.title_node.textContent=e}wait_until_close(){return new Promise(e=>{this.once("close",()=>{e(this.close_response)})})}close(){this.frame_container_obj!=document.getElementById("uiframes-container")?document.body.removeChild(this.frame_container_obj):this.frame_container_obj.removeChild(this.container_obj),this.emit("close")}is_valid_button(e){return e&&e.classList&&e.classList.contains("button")&&!e.classList.contains("disabled")&&!e.classList.contains("selected")}$(e){return this.content_obj.querySelector(e)}$$(e){return this.content_obj.querySelectorAll(e)}}},function(e,t){const n=new Map([["","improper"],["","proper"]]);e.exports={ByondList:class{constructor(e=[],t=[]){this.keys=e,this.values=t,Object.freeze(this)}toString(){return"/list"}},ByondNewlist:class{constructor(e=[]){this.types=e,Object.freeze(this)}toString(){return"/list"}},ByondTypepath:class{constructor(e,t){this.path=e,this.vars=t,Object.freeze(this)}toString(){return this.path}},ByondFile:class{constructor(e){this.file=e,Object.freeze(this)}toString(){return this.file}},ByondNew:class{constructor(e,t=[],n=[]){this.type=e,this.args=t,this.arg_names=n,Object.freeze(this)}toString(){return this.type}},ByondMatrix:class{constructor(e,t,n,r,i,a){this.a=e,this.b=t,this.c=n,this.d=r,this.e=i,this.f=a,Object.freeze(this)}toString(){return"/matrix"}},text_macros:n}},function(e,t,n){var r=n(1).Buffer,i=n(20).Transform,a=n(50).StringDecoder;function o(e){i.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}n(0)(o,i),o.prototype.update=function(e,t,n){"string"==typeof e&&(e=r.from(e,t));var i=this._update(e);return this.hashMode?this:(n&&(i=this._toString(i,n)),i)},o.prototype.setAutoPadding=function(){},o.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},o.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},o.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},o.prototype._transform=function(e,t,n){var r;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){r=e}finally{n(r)}},o.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},o.prototype._finalOrDigest=function(e){var t=this.__final()||r.alloc(0);return e&&(t=this._toString(t,e,!0)),t},o.prototype._toString=function(e,t,n){if(this._decoder||(this._decoder=new a(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var r=this._decoder.write(e);return n&&(r+=this._decoder.end()),r},e.exports=o},function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!_(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,a=r.length,o=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),f=r[n];n<a;f=r[++n])b(f)||!y(f)?o+=" "+f:o+=" "+s(f);return o},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var a,o={};function s(e,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&t._extend(r,n),g(r.showHidden)&&(r.showHidden=!1),g(r.depth)&&(r.depth=2),g(r.colors)&&(r.colors=!1),g(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=f),h(r,e,r.depth)}function f(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function c(e,t){return e}function h(e,n,r){if(e.customInspect&&n&&E(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return _(i)||(i=h(e,i,r)),i}var a=function(e,t){if(g(t))return e.stylize("undefined","undefined");if(_(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(m(t))return e.stylize(""+t,"number");if(p(t))return e.stylize(""+t,"boolean");if(b(t))return e.stylize("null","null")}(e,n);if(a)return a;var o=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),x(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return l(n);if(0===o.length){if(E(n)){var f=n.name?": "+n.name:"";return e.stylize("[Function"+f+"]","special")}if(v(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return e.stylize(Date.prototype.toString.call(n),"date");if(x(n))return l(n)}var c,y="",k=!1,S=["{","}"];(u(n)&&(k=!0,S=["[","]"]),E(n))&&(y=" [Function"+(n.name?": "+n.name:"")+"]");return v(n)&&(y=" "+RegExp.prototype.toString.call(n)),w(n)&&(y=" "+Date.prototype.toUTCString.call(n)),x(n)&&(y=" "+l(n)),0!==o.length||k&&0!=n.length?r<0?v(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=k?function(e,t,n,r,i){for(var a=[],o=0,s=t.length;o<s;++o)I(t,String(o))?a.push(d(e,t,n,r,String(o),!0)):a.push("");return i.forEach((function(i){i.match(/^\d+$/)||a.push(d(e,t,n,r,i,!0))})),a}(e,n,r,s,o):o.map((function(t){return d(e,n,r,s,t,k)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(c,y,S)):S[0]+y+S[1]}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i,a){var o,s,f;if((f=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=f.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):f.set&&(s=e.stylize("[Setter]","special")),I(r,i)||(o="["+i+"]"),s||(e.seen.indexOf(f.value)<0?(s=b(n)?h(e,f.value,null):h(e,f.value,n-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),g(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function u(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function b(e){return null===e}function m(e){return"number"==typeof e}function _(e){return"string"==typeof e}function g(e){return void 0===e}function v(e){return y(e)&&"[object RegExp]"===k(e)}function y(e){return"object"==typeof e&&null!==e}function w(e){return y(e)&&"[object Date]"===k(e)}function x(e){return y(e)&&("[object Error]"===k(e)||e instanceof Error)}function E(e){return"function"==typeof e}function k(e){return Object.prototype.toString.call(e)}function S(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(g(a)&&(a=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!o[n])if(new RegExp("\\b"+n+"\\b","i").test(a)){var r=e.pid;o[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else o[n]=function(){};return o[n]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=u,t.isBoolean=p,t.isNull=b,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=_,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=g,t.isRegExp=v,t.isObject=y,t.isDate=w,t.isError=x,t.isFunction=E,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(222);var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var e=new Date,t=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":");return[e.getDate(),M[e.getMonth()],t].join(" ")}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",A(),t.format.apply(t,arguments))},t.inherits=n(223),t._extend=function(e,t){if(!t||!y(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function R(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(T&&e[T]){var t;if("function"!=typeof(t=e[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],a=0;a<arguments.length;a++)i.push(arguments[a]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),T&&Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=T,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var a=this,o=function(){return i.apply(a,arguments)};t.apply(this,n).then((function(t){e.nextTick(o,null,t)}),(function(t){e.nextTick(R,t,o)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n(5))},function(e,t,n){const{ByondList:r,ByondNewlist:i,ByondTypepath:a,ByondFile:o,ByondNew:s,ByondMatrix:f}=n(13),{text_macros:c}=n(13);e.exports=function e(t,n=!1){if(null==t)return"null";if("number"==typeof t){if((t=Math.fround(t))==1/0)return"1.#INF";if(t==-1/0)return"-1.#INF";if(t!=t)return"1.#IND";let e=Math.abs(t);if(0!=e&&(e<1e-4||e>=1e6)){let e=t.toExponential(5),n=/^([\d\.]*)e([+-])?(\d+)$/.exec(e);return n?`${+n[1]}e${n[2]||"+"}${n[3].padStart(3,0)}`:e}return""+ +t.toPrecision(6)}if("string"==typeof t){return JSON.stringify(t).replace(/[\[\uFDD0-\uFDDF]/g,e=>"["==e?"\\[":"\\"+c.get(e)+" ")}if(t instanceof s){let n=`new ${e(t.type)}(`;if(t.args)for(let r=0;r<t.args.length;r++)0!=r&&(n+=","),t.arg_names&&void 0!==t.arg_names[r]&&(n+=t.arg_names[r]+" = "),n+=e(t.args[r]);return n+=")",n}if(t instanceof a){let r=t.path;if(t.vars&&t.vars.size){r+="{";let i=!0;for(let[a,o]of t.vars)i||(r+=";"),i||n||(r+=" "),i=!1,n&&(r+="\n\t"),r+=a,r+=" = ",r+=e(o);n&&(r+="\n\t"),r+="}"}return r}if(t instanceof o)return`'${t.file}'`;if(t instanceof i){let n="newlist(";if(t.types)for(let r=0;r<t.types.length;r++)0!=r&&(n+=","),n+=e(t.types[r]);return n+=")",n}if(t instanceof r){let n="list(";if(t.keys){let r=!1;if(t.values)for(let e of t.values)void 0!==e&&(r=!0);for(let i=0;i<t.keys.length;i++)0!=i&&(n+=","),0!=i&&r&&(n+=" "),"undefined"!=t.keys[i]&&(n+=e(t.keys[i]),t.values&&void 0!==t.values[i]&&(n+=" = ",n+=e(t.values[i])))}return n+=")",n}if(t instanceof f)return`matrix(${e(t.a)}, ${e(t.b)}, ${e(t.c)}, ${e(t.d)}, ${e(t.e)}, ${e(t.f)})`;throw new Error("Cannot stringify "+t+" ("+t.constructor.name+")")}},function(e,t,n){"use strict";var r=n(33),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=l;var a=Object.create(n(25));a.inherits=n(0);var o=n(71),s=n(49);a.inherits(l,o);for(var f=i(s.prototype),c=0;c<f.length;c++){var h=f[c];l.prototype[h]||(l.prototype[h]=s.prototype[h])}function l(e){if(!(this instanceof l))return new l(e);o.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||r.nextTick(u,this)}function u(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),l.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(){void 0!==a&&e.removeListener("error",a),n([].slice.call(arguments))}var a;"error"!==t&&(a=function(n){e.removeListener(t,i),r(n)},e.once("error",a)),e.once(t,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var f=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function h(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var i,a,o,s;if(c(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"==typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=h(e))>0&&o.length>i&&!o.warned){o.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=e,f.type=t,f.count=o.length,s=f,console&&console.warn&&console.warn(s)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=d.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):m(i,i.length)}function b(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");f=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return h(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var f=i[e];if(void 0===f)return!1;if("function"==typeof f)a(f,this,t);else{var c=f.length,h=m(f,c);for(n=0;n<c;++n)a(h[n],this,t)}return!0},s.prototype.addListener=function(e,t){return l(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return l(this,e,t,!0)},s.prototype.once=function(e,t){return c(t),this.on(e,u(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,u(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,a,o;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return p(this,e,!0)},s.prototype.rawListeners=function(e){return p(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):b.call(e,t)},s.prototype.listenerCount=b,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){"use strict";(function(t,r){var i=n(1).Buffer,a=t.crypto||t.msCrypto;a&&a.getRandomValues?e.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var n=i.allocUnsafe(e);if(e>0)if(e>65536)for(var o=0;o<e;o+=65536)a.getRandomValues(n.slice(o,o+65536));else a.getRandomValues(n);if("function"==typeof t)return r.nextTick((function(){t(null,n)}));return n}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,n(10),n(5))},function(e,t,n){e.exports=i;var r=n(18).EventEmitter;function i(){r.call(this)}n(0)(i,r),i.Readable=n(47),i.Writable=n(148),i.Duplex=n(149),i.Transform=n(150),i.PassThrough=n(151),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",a),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",f));var o=!1;function s(){o||(o=!0,e.end())}function f(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(h(),0===r.listenerCount(this,"error"))throw e}function h(){n.removeListener("data",i),e.removeListener("drain",a),n.removeListener("end",s),n.removeListener("close",f),n.removeListener("error",c),e.removeListener("error",c),n.removeListener("end",h),n.removeListener("close",h),e.removeListener("close",h)}return n.on("error",c),e.on("error",c),n.on("end",h),n.on("close",h),e.on("close",h),e.emit("pipe",n),e}},function(e,t,n){var r=n(1).Buffer;function i(e,t){this._block=r.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}i.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=r.from(e,t));for(var n=this._block,i=this._blockSize,a=e.length,o=this._len,s=0;s<a;){for(var f=o%i,c=Math.min(a-s,i-f),h=0;h<c;h++)n[f+h]=e[s+h];s+=c,(o+=c)%i==0&&this._update(n)}return this._len+=a,this},i.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var r=(4294967295&n)>>>0,i=(n-r)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var a=this._hash();return e?a.toString(e):a},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=i},function(e,t){e.exports=class{constructor(e,t,n,r,i=null,a=null,o=!1){this.appearance=e,this.x=t,this.y=n,this.z=r,this.tile=i,this.instance=a,this.detect_clicks=o}}},function(e,t,n){n(2).Buffer;function r(e,t,n){this.r=this.red=this[0]=e,this.g=this.green=this[1]=t,this.b=this.blue=this[2]=n}function i(e,t){this.x=this[0]=e,this.y=this[1]=t}r.prototype.equals=function(e){return this.red===e.red&&this.green===e.green&&this.blue===e.blue},i.prototype.equals=function(e){return this.x===e.x&&this.y===e.y},t.fourByteFraction=function(e){return e.readUInt32BE(0)/1e5},t.intFromFourByteFraction=function(e){return Math.ceil(1e5*e)},t.Colour=r,t.Point=i,t.to16Bit=function(e){return e.readUInt16BE(0)}},function(e,t,n){"use strict";var r=n(0),i=n(46),a=n(51),o=n(52),s=n(14);function f(e){s.call(this,"digest"),this._hash=e}r(f,s),f.prototype._update=function(e){this._hash.update(e)},f.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return"md5"===(e=e.toLowerCase())?new i:"rmd160"===e||"ripemd160"===e?new a:new f(o(e))}},function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,n(2).Buffer)},function(e,t,n){(function(t){e.exports=function(e,n){for(var r=Math.min(e.length,n.length),i=new t(r),a=0;a<r;++a)i[a]=e[a]^n[a];return i}}).call(this,n(2).Buffer)},function(e,t,n){"use strict";var r=n(11),i=n(8);function a(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=a,a.prototype.update=function(e,t){if(e=r.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var n=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-n,e.length),0===this.pending.length&&(this.pending=null),e=r.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},a.prototype.digest=function(e){return this.update(this._pad()),i(null===this.pending),this._digest(e)},a.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,r=new Array(n+this.padLength);r[0]=128;for(var i=1;i<n;i++)r[i]=0;if(e<<=3,"big"===this.endian){for(var a=8;a<this.padLength;a++)r[i++]=0;r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=e>>>24&255,r[i++]=e>>>16&255,r[i++]=e>>>8&255,r[i++]=255&e}else for(r[i++]=255&e,r[i++]=e>>>8&255,r[i++]=e>>>16&255,r[i++]=e>>>24&255,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,a=8;a<this.padLength;a++)r[i++]=0;return r}},function(e,t,n){var r=t;r.bignum=n(4),r.define=n(201).define,r.base=n(29),r.constants=n(99),r.decoders=n(206),r.encoders=n(208)},function(e,t,n){var r=t;r.Reporter=n(203).Reporter,r.DecoderBuffer=n(98).DecoderBuffer,r.EncoderBuffer=n(98).EncoderBuffer,r.Node=n(204)},function(e,t,n){"use strict";(function(e){var r=n(2).Buffer,i=n(20).Transform,a=n(228),o=n(15),s=n(106).ok,f=n(2).kMaxLength,c="Cannot create final Buffer. It would be larger than 0x"+f.toString(16)+" bytes";a.Z_MIN_WINDOWBITS=8,a.Z_MAX_WINDOWBITS=15,a.Z_DEFAULT_WINDOWBITS=15,a.Z_MIN_CHUNK=64,a.Z_MAX_CHUNK=1/0,a.Z_DEFAULT_CHUNK=16384,a.Z_MIN_MEMLEVEL=1,a.Z_MAX_MEMLEVEL=9,a.Z_DEFAULT_MEMLEVEL=8,a.Z_MIN_LEVEL=-1,a.Z_MAX_LEVEL=9,a.Z_DEFAULT_LEVEL=a.Z_DEFAULT_COMPRESSION;for(var h=Object.keys(a),l=0;l<h.length;l++){var d=h[l];d.match(/^Z/)&&Object.defineProperty(t,d,{enumerable:!0,value:a[d],writable:!1})}for(var u={Z_OK:a.Z_OK,Z_STREAM_END:a.Z_STREAM_END,Z_NEED_DICT:a.Z_NEED_DICT,Z_ERRNO:a.Z_ERRNO,Z_STREAM_ERROR:a.Z_STREAM_ERROR,Z_DATA_ERROR:a.Z_DATA_ERROR,Z_MEM_ERROR:a.Z_MEM_ERROR,Z_BUF_ERROR:a.Z_BUF_ERROR,Z_VERSION_ERROR:a.Z_VERSION_ERROR},p=Object.keys(u),b=0;b<p.length;b++){var m=p[b];u[u[m]]=m}function _(e,t,n){var i=[],a=0;function o(){for(var t;null!==(t=e.read());)i.push(t),a+=t.length;e.once("readable",o)}function s(){var t,o=null;a>=f?o=new RangeError(c):t=r.concat(i,a),i=[],e.close(),n(o,t)}e.on("error",(function(t){e.removeListener("end",s),e.removeListener("readable",o),n(t)})),e.on("end",s),e.end(t),o()}function g(e,t){if("string"==typeof t&&(t=r.from(t)),!r.isBuffer(t))throw new TypeError("Not a string or buffer");var n=e._finishFlushFlag;return e._processChunk(t,n)}function v(e){if(!(this instanceof v))return new v(e);A.call(this,e,a.DEFLATE)}function y(e){if(!(this instanceof y))return new y(e);A.call(this,e,a.INFLATE)}function w(e){if(!(this instanceof w))return new w(e);A.call(this,e,a.GZIP)}function x(e){if(!(this instanceof x))return new x(e);A.call(this,e,a.GUNZIP)}function E(e){if(!(this instanceof E))return new E(e);A.call(this,e,a.DEFLATERAW)}function k(e){if(!(this instanceof k))return new k(e);A.call(this,e,a.INFLATERAW)}function S(e){if(!(this instanceof S))return new S(e);A.call(this,e,a.UNZIP)}function M(e){return e===a.Z_NO_FLUSH||e===a.Z_PARTIAL_FLUSH||e===a.Z_SYNC_FLUSH||e===a.Z_FULL_FLUSH||e===a.Z_FINISH||e===a.Z_BLOCK}function A(e,n){var o=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,i.call(this,e),e.flush&&!M(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!M(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||a.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:a.Z_FINISH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!r.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new a.Zlib(n);var s=this;this._hadError=!1,this._handle.onerror=function(e,n){I(s),s._hadError=!0;var r=new Error(e);r.errno=n,r.code=t.codes[n],s.emit("error",r)};var f=t.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(f=e.level);var c=t.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(c=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,f,e.memLevel||t.Z_DEFAULT_MEMLEVEL,c,e.dictionary),this._buffer=r.allocUnsafe(this._chunkSize),this._offset=0,this._level=f,this._strategy=c,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!o._handle},configurable:!0,enumerable:!0})}function I(t,n){n&&e.nextTick(n),t._handle&&(t._handle.close(),t._handle=null)}function T(e){e.emit("close")}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(u),writable:!1}),t.Deflate=v,t.Inflate=y,t.Gzip=w,t.Gunzip=x,t.DeflateRaw=E,t.InflateRaw=k,t.Unzip=S,t.createDeflate=function(e){return new v(e)},t.createInflate=function(e){return new y(e)},t.createDeflateRaw=function(e){return new E(e)},t.createInflateRaw=function(e){return new k(e)},t.createGzip=function(e){return new w(e)},t.createGunzip=function(e){return new x(e)},t.createUnzip=function(e){return new S(e)},t.deflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),_(new v(t),e,n)},t.deflateSync=function(e,t){return g(new v(t),e)},t.gzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),_(new w(t),e,n)},t.gzipSync=function(e,t){return g(new w(t),e)},t.deflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),_(new E(t),e,n)},t.deflateRawSync=function(e,t){return g(new E(t),e)},t.unzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),_(new S(t),e,n)},t.unzipSync=function(e,t){return g(new S(t),e)},t.inflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),_(new y(t),e,n)},t.inflateSync=function(e,t){return g(new y(t),e)},t.gunzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),_(new x(t),e,n)},t.gunzipSync=function(e,t){return g(new x(t),e)},t.inflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),_(new k(t),e,n)},t.inflateRawSync=function(e,t){return g(new k(t),e)},o.inherits(A,i),A.prototype.params=function(n,r,i){if(n<t.Z_MIN_LEVEL||n>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+n);if(r!=t.Z_FILTERED&&r!=t.Z_HUFFMAN_ONLY&&r!=t.Z_RLE&&r!=t.Z_FIXED&&r!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==n||this._strategy!==r){var o=this;this.flush(a.Z_SYNC_FLUSH,(function(){s(o._handle,"zlib binding closed"),o._handle.params(n,r),o._hadError||(o._level=n,o._strategy=r,i&&i())}))}else e.nextTick(i)},A.prototype.reset=function(){return s(this._handle,"zlib binding closed"),this._handle.reset()},A.prototype._flush=function(e){this._transform(r.alloc(0),"",e)},A.prototype.flush=function(t,n){var i=this,o=this._writableState;("function"==typeof t||void 0===t&&!n)&&(n=t,t=a.Z_FULL_FLUSH),o.ended?n&&e.nextTick(n):o.ending?n&&this.once("end",n):o.needDrain?n&&this.once("drain",(function(){return i.flush(t,n)})):(this._flushFlag=t,this.write(r.alloc(0),"",n))},A.prototype.close=function(t){I(this,t),e.nextTick(T,this)},A.prototype._transform=function(e,t,n){var i,o=this._writableState,s=(o.ending||o.ended)&&(!e||o.length===e.length);return null===e||r.isBuffer(e)?this._handle?(s?i=this._finishFlushFlag:(i=this._flushFlag,e.length>=o.length&&(this._flushFlag=this._opts.flush||a.Z_NO_FLUSH)),void this._processChunk(e,i,n)):n(new Error("zlib binding closed")):n(new Error("invalid input"))},A.prototype._processChunk=function(e,t,n){var i=e&&e.length,a=this._chunkSize-this._offset,o=0,h=this,l="function"==typeof n;if(!l){var d,u=[],p=0;this.on("error",(function(e){d=e})),s(this._handle,"zlib binding closed");do{var b=this._handle.writeSync(t,e,o,i,this._buffer,this._offset,a)}while(!this._hadError&&g(b[0],b[1]));if(this._hadError)throw d;if(p>=f)throw I(this),new RangeError(c);var m=r.concat(u,p);return I(this),m}s(this._handle,"zlib binding closed");var _=this._handle.write(t,e,o,i,this._buffer,this._offset,a);function g(f,c){if(this&&(this.buffer=null,this.callback=null),!h._hadError){var d=a-c;if(s(d>=0,"have should not go down"),d>0){var b=h._buffer.slice(h._offset,h._offset+d);h._offset+=d,l?h.push(b):(u.push(b),p+=b.length)}if((0===c||h._offset>=h._chunkSize)&&(a=h._chunkSize,h._offset=0,h._buffer=r.allocUnsafe(h._chunkSize)),0===c){if(o+=i-f,i=f,!l)return!0;var m=h._handle.write(t,e,o,i,h._buffer,h._offset,h._chunkSize);return m.callback=g,void(m.buffer=e)}if(!l)return!1;n()}}_.buffer=e,_.callback=g},o.inherits(v,A),o.inherits(y,A),o.inherits(w,A),o.inherits(x,A),o.inherits(E,A),o.inherits(k,A),o.inherits(S,A)}).call(this,n(5))},function(e,t,n){const r=n(12);e.exports=class extends r{constructor(e,{title:t="ree",message:n="Heck",modal:r=!0,options:i=["OK"],message_classes:a=[]}={}){super(e,{title:t,width:600,height:130,modal:r,can_close:!1}),this.content_obj.classList.add("center"),this.content_obj.innerHTML="<div class='text'></div>";for(let e of i){let t=document.createElement("div");t.classList.add("button"),t.textContent=e,t.addEventListener("click",()=>{this.close_response=e,this.close()}),this.footer_obj.appendChild(t)}let o=this.$(".text");o.textContent=n,o.classList.add(...a)}set_progress(e,t){null!=t&&(this.$(".progress-text").textContent=t),this.$(".progress-fill").style.width=100*e+"%"}}},function(e,t,n){const r=n(45);e.exports=class{constructor({icon:e=null,icon_state:t=null,name:n=null,appearance_flags:i=null,layer:a=2,plane:o=-32767,dir:s=2,color:f=[1,1,1],alpha:c=1,pixel_x:h=0,pixel_y:l=0,blend_mode:d=0,invisibility:u=0,pixel_w:p=0,pixel_z:b=0,transform:m=r.identity}={}){this.icon=e,this.icon_state=t,this.name=n,this.appearance_flags=i,this.layer=a,this.plane=o,this.dir=s,this.color=f,this.alpha=c,this.pixel_x=h,this.pixel_y=l,this.blend_mode=d,this.invisibility=u,this.pixel_w=p,this.pixel_z=b,this.transform=m,Object.seal(this)}}},function(e,t,n){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var a,o,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,r)}));case 4:return t.nextTick((function(){e.call(null,n,r,i)}));default:for(a=new Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return t.nextTick((function(){e.apply(null,a)}))}}}:e.exports=t}).call(this,n(5))},function(e,t,n){var r=n(1).Buffer;function i(e){r.isBuffer(e)||(e=r.from(e));for(var t=e.length/4|0,n=new Array(t),i=0;i<t;i++)n[i]=e.readUInt32BE(4*i);return n}function a(e){for(;0<e.length;e++)e[0]=0}function o(e,t,n,r,i){for(var a,o,s,f,c=n[0],h=n[1],l=n[2],d=n[3],u=e[0]^t[0],p=e[1]^t[1],b=e[2]^t[2],m=e[3]^t[3],_=4,g=1;g<i;g++)a=c[u>>>24]^h[p>>>16&255]^l[b>>>8&255]^d[255&m]^t[_++],o=c[p>>>24]^h[b>>>16&255]^l[m>>>8&255]^d[255&u]^t[_++],s=c[b>>>24]^h[m>>>16&255]^l[u>>>8&255]^d[255&p]^t[_++],f=c[m>>>24]^h[u>>>16&255]^l[p>>>8&255]^d[255&b]^t[_++],u=a,p=o,b=s,m=f;return a=(r[u>>>24]<<24|r[p>>>16&255]<<16|r[b>>>8&255]<<8|r[255&m])^t[_++],o=(r[p>>>24]<<24|r[b>>>16&255]<<16|r[m>>>8&255]<<8|r[255&u])^t[_++],s=(r[b>>>24]<<24|r[m>>>16&255]<<16|r[u>>>8&255]<<8|r[255&p])^t[_++],f=(r[m>>>24]<<24|r[u>>>16&255]<<16|r[p>>>8&255]<<8|r[255&b])^t[_++],[a>>>=0,o>>>=0,s>>>=0,f>>>=0]}var s=[0,1,2,4,8,16,32,64,128,27,54],f=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var n=[],r=[],i=[[],[],[],[]],a=[[],[],[],[]],o=0,s=0,f=0;f<256;++f){var c=s^s<<1^s<<2^s<<3^s<<4;c=c>>>8^255&c^99,n[o]=c,r[c]=o;var h=e[o],l=e[h],d=e[l],u=257*e[c]^16843008*c;i[0][o]=u<<24|u>>>8,i[1][o]=u<<16|u>>>16,i[2][o]=u<<8|u>>>24,i[3][o]=u,u=16843009*d^65537*l^257*h^16843008*o,a[0][c]=u<<24|u>>>8,a[1][c]=u<<16|u>>>16,a[2][c]=u<<8|u>>>24,a[3][c]=u,0===o?o=s=1:(o=h^e[e[e[d^h]]],s^=e[e[s]])}return{SBOX:n,INV_SBOX:r,SUB_MIX:i,INV_SUB_MIX:a}}();function c(e){this._key=i(e),this._reset()}c.blockSize=16,c.keySize=32,c.prototype.blockSize=c.blockSize,c.prototype.keySize=c.keySize,c.prototype._reset=function(){for(var e=this._key,t=e.length,n=t+6,r=4*(n+1),i=[],a=0;a<t;a++)i[a]=e[a];for(a=t;a<r;a++){var o=i[a-1];a%t==0?(o=o<<8|o>>>24,o=f.SBOX[o>>>24]<<24|f.SBOX[o>>>16&255]<<16|f.SBOX[o>>>8&255]<<8|f.SBOX[255&o],o^=s[a/t|0]<<24):t>6&&a%t==4&&(o=f.SBOX[o>>>24]<<24|f.SBOX[o>>>16&255]<<16|f.SBOX[o>>>8&255]<<8|f.SBOX[255&o]),i[a]=i[a-t]^o}for(var c=[],h=0;h<r;h++){var l=r-h,d=i[l-(h%4?0:4)];c[h]=h<4||l<=4?d:f.INV_SUB_MIX[0][f.SBOX[d>>>24]]^f.INV_SUB_MIX[1][f.SBOX[d>>>16&255]]^f.INV_SUB_MIX[2][f.SBOX[d>>>8&255]]^f.INV_SUB_MIX[3][f.SBOX[255&d]]}this._nRounds=n,this._keySchedule=i,this._invKeySchedule=c},c.prototype.encryptBlockRaw=function(e){return o(e=i(e),this._keySchedule,f.SUB_MIX,f.SBOX,this._nRounds)},c.prototype.encryptBlock=function(e){var t=this.encryptBlockRaw(e),n=r.allocUnsafe(16);return n.writeUInt32BE(t[0],0),n.writeUInt32BE(t[1],4),n.writeUInt32BE(t[2],8),n.writeUInt32BE(t[3],12),n},c.prototype.decryptBlock=function(e){var t=(e=i(e))[1];e[1]=e[3],e[3]=t;var n=o(e,this._invKeySchedule,f.INV_SUB_MIX,f.INV_SBOX,this._nRounds),a=r.allocUnsafe(16);return a.writeUInt32BE(n[0],0),a.writeUInt32BE(n[3],4),a.writeUInt32BE(n[2],8),a.writeUInt32BE(n[1],12),a},c.prototype.scrub=function(){a(this._keySchedule),a(this._invKeySchedule),a(this._key)},e.exports.AES=c},function(e,t,n){var r=n(1).Buffer,i=n(46);e.exports=function(e,t,n,a){if(r.isBuffer(e)||(e=r.from(e,"binary")),t&&(r.isBuffer(t)||(t=r.from(t,"binary")),8!==t.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var o=n/8,s=r.alloc(o),f=r.alloc(a||0),c=r.alloc(0);o>0||a>0;){var h=new i;h.update(c),h.update(e),t&&h.update(t),c=h.digest();var l=0;if(o>0){var d=s.length-o;l=Math.min(o,c.length),c.copy(s,d,0,l),o-=l}if(l<c.length&&a>0){var u=f.length-a,p=Math.min(a,c.length-l);c.copy(f,u,l,l+p),a-=p}}return c.fill(0),{key:s,iv:f}}},function(e,t,n){"use strict";var r=n(4),i=n(9),a=i.getNAF,o=i.getJSF,s=i.assert;function f(e,t){this.type=e,this.p=new r(t.p,16),this.red=t.prime?r.red(t.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=t.n&&new r(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=f,f.prototype.point=function(){throw new Error("Not implemented")},f.prototype.validate=function(){throw new Error("Not implemented")},f.prototype._fixedNafMul=function(e,t){s(e.precomputed);var n=e._getDoubles(),r=a(t,1,this._bitLength),i=(1<<n.step+1)-(n.step%2==0?2:1);i/=3;for(var o=[],f=0;f<r.length;f+=n.step){var c=0;for(t=f+n.step-1;t>=f;t--)c=(c<<1)+r[t];o.push(c)}for(var h=this.jpoint(null,null,null),l=this.jpoint(null,null,null),d=i;d>0;d--){for(f=0;f<o.length;f++){(c=o[f])===d?l=l.mixedAdd(n.points[f]):c===-d&&(l=l.mixedAdd(n.points[f].neg()))}h=h.add(l)}return h.toP()},f.prototype._wnafMul=function(e,t){var n=4,r=e._getNAFPoints(n);n=r.wnd;for(var i=r.points,o=a(t,n,this._bitLength),f=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(t=0;c>=0&&0===o[c];c--)t++;if(c>=0&&t++,f=f.dblp(t),c<0)break;var h=o[c];s(0!==h),f="affine"===e.type?h>0?f.mixedAdd(i[h-1>>1]):f.mixedAdd(i[-h-1>>1].neg()):h>0?f.add(i[h-1>>1]):f.add(i[-h-1>>1].neg())}return"affine"===e.type?f.toP():f},f.prototype._wnafMulAdd=function(e,t,n,r,i){for(var s=this._wnafT1,f=this._wnafT2,c=this._wnafT3,h=0,l=0;l<r;l++){var d=(S=t[l])._getNAFPoints(e);s[l]=d.wnd,f[l]=d.points}for(l=r-1;l>=1;l-=2){var u=l-1,p=l;if(1===s[u]&&1===s[p]){var b=[t[u],null,null,t[p]];0===t[u].y.cmp(t[p].y)?(b[1]=t[u].add(t[p]),b[2]=t[u].toJ().mixedAdd(t[p].neg())):0===t[u].y.cmp(t[p].y.redNeg())?(b[1]=t[u].toJ().mixedAdd(t[p]),b[2]=t[u].add(t[p].neg())):(b[1]=t[u].toJ().mixedAdd(t[p]),b[2]=t[u].toJ().mixedAdd(t[p].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],_=o(n[u],n[p]);h=Math.max(_[0].length,h),c[u]=new Array(h),c[p]=new Array(h);for(var g=0;g<h;g++){var v=0|_[0][g],y=0|_[1][g];c[u][g]=m[3*(v+1)+(y+1)],c[p][g]=0,f[u]=b}}else c[u]=a(n[u],s[u],this._bitLength),c[p]=a(n[p],s[p],this._bitLength),h=Math.max(c[u].length,h),h=Math.max(c[p].length,h)}var w=this.jpoint(null,null,null),x=this._wnafT4;for(l=h;l>=0;l--){for(var E=0;l>=0;){var k=!0;for(g=0;g<r;g++)x[g]=0|c[g][l],0!==x[g]&&(k=!1);if(!k)break;E++,l--}if(l>=0&&E++,w=w.dblp(E),l<0)break;for(g=0;g<r;g++){var S,M=x[g];0!==M&&(M>0?S=f[g][M-1>>1]:M<0&&(S=f[g][-M-1>>1].neg()),w="affine"===S.type?w.mixedAdd(S):w.add(S))}}for(l=0;l<r;l++)f[l]=null;return i?w:w.toP()},f.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},f.prototype.decodePoint=function(e,t){e=i.toArray(e,t);var n=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*n)return 6===e[0]?s(e[e.length-1]%2==0):7===e[0]&&s(e[e.length-1]%2==1),this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));if((2===e[0]||3===e[0])&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),3===e[0]);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(e){return this.encode(e,!0)},c.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))},c.prototype.encode=function(e,t){return i.encode(this._encode(t),e)},c.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},c.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},c.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],r=this,i=0;i<t;i+=e){for(var a=0;a<e;a++)r=r.dbl();n.push(r)}return{step:e,points:n}},c.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,r=1===n?null:this.dbl(),i=1;i<n;i++)t[i]=t[i-1].add(r);return{wnd:e,points:t}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t}},function(e,t,n){var r=n(200),i=n(211),a=n(212),o=n(54),s=n(80),f=n(1).Buffer;function c(e){var t;"object"!=typeof e||f.isBuffer(e)||(t=e.passphrase,e=e.key),"string"==typeof e&&(e=f.from(e));var n,c,h=a(e,t),l=h.tag,d=h.data;switch(l){case"CERTIFICATE":c=r.certificate.decode(d,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(c||(c=r.PublicKey.decode(d,"der")),n=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPublicKey.decode(c.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return c.subjectPrivateKey=c.subjectPublicKey,{type:"ec",data:c};case"1.2.840.10040.4.1":return c.algorithm.params.pub_key=r.DSAparam.decode(c.subjectPublicKey.data,"der"),{type:"dsa",data:c.algorithm.params};default:throw new Error("unknown key id "+n)}throw new Error("unknown key type "+l);case"ENCRYPTED PRIVATE KEY":d=function(e,t){var n=e.algorithm.decrypt.kde.kdeparams.salt,r=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),a=i[e.algorithm.decrypt.cipher.algo.join(".")],c=e.algorithm.decrypt.cipher.iv,h=e.subjectPrivateKey,l=parseInt(a.split("-")[1],10)/8,d=s.pbkdf2Sync(t,n,r,l,"sha1"),u=o.createDecipheriv(a,d,c),p=[];return p.push(u.update(h)),p.push(u.final()),f.concat(p)}(d=r.EncryptedPrivateKey.decode(d,"der"),t);case"PRIVATE KEY":switch(n=(c=r.PrivateKey.decode(d,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPrivateKey.decode(c.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:c.algorithm.curve,privateKey:r.ECPrivateKey.decode(c.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return c.algorithm.params.priv_key=r.DSAparam.decode(c.subjectPrivateKey,"der"),{type:"dsa",params:c.algorithm.params};default:throw new Error("unknown key id "+n)}throw new Error("unknown key type "+l);case"RSA PUBLIC KEY":return r.RSAPublicKey.decode(d,"der");case"RSA PRIVATE KEY":return r.RSAPrivateKey.decode(d,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:r.DSAPrivateKey.decode(d,"der")};case"EC PRIVATE KEY":return{curve:(d=r.ECPrivateKey.decode(d,"der")).parameters.value,privateKey:d.privateKey};default:throw new Error("unknown key type "+l)}}e.exports=c,c.signature=r.signature},function(e,t,n){"use strict";const r=n(22);e.exports={turn_dir:(e,t)=>(e&=15,t=(t%360+360)%360,[[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],[0,5,10,15,6,4,2,15,9,1,8,15,15,15,15,15],[0,4,8,12,2,6,10,14,1,5,9,13,3,7,11,15],[0,6,9,15,10,2,8,15,5,4,1,15,15,15,15,15],[0,2,1,3,8,10,9,11,4,6,5,7,12,14,13,15],[0,10,5,15,9,8,1,15,6,2,4,15,15,15,15,15],[0,8,4,12,1,9,5,13,2,10,6,14,3,11,7,15],[0,9,6,15,5,1,4,15,10,8,2,15,15,15,15,15]][2*Math.floor(t/90)+(t%90==0?0:1)][e]),dir_dx(e){var t=0;return 4&e&&t++,8&e&&t--,t},dir_dy(e){var t=0;return 1&e&&t++,2&e&&t--,t},dir_to(e,t){let n=0;return t>0&&(n|=1),t<0&&(n|=2),e>0&&(n|=4),e<0&&(n|=8),n},is_dir_cardinal:e=>1==e||2==e||4==e||8==e,draw_box(e,t,n,i){if(n.dmm!=i.dmm)throw new Error("DMMs dont match");let a=n.dmm,o=a.get_tile(Math.min(n.x,i.x),Math.min(n.y,i.y),Math.min(n.z,i.z)),s=a.get_tile(Math.max(n.x,i.x),Math.max(n.y,i.y),Math.max(n.z,i.z));if(o.z==s.z)if(o==s)e.push(new r(t[15],o.x,o.y,o.z));else if(o.x==s.x){e.push(new r(t[14],o.x,o.y,o.z)),e.push(new r(t[13],s.x,s.y,o.z));for(let n=o.y+1;n<=s.y-1;n++)e.push(new r(t[12],o.x,n,o.z))}else if(o.y==s.y){e.push(new r(t[11],o.x,o.y,o.z)),e.push(new r(t[7],s.x,s.y,s.z));for(let n=o.x+1;n<=s.x-1;n++)e.push(new r(t[3],n,o.y,o.z))}else{e.push(new r(t[10],o.x,o.y,o.z)),e.push(new r(t[5],s.x,s.y,o.z)),e.push(new r(t[9],o.x,s.y,o.z)),e.push(new r(t[6],s.x,o.y,o.z));for(let n=o.x+1;n<=s.x-1;n++)e.push(new r(t[2],n,o.y,o.z)),e.push(new r(t[1],n,s.y,o.z));for(let n=o.y+1;n<=s.y-1;n++)e.push(new r(t[8],o.x,n,o.z)),e.push(new r(t[4],s.x,n,o.z))}else for(let n=o.z;n<=s.z;n++)this.draw_box(e,t,a.get_tile(o.x,o.y,n),a.get_tile(s.x,s.y,n))},shuffle(e){for(let t=0;t<e.length;t++){let n=Math.floor(Math.random()*(e.length-t))+t;if(t==n)continue;let r=e[t];e[t]=e[n],e[n]=r}return e}}},function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)i(n,r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){var t,n,r,i,a,o;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)a=e[t],o.set(a,i),i+=a.length;return o}},o={arraySet:function(e,t,n,r,i){for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(r)},function(e,t,n){"use strict";let r=0;e.exports=class{constructor(e,t,n,...i){this.editor=e,this.type=n,this.dmm=t.dmm,this.mousedown(t,...i),this.last_change_index=++r}mousedown(e){}mousemove(e){}mousemove_pixel(e,t){}mouseup(){}visualize(e){}mark_dirty(){this.last_change_index=++r}get_status_text(){}}},function(e,t,n){"use strict";e.exports=function(e,t,{point:n=null,autoremove:r=!0}={}){let i;i=n?{x:n[0],y:n[1],width:0,height:0,left:n[0],right:n[0],top:n[1],bottom:n[1]}:e.getBoundingClientRect();let[a,o]=[document.documentElement.clientWidth,document.documentElement.clientHeight];t.style.position="fixed",t.style.visibility="hidden",e.appendChild(t);let s=t.getBoundingClientRect(),f=!1,c=!1,h=e.classList.contains("dropdown-item");(h?i.right:i.left)+s.width+16>=a-10&&(f=!0),(h?i.top:i.bottom)+s.height>=o-10&&(h?i.top:i.bottom)>=a/2&&(c=!0);let l=h&&!f?i.right:i.left,d=h||c?i.top:i.bottom;f?(t.style.right=a-l+"px",t.style.maxWidth=l-10+"px"):(t.style.left=l+"px",t.style.maxWidth=a-l-10+"px"),c?(t.style.bottom=o-d+"px",t.style.maxHeight=d-10+"px"):(t.style.top=d+"px",t.style.maxHeight=o-d-10+"px"),!h&&i.width&&(t.style.minWidth=i.width+"px"),r&&(t.tabIndex=-1,t.dataset.hasDropdownFocusoutListener||(t.dataset.hasDropdownFocusoutListener=!0,t.addEventListener("focusout",()=>{setTimeout(()=>{t!=document.activeElement&&!t.contains(document.activeElement)&&e.contains(t)&&e.removeChild(t)},0)}))),t.style.visibility="",r&&t.focus()}},function(e,t,n){const r=n(12);e.exports=class extends r{constructor(e,t="Loading...",n=!0){super(e,{title:t,width:600,height:100,modal:n,can_close:!1}),this.header_obj.classList.add("center"),this.content_obj.classList.add("center"),this.content_obj.innerHTML="\n\t\t<div class='bar'><div class='bar-fill progress-fill'></div></div>\n\t\t<div class='progress-text'></div>\n        "}set_progress(e,t){null!=t&&(this.$(".progress-text").textContent=t),this.$(".progress-fill").style.width=100*e+"%"}}},function(e,t,n){"use strict";const r=n(67),i=n(66),{WordToken:a,CommentToken:o,SymbolToken:s,NumberToken:f,StringToken:c,NewlineToken:h,RawToken:l,IncludeToken:d}=n(44),{UnaryPrefixNode:u,UnaryPostfixNode:p,BinaryOpNode:b,TernaryOpNode:m,ConstantNode:_,StringNode:g,VarAccessNode:v,PathNode:y,FileNode:w,ListAccessNode:x,ProcCallNode:E,NewNode:k}=n(68),{ByondList:S,ByondNewlist:M,ByondTypepath:A,ByondFile:I,ByondNew:T}=n(13),R=n(133),z=n(16);let C={"**":13,"*":12,"/":12,"%":12,"+":11,"-":11,"<":10,"<=":10,">":10,">=":10,"<<":9,">>":9,"==":8,"!=":8,"<>":8,"~=":8,"~!":8,"&":7,"^":6,"|":5,"&&":4,"||":3,"?":2,"=":1,"+=":1,"-=":1,"*=":1,"/=":1,"%=":1,"&=":1,"|=":1,"^=":1,"<<=":1,">>=":1},L=["=","+=","-=","*=","/=","%=","&=","|=","^=","<<=",">>=","?"];class B{constructor(e){this.reader=e,this.file_cache=new Map,this.defines=new Map,this.stddef_loaded=!1,this.types=new Map}async read_file(e){if(this.file_cache.has(e))return await this.file_cache.get(e);let t=this.reader(e);this.file_cache.set(e,t);let n=await t;return this.file_cache.set(e,n),n}async parse_file(e,t){this.stddef_loaded||(this.stddef_loaded=!0,this.parse_type_block(new j(await this.preprocess(r("stddef.dm",n(134)),"stddef.dm"))));let i=r(e,await this.read_file(e));console.log("Preprocessing...");try{let n=t&&((e,n)=>{t(.95*e,n?"Loading "+n:null)});i=await this.preprocess(i,e,!1,n)}catch(e){throw console.error(i),e}t&&t(.95,"Parsing..."),await new Promise(e=>{setTimeout(e,1)}),console.log("Parsing...");try{console.log(this.parse_type_block(new j(i)))}catch(e){throw console.error(i),e}t&&t(.98,"Finalizing..."),await new Promise(e=>{setTimeout(e,1)}),this.finalize_objects()}very_aggressive_preloading(e,t){let n=t.split("\n");for(let t of n)if(t.startsWith("#include")){let n=t.indexOf('"'),r=t.indexOf('"',n+1),a=t.substring(n+1,r),o=i.join(i.dirname(e),a);[".dm",".dme"].includes(i.extname(o))&&this.read_file(o).then(this.very_aggressive_preloading.bind(this,o),()=>{})}}async preprocess(e,t,n=!1,l){let u=0,p=0;for(let n=0;n<e.length;n++){if(!(e[n]instanceof h)&&n>0)continue;if(e[n]instanceof h&&n++,!(e[n]instanceof s&&"#"==e[n].value))continue;if(n++,!(e[n]instanceof a&&"include"==e[n].value))continue;if(n++,!(e[n]instanceof c))continue;let r=i.join(i.dirname(t),e[n].value[0].replace(/\\/g,"/"));".dm"==i.extname(r)&&(this.read_file(r).then(this.very_aggressive_preloading.bind(this,r),()=>{}),u++)}let b=[],m=[];for(let _=0;_<e.length;_++){let g=!1;for(let e of m)e<=0&&(g=!0);if(!g&&e[_]instanceof c){let n=new c(e[_],[...e[_].value],e[_].whitespace_flag,e[_].multiline,e[_].uses_text_macros,e[_].is_file);for(let e=0;e<n.value.length;e++)n.value[e]instanceof Array&&(n.value[e]=await this.preprocess(n.value[e],t));b.push(n)}else{if(!g&&e[_]instanceof a){let r=e[_],i=r.value,h=this.defines.get(i);if(h&&(!h.arguments||e[_+1]instanceof s&&"("==e[_+1].value)){let n=[];if(h.arguments){if(_++,!(e[_]instanceof s&&"("==e[_].value))throw new Error("Expected ( at "+e[_].format_pos()+", got "+e[_]+" instead");_++;let t=[],r=0;for(;e[_]&&!(e[_]instanceof s&&")"==e[_].value&&0==r);){if(e[_]instanceof s)if("("==e[_].value)r++;else if(")"==e[_].value)r--;else if(0==r&&","==e[_].value&&(!h.variadic||h.arguments.length>n.length+1)){n.push(t),t=[],_++;continue}e[_]instanceof o||t.push(e[_]),_++}n.push(t)}for(;h.arguments&&n.length<h.arguments.length;)n.push([]);let i=[];for(let e=0;e<h.value.length;e++){let t=h.value[e];if(h.arguments&&t instanceof a){let e=h.arguments.indexOf(t.value);if(-1!=e&&e<n.length){for(let t of n[e])i.push(t);continue}}else if(h.arguments&&t instanceof s&&"#"==t.value&&e+1<h.value.length){let t=h.arguments.indexOf(h.value[e+1].value);if(-1!=t&&t<n.length){let r="";for(let e of n[t])r+=e.raw();e++,i.push(new c(n[t][0],r));continue}}i.push(t.copy(r))}i=await this.preprocess(i,t),i=this.token_paste(i);for(let e of i)b.push(e);continue}if(n&&"defined"==i){if(_++,!(e[_]instanceof s&&"("==e[_].value))throw new Error("Expected ( at "+e[_].format_pos()+", got "+e[_]+" instead");let t;if(_++,!(e[_]instanceof a))throw new Error("Expected WordToken at "+e[_].format_pos()+", got "+e[_]+" instead");if(t=e[_].value,b.push(new f(e[_],+!!this.defines.get(t))),_++,!(e[_]instanceof s&&")"==e[_].value))throw new Error("Expected ) at "+e[_].format_pos()+", got "+e[_]+" instead");continue}}if(e[_]instanceof s&&"#"==e[_].value){let n=e[_];if(_++,!(e[_]instanceof a))throw new Error(`Unexpected ${e[_]} at ${e[_].format_pos()}`);let f=e[_].value;if(_++,"endif"==f)m.length--;else if("else"==f)m[m.length-1]>0?m[m.length-1]=-1:0==m[m.length-1]&&(m[m.length-1]=1);else if(g&&["ifndef","ifdef","if"].includes(f))m.push(-1);else if("ifndef"==f){if(!(e[_]instanceof a))throw new Error(`Unexpected ${e[_]} at ${e[_].format_pos()}`);m.push(this.defines.has(e[_].value)?0:1),_++}else if("ifdef"==f){if(!(e[_]instanceof a))throw new Error(`Unexpected ${e[_]} at ${e[_].format_pos()}`);m.push(this.defines.has(e[_].value)?1:0),_++}else if("if"==f){let n=[];for(;e[_]&&!(e[_]instanceof h);)n.push(e[_]),_++;n=await this.preprocess(n,t,!0);try{m.push(+!!B.parse_expression(new j(n)).evaluate_constant())}catch(t){throw console.error(`At ${(e[_]||e[_-1]).format_pos()}:`),t}}else if("elif"==f){let n=[];for(;e[_]&&!(e[_]instanceof h);)n.push(e[_]),_++;if(0==m[m.length-1]){n=await this.preprocess(n,t,!0);try{m[m.length-1]=B.parse_expression(new j(n)).evaluate_constant()?1:0}catch(t){throw console.error(`At ${(e[_]||e[_-1]).format_pos()}:`),t}}else m[m.length-1]=-1}if(g||"include"!=f)if(g||"undef"!=f)if(g||"define"!=f){if(!g&&"error"==f){let t=e[_];throw new Error(t.format_pos()+" "+t.value)}if(!g&&"warn"==f){let t=e[_];console.warn(t.format_pos()+" "+t.value),_++}}else{if(!(e[_]instanceof a))throw new Error(`Unexpected ${e[_]} at ${e[_].format_pos()}`);let t=new O(e[_].value);if(_++,e[_]instanceof s&&"("==e[_].value&&!e[_].whitespace_flag){for(t.arguments=[];e[_]&&(!(e[_]instanceof s)||")"!=e[_].value);){if(_++,e[_]instanceof s&&"..."==e[_].value)t.arguments.push("__VA_ARGS__");else{if(!(e[_]instanceof a))throw new Error(`Unexpected ${e[_]} at ${e[_].format_pos()}`);t.arguments.push(e[_].value),_++}if(!(e[_]instanceof s)||")"!=e[_].value&&","!=e[_].value&&"..."!=e[_].value)throw new Error(`Unexpected ${e[_]} at ${e[_].format_pos()}`);if("..."==e[_].value){_++,t.variadic=!0;break}}if(!(e[_]instanceof s)||")"!=e[_].value)throw new Error(`Unexpected ${e[_]} at ${e[_].format_pos()}`);_++}for(;e[_]&&!(e[_]instanceof h);)e[_]instanceof o||t.value.push(e[_]),_++;this.defines.set(t.name,t)}else{if(!(e[_]instanceof a))throw new Error(`Unexpected ${e[_]} at ${e[_].format_pos()}`);this.defines.delete(e[_].value),_++}else{if(!(e[_]instanceof c))throw new Error(`Unexpected ${e[_]} at ${e[_].format_pos()}`);let a=i.join(i.dirname(t),e[_].value[0].replace(/\\/g,"/"));if([".dm",".dme"].includes(i.extname(a))){u&&l&&(l(p++/u,a),p%200==0&&await new Promise(e=>{setTimeout(e,1)}));let e=new d(n,await this.preprocess(r(a,await this.read_file(a)),a));e.include_filename=a,b.push(e)}_++}g=!1;for(let e of m)e<=0&&(g=!0)}g||b.push(e[_])}}return b}token_paste(e){let t=[];for(let n=0;n<e.length;n++)if(e[n]instanceof s&&"##"==e[n].value&&(n++,e[n-2]instanceof a&&!e[n-1].whitespace_flag&&(e[n]instanceof a||e[n]instanceof f))){let r=t.length-1;t[r]=new a(e[n-2],""+e[n-2].value,e[n-2].whitespace_flag),t[r].value+=e[n].value}else t.push(e[n]);return t}stringify_tokens(e){let t="";for(let n=0;n<e.length;n++){let r=e[n];if(r instanceof a||r instanceof s)!r.whitespace_flag||e[n-1]instanceof h||(t+=" "),t+=r.value;else if(r instanceof o||r instanceof f)t+=r.value;else if(r instanceof h)t+="\n",t+=r.value;else if(r instanceof c)for(let e of r.value)t+="string"==typeof e?JSON.stringify(e):this.stringify_tokens(e)}return t}parse_type_block(e,t="",n=[]){let r=!1,i=e.get_next();for(i instanceof s&&"{"==i.value&&(r=!0,e.advance(),i=e.get_next());i&&(r||e.indentation.includes(t));){if(r&&i instanceof s&&"}"==i.value){e.advance();break}if(i instanceof h)for(;i instanceof h;)e.advance(),i=e.get_next();else if(i instanceof s&&"/"==i.value||i instanceof a){let r=i instanceof s&&"/"==i.value?[]:[...n],o=!1;for(;i instanceof s&&"/"==i.value||i instanceof a&&!["as","in"].includes(i.value);){if(i instanceof a){if("FASTDMM_PROP"==i.value){o=!0;break}r.push(i.value)}e.advance(),i=e.get_next()}if(o){let t=this.handle_type_tree_info(r),n=i,a=B.parse_expression(e);if(i=e.get_next(),!(a instanceof E))throw new Error("FASTDMM_PROP must be a proc call at "+n.format_pos());for(t.handle_fastdmm_macro(a);i instanceof h||i instanceof s&&";"==i.value;)e.advance(),i=e.get_next();continue}if("operator"==r[r.length-1])for(;i instanceof s&&"("!=i.value&&!i.whitespace_flag;)r[r.length-1]+=i.value,e.advance(),i=e.get_next();let f=null,c=null,l=null,d=null;for(;i instanceof s&&"["==i.value;)if(e.advance(),i=e.get_next(),i instanceof s&&"]"==i.value)e.advance(),i=e.get_next();else{let t=B.parse_expression(e);if(f=new E({value:"list"},[t]),i=e.get_next(),!(i instanceof s&&"]"==i.value))throw new Error(`Expected "]", got ${i} instead at ${i.format_pos()}`);e.advance(),i=e.get_next()}if(i instanceof s&&"="==i.value)e.advance(),f=B.parse_expression(e),i=e.get_next();else if(i instanceof s&&"("==i.value){for(c=[],l=[],d=[],e.advance(),i=e.get_next();i&&!(i instanceof s&&")"==i.value);){if(e.skip_newlines(),i=e.get_next(),0!=c.length){if(!(i instanceof s&&","==i.value))throw new Error(`Expected ",", got ${i} instead at ${i.format_pos()}`);e.advance(),i=e.get_next()}let t;e.skip_newlines(),i=e.get_next();let n,r=[];if(i instanceof s&&"..."==i.value)e.advance(),i=e.get_next(),t="...";else{for(;i instanceof a&&!["as","in"].includes(i.value)||i instanceof s&&("/"==i.value||"."==i.value);)i instanceof a&&"var"!=i.value&&(t&&r.push(t),t=i.value),e.advance(),i=e.get_next();for(;i instanceof s&&"["==i.value;){if(e.advance(),i=e.get_next(),!(i instanceof s&&"]"==i.value))throw new Error(`Expected "]", got ${i} instead at ${i.format_pos()}`);e.advance(),i=e.get_next()}if(i instanceof s&&"="==i.value&&(e.advance(),n=B.parse_expression(e),i=e.get_next()),i instanceof a&&["as","in"].includes(i.value)){let t=0;for(;i&&!(i instanceof s&&(","==i.value||")"==i.value)&&t<=0);)i instanceof s&&("("==i.value?t++:")"==i.value&&t--),e.advance(),i=e.get_next()}}c.push(t),l.push(r),d.push(n),e.skip_newlines(),i=e.get_next()}e.advance(),i=e.get_next()}if(i instanceof a&&["as","in"].includes(i.value))for(;i&&(!(i instanceof s)||"{"!=i.value&&";"!=i.value)&&!(i instanceof h);)e.advance(),i=e.get_next();if(i&&null==c&&(!(i instanceof s)||"{"!=i.value&&";"!=i.value&&"}"!=i.value)&&!(i instanceof h))throw new Error(`Unexpected ${i} at ${i.format_pos()}`);for(;i instanceof h||i instanceof s&&";"==i.value;)e.advance(),i=e.get_next();if(null!=c||f||!i||i instanceof s&&";"==i.value||!(e.indentation.includes(t)&&e.indentation.length>t.length||i instanceof s&&"{"==i.value))if(null!=c)if(this.handle_type_tree_info(r,null,!0),i instanceof s&&";"==i.value)e.advance(),i=e.get_next();else if(i instanceof s&&"{"==i.value){e.advance(),i=e.get_next();let t=1;for(;t>0&&i;)i instanceof s&&("{"==i.value?t++:"}"==i.value&&t--),e.advance(),i=e.get_next()}else if(e.get_current()instanceof h){if(e.indentation.length>t.length){let t=e.indentation,n=0;for(;i&&(e.indentation.startsWith(t)||n>0||!(e.get_current()instanceof h)||i instanceof h);)i instanceof s&&("{"==i.value||"("==i.value?n++:"}"!=i.value&&")"!=i.value||n--),e.advance(),i=e.get_next()}}else for(;i&&!(i instanceof s&&";"==i.value)&&!(i instanceof h);)e.advance(),i=e.get_next();else this.handle_type_tree_info(r,f);else this.parse_type_block(e,e.indentation,r),i=e.get_next()}else if(i instanceof d)this.parse_type_block(new j(i.value)),e.advance(),i=e.get_next();else{if(!(i instanceof s&&";"==i.value))throw new Error(`Unexpected ${i} at ${i?i.format_pos():e.get_current().format_pos()}`);e.advance(),i=e.get_next()}}}static parse_expression(e){return B.parse_expression_operators(e,B.parse_primary(e),0)}static parse_expression_operators(e,t,n){let r=e.get_next();for(;r instanceof s&&C[r.value]>=n;){let n=r;e.advance();let i=null;if("?"==n.value){if(i=B.parse_expression(e),r=e.get_next(),!(r instanceof s&&":"==r.value))throw new Error(`Unexpected ${r} at ${r.format_pos()}`);e.advance(),r=e.get_next()}let a=B.parse_primary(e);for(r=e.get_next();r instanceof s&&(C[r.value]>C[n.value]||L.includes(r.value)&&C[r.value]==C[n.value]);)a=B.parse_expression_operators(e,a,C[r.value]),r=e.get_next();t="?"==n.value?new m(t,i,a):new b(n,t,a)}return t}static parse_primary(e,t=!1){let n,r=e.get_next();if(e.advance(),r instanceof s&&[".","/",":"].includes(r.value)){for(n=new y([r,e.get_next()]),e.advance(),r=e.get_next();r instanceof s&&[".","/",":"].includes(r.value)&&(n.path_tokens.push(r),e.advance(),r=e.get_next(),r instanceof a);)n.path_tokens.push(r),e.advance(),r=e.get_next();if(r instanceof s&&"{"==r.value){for(n.override_properties=new Map,e.advance(),r=e.get_next();r&&!(r instanceof s&&"}"==r.value);){for(;r instanceof h;)e.advance(),r=e.get_next();if(n.override_properties.size){if(!(r instanceof s&&";"==r.value))throw new Error("Expected ; at "+r.format_pos()+", got "+r);for(e.advance(),r=e.get_next();r instanceof h;)e.advance(),r=e.get_next()}if(!(r instanceof s)||";"!=r.value&&"}"!=r.value){if(!(r instanceof a))throw new Error("Expected word at "+r.format_pos()+", got "+r);let t=r.value;if(e.advance(),r=e.get_next(),!(r instanceof s&&"="==r.value))throw new Error("Expected = at "+r.format_pos()+", got "+r);e.advance();let i=B.parse_expression(e);r=e.get_next(),n.override_properties.set(t,i)}for(;r instanceof h;)e.advance(),r=e.get_next()}e.advance(),r=e.get_next()}}else if(r instanceof s&&["~","!","-","++","--"].includes(r.value))n=new u(r,B.parse_primary(e));else if(r instanceof f)n=new _(r);else if(r instanceof s&&"("==r.value){for(;e.get_next()instanceof h;)e.advance(!0);for(n=B.parse_expression(e);(r=e.get_next())instanceof h;)e.advance(!0);if(r=e.get_next(),!(r instanceof s)||")"!=r.value)throw new Error("Expected ) at "+r.format_pos()+", got "+r);e.advance()}else if(r instanceof a&&"new"==r.value){let t=r;r=e.get_next();let i=null;(r instanceof s&&("/"==r.value||"."==r.value||":"==r.value)||r instanceof a)&&(i=B.parse_expression(e),r=e.get_next()),n=r instanceof s&&"("==r.value?this.parse_proccall(e,t,i):new k([],[],i)}else if(r instanceof a){let i=e.get_next();if(!t&&i instanceof s&&"("==i.value){let t="call"==r.value;n=this.parse_proccall(e,r),t&&(n=this.parse_proccall(e,"__call__",n))}else n=new v(r)}else{if(!(r instanceof c))throw new Error("Unexpected "+r+" at "+r.format_pos());if(r.is_file)n=new w(r);else{let e=[];for(let t of r.value)t instanceof Array?e.push(B.parse_expression(new j(t))):e.push(t);n=new g(e)}}for(r=e.get_next();r instanceof s&&(!r.whitespace_flag||["--","++","["].includes(r.value))&&["--","++","[",".",":","?.","?:"].includes(r.value);){if(e.advance(),"--"==r.value||"++"==r.value)n=new p(r,n);else if("["==r.value){let t=B.parse_expression(e);if(r=e.get_next(),!(r instanceof s)||"]"!=r.value)throw new Error("Expected ] at "+r.format_pos()+", got "+r);e.advance(),n=new x(n,t)}else{let i=e.get_next();e.advance();let a=e.get_next();n=!t&&a instanceof s&&"("==a.value?this.parse_proccall(e,i,n,r):new v(i,n,r)}r=e.get_next()}return n}static parse_proccall(e,t,n,r){e.advance();let i=[],o=[];for(;e.get_next(!0)instanceof h;)e.advance(!0);let f=e.get_next(!1),l=!1;for(;f&&!(f instanceof s&&")"==f.value);)if(f instanceof s&&","==f.value){for(l&&(i.push(void 0),o.push(void 0)),l=!0,e.advance(!1);e.get_next(!0)instanceof h;)e.advance(!0);f=e.get_next(!1)}else{if(0!=i.length&&!l)throw new Error("Expected , or ) at "+f.format_pos());{l=!1;let t=e.clone();t.advance(!1);let n=t.get_next();(f instanceof a||f instanceof c)&&n instanceof s&&"="==n.value?(o.push(f instanceof c?f.value[0]:f.value),e.advance(!1),e.advance(!0)):o.push(void 0),i.push(B.parse_expression(e)),f=e.get_next(!1)}}if(!(f instanceof s&&")"==f.value))throw new Error("Expected ) at "+(f||e.get_current()).format_pos());return e.advance(!1),"new"==t.value?new k(i,o,n):new E(t,i,o,n,r)}finalize_objects(){console.log("Evaluating expressions...");for(let e of this.types.values())for(let t of e.vars.keys())e.eval_var(this,t);console.log("Finalizing parent types...");for(let e of this.types.values())this.finalize_parent_type(e);for(let e of this.types.values())e.subtypes.sort()}finalize_parent_type(e){if(!e.parent){let t=e.get_var("parent_type");if(t instanceof A)this.types.has(t.path)||this.finalize_parent_type(this.get_or_create_type(t.path)),e.parent=this.types.get(t.path),e.parent.subtypes.push(e);else if(null!=t)throw new Error(`Parent type ${z(t)} is not null or typepath`)}}handle_type_tree_info(e,t,n=!1){let r=e.length,i=null;e.includes("var")||t?(i=e[r-1],r--):n&&r--;let a=[],o=[],s=new R.VarMeta,f=!1;for(let t=0;t<r;t++)if(!e[t]||"global"!=e[t]&&"static"!=e[t])if("tmp"!=e[t])if("var"!=e[t])if(f)o.push(e[t]);else{if("proc"==e[t]||"verb"==e[t])break;a.push(e[t])}else f=!0;else s.is_tmp=!0;else s.is_global=!0;s.type="/"+o.join("/");let c=this.get_or_create_type("/"+a.join("/"));return f&&c.set_var_meta(i,s),i&&c.set_var(i,t),c}get_or_create_type(e){if(this.types.has(e))return this.types.get(e);let t=new R(e),n=/^([\/a-z_0-9]+)(?:\/[a-z_0-9]+)$/i.exec(e);return n=n?n[1]:"/datum","/datum"!=e&&"/"!=e&&"/world"!=e&&t.set_var("parent_type",new A(n)),this.types.set(e,t),t}async eval_text(e){return B.parse_expression(new j(await this.preprocess(r("anon",e)))).evaluate_constant(this)}static eval_text(e){return B.parse_expression(new j(r("anon",e))).evaluate_constant()}}class j{constructor(e,t=0,n=""){this.tokens=e,this.index=t,this.indentation=n}get_current(){return this.tokens[this.index-1]}get_next(e=!0,t=!1){for(let n=this.index;n<this.tokens.length;n++){let r=this.tokens[n];if((!(r instanceof h)||e)&&(!(r instanceof o)||t))return r}}advance(e=!0,t=!1){let n=[];for(let r=this.index;r<this.tokens.length;r++){let i=this.tokens[r];if(i instanceof h&&(this.indentation=i.value),!(i instanceof h&&!e||i instanceof o&&!t))return this.index=r+1,n;n.push(i)}}skip_newlines(e=!0){let t=this.get_next();for(;t instanceof h||e&&t instanceof s&&";"==t.value;)this.advance(),t=this.get_next()}clone(){return new j(this.tokens,this.index,this.indentation)}}B.TokenPointer=j;class O{constructor(e){this.name=e,this.value=[],this.arguments=null,this.variadic=!1}}e.exports=B},function(e,t){class n{constructor(e,t,n=!1){this.file=e.filename||e.file,this.line=e.row||e.line,this.column=e.col||e.column,this.value=t,this.whitespace_flag=n}format_pos(){return`(${this.file}:${this.line}:${this.column})`}toString(){return this.constructor.name+" ("+this.value+")"}raw(){return""+this.value}copy(e=this){let t=Object.assign(new this.constructor(e,this.value,this.whitespace_flag),this);return t.file=e.filename||e.file,t.line=e.row||e.line,t.column=e.col||e.column,t}}e.exports={WordToken:class extends n{},CommentToken:class extends n{},SymbolToken:class extends n{},NumberToken:class extends n{},StringToken:class extends n{constructor(e,t,n=!1,r=!1,i=!1,a=!1){super(e,t,n),this.multiline=r,this.uses_text_macros=i,this.is_file=a}},NewlineToken:class extends n{},IncludeToken:class extends n{},RawToken:class extends n{}}},function(e,t,n){"use strict";class r{constructor(e,t,n,r,i,a){this.a=e,this.b=t,this.c=n,this.d=r,this.e=i,this.f=a,Object.freeze(this)}multiply(e){let t=this.a,n=this.b,i=this.c,a=this.d,o=this.e,s=this.f;if(e instanceof Array)return[e[0]*t+e[1]*i+o,e[0]*n+e[1]*a+s];let f=e.a,c=e.b,h=e.c,l=e.d,d=e.e,u=e.f;return new r(t*f+c*i,f*n+c*a,t*h+i*l,n*h+a*l,o+t*d+i*u,n*d+s+a*u)}multiply_x(e,t){return this.a*e+this.c*t+this.e}multiply_y(e,t){return this.b*e+this.d*t+this.f}inverse(){let e=this.a,t=this.b,n=this.c,i=this.d,a=this.e,o=this.f;return new r(i/(e*i-t*n),t/(t*n-e*i),n/(t*n-e*i),e/(e*i-t*n),(i*a-n*o)/(t*n-e*i),(t*a-e*o)/(e*i-t*n))}translate(e=0,t){return new r(this.a,this.b,this.c,this.d,this.e+this.a*e+this.c*t,this.f+this.b*e+this.d*t)}rotate(e,t=0,n=0){let i=Math.cos(e),a=Math.sin(e);return this.translate(t,n).multiply(new r(i,a,-a,i,0,0)).translate(-t,-n)}scale(e,t,n=0,i=0){return null==t&&(t=e),this.translate(n,i).multiply(new r(e,0,0,t,0,0)).translate(-n,-i)}equals(e){return e.a==this.a&&e.b==this.b&&e.c==this.c&&e.d==this.d&&e.e==this.e&&e.f==this.f}}r.identity=new r(1,0,0,1,0,0),e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(70),a=n(1).Buffer,o=new Array(16);function s(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function f(e,t){return e<<t|e>>>32-t}function c(e,t,n,r,i,a,o){return f(e+(t&n|~t&r)+i+a|0,o)+t|0}function h(e,t,n,r,i,a,o){return f(e+(t&r|n&~r)+i+a|0,o)+t|0}function l(e,t,n,r,i,a,o){return f(e+(t^n^r)+i+a|0,o)+t|0}function d(e,t,n,r,i,a,o){return f(e+(n^(t|~r))+i+a|0,o)+t|0}r(s,i),s.prototype._update=function(){for(var e=o,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var n=this._a,r=this._b,i=this._c,a=this._d;n=c(n,r,i,a,e[0],3614090360,7),a=c(a,n,r,i,e[1],3905402710,12),i=c(i,a,n,r,e[2],606105819,17),r=c(r,i,a,n,e[3],3250441966,22),n=c(n,r,i,a,e[4],4118548399,7),a=c(a,n,r,i,e[5],1200080426,12),i=c(i,a,n,r,e[6],2821735955,17),r=c(r,i,a,n,e[7],4249261313,22),n=c(n,r,i,a,e[8],1770035416,7),a=c(a,n,r,i,e[9],2336552879,12),i=c(i,a,n,r,e[10],4294925233,17),r=c(r,i,a,n,e[11],2304563134,22),n=c(n,r,i,a,e[12],1804603682,7),a=c(a,n,r,i,e[13],4254626195,12),i=c(i,a,n,r,e[14],2792965006,17),n=h(n,r=c(r,i,a,n,e[15],1236535329,22),i,a,e[1],4129170786,5),a=h(a,n,r,i,e[6],3225465664,9),i=h(i,a,n,r,e[11],643717713,14),r=h(r,i,a,n,e[0],3921069994,20),n=h(n,r,i,a,e[5],3593408605,5),a=h(a,n,r,i,e[10],38016083,9),i=h(i,a,n,r,e[15],3634488961,14),r=h(r,i,a,n,e[4],3889429448,20),n=h(n,r,i,a,e[9],568446438,5),a=h(a,n,r,i,e[14],3275163606,9),i=h(i,a,n,r,e[3],4107603335,14),r=h(r,i,a,n,e[8],1163531501,20),n=h(n,r,i,a,e[13],2850285829,5),a=h(a,n,r,i,e[2],4243563512,9),i=h(i,a,n,r,e[7],1735328473,14),n=l(n,r=h(r,i,a,n,e[12],2368359562,20),i,a,e[5],4294588738,4),a=l(a,n,r,i,e[8],2272392833,11),i=l(i,a,n,r,e[11],1839030562,16),r=l(r,i,a,n,e[14],4259657740,23),n=l(n,r,i,a,e[1],2763975236,4),a=l(a,n,r,i,e[4],1272893353,11),i=l(i,a,n,r,e[7],4139469664,16),r=l(r,i,a,n,e[10],3200236656,23),n=l(n,r,i,a,e[13],681279174,4),a=l(a,n,r,i,e[0],3936430074,11),i=l(i,a,n,r,e[3],3572445317,16),r=l(r,i,a,n,e[6],76029189,23),n=l(n,r,i,a,e[9],3654602809,4),a=l(a,n,r,i,e[12],3873151461,11),i=l(i,a,n,r,e[15],530742520,16),n=d(n,r=l(r,i,a,n,e[2],3299628645,23),i,a,e[0],4096336452,6),a=d(a,n,r,i,e[7],1126891415,10),i=d(i,a,n,r,e[14],2878612391,15),r=d(r,i,a,n,e[5],4237533241,21),n=d(n,r,i,a,e[12],1700485571,6),a=d(a,n,r,i,e[3],2399980690,10),i=d(i,a,n,r,e[10],4293915773,15),r=d(r,i,a,n,e[1],2240044497,21),n=d(n,r,i,a,e[8],1873313359,6),a=d(a,n,r,i,e[15],4264355552,10),i=d(i,a,n,r,e[6],2734768916,15),r=d(r,i,a,n,e[13],1309151649,21),n=d(n,r,i,a,e[4],4149444226,6),a=d(a,n,r,i,e[11],3174756917,10),i=d(i,a,n,r,e[2],718787259,15),r=d(r,i,a,n,e[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+r|0,this._c=this._c+i|0,this._d=this._d+a|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=a.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},e.exports=s},function(e,t,n){(t=e.exports=n(71)).Stream=t,t.Readable=t,t.Writable=n(49),t.Duplex=n(17),t.Transform=n(74),t.PassThrough=n(147)},function(e,t,n){var r=n(2),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(a(r,t),t.Buffer=o),a(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){"use strict";(function(t,r,i){var a=n(33);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=g;var s,f=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:a.nextTick;g.WritableState=_;var c=Object.create(n(25));c.inherits=n(0);var h={deprecate:n(146)},l=n(72),d=n(48).Buffer,u=i.Uint8Array||function(){};var p,b=n(73);function m(){}function _(e,t){s=s||n(17),e=e||{};var r=t instanceof s;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,c=e.writableHighWaterMark,h=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(c||0===c)?c:h,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===e.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(a.nextTick(i,r),a.nextTick(k,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),k(e,t))}(e,n,r,t,i);else{var o=x(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||w(e,n),r?f(y,e,n,o,i):y(e,n,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function g(e){if(s=s||n(17),!(p.call(g,this)||this instanceof s))return new g(e);this._writableState=new _(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),l.call(this)}function v(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function y(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),k(e,t)}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,f=!0;n;)i[s]=n,n.isBuf||(f=!1),n=n.next,s+=1;i.allBuffers=f,v(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,h=n.encoding,l=n.callback;if(v(e,t,!1,t.objectMode?1:c.length,c,h,l),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function x(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function E(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),k(e,t)}))}function k(e,t){var n=x(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,a.nextTick(E,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}c.inherits(g,l),_.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(_.prototype,"buffer",{get:h.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||this===g&&(e&&e._writableState instanceof _)}})):p=function(e){return e instanceof this},g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},g.prototype.write=function(e,t,n){var r,i=this._writableState,o=!1,s=!i.objectMode&&(r=e,d.isBuffer(r)||r instanceof u);return s&&!d.isBuffer(e)&&(e=function(e){return d.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=m),i.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),a.nextTick(t,n)}(this,n):(s||function(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),a.nextTick(r,o),i=!1),i}(this,i,e,n))&&(i.pendingcb++,o=function(e,t,n,r,i,a){if(!n){var o=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=d.from(t,n));return t}(t,r,i);r!==o&&(n=!0,i="buffer",r=o)}var s=t.objectMode?1:r.length;t.length+=s;var f=t.length<t.highWaterMark;f||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else v(e,t,!1,s,r,i,a);return f}(this,i,s,e,t,n)),o},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},g.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),g.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},g.prototype._writev=null,g.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,k(e,t),n&&(t.finished?a.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),g.prototype.destroy=b.destroy,g.prototype._undestroy=b.undestroy,g.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n(5),n(144).setImmediate,n(10))},function(e,t,n){"use strict";var r=n(1).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=f,this.end=c,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=h,this.end=l,t=3;break;default:return this.write=d,void(this.end=u)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function f(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function h(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function l(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function u(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},a.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=o(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=o(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";var r=n(2).Buffer,i=n(0),a=n(70),o=new Array(16),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],h=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],l=[0,1518500249,1859775393,2400959708,2840853838],d=[1352829926,1548603684,1836072691,2053994217,0];function u(){a.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(e,t){return e<<t|e>>>32-t}function b(e,t,n,r,i,a,o,s){return p(e+(t^n^r)+a+o|0,s)+i|0}function m(e,t,n,r,i,a,o,s){return p(e+(t&n|~t&r)+a+o|0,s)+i|0}function _(e,t,n,r,i,a,o,s){return p(e+((t|~n)^r)+a+o|0,s)+i|0}function g(e,t,n,r,i,a,o,s){return p(e+(t&r|n&~r)+a+o|0,s)+i|0}function v(e,t,n,r,i,a,o,s){return p(e+(t^(n|~r))+a+o|0,s)+i|0}i(u,a),u.prototype._update=function(){for(var e=o,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var n=0|this._a,r=0|this._b,i=0|this._c,a=0|this._d,u=0|this._e,y=0|this._a,w=0|this._b,x=0|this._c,E=0|this._d,k=0|this._e,S=0;S<80;S+=1){var M,A;S<16?(M=b(n,r,i,a,u,e[s[S]],l[0],c[S]),A=v(y,w,x,E,k,e[f[S]],d[0],h[S])):S<32?(M=m(n,r,i,a,u,e[s[S]],l[1],c[S]),A=g(y,w,x,E,k,e[f[S]],d[1],h[S])):S<48?(M=_(n,r,i,a,u,e[s[S]],l[2],c[S]),A=_(y,w,x,E,k,e[f[S]],d[2],h[S])):S<64?(M=g(n,r,i,a,u,e[s[S]],l[3],c[S]),A=m(y,w,x,E,k,e[f[S]],d[3],h[S])):(M=v(n,r,i,a,u,e[s[S]],l[4],c[S]),A=b(y,w,x,E,k,e[f[S]],d[4],h[S])),n=u,u=a,a=p(i,10),i=r,r=M,y=k,k=E,E=p(x,10),x=w,w=A}var I=this._b+i+E|0;this._b=this._c+a+k|0,this._c=this._d+u+y|0,this._d=this._e+n+w|0,this._e=this._a+r+x|0,this._a=I},u.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=r.alloc?r.alloc(20):new r(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},e.exports=u},function(e,t,n){(t=e.exports=function(e){e=e.toLowerCase();var n=t[e];if(!n)throw new Error(e+" is not supported (we accept pull requests)");return new n}).sha=n(152),t.sha1=n(153),t.sha224=n(154),t.sha256=n(75),t.sha384=n(155),t.sha512=n(76)},function(e,t,n){"use strict";var r=n(8);function i(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}e.exports=i,i.prototype._init=function(){},i.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},i.prototype._buffer=function(e,t){for(var n=Math.min(this.buffer.length-this.bufferOff,e.length-t),r=0;r<n;r++)this.buffer[this.bufferOff+r]=e[t+r];return this.bufferOff+=n,n},i.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(e){var t=0,n=0,r=(this.bufferOff+e.length)/this.blockSize|0,i=new Array(r*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(i,n)));for(var a=e.length-(e.length-t)%this.blockSize;t<a;t+=this.blockSize)this._update(e,t,i,n),n+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return i},i.prototype._updateDecrypt=function(e){for(var t=0,n=0,r=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,i=new Array(r*this.blockSize);r>0;r--)t+=this._buffer(e,t),n+=this._flushBuffer(i,n);return t+=this._buffer(e,t),i},i.prototype.final=function(e){var t,n;return e&&(t=this.update(e)),n="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(n):n},i.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},i.prototype._unpad=function(e){return e},i.prototype._finalDecrypt=function(){r.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}},function(e,t,n){var r=n(164),i=n(172),a=n(88);t.createCipher=t.Cipher=r.createCipher,t.createCipheriv=t.Cipheriv=r.createCipheriv,t.createDecipher=t.Decipher=i.createDecipher,t.createDecipheriv=t.Decipheriv=i.createDecipheriv,t.listCiphers=t.getCiphers=function(){return Object.keys(a)}},function(e,t,n){var r={ECB:n(165),CBC:n(166),CFB:n(167),CFB8:n(168),CFB1:n(169),OFB:n(170),CTR:n(86),GCM:n(86)},i=n(88);for(var a in i)i[a].module=r[i[a].mode];e.exports=i},function(e,t,n){var r;function i(e){this.rand=e}if(e.exports=function(e){return r||(r=new i(null)),r.generate(e)},e.exports.Rand=i,i.prototype.generate=function(e){return this._rand(e)},i.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var a=n(177);if("function"!=typeof a.randomBytes)throw new Error("Not supported");i.prototype._rand=function(e){return a.randomBytes(e)}}catch(e){}},function(e,t,n){(function(t){var r=n(4),i=n(19);function a(e,n){var i=function(e){var t=o(e);return{blinder:t.toRed(r.mont(e.modulus)).redPow(new r(e.publicExponent)).fromRed(),unblinder:t.invm(e.modulus)}}(n),a=n.modulus.byteLength(),s=(r.mont(n.modulus),new r(e).mul(i.blinder).umod(n.modulus)),f=s.toRed(r.mont(n.prime1)),c=s.toRed(r.mont(n.prime2)),h=n.coefficient,l=n.prime1,d=n.prime2,u=f.redPow(n.exponent1),p=c.redPow(n.exponent2);u=u.fromRed(),p=p.fromRed();var b=u.isub(p).imul(h).umod(l);return b.imul(d),p.iadd(b),new t(p.imul(i.unblinder).umod(n.modulus).toArray(!1,a))}function o(e){for(var t=e.modulus.byteLength(),n=new r(i(t));n.cmp(e.modulus)>=0||!n.umod(e.prime1)||!n.umod(e.prime2);)n=new r(i(t));return n}e.exports=a,a.getr=o}).call(this,n(2).Buffer)},function(e,t,n){"use strict";var r=t;r.version=n(182).version,r.utils=n(9),r.rand=n(56),r.curve=n(94),r.curves=n(59),r.ec=n(193),r.eddsa=n(197)},function(e,t,n){"use strict";var r,i=t,a=n(60),o=n(94),s=n(9).assert;function f(e){"short"===e.type?this.curve=new o.short(e):"edwards"===e.type?this.curve=new o.edwards(e):this.curve=new o.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(e,t){Object.defineProperty(i,e,{configurable:!0,enumerable:!0,get:function(){var n=new f(t);return Object.defineProperty(i,e,{configurable:!0,enumerable:!0,value:n}),n}})}i.PresetCurve=f,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=n(192)}catch(e){r=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})},function(e,t,n){var r=t;r.utils=n(11),r.common=n(27),r.sha=n(186),r.ripemd=n(190),r.hmac=n(191),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},function(e,t,n){var r=n(225),i=n(20).Stream,a=n(15);function o(e,t){if(!(this instanceof o))return new o(e,t);t=t||{},this._buffer=new r(0),e&&this.write(e),this.writable=!0,this.setEndian(t.endian||"BE"),this._offset=0}a.inherits(o,i),o.interpretEndian=function(e){return e.match(/^(le|little)$/i)?"LE":e.match(/^(be|big)$/i)?"BE":null},o.prototype.setEndian=function(e){var t;if(t=o.interpretEndian(e))return this.endianness=t,this;throw new TypeError(a.format("Unrecognized input: %s. Acceptable inputs are: [LE, little, BE, big]",e))},o.prototype.write=function(e){var t=r.isBuffer(e)?e:r(e.toString()),n=this._buffer,i=t.length+n.length;return this._buffer=r.concat([n,t],i),this.emit("data",e),this},o.prototype.end=function(e){return e&&this.write(e),this.emit("end",e),this},o.prototype.eat=function(e,t){var n,r,i,s,f,c;if(t=t||{},e=e||1,(n=this._offset)>=(c=(f=this._buffer).length))return null;if(r=n,(i=n+e)>=c&&(i=c,this.emit("empty")),s=f.slice(r,i),this._offset=i,0===s.length)return null;if(t.integer){var h,l="readInt",d=this.endianness;if(!~[1,2,4].indexOf(e))throw new RangeError(a.format("Invalid value for amount `%s` when `opts.integer` is true, valid values are [1, 2, 4]",e));if(t.endian)if(!(d=o.interpretEndian(t.endian)))throw new TypeError(a.format("Invalid value for `opts.endian` %s",t.endian));return!1===t.signed&&(l="readUInt"),h=l+8*e,e>1&&(h+=d),s[h](0)}return s},o.prototype.eatInt=function(e,t){return this.eat(e,{integer:!0,signed:!0,endian:t})},o.prototype.eatUInt=function(e,t){return this.eat(e,{integer:!0,signed:!1,endian:t})},o.prototype.eatBool=function(){return!!this.eatUInt(1)},o.prototype.eats=function(e){var t=this.eat(e);return t?t.toString():null},o.prototype.rewind=function(e){return e||(e=this.position()),this._offset-=e,this},o.prototype.position=function(){return this._offset},o.prototype.peak=function(e){var t=this.eat.apply(this,arguments);return this.rewind(e),t},o.prototype.peaks=function(e){var t=this.peak(e);return t?t.toString():null},o.prototype.eatString=function(e){var t,n,r,i,o=a.format("Separator must be a number between [0, 255] or a single character, got %s",e),s=new TypeError(o),f=new RangeError(o);if(t=this._buffer,void 0===e)e=0;else if("string"==typeof e&&1===e.length)e=e.charCodeAt(0);else if(isNaN(e))throw s;if(e<0||e>255)throw f;for(n=this._offset;(i=this.eat())&&i[0]!==e;);return n===(r=this._offset)?null:(r!==t.length&&(r-=1),t.slice(n,r).toString())},o.prototype.eatRemaining=function(e){var t,n,r;if(e=e||{},t=this._buffer,n=this._offset,!e.chunkSize)return r=t.slice(n,t.length),this._offset=t.length,0===r.length?null:r;for(var i=[];r=this.eat(e.chunkSize,e);)i.push(r);return i},o.prototype.eatRest=o.prototype.eatRemaining,o.prototype.getBuffer=function(){return this._buffer},o.prototype.remaining=function(){return this.getBuffer().length-this.position()},e.exports=o},function(e,t,n){"use strict";const{turn_dir:r,is_dir_cardinal:i}=n(38),{Instance:a}=n(7),o=Symbol("PIPE_TYPE_SIMPLE"),s=Symbol("PIPE_TYPE_STRAIGHT"),f=Symbol("PIPE_TYPE_MANIFOLD"),c=Symbol("PIPE_TYPE_MANIFOLD4W"),h=Symbol("PIPE_TYPE_NODE"),l=Symbol("PIPE_TYPE_CABLE"),d=Symbol("PIPE_TYPE_AUTO"),u={PIPE_TYPE_SIMPLE:o,PIPE_TYPE_STRAIGHT:s,PIPE_TYPE_MANIFOLD:f,PIPE_TYPE_MANIFOLD4W:c,PIPE_TYPE_NODE:h,PIPE_TYPE_CABLE:l,PIPE_TYPE_AUTO:d},p={var_overrides:new Map(Object.entries(u))};class b{constructor(e){this.editor=e,this.pipe_groups=new Map,this.pipe_typecache=new Set,this.pipe_type_cache=new WeakMap,this.pipe_group_cache=new WeakMap,this.pipe_group_interference_cache=new WeakMap,this.astar_cost_cache=new WeakMap;for(let[t,n]of e.parser.types){let e=this.get_pipe_group(n),r=this.get_pipe_type(n);if(e){if(!r)throw new Error("Type "+t+" has pipe_group but no pipe_type");let n=this.pipe_groups.get(e);if(n||(n=new Map,this.pipe_groups.set(e,n)),n.has(r))throw new Error(`${n.get(r)} and ${t} both have the same pipe_group (${e}) and pipe_type (${r.toString()})`);n.set(r,t)}r&&this.pipe_typecache.add(t)}}get_astar_cost(e){if(this.astar_cost_cache.has(e))return this.astar_cost_cache.get(e);let t=e.get_fastdmm_prop("pipe_astar_cost",e.make_eval_context(this.editor.parser));return null==t&&(t=e.istype("/turf")?1:0),this.astar_cost_cache.set(e,t),t}get_pipe_type(e){if(this.pipe_type_cache.has(e))return this.pipe_type_cache.get(e);let t=e.get_fastdmm_prop("pipe_type",Object.assign(e.make_eval_context(this.editor.parser),p));return this.pipe_type_cache.set(e,t),t}get_pipe_group(e){if(this.pipe_group_cache.has(e))return this.pipe_group_cache.get(e);let t=e.get_fastdmm_prop("pipe_group",e.make_eval_context(this.editor.parser));return this.pipe_group_cache.set(e,t),t}get_pipe_interference_groups(e){if(this.pipe_group_interference_cache.has(e))return this.pipe_group_interference_cache.get(e);let t,n=e.get_fastdmm_prop("pipe_interference_group",e.make_eval_context(this.editor.parser));return t="string"==typeof n?[n]:n?n.keys:null,this.pipe_group_interference_cache.set(e,t),t}get_pipe_dirs(e){let t=[],n=this.get_pipe_type(e),i=e.get_var("dir");if(0==i&&(i=2),!n)return[];switch(n){case o:12&i&&3&i?(t.push(12&i),t.push(3&i)):(t.push(i),t.push(r(i,180)));break;case s:t.push(i),t.push(r(i,180));break;case f:t.push(r(i,90)),t.push(r(i,-90)),t.push(r(i,180));break;case c:case d:t.push(1,2,4,8);break;case l:let n=e.get_var("icon_state").split("-");t.push(+n[0]),t.push(+n[1])}return t}is_pipe_group_diagonal(e){return!!this.pipe_groups.get(e).has(l)}check_interference_group(e,t){if(!e||!t)return!1;for(let n of e)if(t.includes(n))return!0;return!1}check_pipe_interference(e,t,n,i,a=!1){let o=r(i,180),s=n.get_step(i);if(!s)return!0;for(let r of n){if(!this.pipe_typecache.has(r.type))continue;let n=this.get_pipe_group(r),o=this.get_pipe_interference_groups(r);if(this.get_pipe_dirs(r).includes(i)&&((a||!n||n!=e)&&this.check_interference_group(o,t)))return!0}for(let n of s){if(!this.pipe_typecache.has(n.type))continue;let r=this.get_pipe_group(n),i=this.get_pipe_interference_groups(n);if(this.get_pipe_dirs(n).includes(o)&&((a||!r||r!=e)&&this.check_interference_group(i,t)))return!0}if(3&i&&12&i){let o=n.get_step(r(i,-45)),s=r(i,90),f=n.get_step(r(i,45)),c=r(i,-90);for(let n of o){if(!this.pipe_typecache.has(n.type))continue;let r=this.get_pipe_group(n),i=this.get_pipe_interference_groups(n);if(this.get_pipe_dirs(n).includes(s)&&((a||!r||r!=e)&&this.check_interference_group(i,t)))return!0}for(let n of f){if(!this.pipe_typecache.has(n.type))continue;let r=this.get_pipe_group(n),i=this.get_pipe_interference_groups(n);if(this.get_pipe_dirs(n).includes(c)&&((a||!r||r!=e)&&this.check_interference_group(i,t)))return!0}}return!1}get_group_dirs(e,t){let n=[];for(let r of t){if(!this.pipe_typecache.has(r.type))continue;if(this.get_pipe_group(r)!=e)continue;let t=this.get_pipe_dirs(r);for(let e of t)n.includes(e)||n.push(e)}return n}place_group_instance(e,t,n,r){let o=this.pipe_groups.get(e);for(let i of t){if(!this.pipe_typecache.has(i.type))continue;if(this.get_pipe_group(i)!=e)continue;let t=this.get_pipe_dirs(i);if((!n||t.includes(n))&&(!r||t.includes(r)))return}let s=this.get_group_dirs(e,t);if(o.has(f)&&o.has(c)){if(s.length&&(s.includes(n)&&s.includes(r)||!n||!r)){let h=[...s];n&&!h.includes(n)&&h.push(n),r&&!h.includes(r)&&h.push(r);let l=!0;for(let e of h)i(e)||(l=!1);if(l&&3==h.length){let n=0;for(let e of[1,2,4,8])h.includes(e)||(n=e);if(n){let r=new a(this.editor.parser,o.get(f),2!=n?{dir:n}:void 0);for(let n=0;n<t.contents.length;n++)if(this.get_pipe_group(t.contents[n])==e)return void t.replace_object(n,r)}}else if(l&&4==h.length){let n=new a(this.editor.parser,o.get(c));for(let r=0;r<t.contents.length;r++)if(this.get_pipe_group(t.contents[r])==e)return void t.replace_object(r,n)}}}else if(o.has(l)){let i,a;for(let o of t){if(!this.pipe_typecache.has(o.type))continue;if(this.get_pipe_group(o)!=e)continue;let t=this.get_pipe_dirs(o);i||(i=t[0]);for(let e of t)if(a||e&n||e&r||n&&r||(a=e),e==n||e==r)return;if(t.includes(n)&&t.includes(r))return}a&&(i=a),!i||n&&r||(n?r=i:n=i)}if(!n&&r?n=s[0]:n&&!r&&(r=s[0]),n==r)return;let h=this.make_group_instance(e,n,r);h&&t.place(h)}make_group_instance(e,t,n){let f=this.pipe_groups.get(e);if(t==r(n,180)&&i(t)){if(f.has(s))return new a(this.editor.parser,f.get(s),12&t?{dir:4}:void 0);if(f.has(o))return new a(this.editor.parser,f.get(o),12&t?{dir:4}:void 0)}if(i(t)&&i(n)&&f.has(o))return new a(this.editor.parser,f.get(o),{dir:t|n});if(f.has(l)&&t&&n){let e=Math.min(t,n),r=Math.max(t,n);return new a(this.editor.parser,f.get(l),{icon_state:`${e}-${r}`})}return f.has(d)?new a(this.editor.parser,f.get(d)):void 0}}b.PIPE_TYPE_SIMPLE=o,b.PIPE_TYPE_STRAIGHT=s,b.PIPE_TYPE_MANIFOLD=f,b.PIPE_TYPE_MANIFOLD4W=c,b.PIPE_TYPE_NODE=h,b.PIPE_TYPE_CABLE=l,b.PIPE_TYPE_AUTO=d,e.exports=b},function(e,t,n){"use strict";let r=0;class i{constructor(e){this.editor=e,this.is_pixel=!1,this.last_change_index=++r,this.button_elem=null}get_handler(e,t,n){return null}handle_pixel_mousedown(e,t,n,r){this.is_pixel&&(0==e.button&&e.ctrlKey&&e.shiftKey?this.editor.make_active_object(n):1==e.button&&e.ctrlKey&&e.shiftKey&&(t.delete(n),t.dmm.push_undo()))}update_is_pixel(e){this.is_pixel=!!e&&(e.shiftKey&&e.ctrlKey)}select_tool(e){this.update_is_pixel(e)}unselect_tool(){}visualize(e){}handle_hotkey(){return!1}handle_global_hotkey(){return!1}mark_dirty(){this.last_change_index=++r}}i.fa_icon="fa-question-circle",i.description="Unknown",i.usage="",i.uses_instance_panel=!0,e.exports=i},function(e,t,n){"use strict";t.a=n.p+"fa-solid-900.eot"},function(e,t,n){"use strict";t.a=n.p+"fa-regular-400.eot"},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",i=!1,a=arguments.length-1;a>=-1&&!i;a--){var o=a>=0?arguments[a]:e.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,i="/"===o.charAt(0))}return(i?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!i).join("/"))||"."},t.normalize=function(e){var a=t.isAbsolute(e),o="/"===i(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!a).join("/"))||a||(e="."),e&&o&&(e+="/"),(a?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),a=r(n.split("/")),o=Math.min(i.length,a.length),s=o,f=0;f<o;f++)if(i[f]!==a[f]){s=f;break}var c=[];for(f=s;f<i.length;f++)c.push("..");return(c=c.concat(a.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,a=e.length-1;a>=1;--a)if(47===(t=e.charCodeAt(a))){if(!i){r=a;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,a=0,o=e.length-1;o>=0;--o){var s=e.charCodeAt(o);if(47!==s)-1===r&&(i=!1,r=o+1),46===s?-1===t?t=o:1!==a&&(a=1):-1!==t&&(a=-1);else if(!i){n=o+1;break}}return-1===t||-1===r||0===a||1===a&&t===r-1&&t===n+1?"":e.slice(t,r)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(5))},function(e,t,n){"use strict";const{WordToken:r,CommentToken:i,SymbolToken:a,NumberToken:o,StringToken:s,NewlineToken:f,RawToken:c}=n(44),{text_macros:h}=n(13),l=[["!","#","%","&","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","^","{","|","}","~"],["!=","##","%=","&&","**","*=","++","+=","--","-=","..","/=","<<","<=","<>","==",">=",">>","?.","?:","^=","|=","||","~!","~="],["...",">>=","<<="]],d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_";class u{constructor(e,t){this.filename=e,t=t.replace(/\r\n|\r|\n/g,"\n"),this.text=t,this.pointer=0,this.row=1,this.col=1}advance_one(){return"\n"==this.text[this.pointer]?(this.row++,this.col=1):this.col++,this.pointer++,this.pointer<this.text.length}advance(e){for(let t=0;t<e;t++)this.advance_one();return this.pointer<this.text.length}get rest(){return this.text.substring(this.pointer)}}let p=[];console.log(p),e.exports=function(e,t){"string"!=typeof t&&(console.error("Got non-string text for "+e),console.error(t));let n=new u(e,t);try{let t=performance.now(),d=function e(t,n=null){let d=[],u=[],p=!1;for(;t.pointer<t.text.length&&(t.text[t.pointer]!=n||u.length);){if(" \t".includes(t.text[t.pointer])){t.advance_one(),p=!0;continue}if("//"==t.text.substring(t.pointer,t.pointer+2)){let e=t.pointer,n=new i(t,null,p);for(;("\n"!=t.text[t.pointer]||"\\"==t.text[t.pointer-1])&&t.advance_one(););n.value=t.text.substring(e,t.pointer),d.push(n),p=!0;continue}if("/*"==t.text.substring(t.pointer,t.pointer+2)){let e=t.pointer,n=new i(t,null,p);t.advance(2);let r=0;for(;("*/"!=t.text.substring(t.pointer,t.pointer+2)||r>0)&&("/*"==t.text.substring(t.pointer,t.pointer+2)&&r++,"*/"==t.text.substring(t.pointer,t.pointer+2)&&r--,t.advance_one()););t.advance(2),n.value=t.text.substring(e,t.pointer),d.push(n),p=!0;continue}if("\"'".includes(t.text[t.pointer])||"{"==t.text[t.pointer]&&'"'==t.text[t.pointer+1]){let n="{"==t.text[t.pointer]?'"}':t.text[t.pointer],i=[],o="",f=new s(t,null,p,2==n.length);f.is_file="'"==n;let c=!0;for(d[d.length-1]instanceof r&&"include"==d[d.length-1].value&&d[d.length-2]instanceof a&&"#"==d[d.length-2].value&&(c=!1),t.advance(n.length);t.text.substring(t.pointer,t.pointer+n.length)!=n&&t.text[t.pointer];)if(c&&"\\"==t.text[t.pointer]){t.advance_one();let e=t.text[t.pointer];if("<"==e)o+="&lt;";else if(">"==e)o+="&gt;";else if("n"==e)o+="\n";else if("r"==e)o+="\r";else{let n=!1;for(let[e,r]of h)if(t.text.substring(t.pointer,t.pointer+r.length)==r){n=!0,o+=e,t.advance(r.length);break}if(n&&" "==t.text[t.pointer]&&t.advance_one(),n)continue;o+=e}t.advance_one()}else c&&"["==t.text[t.pointer]?(t.advance_one(),i.push(o),o="",i.push(e(t,"]")),t.advance_one()):(o+=t.text[t.pointer],t.advance_one());t.advance(n.length),i.push(o),f.value=i,d.push(f),p=!1;continue}if("@"==t.text[t.pointer]){let e,n=new s(t,null,p);t.advance_one(),'{"'==t.text.substring(t.pointer,t.pointer+2)?(e='"}',t.advance(2)):(e=t.text[t.pointer],t.advance_one());let r="";for(;t.text.substring(t.pointer,t.pointer+e.length)!=e&&t.text[t.pointer];)r+=t.text[t.pointer],t.advance_one();t.advance(e.length),n.value=[r],d.push(n),p=!1;continue}let _=t.text.charCodeAt(t.pointer);if(_<128){let e=b[_];if(e){let r=!1;for(let i=l.length-1;i>=0;i--){let o=t.text.substring(t.pointer,t.pointer+i+1);if(e&1<<i&&(0==i||l[i].includes(o))){r=!0,d.push(new a(t,o,p)),p=!1,t.advance(i+1),0==i&&n&&("("==o?u.push(")"):"["==o?u.push("]"):"{"==o?u.push("}"):o==u[u.length-1]&&u.length--);break}}if(r)continue}}if("1.#INF"!=t.text.substring(t.pointer,t.pointer+6))if("\\"!=t.text[t.pointer]||"\n"!=t.text[t.pointer+1])if("\n"!=t.text[t.pointer])if("0123456789".includes(t.text[t.pointer])){let e=t.pointer,n=new o(t,null,p);if("0"==t.text[t.pointer]&&"x"==t.text[t.pointer+1])for(t.advance(2);"0123456789abcdefABCDEF".includes(t.text[t.pointer]);)t.advance_one();else for(;t.text[t.pointer];)if("0123456789.".includes(t.text[t.pointer]))t.advance_one();else{if(!"eE".includes(t.text[t.pointer]))break;t.advance_one(),"+-".includes(t.text[t.pointer])&&t.advance_one()}n.value=+t.text.substring(e,t.pointer),d.push(n),p=!1}else if(_<128&&m[_]){let e=t.pointer,n=new r(t,null,p);for(;_<128&&m[_];)t.advance_one(),_=t.text.charCodeAt(t.pointer);if(n.value=t.text.substring(e,t.pointer),d.push(n),("error"==n.value||"warn"==n.value)&&d[d.length-2]instanceof a&&"#"==d[d.length-2].value){for(;" \t".includes(t.text[t.pointer]);)t.advance_one();let e=new c(t,"",!1);for(;t.text[t.pointer]&&"\n"!=t.text[t.pointer];)e.value+=t.text[t.pointer],t.advance_one();d.push(e)}p=!1}else console.warn("Unrecognized character "+JSON.stringify(t.text[t.pointer])+" at ("+t.filename+":"+t.row+":"+t.col+")"),t.advance_one();else{t.advance_one();let e=new f(t,null,p),n="";for(;" \t".includes(t.text[t.pointer]);)n+="\t",t.advance_one();e.value=n,d.push(e),p=!0}else t.advance(2);else d.push(new o(t,1/0,p)),p=!1,t.advance(6)}return d}(n),u=performance.now();return p.push([u-t,e]),d}catch(e){throw console.error(`In (${n.filename}:${n.row}:${n.col}):`),e}};const b=new Uint8Array(128),m=new Uint8Array(128);for(let e=0;e<d.length;e++)m[d.charCodeAt(e)]=1;for(let e=0;e<l.length;e++){let t=l[e];for(let n of t)b[n.charCodeAt(0)]|=1<<e}},function(module,exports,__webpack_require__){"use strict";const{ByondList:ByondList,ByondNewlist:ByondNewlist,ByondFile:ByondFile,ByondTypepath:ByondTypepath,ByondNew:ByondNew,ByondMatrix:ByondMatrix}=__webpack_require__(13),stringify_byond=__webpack_require__(16),builtin_procs=__webpack_require__(132);class UnaryPrefixNode{constructor(e,t){this.operator=e.value,this.operand=t}evaluate_constant(e){let t=this.operand.evaluate_constant(e);switch(this.operator){case"~":return 16777215&~t;case"!":return!t;case"-":return-t;default:throw new Error("Non-constant unary operator "+operator)}}}class UnaryPostfixNode{constructor(e,t){this.operator=e.value,this.operand=t}}class BinaryOpNode{constructor(e,t,n){this.operator=e.value,this.left=t,this.right=n}evaluate_constant(context){let left=this.left.evaluate_constant(context);if("||"==this.operator&&left||"&&"==this.operator&&!left)return left;let right=this.right.evaluate_constant(context),res=eval(`left ${this.operator} right`);return"|"!=res&&"&"!=res&&"^"!=res&&"<<"!=res&&">>"!=res||(res&=16777215),res}}class TernaryOpNode{constructor(e,t,n){this.condition=e,this.if_true=t,this.if_false=n}evaluate_constant(e){return this.condition.evaluate_constant(e)?this.if_true.evaluate_constant(e):this.if_false.evaluate_constant(e)}}class ConstantNode{constructor(e){this.value=e.value}evaluate_constant(){return this.value}}class StringNode{constructor(e){this.value=e}evaluate_constant(e){let t="";for(let n of this.value)t+="string"==typeof n?n:n.evaluate_constant(e);return t}}class PathNode{constructor(e){this.path_tokens=e,this.override_properties=null}evaluate_constant(e){let t,n="";for(let e of this.path_tokens)"/"!=e.value&&"."!=e.value&&":"!=e.value&&(n+="/"+e.value);if(this.override_properties){t=new Map;for(let[n,r]of this.override_properties)t.set(n,r.evaluate_constant(e))}return new ByondTypepath(n,t)}}class FileNode{constructor(e){if(1!=e.value.length)throw new Error("File at "+e.format_pos()+" is non-constant");this.value=e.value[0]}evaluate_constant(){return new ByondFile(this.value)}}class VarAccessNode{constructor(e,t,n){this.identifier=e.value,this.dot_object=t,this.dot_operator=n?n.value:void 0}evaluate_constant(e){if(!this.dot_object&&e&&e.var_overrides&&e.var_overrides.has(this.identifier)){let t=e.var_overrides.get(this.identifier);return"function"==typeof t?t(this,e):t}if(!this.dot_object&&"null"==this.identifier)return null;if(!this.dot_object&&void 0!==e.types.get("/").get_var(this.identifier))return e.types.get("/").eval_var(e,this.identifier);if(!this.dot_object&&e.src&&void 0!==e.src.get_var(this.identifier))return e.src.eval_var(e,this.identifier);throw new Error("Non-constant variable access - "+(this.dot_operator||"")+this.identifier)}}class ListAccessNode{constructor(e,t){this.list=e,this.index=t}}class ProcCallNode{constructor(e,t,n,r,i){this.identifier=e.value,this.args=t,this.arg_names=n,this.dot_object=r,this.dot_operator=i&&i.value}evaluate_constant(e){if(!this.dot_object&&e&&e.proc_overrides&&e.proc_overrides.has(this.identifier))return e.proc_overrides.get(this.identifier)(this,e);if(!this.dot_object&&"list"==this.identifier){let t=[],n=[];for(let r=0;r<this.args.length;r++)this.args[r]instanceof BinaryOpNode&&"="==this.args[r].operator?(t[r]=this.args[r].left.evaluate_constant(e),n[r]=this.args[r].right.evaluate_constant(e)):this.arg_names&&this.arg_names[r]?(t[r]=this.arg_names[r],n[r]=this.args[r]?this.args[r].evaluate_constant(e):void 0):(t[r]=this.args[r]?this.args[r].evaluate_constant(e):void 0,n[r]=void 0);return new ByondList(t,n)}if(!this.dot_object&&"newlist"==this.identifier){let t=[];for(let n=0;n<this.args.length;n++)t.push(this.args[n].evaluate_constant(e));return new ByondNewlist(t)}if(!this.dot_object&&"matrix"==this.identifier){let t=[];for(let n=0;n<6;n++)t.push(this.args[n].evaluate_constant(e));return new ByondMatrix(...t)}if(!this.dot_object&&"rgb"==this.identifier){let t=Math.min(Math.max(0|this.args[0].evaluate_constant(e),0)),n=Math.min(Math.max(0|this.args[1].evaluate_constant(e),0)),r=Math.min(Math.max(0|this.args[2].evaluate_constant(e),0)),i="#"+t.toString(16).padStart(2,0)+n.toString(16).padStart(2,0)+r.toString(16).padStart(2,0);return null!=this.args[3]&&(i+=Math.min(Math.max(0|this.args[3].evaluate_constant(e),0)).toString(16).padStart(2,0)),i}if(!this.dot_object&&builtin_procs.has(this.identifier)){builtin_procs.get(this.identifier);let t=[];for(let n=0;n<this.args.length;n++)this.args[n]&&(t[n]=this.args[n].evaluate_constant(e));return builtin_procs.get(this.identifier)(...t)}throw new Error("Non-constant proc-call "+(this.dot_operator||"")+this.identifier+"()")}}class NewNode{constructor(e,t,n){this.args=e,this.arg_names=t,this.type=n}evaluate_constant(e){let t=this.type?this.type.evaluate_constant(e):this.type,n=[];if(this.args)for(let t of this.args)n.push(t?t.evaluate_constant(e):t);return new ByondNew(t,n,this.arg_names)}}function p_cond(e,t){return t?"("+e+")":e}module.exports={UnaryPrefixNode:UnaryPrefixNode,UnaryPostfixNode:UnaryPostfixNode,BinaryOpNode:BinaryOpNode,ConstantNode:ConstantNode,StringNode:StringNode,PathNode:PathNode,FileNode:FileNode,VarAccessNode:VarAccessNode,ListAccessNode:ListAccessNode,ProcCallNode:ProcCallNode,NewNode:NewNode,TernaryOpNode:TernaryOpNode}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";var r=n(1).Buffer,i=n(20).Transform;function a(e){i.call(this),this._block=r.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}n(0)(a,i),a.prototype._transform=function(e,t,n){var r=null;try{this.update(e,t)}catch(e){r=e}n(r)},a.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},a.prototype.update=function(e,t){if(function(e,t){if(!r.isBuffer(e)&&"string"!=typeof e)throw new TypeError(t+" must be a string or a buffer")}(e,"Data"),this._finalized)throw new Error("Digest already called");r.isBuffer(e)||(e=r.from(e,t));for(var n=this._block,i=0;this._blockOffset+e.length-i>=this._blockSize;){for(var a=this._blockOffset;a<this._blockSize;)n[a++]=e[i++];this._update(),this._blockOffset=0}for(;i<e.length;)n[this._blockOffset++]=e[i++];for(var o=0,s=8*e.length;s>0;++o)this._length[o]+=s,(s=this._length[o]/4294967296|0)>0&&(this._length[o]-=4294967296*s);return this},a.prototype._update=function(){throw new Error("_update is not implemented")},a.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return t},a.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=a},function(e,t,n){"use strict";(function(t,r){var i=n(33);e.exports=v;var a,o=n(69);v.ReadableState=g;n(18).EventEmitter;var s=function(e,t){return e.listeners(t).length},f=n(72),c=n(48).Buffer,h=t.Uint8Array||function(){};var l=Object.create(n(25));l.inherits=n(0);var d=n(141),u=void 0;u=d&&d.debuglog?d.debuglog("stream"):function(){};var p,b=n(142),m=n(73);l.inherits(v,f);var _=["error","close","destroy","pause","resume"];function g(e,t){e=e||{};var r=t instanceof(a=a||n(17));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new b,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=n(50).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function v(e){if(a=a||n(17),!(this instanceof v))return new v(e);this._readableState=new g(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),f.call(this)}function y(e,t,n,r,i){var a,o=e._readableState;null===t?(o.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,E(e)}(e,o)):(i||(a=function(e,t){var n;r=t,c.isBuffer(r)||r instanceof h||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(o,t)),a?e.emit("error",a):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),r?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?w(e,o,t,!1):S(e,o)):w(e,o,t,!1))):r||(o.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function w(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&E(e)),S(e,t)}Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),v.prototype.destroy=m.destroy,v.prototype._undestroy=m.undestroy,v.prototype._destroy=function(e,t){this.push(null),t(e)},v.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=c.from(e,t),t=""),n=!0),y(this,e,t,!1,n)},v.prototype.unshift=function(e){return y(this,e,null,!0,!1)},v.prototype.isPaused=function(){return!1===this._readableState.flowing},v.prototype.setEncoding=function(e){return p||(p=n(50).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};function x(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function E(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(k,e):k(e))}function k(e){u("emit readable"),e.emit("readable"),T(e)}function S(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(M,e,t))}function M(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(u("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function A(e){u("readable nexttick read 0"),e.read(0)}function I(e,t){t.reading||(u("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),T(e),t.flowing&&!t.reading&&e.read(0)}function T(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function R(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;e-=i.length;for(;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(o===a.length?i+=a:i+=a.slice(0,e),0===(e-=o)){o===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(o));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=c.allocUnsafe(e),r=t.head,i=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,o),0===(e-=o)){o===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(o));break}++i}return t.length-=i,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function z(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(C,t,e))}function C(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function L(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}v.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?z(this):E(this),null;if(0===(e=x(e,t))&&t.ended)return 0===t.length&&z(this),null;var r,i=t.needReadable;return u("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",i=!0),t.ended||t.reading?u("reading or ended",i=!1):i&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=x(n,t))),null===(r=e>0?R(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&z(this)),null!==r&&this.emit("data",r),r},v.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},v.prototype.pipe=function(e,t){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,u("pipe count=%d opts=%j",a.pipesCount,t);var f=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?h:v;function c(t,r){u("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,u("cleanup"),e.removeListener("close",_),e.removeListener("finish",g),e.removeListener("drain",l),e.removeListener("error",m),e.removeListener("unpipe",c),n.removeListener("end",h),n.removeListener("end",v),n.removeListener("data",b),d=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function h(){u("onend"),e.end()}a.endEmitted?i.nextTick(f):n.once("end",f),e.on("unpipe",c);var l=function(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,T(e))}}(n);e.on("drain",l);var d=!1;var p=!1;function b(t){u("ondata"),p=!1,!1!==e.write(t)||p||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==L(a.pipes,e))&&!d&&(u("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function m(t){u("onerror",t),v(),e.removeListener("error",m),0===s(e,"error")&&e.emit("error",t)}function _(){e.removeListener("finish",g),v()}function g(){u("onfinish"),e.removeListener("close",_),v()}function v(){u("unpipe"),n.unpipe(e)}return n.on("data",b),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",m),e.once("close",_),e.once("finish",g),e.emit("pipe",n),a.flowing||(u("pipe resume"),n.resume()),e},v.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var o=L(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},v.prototype.on=function(e,t){var n=f.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&E(this):i.nextTick(A,this))}return n},v.prototype.addListener=v.prototype.on,v.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(I,e,t))}(this,e)),this},v.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this},v.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(u("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(u("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<_.length;a++)e.on(_[a],this.emit.bind(this,_[a]));return this._read=function(t){u("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),v._fromList=R}).call(this,n(10),n(5))},function(e,t,n){e.exports=n(18).EventEmitter},function(e,t,n){"use strict";var r=n(33);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return a||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){"use strict";e.exports=o;var r=n(17),i=Object.create(n(25));function a(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);r.call(this,e),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){f(e,t,n)})):f(this,null,null)}function f(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=n(0),i.inherits(o,r),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},function(e,t,n){var r=n(0),i=n(21),a=n(1).Buffer,o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function f(){this.init(),this._w=s,i.call(this,64,56)}function c(e,t,n){return n^e&(t^n)}function h(e,t,n){return e&t|n&(e|t)}function l(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function d(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function u(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function p(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}r(f,i),f.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},f.prototype._update=function(e){for(var t=this._w,n=0|this._a,r=0|this._b,i=0|this._c,a=0|this._d,s=0|this._e,f=0|this._f,b=0|this._g,m=0|this._h,_=0;_<16;++_)t[_]=e.readInt32BE(4*_);for(;_<64;++_)t[_]=p(t[_-2])+t[_-7]+u(t[_-15])+t[_-16]|0;for(var g=0;g<64;++g){var v=m+d(s)+c(s,f,b)+o[g]+t[g]|0,y=l(n)+h(n,r,i)|0;m=b,b=f,f=s,s=a+v|0,a=i,i=r,r=n,n=v+y|0}this._a=n+this._a|0,this._b=r+this._b|0,this._c=i+this._c|0,this._d=a+this._d|0,this._e=s+this._e|0,this._f=f+this._f|0,this._g=b+this._g|0,this._h=m+this._h|0},f.prototype._hash=function(){var e=a.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=f},function(e,t,n){var r=n(0),i=n(21),a=n(1).Buffer,o=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function f(){this.init(),this._w=s,i.call(this,128,112)}function c(e,t,n){return n^e&(t^n)}function h(e,t,n){return e&t|n&(e|t)}function l(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function d(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function u(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function p(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function b(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function m(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function _(e,t){return e>>>0<t>>>0?1:0}r(f,i),f.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},f.prototype._update=function(e){for(var t=this._w,n=0|this._ah,r=0|this._bh,i=0|this._ch,a=0|this._dh,s=0|this._eh,f=0|this._fh,g=0|this._gh,v=0|this._hh,y=0|this._al,w=0|this._bl,x=0|this._cl,E=0|this._dl,k=0|this._el,S=0|this._fl,M=0|this._gl,A=0|this._hl,I=0;I<32;I+=2)t[I]=e.readInt32BE(4*I),t[I+1]=e.readInt32BE(4*I+4);for(;I<160;I+=2){var T=t[I-30],R=t[I-30+1],z=u(T,R),C=p(R,T),L=b(T=t[I-4],R=t[I-4+1]),B=m(R,T),j=t[I-14],O=t[I-14+1],P=t[I-32],N=t[I-32+1],D=C+O|0,U=z+j+_(D,C)|0;U=(U=U+L+_(D=D+B|0,B)|0)+P+_(D=D+N|0,N)|0,t[I]=U,t[I+1]=D}for(var F=0;F<160;F+=2){U=t[F],D=t[F+1];var q=h(n,r,i),$=h(y,w,x),H=l(n,y),K=l(y,n),Y=d(s,k),Z=d(k,s),W=o[F],G=o[F+1],X=c(s,f,g),V=c(k,S,M),J=A+Z|0,Q=v+Y+_(J,A)|0;Q=(Q=(Q=Q+X+_(J=J+V|0,V)|0)+W+_(J=J+G|0,G)|0)+U+_(J=J+D|0,D)|0;var ee=K+$|0,te=H+q+_(ee,K)|0;v=g,A=M,g=f,M=S,f=s,S=k,s=a+Q+_(k=E+J|0,E)|0,a=i,E=x,i=r,x=w,r=n,w=y,n=Q+te+_(y=J+ee|0,J)|0}this._al=this._al+y|0,this._bl=this._bl+w|0,this._cl=this._cl+x|0,this._dl=this._dl+E|0,this._el=this._el+k|0,this._fl=this._fl+S|0,this._gl=this._gl+M|0,this._hl=this._hl+A|0,this._ah=this._ah+n+_(this._al,y)|0,this._bh=this._bh+r+_(this._bl,w)|0,this._ch=this._ch+i+_(this._cl,x)|0,this._dh=this._dh+a+_(this._dl,E)|0,this._eh=this._eh+s+_(this._el,k)|0,this._fh=this._fh+f+_(this._fl,S)|0,this._gh=this._gh+g+_(this._gl,M)|0,this._hh=this._hh+v+_(this._hl,A)|0},f.prototype._hash=function(){var e=a.allocUnsafe(64);function t(t,n,r){e.writeInt32BE(t,r),e.writeInt32BE(n,r+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},e.exports=f},function(e,t,n){"use strict";var r=n(0),i=n(156),a=n(14),o=n(1).Buffer,s=n(78),f=n(51),c=n(52),h=o.alloc(128);function l(e,t){a.call(this,"digest"),"string"==typeof t&&(t=o.from(t));var n="sha512"===e||"sha384"===e?128:64;(this._alg=e,this._key=t,t.length>n)?t=("rmd160"===e?new f:c(e)).update(t).digest():t.length<n&&(t=o.concat([t,h],n));for(var r=this._ipad=o.allocUnsafe(n),i=this._opad=o.allocUnsafe(n),s=0;s<n;s++)r[s]=54^t[s],i[s]=92^t[s];this._hash="rmd160"===e?new f:c(e),this._hash.update(r)}r(l,a),l.prototype._update=function(e){this._hash.update(e)},l.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new f:c(this._alg)).update(this._opad).update(e).digest()},e.exports=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new l("rmd160",t):"md5"===e?new i(s,t):new l(e,t)}},function(e,t,n){var r=n(46);e.exports=function(e){return(new r).update(e).digest()}},function(e){e.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},function(e,t,n){t.pbkdf2=n(158),t.pbkdf2Sync=n(83)},function(e,t,n){(function(t){var n=Math.pow(2,30)-1;function r(e,n){if("string"!=typeof e&&!t.isBuffer(e))throw new TypeError(n+" must be a buffer or string")}e.exports=function(e,t,i,a){if(r(e,"Password"),r(t,"Salt"),"number"!=typeof i)throw new TypeError("Iterations not a number");if(i<0)throw new TypeError("Bad iterations");if("number"!=typeof a)throw new TypeError("Key length not a number");if(a<0||a>n||a!=a)throw new TypeError("Bad key length")}}).call(this,n(2).Buffer)},function(e,t,n){(function(t){var n;t.browser?n="utf-8":n=parseInt(t.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary";e.exports=n}).call(this,n(5))},function(e,t,n){var r=n(78),i=n(51),a=n(52),o=n(81),s=n(82),f=n(1).Buffer,c=f.alloc(128),h={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function l(e,t,n){var o=function(e){function t(t){return a(e).update(t).digest()}return"rmd160"===e||"ripemd160"===e?function(e){return(new i).update(e).digest()}:"md5"===e?r:t}(e),s="sha512"===e||"sha384"===e?128:64;t.length>s?t=o(t):t.length<s&&(t=f.concat([t,c],s));for(var l=f.allocUnsafe(s+h[e]),d=f.allocUnsafe(s+h[e]),u=0;u<s;u++)l[u]=54^t[u],d[u]=92^t[u];var p=f.allocUnsafe(s+n+4);l.copy(p,0,0,s),this.ipad1=p,this.ipad2=l,this.opad=d,this.alg=e,this.blocksize=s,this.hash=o,this.size=h[e]}l.prototype.run=function(e,t){return e.copy(t,this.blocksize),this.hash(t).copy(this.opad,this.blocksize),this.hash(this.opad)},e.exports=function(e,t,n,r,i){o(e,t,n,r),f.isBuffer(e)||(e=f.from(e,s)),f.isBuffer(t)||(t=f.from(t,s));var a=new l(i=i||"sha1",e,t.length),c=f.allocUnsafe(r),d=f.allocUnsafe(t.length+4);t.copy(d,0,0,t.length);for(var u=0,p=h[i],b=Math.ceil(r/p),m=1;m<=b;m++){d.writeUInt32BE(m,t.length);for(var _=a.run(d,a.ipad1),g=_,v=1;v<n;v++){g=a.run(g,a.ipad2);for(var y=0;y<p;y++)_[y]^=g[y]}_.copy(c,u),u+=p}return c}},function(e,t,n){"use strict";t.readUInt32BE=function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},t.writeUInt32BE=function(e,t,n){e[0+n]=t>>>24,e[1+n]=t>>>16&255,e[2+n]=t>>>8&255,e[3+n]=255&t},t.ip=function(e,t,n,r){for(var i=0,a=0,o=6;o>=0;o-=2){for(var s=0;s<=24;s+=8)i<<=1,i|=t>>>s+o&1;for(s=0;s<=24;s+=8)i<<=1,i|=e>>>s+o&1}for(o=6;o>=0;o-=2){for(s=1;s<=25;s+=8)a<<=1,a|=t>>>s+o&1;for(s=1;s<=25;s+=8)a<<=1,a|=e>>>s+o&1}n[r+0]=i>>>0,n[r+1]=a>>>0},t.rip=function(e,t,n,r){for(var i=0,a=0,o=0;o<4;o++)for(var s=24;s>=0;s-=8)i<<=1,i|=t>>>s+o&1,i<<=1,i|=e>>>s+o&1;for(o=4;o<8;o++)for(s=24;s>=0;s-=8)a<<=1,a|=t>>>s+o&1,a<<=1,a|=e>>>s+o&1;n[r+0]=i>>>0,n[r+1]=a>>>0},t.pc1=function(e,t,n,r){for(var i=0,a=0,o=7;o>=5;o--){for(var s=0;s<=24;s+=8)i<<=1,i|=t>>s+o&1;for(s=0;s<=24;s+=8)i<<=1,i|=e>>s+o&1}for(s=0;s<=24;s+=8)i<<=1,i|=t>>s+o&1;for(o=1;o<=3;o++){for(s=0;s<=24;s+=8)a<<=1,a|=t>>s+o&1;for(s=0;s<=24;s+=8)a<<=1,a|=e>>s+o&1}for(s=0;s<=24;s+=8)a<<=1,a|=e>>s+o&1;n[r+0]=i>>>0,n[r+1]=a>>>0},t.r28shl=function(e,t){return e<<t&268435455|e>>>28-t};var r=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];t.pc2=function(e,t,n,i){for(var a=0,o=0,s=r.length>>>1,f=0;f<s;f++)a<<=1,a|=e>>>r[f]&1;for(f=s;f<r.length;f++)o<<=1,o|=t>>>r[f]&1;n[i+0]=a>>>0,n[i+1]=o>>>0},t.expand=function(e,t,n){var r=0,i=0;r=(1&e)<<5|e>>>27;for(var a=23;a>=15;a-=4)r<<=6,r|=e>>>a&63;for(a=11;a>=3;a-=4)i|=e>>>a&63,i<<=6;i|=(31&e)<<1|e>>>31,t[n+0]=r>>>0,t[n+1]=i>>>0};var i=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];t.substitute=function(e,t){for(var n=0,r=0;r<4;r++){n<<=4,n|=i[64*r+(e>>>18-6*r&63)]}for(r=0;r<4;r++){n<<=4,n|=i[256+64*r+(t>>>18-6*r&63)]}return n>>>0};var a=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];t.permute=function(e){for(var t=0,n=0;n<a.length;n++)t<<=1,t|=e>>>a[n]&1;return t>>>0},t.padSplit=function(e,t,n){for(var r=e.toString(2);r.length<t;)r="0"+r;for(var i=[],a=0;a<t;a+=n)i.push(r.slice(a,a+n));return i.join(" ")}},function(e,t,n){"use strict";var r=n(8),i=n(0),a=n(84),o=n(53);function s(){this.tmp=new Array(2),this.keys=null}function f(e){o.call(this,e);var t=new s;this._desState=t,this.deriveKeys(t,e.key)}i(f,o),e.exports=f,f.create=function(e){return new f(e)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];f.prototype.deriveKeys=function(e,t){e.keys=new Array(32),r.equal(t.length,this.blockSize,"Invalid key length");var n=a.readUInt32BE(t,0),i=a.readUInt32BE(t,4);a.pc1(n,i,e.tmp,0),n=e.tmp[0],i=e.tmp[1];for(var o=0;o<e.keys.length;o+=2){var s=c[o>>>1];n=a.r28shl(n,s),i=a.r28shl(i,s),a.pc2(n,i,e.keys,o)}},f.prototype._update=function(e,t,n,r){var i=this._desState,o=a.readUInt32BE(e,t),s=a.readUInt32BE(e,t+4);a.ip(o,s,i.tmp,0),o=i.tmp[0],s=i.tmp[1],"encrypt"===this.type?this._encrypt(i,o,s,i.tmp,0):this._decrypt(i,o,s,i.tmp,0),o=i.tmp[0],s=i.tmp[1],a.writeUInt32BE(n,o,r),a.writeUInt32BE(n,s,r+4)},f.prototype._pad=function(e,t){for(var n=e.length-t,r=t;r<e.length;r++)e[r]=n;return!0},f.prototype._unpad=function(e){for(var t=e[e.length-1],n=e.length-t;n<e.length;n++)r.equal(e[n],t);return e.slice(0,e.length-t)},f.prototype._encrypt=function(e,t,n,r,i){for(var o=t,s=n,f=0;f<e.keys.length;f+=2){var c=e.keys[f],h=e.keys[f+1];a.expand(s,e.tmp,0),c^=e.tmp[0],h^=e.tmp[1];var l=a.substitute(c,h),d=s;s=(o^a.permute(l))>>>0,o=d}a.rip(s,o,r,i)},f.prototype._decrypt=function(e,t,n,r,i){for(var o=n,s=t,f=e.keys.length-2;f>=0;f-=2){var c=e.keys[f],h=e.keys[f+1];a.expand(o,e.tmp,0),c^=e.tmp[0],h^=e.tmp[1];var l=a.substitute(c,h),d=o;o=(s^a.permute(l))>>>0,s=d}a.rip(o,s,r,i)}},function(e,t,n){var r=n(26),i=n(1).Buffer,a=n(87);function o(e){var t=e._cipher.encryptBlockRaw(e._prev);return a(e._prev),t}t.encrypt=function(e,t){var n=Math.ceil(t.length/16),a=e._cache.length;e._cache=i.concat([e._cache,i.allocUnsafe(16*n)]);for(var s=0;s<n;s++){var f=o(e),c=a+16*s;e._cache.writeUInt32BE(f[0],c+0),e._cache.writeUInt32BE(f[1],c+4),e._cache.writeUInt32BE(f[2],c+8),e._cache.writeUInt32BE(f[3],c+12)}var h=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),r(t,h)}},function(e,t){e.exports=function(e){for(var t,n=e.length;n--;){if(255!==(t=e.readUInt8(n))){t++,e.writeUInt8(t,n);break}e.writeUInt8(0,n)}}},function(e){e.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},function(e,t,n){var r=n(34),i=n(1).Buffer,a=n(14),o=n(0),s=n(171),f=n(26),c=n(87);function h(e,t,n,o){a.call(this);var f=i.alloc(4,0);this._cipher=new r.AES(t);var h=this._cipher.encryptBlock(f);this._ghash=new s(h),n=function(e,t,n){if(12===t.length)return e._finID=i.concat([t,i.from([0,0,0,1])]),i.concat([t,i.from([0,0,0,2])]);var r=new s(n),a=t.length,o=a%16;r.update(t),o&&(o=16-o,r.update(i.alloc(o,0))),r.update(i.alloc(8,0));var f=8*a,h=i.alloc(8);h.writeUIntBE(f,0,8),r.update(h),e._finID=r.state;var l=i.from(e._finID);return c(l),l}(this,n,h),this._prev=i.from(n),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=o,this._alen=0,this._len=0,this._mode=e,this._authTag=null,this._called=!1}o(h,a),h.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;t<16&&(t=i.alloc(t,0),this._ghash.update(t))}this._called=!0;var n=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(n),this._len+=e.length,n},h.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=f(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(e,t){var n=0;e.length!==t.length&&n++;for(var r=Math.min(e.length,t.length),i=0;i<r;++i)n+=e[i]^t[i];return n}(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},h.prototype.getAuthTag=function(){if(this._decrypt||!i.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},h.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},h.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},e.exports=h},function(e,t,n){var r=n(34),i=n(1).Buffer,a=n(14);function o(e,t,n,o){a.call(this),this._cipher=new r.AES(t),this._prev=i.from(n),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=o,this._mode=e}n(0)(o,a),o.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},o.prototype._final=function(){this._cipher.scrub()},e.exports=o},function(e,t,n){var r=n(19);e.exports=g,g.simpleSieve=m,g.fermatTest=_;var i=n(4),a=new i(24),o=new(n(92)),s=new i(1),f=new i(2),c=new i(5),h=(new i(16),new i(8),new i(10)),l=new i(3),d=(new i(7),new i(11)),u=new i(4),p=(new i(12),null);function b(){if(null!==p)return p;var e=[];e[0]=2;for(var t=1,n=3;n<1048576;n+=2){for(var r=Math.ceil(Math.sqrt(n)),i=0;i<t&&e[i]<=r&&n%e[i]!=0;i++);t!==i&&e[i]<=r||(e[t++]=n)}return p=e,e}function m(e){for(var t=b(),n=0;n<t.length;n++)if(0===e.modn(t[n]))return 0===e.cmpn(t[n]);return!0}function _(e){var t=i.mont(e);return 0===f.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function g(e,t){if(e<16)return new i(2===t||5===t?[140,123]:[140,39]);var n,p;for(t=new i(t);;){for(n=new i(r(Math.ceil(e/8)));n.bitLength()>e;)n.ishrn(1);if(n.isEven()&&n.iadd(s),n.testn(1)||n.iadd(f),t.cmp(f)){if(!t.cmp(c))for(;n.mod(h).cmp(l);)n.iadd(u)}else for(;n.mod(a).cmp(d);)n.iadd(u);if(m(p=n.shrn(1))&&m(n)&&_(p)&&_(n)&&o.test(p)&&o.test(n))return n}}},function(e,t,n){var r=n(4),i=n(56);function a(e){this.rand=e||new i.Rand}e.exports=a,a.create=function(e){return new a(e)},a.prototype._randbelow=function(e){var t=e.bitLength(),n=Math.ceil(t/8);do{var i=new r(this.rand.generate(n))}while(i.cmp(e)>=0);return i},a.prototype._randrange=function(e,t){var n=t.sub(e);return e.add(this._randbelow(n))},a.prototype.test=function(e,t,n){var i=e.bitLength(),a=r.mont(e),o=new r(1).toRed(a);t||(t=Math.max(1,i/48|0));for(var s=e.subn(1),f=0;!s.testn(f);f++);for(var c=e.shrn(f),h=s.toRed(a);t>0;t--){var l=this._randrange(new r(2),s);n&&n(l);var d=l.toRed(a).redPow(c);if(0!==d.cmp(o)&&0!==d.cmp(h)){for(var u=1;u<f;u++){if(0===(d=d.redSqr()).cmp(o))return!1;if(0===d.cmp(h))break}if(u===f)return!1}}return!0},a.prototype.getDivisor=function(e,t){var n=e.bitLength(),i=r.mont(e),a=new r(1).toRed(i);t||(t=Math.max(1,n/48|0));for(var o=e.subn(1),s=0;!o.testn(s);s++);for(var f=e.shrn(s),c=o.toRed(i);t>0;t--){var h=this._randrange(new r(2),o),l=e.gcd(h);if(0!==l.cmpn(1))return l;var d=h.toRed(i).redPow(f);if(0!==d.cmp(a)&&0!==d.cmp(c)){for(var u=1;u<s;u++){if(0===(d=d.redSqr()).cmp(a))return d.fromRed().subn(1).gcd(e);if(0===d.cmp(c))break}if(u===s)return(d=d.redSqr()).fromRed().subn(1).gcd(e)}}return!1}},function(e,t,n){"use strict";var r=t;function i(e){return 1===e.length?"0"+e:e}function a(e){for(var t="",n=0;n<e.length;n++)t+=i(e[n].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"!=typeof e){for(var r=0;r<e.length;r++)n[r]=0|e[r];return n}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e);for(r=0;r<e.length;r+=2)n.push(parseInt(e[r]+e[r+1],16))}else for(r=0;r<e.length;r++){var i=e.charCodeAt(r),a=i>>8,o=255&i;a?n.push(a,o):n.push(o)}return n},r.zero2=i,r.toHex=a,r.encode=function(e,t){return"hex"===t?a(e):e}},function(e,t,n){"use strict";var r=t;r.base=n(36),r.short=n(183),r.mont=n(184),r.edwards=n(185)},function(e,t,n){"use strict";var r=n(11).rotr32;function i(e,t,n){return e&t^~e&n}function a(e,t,n){return e&t^e&n^t&n}function o(e,t,n){return e^t^n}t.ft_1=function(e,t,n,r){return 0===e?i(t,n,r):1===e||3===e?o(t,n,r):2===e?a(t,n,r):void 0},t.ch32=i,t.maj32=a,t.p32=o,t.s0_256=function(e){return r(e,2)^r(e,13)^r(e,22)},t.s1_256=function(e){return r(e,6)^r(e,11)^r(e,25)},t.g0_256=function(e){return r(e,7)^r(e,18)^e>>>3},t.g1_256=function(e){return r(e,17)^r(e,19)^e>>>10}},function(e,t,n){"use strict";var r=n(11),i=n(27),a=n(95),o=n(8),s=r.sum32,f=r.sum32_4,c=r.sum32_5,h=a.ch32,l=a.maj32,d=a.s0_256,u=a.s1_256,p=a.g0_256,b=a.g1_256,m=i.BlockHash,_=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function g(){if(!(this instanceof g))return new g;m.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=_,this.W=new Array(64)}r.inherits(g,m),e.exports=g,g.blockSize=512,g.outSize=256,g.hmacStrength=192,g.padLength=64,g.prototype._update=function(e,t){for(var n=this.W,r=0;r<16;r++)n[r]=e[t+r];for(;r<n.length;r++)n[r]=f(b(n[r-2]),n[r-7],p(n[r-15]),n[r-16]);var i=this.h[0],a=this.h[1],m=this.h[2],_=this.h[3],g=this.h[4],v=this.h[5],y=this.h[6],w=this.h[7];for(o(this.k.length===n.length),r=0;r<n.length;r++){var x=c(w,u(g),h(g,v,y),this.k[r],n[r]),E=s(d(i),l(i,a,m));w=y,y=v,v=g,g=s(_,x),_=m,m=a,a=i,i=s(x,E)}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],a),this.h[2]=s(this.h[2],m),this.h[3]=s(this.h[3],_),this.h[4]=s(this.h[4],g),this.h[5]=s(this.h[5],v),this.h[6]=s(this.h[6],y),this.h[7]=s(this.h[7],w)},g.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(e,t,n){"use strict";var r=n(11),i=n(27),a=n(8),o=r.rotr64_hi,s=r.rotr64_lo,f=r.shr64_hi,c=r.shr64_lo,h=r.sum64,l=r.sum64_hi,d=r.sum64_lo,u=r.sum64_4_hi,p=r.sum64_4_lo,b=r.sum64_5_hi,m=r.sum64_5_lo,_=i.BlockHash,g=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function v(){if(!(this instanceof v))return new v;_.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=g,this.W=new Array(160)}function y(e,t,n,r,i){var a=e&n^~e&i;return a<0&&(a+=4294967296),a}function w(e,t,n,r,i,a){var o=t&r^~t&a;return o<0&&(o+=4294967296),o}function x(e,t,n,r,i){var a=e&n^e&i^n&i;return a<0&&(a+=4294967296),a}function E(e,t,n,r,i,a){var o=t&r^t&a^r&a;return o<0&&(o+=4294967296),o}function k(e,t){var n=o(e,t,28)^o(t,e,2)^o(t,e,7);return n<0&&(n+=4294967296),n}function S(e,t){var n=s(e,t,28)^s(t,e,2)^s(t,e,7);return n<0&&(n+=4294967296),n}function M(e,t){var n=o(e,t,14)^o(e,t,18)^o(t,e,9);return n<0&&(n+=4294967296),n}function A(e,t){var n=s(e,t,14)^s(e,t,18)^s(t,e,9);return n<0&&(n+=4294967296),n}function I(e,t){var n=o(e,t,1)^o(e,t,8)^f(e,t,7);return n<0&&(n+=4294967296),n}function T(e,t){var n=s(e,t,1)^s(e,t,8)^c(e,t,7);return n<0&&(n+=4294967296),n}function R(e,t){var n=o(e,t,19)^o(t,e,29)^f(e,t,6);return n<0&&(n+=4294967296),n}function z(e,t){var n=s(e,t,19)^s(t,e,29)^c(e,t,6);return n<0&&(n+=4294967296),n}r.inherits(v,_),e.exports=v,v.blockSize=1024,v.outSize=512,v.hmacStrength=192,v.padLength=128,v.prototype._prepareBlock=function(e,t){for(var n=this.W,r=0;r<32;r++)n[r]=e[t+r];for(;r<n.length;r+=2){var i=R(n[r-4],n[r-3]),a=z(n[r-4],n[r-3]),o=n[r-14],s=n[r-13],f=I(n[r-30],n[r-29]),c=T(n[r-30],n[r-29]),h=n[r-32],l=n[r-31];n[r]=u(i,a,o,s,f,c,h,l),n[r+1]=p(i,a,o,s,f,c,h,l)}},v.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,r=this.h[0],i=this.h[1],o=this.h[2],s=this.h[3],f=this.h[4],c=this.h[5],u=this.h[6],p=this.h[7],_=this.h[8],g=this.h[9],v=this.h[10],I=this.h[11],T=this.h[12],R=this.h[13],z=this.h[14],C=this.h[15];a(this.k.length===n.length);for(var L=0;L<n.length;L+=2){var B=z,j=C,O=M(_,g),P=A(_,g),N=y(_,g,v,I,T),D=w(_,g,v,I,T,R),U=this.k[L],F=this.k[L+1],q=n[L],$=n[L+1],H=b(B,j,O,P,N,D,U,F,q,$),K=m(B,j,O,P,N,D,U,F,q,$);B=k(r,i),j=S(r,i),O=x(r,i,o,s,f),P=E(r,i,o,s,f,c);var Y=l(B,j,O,P),Z=d(B,j,O,P);z=T,C=R,T=v,R=I,v=_,I=g,_=l(u,p,H,K),g=d(p,p,H,K),u=f,p=c,f=o,c=s,o=r,s=i,r=l(H,K,Y,Z),i=d(H,K,Y,Z)}h(this.h,0,r,i),h(this.h,2,o,s),h(this.h,4,f,c),h(this.h,6,u,p),h(this.h,8,_,g),h(this.h,10,v,I),h(this.h,12,T,R),h(this.h,14,z,C)},v.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(e,t,n){var r=n(0),i=n(29).Reporter,a=n(2).Buffer;function o(e,t){i.call(this,t),a.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function s(e,t){if(Array.isArray(e))this.length=0,this.value=e.map((function(e){return e instanceof s||(e=new s(e,t)),this.length+=e.length,e}),this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=a.byteLength(e);else{if(!a.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}r(o,i),t.DecoderBuffer=o,o.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},o.prototype.restore=function(e){var t=new o(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,i.prototype.restore.call(this,e.reporter),t},o.prototype.isEmpty=function(){return this.offset===this.length},o.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},o.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");var n=new o(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n},o.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},t.EncoderBuffer=s,s.prototype.join=function(e,t){return e||(e=new a(this.length)),t||(t=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(n){n.join(e,t),t+=n.length})):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):a.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e}},function(e,t,n){var r=t;r._reverse=function(e){var t={};return Object.keys(e).forEach((function(n){(0|n)==n&&(n|=0);var r=e[n];t[r]=n})),t},r.der=n(205)},function(e,t,n){var r=n(0),i=n(28),a=i.base,o=i.bignum,s=i.constants.der;function f(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new c,this.tree._init(e.body)}function c(e){a.Node.call(this,"der",e)}function h(e,t){var n=e.readUInt8(t);if(e.isError(n))return n;var r=s.tagClass[n>>6],i=0==(32&n);if(31==(31&n)){var a=n;for(n=0;128==(128&a);){if(a=e.readUInt8(t),e.isError(a))return a;n<<=7,n|=127&a}}else n&=31;return{cls:r,primitive:i,tag:n,tagStr:s.tag[n]}}function l(e,t,n){var r=e.readUInt8(n);if(e.isError(r))return r;if(!t&&128===r)return null;if(0==(128&r))return r;var i=127&r;if(i>4)return e.error("length octect is too long");r=0;for(var a=0;a<i;a++){r<<=8;var o=e.readUInt8(n);if(e.isError(o))return o;r|=o}return r}e.exports=f,f.prototype.decode=function(e,t){return e instanceof a.DecoderBuffer||(e=new a.DecoderBuffer(e,t)),this.tree._decode(e,t)},r(c,a.Node),c.prototype._peekTag=function(e,t,n){if(e.isEmpty())return!1;var r=e.save(),i=h(e,'Failed to peek tag: "'+t+'"');return e.isError(i)?i:(e.restore(r),i.tag===t||i.tagStr===t||i.tagStr+"of"===t||n)},c.prototype._decodeTag=function(e,t,n){var r=h(e,'Failed to decode tag of "'+t+'"');if(e.isError(r))return r;var i=l(e,r.primitive,'Failed to get length of "'+t+'"');if(e.isError(i))return i;if(!n&&r.tag!==t&&r.tagStr!==t&&r.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(r.primitive||null!==i)return e.skip(i,'Failed to match body of: "'+t+'"');var a=e.save(),o=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(o)?o:(i=e.offset-a.offset,e.restore(a),e.skip(i,'Failed to match body of: "'+t+'"'))},c.prototype._skipUntilEnd=function(e,t){for(;;){var n=h(e,t);if(e.isError(n))return n;var r,i=l(e,n.primitive,t);if(e.isError(i))return i;if(r=n.primitive||null!==i?e.skip(i):this._skipUntilEnd(e,t),e.isError(r))return r;if("end"===n.tagStr)break}},c.prototype._decodeList=function(e,t,n,r){for(var i=[];!e.isEmpty();){var a=this._peekTag(e,"end");if(e.isError(a))return a;var o=n.decode(e,"der",r);if(e.isError(o)&&a)break;i.push(o)}return i},c.prototype._decodeStr=function(e,t){if("bitstr"===t){var n=e.readUInt8();return e.isError(n)?n:{unused:n,data:e.raw()}}if("bmpstr"===t){var r=e.raw();if(r.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");for(var i="",a=0;a<r.length/2;a++)i+=String.fromCharCode(r.readUInt16BE(2*a));return i}if("numstr"===t){var o=e.raw().toString("ascii");return this._isNumstr(o)?o:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){var s=e.raw().toString("ascii");return this._isPrintstr(s)?s:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},c.prototype._decodeObjid=function(e,t,n){for(var r,i=[],a=0;!e.isEmpty();){var o=e.readUInt8();a<<=7,a|=127&o,0==(128&o)&&(i.push(a),a=0)}128&o&&i.push(a);var s=i[0]/40|0,f=i[0]%40;if(r=n?i:[s,f].concat(i.slice(1)),t){var c=t[r.join(" ")];void 0===c&&(c=t[r.join(".")]),void 0!==c&&(r=c)}return r},c.prototype._decodeTime=function(e,t){var n=e.raw().toString();if("gentime"===t)var r=0|n.slice(0,4),i=0|n.slice(4,6),a=0|n.slice(6,8),o=0|n.slice(8,10),s=0|n.slice(10,12),f=0|n.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");r=0|n.slice(0,2),i=0|n.slice(2,4),a=0|n.slice(4,6),o=0|n.slice(6,8),s=0|n.slice(8,10),f=0|n.slice(10,12);r=r<70?2e3+r:1900+r}return Date.UTC(r,i-1,a,o,s,f,0)},c.prototype._decodeNull=function(e){return null},c.prototype._decodeBool=function(e){var t=e.readUInt8();return e.isError(t)?t:0!==t},c.prototype._decodeInt=function(e,t){var n=e.raw(),r=new o(n);return t&&(r=t[r.toString(10)]||r),r},c.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}},function(e,t,n){var r=n(0),i=n(2).Buffer,a=n(28),o=a.base,s=a.constants.der;function f(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new c,this.tree._init(e.body)}function c(e){o.Node.call(this,"der",e)}function h(e){return e<10?"0"+e:e}e.exports=f,f.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},r(c,o.Node),c.prototype._encodeComposite=function(e,t,n,r){var a,o=function(e,t,n,r){var i;"seqof"===e?e="seq":"setof"===e&&(e="set");if(s.tagByName.hasOwnProperty(e))i=s.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return r.error("Unknown tag: "+e);i=e}if(i>=31)return r.error("Multi-octet tag encoding unsupported");t||(i|=32);return i|=s.tagClassByName[n||"universal"]<<6}(e,t,n,this.reporter);if(r.length<128)return(a=new i(2))[0]=o,a[1]=r.length,this._createEncoderBuffer([a,r]);for(var f=1,c=r.length;c>=256;c>>=8)f++;(a=new i(2+f))[0]=o,a[1]=128|f;c=1+f;for(var h=r.length;h>0;c--,h>>=8)a[c]=255&h;return this._createEncoderBuffer([a,r])},c.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){for(var n=new i(2*e.length),r=0;r<e.length;r++)n.writeUInt16BE(e.charCodeAt(r),2*r);return this._createEncoderBuffer(n)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)||"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},c.prototype._encodeObjid=function(e,t,n){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s\.]+/g);for(var r=0;r<e.length;r++)e[r]|=0}else if(Array.isArray(e)){e=e.slice();for(r=0;r<e.length;r++)e[r]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}var a=0;for(r=0;r<e.length;r++){var o=e[r];for(a++;o>=128;o>>=7)a++}var s=new i(a),f=s.length-1;for(r=e.length-1;r>=0;r--){o=e[r];for(s[f--]=127&o;(o>>=7)>0;)s[f--]=128|127&o}return this._createEncoderBuffer(s)},c.prototype._encodeTime=function(e,t){var n,r=new Date(e);return"gentime"===t?n=[h(r.getFullYear()),h(r.getUTCMonth()+1),h(r.getUTCDate()),h(r.getUTCHours()),h(r.getUTCMinutes()),h(r.getUTCSeconds()),"Z"].join(""):"utctime"===t?n=[h(r.getFullYear()%100),h(r.getUTCMonth()+1),h(r.getUTCDate()),h(r.getUTCHours()),h(r.getUTCMinutes()),h(r.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(n,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!i.isBuffer(e)){var n=e.toArray();!e.sign&&128&n[0]&&n.unshift(0),e=new i(n)}if(i.isBuffer(e)){var r=e.length;0===e.length&&r++;var a=new i(r);return e.copy(a),0===e.length&&(a[0]=0),this._createEncoderBuffer(a)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);r=1;for(var o=e;o>=256;o>>=8)r++;for(o=(a=new Array(r)).length-1;o>=0;o--)a[o]=255&e,e>>=8;return 128&a[0]&&a.unshift(0),this._createEncoderBuffer(new i(a))},c.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},c.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},c.prototype._skipDefault=function(e,t,n){var r,i=this._baseState;if(null===i.default)return!1;var a=e.join();if(void 0===i.defaultBuffer&&(i.defaultBuffer=this._encodeValue(i.default,t,n).join()),a.length!==i.defaultBuffer.length)return!1;for(r=0;r<a.length;r++)if(a[r]!==i.defaultBuffer[r])return!1;return!0}},function(e){e.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},function(e,t,n){var r=n(24),i=n(1).Buffer;function a(e){var t=i.allocUnsafe(4);return t.writeUInt32BE(e,0),t}e.exports=function(e,t){for(var n,o=i.alloc(0),s=0;o.length<t;)n=a(s++),o=i.concat([o,r("sha1").update(e).update(n).digest()]);return o.slice(0,t)}},function(e,t){e.exports=function(e,t){for(var n=e.length,r=-1;++r<n;)e[r]^=t[r];return e}},function(e,t,n){var r=n(4),i=n(1).Buffer;e.exports=function(e,t){return i.from(e.toRed(r.mont(t.modulus)).redPow(new r(t.publicExponent)).fromRed().toArray())}},function(e,t,n){"use strict";(function(t){var r=n(229);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function i(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function a(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var o=n(15),s=Object.prototype.hasOwnProperty,f=Array.prototype.slice,c="foo"===function(){}.name;function h(e){return Object.prototype.toString.call(e)}function l(e){return!a(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var d=e.exports=g,u=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(o.isFunction(e)){if(c)return e.name;var t=e.toString().match(u);return t&&t[1]}}function b(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function m(e){if(c||!o.isFunction(e))return o.inspect(e);var t=p(e);return"[Function"+(t?": "+t:"")+"]"}function _(e,t,n,r,i){throw new d.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function g(e,t){e||_(e,!0,t,"==",d.ok)}function v(e,t,n,r){if(e===t)return!0;if(a(e)&&a(t))return 0===i(e,t);if(o.isDate(e)&&o.isDate(t))return e.getTime()===t.getTime();if(o.isRegExp(e)&&o.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(l(e)&&l(t)&&h(e)===h(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===i(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;var s=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==s&&s===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null==e||null==t)return!1;if(o.isPrimitive(e)||o.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=y(e),a=y(t);if(i&&!a||!i&&a)return!1;if(i)return e=f.call(e),t=f.call(t),v(e,t,n);var s,c,h=E(e),l=E(t);if(h.length!==l.length)return!1;for(h.sort(),l.sort(),c=h.length-1;c>=0;c--)if(h[c]!==l[c])return!1;for(c=h.length-1;c>=0;c--)if(s=h[c],!v(e[s],t[s],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function y(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function w(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function x(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&_(i,n,"Missing expected exception"+r);var a="string"==typeof r,s=!e&&i&&!n;if((!e&&o.isError(i)&&a&&w(i,n)||s)&&_(i,n,"Got unwanted exception"+r),e&&i&&n&&!w(i,n)||!e&&i)throw i}d.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return b(m(e.actual),128)+" "+e.operator+" "+b(m(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||_;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=p(t),a=r.indexOf("\n"+i);if(a>=0){var o=r.indexOf("\n",a+1);r=r.substring(o+1)}this.stack=r}}},o.inherits(d.AssertionError,Error),d.fail=_,d.ok=g,d.equal=function(e,t,n){e!=t&&_(e,t,n,"==",d.equal)},d.notEqual=function(e,t,n){e==t&&_(e,t,n,"!=",d.notEqual)},d.deepEqual=function(e,t,n){v(e,t,!1)||_(e,t,n,"deepEqual",d.deepEqual)},d.deepStrictEqual=function(e,t,n){v(e,t,!0)||_(e,t,n,"deepStrictEqual",d.deepStrictEqual)},d.notDeepEqual=function(e,t,n){v(e,t,!1)&&_(e,t,n,"notDeepEqual",d.notDeepEqual)},d.notDeepStrictEqual=function e(t,n,r){v(t,n,!0)&&_(t,n,r,"notDeepStrictEqual",e)},d.strictEqual=function(e,t,n){e!==t&&_(e,t,n,"===",d.strictEqual)},d.notStrictEqual=function(e,t,n){e===t&&_(e,t,n,"!==",d.notStrictEqual)},d.throws=function(e,t,n){x(!0,e,t,n)},d.doesNotThrow=function(e,t,n){x(!1,e,t,n)},d.ifError=function(e){if(e)throw e},d.strict=r((function e(t,n){t||_(t,!0,n,"==",e)}),d,{equal:d.strictEqual,deepEqual:d.deepStrictEqual,notEqual:d.notStrictEqual,notDeepEqual:d.notDeepStrictEqual}),d.strict.strict=d.strict;var E=Object.keys||function(e){var t=[];for(var n in e)s.call(e,n)&&t.push(n);return t}}).call(this,n(10))},function(e,t,n){"use strict";e.exports=function(e,t,n,r){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{a=a+(i=i+t[r++]|0)|0}while(--o);i%=65521,a%=65521}return i|a<<16|0}},function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,i){var a=r,o=i+n;e^=-1;for(var s=i;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}},function(e,t,n){"use strict";const r=n(41),i=n(31);e.exports=class{constructor(e){this.editor=e}build_menu(){return this.build_menu_base()}build_menu_item({label:e="",click_handler:t=null,click_handler_args:n=[],submenu:a=null,submenu_args:o=[],close_on_click:s,disabled:f=!1,classes_to_add:c=[],fa_icon:h=null}={}){void 0===s&&(s=!!t);let l=document.createElement("div");if(h){let e=document.createElement("span");e.classList.add("fas"),e.classList.add(h),l.appendChild(e)}return e instanceof Array?l.append(...e):l.append(e),l.classList.add("button","dropdown-item",...c),f&&l.classList.add("disabled"),a&&!f&&(l.classList.add("dropdown"),l.addEventListener("mouseover",e=>{if(e.defaultPrevented)return;if(e.preventDefault(),l.querySelector(".dropdown-content"))return;let t=a.build_menu(...o);a&&r(l,t)})),l.addEventListener("mousedown",async e=>{if(s&&!f&&document.activeElement.blur(),e.preventDefault(),t&&!f)try{await t.call(this,e,...n)}catch(e){console.error(e),new i(this.editor,{title:"Error",message:""+e,modal:!1,message_classes:["error-text"]})}}),l}build_menu_base(){let e=document.createElement("div");return e.classList.add("dropdown-content","menu-dropdown"),e}add_to_menubar(e,t){let n=document.createElement("div");n.classList.add("button","menubar-item"),n.textContent=t,n.addEventListener("mousedown",e=>{if(e.defaultPrevented)return;let t=this.build_menu();r(n,t),e.preventDefault()}),e.appendChild(n)}}},function(e,t,n){const r=n(12);e.exports=class extends r{constructor(e,{modal:t=!0,changelog_data:n}={}){super(e,{title:"What's New",width:500,height:500,modal:t,can_close:!0});let r=n.slice(Math.max(n.length-100,0)),i=null,a=null,o=[],s=null;for(let e=0;e<r.length;e++){let t=r[e];if(t.date==i&&i){if(t.author!=a){s=document.createElement("ul"),o.push(s);let e=document.createElement("h3");e.textContent=t.author,o.push(e),a=t.author}}else{s=document.createElement("ul"),o.push(s);let e=document.createElement("h3");e.textContent=t.author,o.push(e);let n=document.createElement("h2");n.textContent=t.date,o.push(n),i=t.date,a=t.author}let n=document.createElement("li");n.textContent=t.desc,s.children.length?s.insertBefore(n,s.firstChild):s.appendChild(n)}o.reverse();for(let e of o)this.content_obj.appendChild(e)}}},function(e,t,n){"use strict";const r=n(63),i=n(40),{Instance:a}=n(7),o=n(22),s=n(62);class f extends i{mousedown(e){e.dmm==this.dmm&&(this.tiles=new Set,this.instance=new a(this.editor.parser,this.type),this.mousemove(e))}mousemove(e){e.dmm==this.dmm&&(this.tiles.has(e)||(this.tiles.add(e),e.place(this.instance.copy())))}mouseup(){this.dmm.push_undo()}visualize(e){}}class c extends i{mousedown(e){if(e.dmm!=this.dmm)return;this.tile=e;let t=new a(this.editor.parser,this.type),n=t.get_fastdmm_prop("dir_amount",t.make_eval_context())||0,r=this.editor.pipe_manager.get_pipe_type(t)==s.PIPE_TYPE_CABLE;if(!n&&r&&(n=8),!n){n=1;let e=t.get_appearance();if(e.icon){let t=this.editor.map_window.icons.get(e.icon.toLowerCase());if(t){let r=t.icon_states.get(e.icon_state)||t.icon_states.get("")||t.icon_states.get(" ");r&&(n=r.dir_count||1)}}}this.dir_count=n,this.is_cable=r,this.instance=t}mousemove(e){if(e.dmm!=this.dmm)return;let t=4==this.dir_count||8==this.dir_count?this.tile.get_dir(e,4==this.dir_count):2;if(0!=t)if(this.is_cable){let e="0-"+t;if(e!=this.instance.get_var("icon_state")){let t=new Map(this.instance.vars);this.instance.type_obj&&this.instance.type_obj.get_var("icon_state")==e?t.delete("icon_state"):t.set("icon_state",e),this.instance=new a(this.editor.parser,this.instance.type,t)}}else if(t!=this.instance.get_var("dir")){let e=new Map(this.instance.vars);this.instance.type_obj&&this.instance.type_obj.get_var("dir")==t?e.delete("dir"):e.set("dir",t),this.instance=new a(this.editor.parser,this.instance.type,e)}}mouseup(){this.tile.place(this.instance.copy()),this.dmm.push_undo()}visualize(e){e.push(new o(this.instance.get_appearance(),this.tile.x,this.tile.y,this.tile.z))}}class h extends i{mousedown(e){e.dmm==this.dmm&&(this.x1=e.x,this.y1=e.y,this.z1=e.z,this.x2=this.x1,this.y2=this.y1,this.z2=this.z1,this.instance=new a(this.editor.parser,this.type))}mousemove(e){e.dmm==this.dmm&&(this.x2=e.x,this.y2=e.y,this.z2=e.z)}mouseup(){let e=Math.min(this.x1,this.x2),t=Math.max(this.x1,this.x2),n=Math.min(this.y1,this.y2),r=Math.max(this.y1,this.y2),i=Math.min(this.z1,this.z2),a=Math.max(this.z1,this.z2);for(let o=i;o<=a;o++)for(let i=n;i<=r;i++)for(let n=e;n<=t;n++){let e=this.dmm.get_tile(n,i,o);e&&e.place(this.instance.copy())}this.dmm.push_undo()}visualize(e){let t=this.instance.get_appearance(),n=Math.min(this.x1,this.x2),r=Math.max(this.x1,this.x2),i=Math.min(this.y1,this.y2),a=Math.max(this.y1,this.y2),s=Math.min(this.z1,this.z2),f=Math.max(this.z1,this.z2);for(let c=s;c<=f;c++)for(let s=i;s<=a;s++)for(let i=n;i<=r;i++){let n=this.dmm.get_tile(i,s,c);e.push(new o(t,n.x,n.y,n.z))}}get_status_text(){return`${Math.abs(this.x2-this.x1)+1}x${Math.abs(this.y2-this.y1)+1}x${Math.abs(this.z2-this.z1)+1} (${this.x1},${this.y1},${this.z1})-(${this.x2},${this.y2},${this.z2})`}}class l extends r{get_handler(e,t,n){if(!this.is_pixel&&n)return e.shiftKey?new h(this.editor,t,n):e.ctrlKey?new c(this.editor,t,n):new f(this.editor,t,n)}}l.HandlerDefault=f,l.HandlerBlock=h,l.fa_icon="fa-plus",l.description="Placement",l.usage="Click - Place Object\nShift Click/Drag - Block Placement\nCtrl Click - Directional Placement\nCtrl Shift Click - Make Active Object, View Variables\nCtrl Shift Middle Click - Delete Object",l.uses_instance_panel=!0,e.exports=l},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(o=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),f="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(f," */")),a=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(a).concat([i]).join("\n")}var o,s,f;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var s=0;s<e.length;s++){var f=[].concat(e[s]);r&&i[f[0]]||(n&&(f[2]?f[2]="".concat(n," and ").concat(f[2]):f[2]=n),t.push(f))}},t}},function(e,t,n){"use strict";t.a=n.p+"fa-solid-900.woff2"},function(e,t,n){"use strict";t.a=n.p+"fa-solid-900.woff"},function(e,t,n){"use strict";t.a=n.p+"fa-solid-900.ttf"},function(e,t,n){"use strict";t.a=n.p+"fa-solid-900.svg"},function(e,t,n){"use strict";t.a=n.p+"fa-regular-400.woff2"},function(e,t,n){"use strict";t.a=n.p+"fa-regular-400.woff"},function(e,t,n){"use strict";t.a=n.p+"fa-regular-400.ttf"},function(e,t,n){"use strict";t.a=n.p+"fa-regular-400.svg"},function(e,t,n){"use strict";n.r(t);n(122);"serviceWorker"in navigator&&(navigator.serviceWorker.addEventListener("message",e=>{"new-update"==e.data&&(window.editor&&window.editor.has_meaningful_interact?window.editor.notification("There is a new update to FastDMM2. Reload it."):window.location.reload())}),navigator.serviceWorker.register("sw.js"),navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage("i-exist"));const r=n(125);window.addEventListener("DOMContentLoaded",()=>{window.editor=new r}),fetch("https://api.github.com",{headers:{authorization:"token "+localStorage.getItem("gh_token")}}).then(e=>e.json()).then(e=>{"Bad credentials"==e.message&&localStorage.removeItem("gh_token")})},function(e,t,n){var r=n(123),i=n(124);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1};r(i,a);e.exports=i.locals||{}},function(e,t,n){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function s(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function f(e,t){for(var n={},r=[],i=0;i<e.length;i++){var a=e[i],f=t.base?a[0]+t.base:a[0],c=n[f]||0,h="".concat(f," ").concat(c);n[f]=c+1;var l=s(h),d={css:a[1],media:a[2],sourceMap:a[3]};-1!==l?(o[l].references++,o[l].updater(d)):o.push({identifier:h,updater:m(d,t),references:1}),r.push(h)}return r}function c(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=a(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var h,l=(h=[],function(e,t){return h[e]=t,h.filter(Boolean).join("\n")});function d(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=l(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function u(e,t,n){var r=n.css,i=n.media,a=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,b=0;function m(e,t){var n,r,i;if(t.singleton){var a=b++;n=p||(p=c(t)),r=d.bind(null,n,a,!1),i=d.bind(null,n,a,!0)}else n=c(t),r=u.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=f(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=s(n[r]);o[i].references--}for(var a=f(e,t),c=0;c<n.length;c++){var h=s(n[c]);0===o[h].references&&(o[h].updater(),o.splice(h,1))}n=a}}}},function(e,t,n){"use strict";n.r(t);var r=n(112),i=n.n(r),a=n(6),o=n.n(a),s=n(64),f=n(113),c=n(114),h=n(115),l=n(116),d=n(65),u=n(117),p=n(118),b=n(119),m=n(120),_=i()(!1),g=o()(s.a),v=o()(s.a,{hash:"?#iefix"}),y=o()(f.a),w=o()(c.a),x=o()(h.a),E=o()(l.a,{hash:"#fontawesome"}),k=o()(d.a),S=o()(d.a,{hash:"?#iefix"}),M=o()(u.a),A=o()(p.a),I=o()(b.a),T=o()(m.a,{hash:"#fontawesome"});_.push([e.i,".no-user-select {\n  user-select: none;\n  -moz-user-select: none;\n  -khtml-user-select: none;\n  -webkit-user-select: none;\n  -webkit-touch-callout: none;\n  -o-user-select: none;\n}\n.pixelate {\n  image-rendering: optimizeSpeed;\n  image-rendering: -moz-crisp-edges;\n  image-rendering: -o-crisp-edges;\n  image-rendering: -webkit-optimize-contrast;\n  image-rendering: pixelated;\n  image-rendering: optimize-contrast;\n}\n/*!\n * Font Awesome Free 5.12.0 by @fontawesome - https://fontawesome.com\n * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)\n */\n@font-face {\n  font-family: 'Font Awesome 5 Free';\n  font-style: normal;\n  font-weight: 900;\n  font-display: auto;\n  src: url("+g+");\n  src: url("+v+") format('embedded-opentype'), url("+y+") format('woff2'), url("+w+") format('woff'), url("+x+") format('truetype'), url("+E+') format(\'svg\');\n}\n.fa,\n.fas {\n  font-family: \'Font Awesome 5 Free\';\n  font-weight: 900;\n}\n.bar {\n  display: block;\n  position: relative;\n  /*vertical-align: middle;*/\n  height: 20px;\n  line-height: 17px;\n  padding: 1px;\n  margin: 2px;\n  border: 1px solid #40628a;\n  background: #272727;\n  color: #ffffff;\n}\n.bar:after {\n  content: attr(data-bar-label);\n  position: relative;\n  vertical-align: middle;\n}\n.bar[data-status-color]:after {\n  color: #ffffff;\n}\n.bar .bar-fill {\n  position: absolute;\n  top: 0px;\n  bottom: 0px;\n  background-color: #40628a;\n}\n.bar .bar-fill:not(.bar-fill-inverse) {\n  left: 0px;\n}\n.bar .bar-fill.bar-fill-inverse {\n  right: 0px;\n}\n[data-status-color="good"].bar .bar-fill {\n  background-color: #537d29;\n}\n[data-status-color="average"].bar .bar-fill {\n  background-color: #be6209;\n}\n[data-status-color="bad"].bar .bar-fill {\n  background-color: #b00e0e;\n}\n.button {\n  display: inline-block;\n  min-width: 15px;\n  line-height: 16px;\n  box-sizing: border-box;\n  text-align: center;\n  color: #ffffff;\n  text-decoration: none;\n  background: #40628a;\n  border: 1px solid #161616;\n  padding: 2px 4px;\n  margin: 0 2px 2px 0;\n  cursor: default;\n  white-space: nowrap;\n  vertical-align: middle;\n}\n.button.on,\n.button.selected,\n.button.selected:hover,\n.button.selected:active {\n  background: #2f943c;\n}\n.button.on:hover {\n  background: #3fac5e;\n}\n.button.disabled,\n.disabled .button,\n.button.disabled:hover,\n.disabled .button:hover,\n.button.disabled:active,\n.disabled .button:active,\n.button.disabled.yellow,\n.disabled .button.yellow,\n.button.disabled.yellow:hover,\n.disabled .button.yellow:hover,\n.button.disabled.red,\n.disabled .button.red,\n.button.disabled.red:hover,\n.disabled .button.red:hover,\n.button.disabled.white,\n.disabled .button.white,\n.button.disabled.white:hover,\n.disabled .button.white:hover {\n  background: #999999;\n  border-color: #666666;\n}\n.button.yellow {\n  background: #a9aa00;\n}\n.button.yellow:hover {\n  background: #bce402;\n}\n.button.red {\n  background: #ea0000;\n}\n.button.red:hover {\n  background: #fa1822;\n}\n.button.white {\n  background: #fff;\n}\n.button.white:hover,\n.button.white.selected {\n  background: #ddd;\n}\n.button:hover {\n  background: #507aac;\n}\ndiv.button:active {\n  transform: translate(1px, 1px);\n}\ndiv.button:active.disabled,\n.disabled div.button:active,\ndiv.button:active.selected,\ndiv.button:active.nopress,\ndiv.button:active.dropdown,\ndiv.button:active.dropdown-item,\ndiv.button:active.menubar-item {\n  transform: none;\n}\n.button.nocenter {\n  text-align: left;\n}\n.button.dropdown:after {\n  content: " \\2bc6";\n  float: right;\n}\n.button.dropdown-item.dropdown:after {\n  content: " \\2bc8";\n}\n.button.editable-dropdown {\n  overflow: hidden;\n  width: 200px;\n}\n.button.dropdown-item {\n  display: block;\n  border: none;\n  margin: 0px;\n  line-height: 16px;\n  padding-right: 10px;\n}\n.button.dropdown-item.map-instance-dropdown-item {\n  padding: 0px 10px 0px 0px;\n}\n.menu-dropdown .button.dropdown-item {\n  text-align: left;\n}\n.button.dropdown-item img,\n.button.dropdown-item canvas {\n  max-height: 32px;\n  max-width: 64px;\n  float: left;\n  margin: 0px 3px 0px 0px;\n}\n.button.menubar-item {\n  height: 100%;\n  margin: 0px;\n  padding: 0px 16px 0px 16px;\n  border: none;\n  vertical-align: middle;\n  line-height: 27px;\n  box-sizing: border-box;\n}\n.dropdown-content {\n  position: fixed;\n  overflow-x: hidden;\n  overflow-y: auto;\n  border: 1px solid #161616;\n  background: #40628a;\n  z-index: 1;\n  scrollbar-width: thin;\n}\n.dropdown-content:focus {\n  outline: none;\n}\n#uiframes-container .uiframe-container .uiframe,\n.uiframe-modal .uiframe-container .uiframe {\n  /*.uiframe-footer.edit-vars-footer {\n\t\t\tflex-basis: auto;\n\t\t\ttext-align: center;\n\t\t\tvertical-align: middle;\n\t\t\tpadding: 5px;\n\t\t}*/\n}\n#uiframes-container .uiframe-container .uiframe .uiframe-content.edit-vars-content,\n.uiframe-modal .uiframe-container .uiframe .uiframe-content.edit-vars-content {\n  padding: 0px;\n}\n#uiframes-container .uiframe-container .uiframe .uiframe-content.edit-vars-content .vv-search-box,\n.uiframe-modal .uiframe-container .uiframe .uiframe-content.edit-vars-content .vv-search-box {\n  width: 100%;\n  box-sizing: border-box;\n}\n#uiframes-container .uiframe-container .uiframe .uiframe-content.edit-vars-content table,\n.uiframe-modal .uiframe-container .uiframe .uiframe-content.edit-vars-content table {\n  margin: 0px;\n  max-width: 100%;\n  border-collapse: collapse;\n  width: 100%;\n  table-layout: fixed;\n}\n#uiframes-container .uiframe-container .uiframe .uiframe-content.edit-vars-content table td,\n.uiframe-modal .uiframe-container .uiframe .uiframe-content.edit-vars-content table td {\n  border-left: 1px solid #444444;\n  border-bottom: 1px solid #444444;\n  word-wrap: break-word;\n  overflow: hidden;\n  color: #bbbbbb;\n}\n#uiframes-container .uiframe-container .uiframe .uiframe-content.edit-vars-content table td.var-value-modified,\n.uiframe-modal .uiframe-container .uiframe .uiframe-content.edit-vars-content table td.var-value-modified {\n  font-weight: bold;\n  color: #ffffff;\n}\n#uiframes-container .uiframe-container .uiframe .uiframe-content.edit-vars-content table th,\n.uiframe-modal .uiframe-container .uiframe .uiframe-content.edit-vars-content table th {\n  text-align: left;\n  background-color: #444444;\n  font-weight: bold;\n  overflow: hidden;\n  word-wrap: break-word;\n}\n.item-group {\n  border: 1px solid #e9c183;\n  background: #2c2c2c;\n  padding: 4px;\n  clear: both;\n}\n.error-text {\n  color: red;\n}\n.warning-text {\n  color: yellow;\n}\n.unimportant-text {\n  color: lightgrey;\n}\n.item {\n  width: 100%;\n  margin: 4px 0 0 0;\n  clear: both;\n  overflow: auto;\n}\n.item-content-narrow,\n.item-content {\n  float: left;\n}\n.item-content-narrow {\n  width: 30%;\n}\n.item-content {\n  width: 69%;\n}\n.item-label-narrow,\n.item-label,\n.item-label-wide,\n.item-label-wider,\n.item-label-widest {\n  float: left;\n  color: #e9c183;\n}\n.item-label-narrow {\n  width: 20%;\n}\n.item-label {\n  width: 30%;\n}\n.item-label-wide {\n  width: 45%;\n}\n.item-label-wider {\n  width: 69%;\n}\n.item-label-widest {\n  width: 100%;\n}\n.item-content-wide {\n  float: left;\n  width: 79%;\n}\n.item-content-small {\n  float: left;\n  width: 33%;\n}\n.item-content-medium {\n  float: left;\n  width: 55%;\n}\n.block {\n  padding: 8px;\n  margin: 10px 4px 4px 4px;\n  border: 1px solid #40628a;\n  background-color: #202020;\n}\n.block h3 {\n  padding: 0;\n}\n.clear-both {\n  clear: both;\n}\n.clear-left {\n  clear: left;\n}\n.clear-right {\n  clear: right;\n}\n.line {\n  width: 100%;\n  clear: both;\n}\n.fixed-left {\n  width: 110px;\n  float: left;\n}\n.fixed-left-wide {\n  width: 165px;\n  float: left;\n}\n.fixed-left-wider {\n  width: 220px;\n  float: left;\n}\n.fixed-left-widest {\n  width: 250px;\n  float: left;\n}\n.float-right {\n  float: right;\n}\n.float-left {\n  float: left;\n}\n.hidden {\n  display: none;\n}\n.status-display {\n  background: rgba(0, 0, 0, 0.5);\n  color: #ffffff;\n  border: 1px solid #40628a;\n  padding: 4px;\n  margin: 3px 0;\n  overflow: hidden;\n}\n.status-display-records {\n  background: rgba(0, 0, 0, 0.5);\n  color: #ffffff;\n  border: 1px solid #40628a;\n  padding: 4px;\n  margin: 3px 0;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.status-label {\n  width: 138px;\n  float: left;\n  overflow: hidden;\n  color: #98B0C3;\n}\n.status-value {\n  float: left;\n}\n.job-values {\n  float: left;\n  width: 30%;\n}\n.vertical-margins {\n  margin-top: 22px;\n  margin-bottom: 22px;\n}\n.small-vertical-margins {\n  margin-top: 5px;\n  margin-bottom: 5px;\n}\n.center {\n  text-align: center;\n}\n.zebrastripe:nth-child(even) {\n  background-color: #fff2;\n}\n.flex-horizontal {\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: space-evenly;\n}\n.flex-horizontal.wrap {\n  flex-wrap: wrap;\n}\n.flex-vertical {\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: space-evenly;\n}\n.flex-vertical.wrap {\n  flex-wrap: wrap;\n}\n.uiframe h1,\n.uiframe h2,\n.uiframe h3,\n.uiframe h4,\n.uiframe h5,\n.uiframe h6 {\n  margin: 0;\n  padding: 16px 0 8px 0;\n  color: #517087;\n}\n.uiframe h1 {\n  font-size: 15px;\n}\n.uiframe h2 {\n  font-size: 14px;\n}\n.uiframe h3 {\n  font-size: 13px;\n}\n.uiframe h4 {\n  font-size: 12px;\n}\na {\n  color: lightgrey;\n  text-decoration: none;\n}\na:hover {\n  color: white;\n}\na:active {\n  color: white;\n}\na:visited {\n  color: lightgrey;\n}\n/*!\n * Font Awesome Free 5.12.0 by @fontawesome - https://fontawesome.com\n * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)\n */\n.fa,\n.fas,\n.far,\n.fal,\n.fad,\n.fab {\n  -moz-osx-font-smoothing: grayscale;\n  -webkit-font-smoothing: antialiased;\n  display: inline-block;\n  font-style: normal;\n  font-variant: normal;\n  text-rendering: auto;\n  line-height: 1;\n}\n/* makes the font 33% larger relative to the icon container */\n.fa-lg {\n  font-size: 1.33333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n.fa-xs {\n  font-size: 0.75em;\n}\n.fa-sm {\n  font-size: 0.875em;\n}\n.fa-1x {\n  font-size: 1em;\n}\n.fa-2x {\n  font-size: 2em;\n}\n.fa-3x {\n  font-size: 3em;\n}\n.fa-4x {\n  font-size: 4em;\n}\n.fa-5x {\n  font-size: 5em;\n}\n.fa-6x {\n  font-size: 6em;\n}\n.fa-7x {\n  font-size: 7em;\n}\n.fa-8x {\n  font-size: 8em;\n}\n.fa-9x {\n  font-size: 9em;\n}\n.fa-10x {\n  font-size: 10em;\n}\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n.fa-border {\n  border-radius: 0.1em;\n  border: solid 0.08em #eee;\n  padding: 0.2em 0.25em 0.15em;\n}\n.fa-pull-left {\n  float: left;\n}\n.fa-pull-right {\n  float: right;\n}\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n.fa-spin {\n  animation: fa-spin 2s infinite linear;\n}\n.fa-pulse {\n  animation: fa-spin 1s infinite steps(8);\n}\n@keyframes fa-spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  transform: rotate(90deg);\n}\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  transform: rotate(180deg);\n}\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  transform: rotate(270deg);\n}\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  transform: scale(-1, 1);\n}\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  transform: scale(1, -1);\n}\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  transform: scale(-1, -1);\n}\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  filter: none;\n}\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  line-height: 2em;\n  position: relative;\n  vertical-align: middle;\n  width: 2em;\n}\n.fa-stack-1x,\n.fa-stack-2x {\n  left: 0;\n  position: absolute;\n  text-align: center;\n  width: 100%;\n}\n.fa-stack-1x {\n  line-height: inherit;\n}\n.fa-stack-2x {\n  font-size: 2em;\n}\n.fa-inverse {\n  color: #fff;\n}\n/* Font Awesome uses the Unicode Private Use Area (PUA) to ensure screen\n   readers do not read off random characters that represent icons */\n.fa-500px:before {\n  content: "\\f26e";\n}\n.fa-accessible-icon:before {\n  content: "\\f368";\n}\n.fa-accusoft:before {\n  content: "\\f369";\n}\n.fa-acquisitions-incorporated:before {\n  content: "\\f6af";\n}\n.fa-ad:before {\n  content: "\\f641";\n}\n.fa-address-book:before {\n  content: "\\f2b9";\n}\n.fa-address-card:before {\n  content: "\\f2bb";\n}\n.fa-adjust:before {\n  content: "\\f042";\n}\n.fa-adn:before {\n  content: "\\f170";\n}\n.fa-adobe:before {\n  content: "\\f778";\n}\n.fa-adversal:before {\n  content: "\\f36a";\n}\n.fa-affiliatetheme:before {\n  content: "\\f36b";\n}\n.fa-air-freshener:before {\n  content: "\\f5d0";\n}\n.fa-airbnb:before {\n  content: "\\f834";\n}\n.fa-algolia:before {\n  content: "\\f36c";\n}\n.fa-align-center:before {\n  content: "\\f037";\n}\n.fa-align-justify:before {\n  content: "\\f039";\n}\n.fa-align-left:before {\n  content: "\\f036";\n}\n.fa-align-right:before {\n  content: "\\f038";\n}\n.fa-alipay:before {\n  content: "\\f642";\n}\n.fa-allergies:before {\n  content: "\\f461";\n}\n.fa-amazon:before {\n  content: "\\f270";\n}\n.fa-amazon-pay:before {\n  content: "\\f42c";\n}\n.fa-ambulance:before {\n  content: "\\f0f9";\n}\n.fa-american-sign-language-interpreting:before {\n  content: "\\f2a3";\n}\n.fa-amilia:before {\n  content: "\\f36d";\n}\n.fa-anchor:before {\n  content: "\\f13d";\n}\n.fa-android:before {\n  content: "\\f17b";\n}\n.fa-angellist:before {\n  content: "\\f209";\n}\n.fa-angle-double-down:before {\n  content: "\\f103";\n}\n.fa-angle-double-left:before {\n  content: "\\f100";\n}\n.fa-angle-double-right:before {\n  content: "\\f101";\n}\n.fa-angle-double-up:before {\n  content: "\\f102";\n}\n.fa-angle-down:before {\n  content: "\\f107";\n}\n.fa-angle-left:before {\n  content: "\\f104";\n}\n.fa-angle-right:before {\n  content: "\\f105";\n}\n.fa-angle-up:before {\n  content: "\\f106";\n}\n.fa-angry:before {\n  content: "\\f556";\n}\n.fa-angrycreative:before {\n  content: "\\f36e";\n}\n.fa-angular:before {\n  content: "\\f420";\n}\n.fa-ankh:before {\n  content: "\\f644";\n}\n.fa-app-store:before {\n  content: "\\f36f";\n}\n.fa-app-store-ios:before {\n  content: "\\f370";\n}\n.fa-apper:before {\n  content: "\\f371";\n}\n.fa-apple:before {\n  content: "\\f179";\n}\n.fa-apple-alt:before {\n  content: "\\f5d1";\n}\n.fa-apple-pay:before {\n  content: "\\f415";\n}\n.fa-archive:before {\n  content: "\\f187";\n}\n.fa-archway:before {\n  content: "\\f557";\n}\n.fa-arrow-alt-circle-down:before {\n  content: "\\f358";\n}\n.fa-arrow-alt-circle-left:before {\n  content: "\\f359";\n}\n.fa-arrow-alt-circle-right:before {\n  content: "\\f35a";\n}\n.fa-arrow-alt-circle-up:before {\n  content: "\\f35b";\n}\n.fa-arrow-circle-down:before {\n  content: "\\f0ab";\n}\n.fa-arrow-circle-left:before {\n  content: "\\f0a8";\n}\n.fa-arrow-circle-right:before {\n  content: "\\f0a9";\n}\n.fa-arrow-circle-up:before {\n  content: "\\f0aa";\n}\n.fa-arrow-down:before {\n  content: "\\f063";\n}\n.fa-arrow-left:before {\n  content: "\\f060";\n}\n.fa-arrow-right:before {\n  content: "\\f061";\n}\n.fa-arrow-up:before {\n  content: "\\f062";\n}\n.fa-arrows-alt:before {\n  content: "\\f0b2";\n}\n.fa-arrows-alt-h:before {\n  content: "\\f337";\n}\n.fa-arrows-alt-v:before {\n  content: "\\f338";\n}\n.fa-artstation:before {\n  content: "\\f77a";\n}\n.fa-assistive-listening-systems:before {\n  content: "\\f2a2";\n}\n.fa-asterisk:before {\n  content: "\\f069";\n}\n.fa-asymmetrik:before {\n  content: "\\f372";\n}\n.fa-at:before {\n  content: "\\f1fa";\n}\n.fa-atlas:before {\n  content: "\\f558";\n}\n.fa-atlassian:before {\n  content: "\\f77b";\n}\n.fa-atom:before {\n  content: "\\f5d2";\n}\n.fa-audible:before {\n  content: "\\f373";\n}\n.fa-audio-description:before {\n  content: "\\f29e";\n}\n.fa-autoprefixer:before {\n  content: "\\f41c";\n}\n.fa-avianex:before {\n  content: "\\f374";\n}\n.fa-aviato:before {\n  content: "\\f421";\n}\n.fa-award:before {\n  content: "\\f559";\n}\n.fa-aws:before {\n  content: "\\f375";\n}\n.fa-baby:before {\n  content: "\\f77c";\n}\n.fa-baby-carriage:before {\n  content: "\\f77d";\n}\n.fa-backspace:before {\n  content: "\\f55a";\n}\n.fa-backward:before {\n  content: "\\f04a";\n}\n.fa-bacon:before {\n  content: "\\f7e5";\n}\n.fa-bahai:before {\n  content: "\\f666";\n}\n.fa-balance-scale:before {\n  content: "\\f24e";\n}\n.fa-balance-scale-left:before {\n  content: "\\f515";\n}\n.fa-balance-scale-right:before {\n  content: "\\f516";\n}\n.fa-ban:before {\n  content: "\\f05e";\n}\n.fa-band-aid:before {\n  content: "\\f462";\n}\n.fa-bandcamp:before {\n  content: "\\f2d5";\n}\n.fa-barcode:before {\n  content: "\\f02a";\n}\n.fa-bars:before {\n  content: "\\f0c9";\n}\n.fa-baseball-ball:before {\n  content: "\\f433";\n}\n.fa-basketball-ball:before {\n  content: "\\f434";\n}\n.fa-bath:before {\n  content: "\\f2cd";\n}\n.fa-battery-empty:before {\n  content: "\\f244";\n}\n.fa-battery-full:before {\n  content: "\\f240";\n}\n.fa-battery-half:before {\n  content: "\\f242";\n}\n.fa-battery-quarter:before {\n  content: "\\f243";\n}\n.fa-battery-three-quarters:before {\n  content: "\\f241";\n}\n.fa-battle-net:before {\n  content: "\\f835";\n}\n.fa-bed:before {\n  content: "\\f236";\n}\n.fa-beer:before {\n  content: "\\f0fc";\n}\n.fa-behance:before {\n  content: "\\f1b4";\n}\n.fa-behance-square:before {\n  content: "\\f1b5";\n}\n.fa-bell:before {\n  content: "\\f0f3";\n}\n.fa-bell-slash:before {\n  content: "\\f1f6";\n}\n.fa-bezier-curve:before {\n  content: "\\f55b";\n}\n.fa-bible:before {\n  content: "\\f647";\n}\n.fa-bicycle:before {\n  content: "\\f206";\n}\n.fa-biking:before {\n  content: "\\f84a";\n}\n.fa-bimobject:before {\n  content: "\\f378";\n}\n.fa-binoculars:before {\n  content: "\\f1e5";\n}\n.fa-biohazard:before {\n  content: "\\f780";\n}\n.fa-birthday-cake:before {\n  content: "\\f1fd";\n}\n.fa-bitbucket:before {\n  content: "\\f171";\n}\n.fa-bitcoin:before {\n  content: "\\f379";\n}\n.fa-bity:before {\n  content: "\\f37a";\n}\n.fa-black-tie:before {\n  content: "\\f27e";\n}\n.fa-blackberry:before {\n  content: "\\f37b";\n}\n.fa-blender:before {\n  content: "\\f517";\n}\n.fa-blender-phone:before {\n  content: "\\f6b6";\n}\n.fa-blind:before {\n  content: "\\f29d";\n}\n.fa-blog:before {\n  content: "\\f781";\n}\n.fa-blogger:before {\n  content: "\\f37c";\n}\n.fa-blogger-b:before {\n  content: "\\f37d";\n}\n.fa-bluetooth:before {\n  content: "\\f293";\n}\n.fa-bluetooth-b:before {\n  content: "\\f294";\n}\n.fa-bold:before {\n  content: "\\f032";\n}\n.fa-bolt:before {\n  content: "\\f0e7";\n}\n.fa-bomb:before {\n  content: "\\f1e2";\n}\n.fa-bone:before {\n  content: "\\f5d7";\n}\n.fa-bong:before {\n  content: "\\f55c";\n}\n.fa-book:before {\n  content: "\\f02d";\n}\n.fa-book-dead:before {\n  content: "\\f6b7";\n}\n.fa-book-medical:before {\n  content: "\\f7e6";\n}\n.fa-book-open:before {\n  content: "\\f518";\n}\n.fa-book-reader:before {\n  content: "\\f5da";\n}\n.fa-bookmark:before {\n  content: "\\f02e";\n}\n.fa-bootstrap:before {\n  content: "\\f836";\n}\n.fa-border-all:before {\n  content: "\\f84c";\n}\n.fa-border-none:before {\n  content: "\\f850";\n}\n.fa-border-style:before {\n  content: "\\f853";\n}\n.fa-bowling-ball:before {\n  content: "\\f436";\n}\n.fa-box:before {\n  content: "\\f466";\n}\n.fa-box-open:before {\n  content: "\\f49e";\n}\n.fa-boxes:before {\n  content: "\\f468";\n}\n.fa-braille:before {\n  content: "\\f2a1";\n}\n.fa-brain:before {\n  content: "\\f5dc";\n}\n.fa-bread-slice:before {\n  content: "\\f7ec";\n}\n.fa-briefcase:before {\n  content: "\\f0b1";\n}\n.fa-briefcase-medical:before {\n  content: "\\f469";\n}\n.fa-broadcast-tower:before {\n  content: "\\f519";\n}\n.fa-broom:before {\n  content: "\\f51a";\n}\n.fa-brush:before {\n  content: "\\f55d";\n}\n.fa-btc:before {\n  content: "\\f15a";\n}\n.fa-buffer:before {\n  content: "\\f837";\n}\n.fa-bug:before {\n  content: "\\f188";\n}\n.fa-building:before {\n  content: "\\f1ad";\n}\n.fa-bullhorn:before {\n  content: "\\f0a1";\n}\n.fa-bullseye:before {\n  content: "\\f140";\n}\n.fa-burn:before {\n  content: "\\f46a";\n}\n.fa-buromobelexperte:before {\n  content: "\\f37f";\n}\n.fa-bus:before {\n  content: "\\f207";\n}\n.fa-bus-alt:before {\n  content: "\\f55e";\n}\n.fa-business-time:before {\n  content: "\\f64a";\n}\n.fa-buy-n-large:before {\n  content: "\\f8a6";\n}\n.fa-buysellads:before {\n  content: "\\f20d";\n}\n.fa-calculator:before {\n  content: "\\f1ec";\n}\n.fa-calendar:before {\n  content: "\\f133";\n}\n.fa-calendar-alt:before {\n  content: "\\f073";\n}\n.fa-calendar-check:before {\n  content: "\\f274";\n}\n.fa-calendar-day:before {\n  content: "\\f783";\n}\n.fa-calendar-minus:before {\n  content: "\\f272";\n}\n.fa-calendar-plus:before {\n  content: "\\f271";\n}\n.fa-calendar-times:before {\n  content: "\\f273";\n}\n.fa-calendar-week:before {\n  content: "\\f784";\n}\n.fa-camera:before {\n  content: "\\f030";\n}\n.fa-camera-retro:before {\n  content: "\\f083";\n}\n.fa-campground:before {\n  content: "\\f6bb";\n}\n.fa-canadian-maple-leaf:before {\n  content: "\\f785";\n}\n.fa-candy-cane:before {\n  content: "\\f786";\n}\n.fa-cannabis:before {\n  content: "\\f55f";\n}\n.fa-capsules:before {\n  content: "\\f46b";\n}\n.fa-car:before {\n  content: "\\f1b9";\n}\n.fa-car-alt:before {\n  content: "\\f5de";\n}\n.fa-car-battery:before {\n  content: "\\f5df";\n}\n.fa-car-crash:before {\n  content: "\\f5e1";\n}\n.fa-car-side:before {\n  content: "\\f5e4";\n}\n.fa-caravan:before {\n  content: "\\f8ff";\n}\n.fa-caret-down:before {\n  content: "\\f0d7";\n}\n.fa-caret-left:before {\n  content: "\\f0d9";\n}\n.fa-caret-right:before {\n  content: "\\f0da";\n}\n.fa-caret-square-down:before {\n  content: "\\f150";\n}\n.fa-caret-square-left:before {\n  content: "\\f191";\n}\n.fa-caret-square-right:before {\n  content: "\\f152";\n}\n.fa-caret-square-up:before {\n  content: "\\f151";\n}\n.fa-caret-up:before {\n  content: "\\f0d8";\n}\n.fa-carrot:before {\n  content: "\\f787";\n}\n.fa-cart-arrow-down:before {\n  content: "\\f218";\n}\n.fa-cart-plus:before {\n  content: "\\f217";\n}\n.fa-cash-register:before {\n  content: "\\f788";\n}\n.fa-cat:before {\n  content: "\\f6be";\n}\n.fa-cc-amazon-pay:before {\n  content: "\\f42d";\n}\n.fa-cc-amex:before {\n  content: "\\f1f3";\n}\n.fa-cc-apple-pay:before {\n  content: "\\f416";\n}\n.fa-cc-diners-club:before {\n  content: "\\f24c";\n}\n.fa-cc-discover:before {\n  content: "\\f1f2";\n}\n.fa-cc-jcb:before {\n  content: "\\f24b";\n}\n.fa-cc-mastercard:before {\n  content: "\\f1f1";\n}\n.fa-cc-paypal:before {\n  content: "\\f1f4";\n}\n.fa-cc-stripe:before {\n  content: "\\f1f5";\n}\n.fa-cc-visa:before {\n  content: "\\f1f0";\n}\n.fa-centercode:before {\n  content: "\\f380";\n}\n.fa-centos:before {\n  content: "\\f789";\n}\n.fa-certificate:before {\n  content: "\\f0a3";\n}\n.fa-chair:before {\n  content: "\\f6c0";\n}\n.fa-chalkboard:before {\n  content: "\\f51b";\n}\n.fa-chalkboard-teacher:before {\n  content: "\\f51c";\n}\n.fa-charging-station:before {\n  content: "\\f5e7";\n}\n.fa-chart-area:before {\n  content: "\\f1fe";\n}\n.fa-chart-bar:before {\n  content: "\\f080";\n}\n.fa-chart-line:before {\n  content: "\\f201";\n}\n.fa-chart-pie:before {\n  content: "\\f200";\n}\n.fa-check:before {\n  content: "\\f00c";\n}\n.fa-check-circle:before {\n  content: "\\f058";\n}\n.fa-check-double:before {\n  content: "\\f560";\n}\n.fa-check-square:before {\n  content: "\\f14a";\n}\n.fa-cheese:before {\n  content: "\\f7ef";\n}\n.fa-chess:before {\n  content: "\\f439";\n}\n.fa-chess-bishop:before {\n  content: "\\f43a";\n}\n.fa-chess-board:before {\n  content: "\\f43c";\n}\n.fa-chess-king:before {\n  content: "\\f43f";\n}\n.fa-chess-knight:before {\n  content: "\\f441";\n}\n.fa-chess-pawn:before {\n  content: "\\f443";\n}\n.fa-chess-queen:before {\n  content: "\\f445";\n}\n.fa-chess-rook:before {\n  content: "\\f447";\n}\n.fa-chevron-circle-down:before {\n  content: "\\f13a";\n}\n.fa-chevron-circle-left:before {\n  content: "\\f137";\n}\n.fa-chevron-circle-right:before {\n  content: "\\f138";\n}\n.fa-chevron-circle-up:before {\n  content: "\\f139";\n}\n.fa-chevron-down:before {\n  content: "\\f078";\n}\n.fa-chevron-left:before {\n  content: "\\f053";\n}\n.fa-chevron-right:before {\n  content: "\\f054";\n}\n.fa-chevron-up:before {\n  content: "\\f077";\n}\n.fa-child:before {\n  content: "\\f1ae";\n}\n.fa-chrome:before {\n  content: "\\f268";\n}\n.fa-chromecast:before {\n  content: "\\f838";\n}\n.fa-church:before {\n  content: "\\f51d";\n}\n.fa-circle:before {\n  content: "\\f111";\n}\n.fa-circle-notch:before {\n  content: "\\f1ce";\n}\n.fa-city:before {\n  content: "\\f64f";\n}\n.fa-clinic-medical:before {\n  content: "\\f7f2";\n}\n.fa-clipboard:before {\n  content: "\\f328";\n}\n.fa-clipboard-check:before {\n  content: "\\f46c";\n}\n.fa-clipboard-list:before {\n  content: "\\f46d";\n}\n.fa-clock:before {\n  content: "\\f017";\n}\n.fa-clone:before {\n  content: "\\f24d";\n}\n.fa-closed-captioning:before {\n  content: "\\f20a";\n}\n.fa-cloud:before {\n  content: "\\f0c2";\n}\n.fa-cloud-download-alt:before {\n  content: "\\f381";\n}\n.fa-cloud-meatball:before {\n  content: "\\f73b";\n}\n.fa-cloud-moon:before {\n  content: "\\f6c3";\n}\n.fa-cloud-moon-rain:before {\n  content: "\\f73c";\n}\n.fa-cloud-rain:before {\n  content: "\\f73d";\n}\n.fa-cloud-showers-heavy:before {\n  content: "\\f740";\n}\n.fa-cloud-sun:before {\n  content: "\\f6c4";\n}\n.fa-cloud-sun-rain:before {\n  content: "\\f743";\n}\n.fa-cloud-upload-alt:before {\n  content: "\\f382";\n}\n.fa-cloudscale:before {\n  content: "\\f383";\n}\n.fa-cloudsmith:before {\n  content: "\\f384";\n}\n.fa-cloudversify:before {\n  content: "\\f385";\n}\n.fa-cocktail:before {\n  content: "\\f561";\n}\n.fa-code:before {\n  content: "\\f121";\n}\n.fa-code-branch:before {\n  content: "\\f126";\n}\n.fa-codepen:before {\n  content: "\\f1cb";\n}\n.fa-codiepie:before {\n  content: "\\f284";\n}\n.fa-coffee:before {\n  content: "\\f0f4";\n}\n.fa-cog:before {\n  content: "\\f013";\n}\n.fa-cogs:before {\n  content: "\\f085";\n}\n.fa-coins:before {\n  content: "\\f51e";\n}\n.fa-columns:before {\n  content: "\\f0db";\n}\n.fa-comment:before {\n  content: "\\f075";\n}\n.fa-comment-alt:before {\n  content: "\\f27a";\n}\n.fa-comment-dollar:before {\n  content: "\\f651";\n}\n.fa-comment-dots:before {\n  content: "\\f4ad";\n}\n.fa-comment-medical:before {\n  content: "\\f7f5";\n}\n.fa-comment-slash:before {\n  content: "\\f4b3";\n}\n.fa-comments:before {\n  content: "\\f086";\n}\n.fa-comments-dollar:before {\n  content: "\\f653";\n}\n.fa-compact-disc:before {\n  content: "\\f51f";\n}\n.fa-compass:before {\n  content: "\\f14e";\n}\n.fa-compress:before {\n  content: "\\f066";\n}\n.fa-compress-alt:before {\n  content: "\\f422";\n}\n.fa-compress-arrows-alt:before {\n  content: "\\f78c";\n}\n.fa-concierge-bell:before {\n  content: "\\f562";\n}\n.fa-confluence:before {\n  content: "\\f78d";\n}\n.fa-connectdevelop:before {\n  content: "\\f20e";\n}\n.fa-contao:before {\n  content: "\\f26d";\n}\n.fa-cookie:before {\n  content: "\\f563";\n}\n.fa-cookie-bite:before {\n  content: "\\f564";\n}\n.fa-copy:before {\n  content: "\\f0c5";\n}\n.fa-copyright:before {\n  content: "\\f1f9";\n}\n.fa-cotton-bureau:before {\n  content: "\\f89e";\n}\n.fa-couch:before {\n  content: "\\f4b8";\n}\n.fa-cpanel:before {\n  content: "\\f388";\n}\n.fa-creative-commons:before {\n  content: "\\f25e";\n}\n.fa-creative-commons-by:before {\n  content: "\\f4e7";\n}\n.fa-creative-commons-nc:before {\n  content: "\\f4e8";\n}\n.fa-creative-commons-nc-eu:before {\n  content: "\\f4e9";\n}\n.fa-creative-commons-nc-jp:before {\n  content: "\\f4ea";\n}\n.fa-creative-commons-nd:before {\n  content: "\\f4eb";\n}\n.fa-creative-commons-pd:before {\n  content: "\\f4ec";\n}\n.fa-creative-commons-pd-alt:before {\n  content: "\\f4ed";\n}\n.fa-creative-commons-remix:before {\n  content: "\\f4ee";\n}\n.fa-creative-commons-sa:before {\n  content: "\\f4ef";\n}\n.fa-creative-commons-sampling:before {\n  content: "\\f4f0";\n}\n.fa-creative-commons-sampling-plus:before {\n  content: "\\f4f1";\n}\n.fa-creative-commons-share:before {\n  content: "\\f4f2";\n}\n.fa-creative-commons-zero:before {\n  content: "\\f4f3";\n}\n.fa-credit-card:before {\n  content: "\\f09d";\n}\n.fa-critical-role:before {\n  content: "\\f6c9";\n}\n.fa-crop:before {\n  content: "\\f125";\n}\n.fa-crop-alt:before {\n  content: "\\f565";\n}\n.fa-cross:before {\n  content: "\\f654";\n}\n.fa-crosshairs:before {\n  content: "\\f05b";\n}\n.fa-crow:before {\n  content: "\\f520";\n}\n.fa-crown:before {\n  content: "\\f521";\n}\n.fa-crutch:before {\n  content: "\\f7f7";\n}\n.fa-css3:before {\n  content: "\\f13c";\n}\n.fa-css3-alt:before {\n  content: "\\f38b";\n}\n.fa-cube:before {\n  content: "\\f1b2";\n}\n.fa-cubes:before {\n  content: "\\f1b3";\n}\n.fa-cut:before {\n  content: "\\f0c4";\n}\n.fa-cuttlefish:before {\n  content: "\\f38c";\n}\n.fa-d-and-d:before {\n  content: "\\f38d";\n}\n.fa-d-and-d-beyond:before {\n  content: "\\f6ca";\n}\n.fa-dashcube:before {\n  content: "\\f210";\n}\n.fa-database:before {\n  content: "\\f1c0";\n}\n.fa-deaf:before {\n  content: "\\f2a4";\n}\n.fa-delicious:before {\n  content: "\\f1a5";\n}\n.fa-democrat:before {\n  content: "\\f747";\n}\n.fa-deploydog:before {\n  content: "\\f38e";\n}\n.fa-deskpro:before {\n  content: "\\f38f";\n}\n.fa-desktop:before {\n  content: "\\f108";\n}\n.fa-dev:before {\n  content: "\\f6cc";\n}\n.fa-deviantart:before {\n  content: "\\f1bd";\n}\n.fa-dharmachakra:before {\n  content: "\\f655";\n}\n.fa-dhl:before {\n  content: "\\f790";\n}\n.fa-diagnoses:before {\n  content: "\\f470";\n}\n.fa-diaspora:before {\n  content: "\\f791";\n}\n.fa-dice:before {\n  content: "\\f522";\n}\n.fa-dice-d20:before {\n  content: "\\f6cf";\n}\n.fa-dice-d6:before {\n  content: "\\f6d1";\n}\n.fa-dice-five:before {\n  content: "\\f523";\n}\n.fa-dice-four:before {\n  content: "\\f524";\n}\n.fa-dice-one:before {\n  content: "\\f525";\n}\n.fa-dice-six:before {\n  content: "\\f526";\n}\n.fa-dice-three:before {\n  content: "\\f527";\n}\n.fa-dice-two:before {\n  content: "\\f528";\n}\n.fa-digg:before {\n  content: "\\f1a6";\n}\n.fa-digital-ocean:before {\n  content: "\\f391";\n}\n.fa-digital-tachograph:before {\n  content: "\\f566";\n}\n.fa-directions:before {\n  content: "\\f5eb";\n}\n.fa-discord:before {\n  content: "\\f392";\n}\n.fa-discourse:before {\n  content: "\\f393";\n}\n.fa-divide:before {\n  content: "\\f529";\n}\n.fa-dizzy:before {\n  content: "\\f567";\n}\n.fa-dna:before {\n  content: "\\f471";\n}\n.fa-dochub:before {\n  content: "\\f394";\n}\n.fa-docker:before {\n  content: "\\f395";\n}\n.fa-dog:before {\n  content: "\\f6d3";\n}\n.fa-dollar-sign:before {\n  content: "\\f155";\n}\n.fa-dolly:before {\n  content: "\\f472";\n}\n.fa-dolly-flatbed:before {\n  content: "\\f474";\n}\n.fa-donate:before {\n  content: "\\f4b9";\n}\n.fa-door-closed:before {\n  content: "\\f52a";\n}\n.fa-door-open:before {\n  content: "\\f52b";\n}\n.fa-dot-circle:before {\n  content: "\\f192";\n}\n.fa-dove:before {\n  content: "\\f4ba";\n}\n.fa-download:before {\n  content: "\\f019";\n}\n.fa-draft2digital:before {\n  content: "\\f396";\n}\n.fa-drafting-compass:before {\n  content: "\\f568";\n}\n.fa-dragon:before {\n  content: "\\f6d5";\n}\n.fa-draw-polygon:before {\n  content: "\\f5ee";\n}\n.fa-dribbble:before {\n  content: "\\f17d";\n}\n.fa-dribbble-square:before {\n  content: "\\f397";\n}\n.fa-dropbox:before {\n  content: "\\f16b";\n}\n.fa-drum:before {\n  content: "\\f569";\n}\n.fa-drum-steelpan:before {\n  content: "\\f56a";\n}\n.fa-drumstick-bite:before {\n  content: "\\f6d7";\n}\n.fa-drupal:before {\n  content: "\\f1a9";\n}\n.fa-dumbbell:before {\n  content: "\\f44b";\n}\n.fa-dumpster:before {\n  content: "\\f793";\n}\n.fa-dumpster-fire:before {\n  content: "\\f794";\n}\n.fa-dungeon:before {\n  content: "\\f6d9";\n}\n.fa-dyalog:before {\n  content: "\\f399";\n}\n.fa-earlybirds:before {\n  content: "\\f39a";\n}\n.fa-ebay:before {\n  content: "\\f4f4";\n}\n.fa-edge:before {\n  content: "\\f282";\n}\n.fa-edit:before {\n  content: "\\f044";\n}\n.fa-egg:before {\n  content: "\\f7fb";\n}\n.fa-eject:before {\n  content: "\\f052";\n}\n.fa-elementor:before {\n  content: "\\f430";\n}\n.fa-ellipsis-h:before {\n  content: "\\f141";\n}\n.fa-ellipsis-v:before {\n  content: "\\f142";\n}\n.fa-ello:before {\n  content: "\\f5f1";\n}\n.fa-ember:before {\n  content: "\\f423";\n}\n.fa-empire:before {\n  content: "\\f1d1";\n}\n.fa-envelope:before {\n  content: "\\f0e0";\n}\n.fa-envelope-open:before {\n  content: "\\f2b6";\n}\n.fa-envelope-open-text:before {\n  content: "\\f658";\n}\n.fa-envelope-square:before {\n  content: "\\f199";\n}\n.fa-envira:before {\n  content: "\\f299";\n}\n.fa-equals:before {\n  content: "\\f52c";\n}\n.fa-eraser:before {\n  content: "\\f12d";\n}\n.fa-erlang:before {\n  content: "\\f39d";\n}\n.fa-ethereum:before {\n  content: "\\f42e";\n}\n.fa-ethernet:before {\n  content: "\\f796";\n}\n.fa-etsy:before {\n  content: "\\f2d7";\n}\n.fa-euro-sign:before {\n  content: "\\f153";\n}\n.fa-evernote:before {\n  content: "\\f839";\n}\n.fa-exchange-alt:before {\n  content: "\\f362";\n}\n.fa-exclamation:before {\n  content: "\\f12a";\n}\n.fa-exclamation-circle:before {\n  content: "\\f06a";\n}\n.fa-exclamation-triangle:before {\n  content: "\\f071";\n}\n.fa-expand:before {\n  content: "\\f065";\n}\n.fa-expand-alt:before {\n  content: "\\f424";\n}\n.fa-expand-arrows-alt:before {\n  content: "\\f31e";\n}\n.fa-expeditedssl:before {\n  content: "\\f23e";\n}\n.fa-external-link-alt:before {\n  content: "\\f35d";\n}\n.fa-external-link-square-alt:before {\n  content: "\\f360";\n}\n.fa-eye:before {\n  content: "\\f06e";\n}\n.fa-eye-dropper:before {\n  content: "\\f1fb";\n}\n.fa-eye-slash:before {\n  content: "\\f070";\n}\n.fa-facebook:before {\n  content: "\\f09a";\n}\n.fa-facebook-f:before {\n  content: "\\f39e";\n}\n.fa-facebook-messenger:before {\n  content: "\\f39f";\n}\n.fa-facebook-square:before {\n  content: "\\f082";\n}\n.fa-fan:before {\n  content: "\\f863";\n}\n.fa-fantasy-flight-games:before {\n  content: "\\f6dc";\n}\n.fa-fast-backward:before {\n  content: "\\f049";\n}\n.fa-fast-forward:before {\n  content: "\\f050";\n}\n.fa-fax:before {\n  content: "\\f1ac";\n}\n.fa-feather:before {\n  content: "\\f52d";\n}\n.fa-feather-alt:before {\n  content: "\\f56b";\n}\n.fa-fedex:before {\n  content: "\\f797";\n}\n.fa-fedora:before {\n  content: "\\f798";\n}\n.fa-female:before {\n  content: "\\f182";\n}\n.fa-fighter-jet:before {\n  content: "\\f0fb";\n}\n.fa-figma:before {\n  content: "\\f799";\n}\n.fa-file:before {\n  content: "\\f15b";\n}\n.fa-file-alt:before {\n  content: "\\f15c";\n}\n.fa-file-archive:before {\n  content: "\\f1c6";\n}\n.fa-file-audio:before {\n  content: "\\f1c7";\n}\n.fa-file-code:before {\n  content: "\\f1c9";\n}\n.fa-file-contract:before {\n  content: "\\f56c";\n}\n.fa-file-csv:before {\n  content: "\\f6dd";\n}\n.fa-file-download:before {\n  content: "\\f56d";\n}\n.fa-file-excel:before {\n  content: "\\f1c3";\n}\n.fa-file-export:before {\n  content: "\\f56e";\n}\n.fa-file-image:before {\n  content: "\\f1c5";\n}\n.fa-file-import:before {\n  content: "\\f56f";\n}\n.fa-file-invoice:before {\n  content: "\\f570";\n}\n.fa-file-invoice-dollar:before {\n  content: "\\f571";\n}\n.fa-file-medical:before {\n  content: "\\f477";\n}\n.fa-file-medical-alt:before {\n  content: "\\f478";\n}\n.fa-file-pdf:before {\n  content: "\\f1c1";\n}\n.fa-file-powerpoint:before {\n  content: "\\f1c4";\n}\n.fa-file-prescription:before {\n  content: "\\f572";\n}\n.fa-file-signature:before {\n  content: "\\f573";\n}\n.fa-file-upload:before {\n  content: "\\f574";\n}\n.fa-file-video:before {\n  content: "\\f1c8";\n}\n.fa-file-word:before {\n  content: "\\f1c2";\n}\n.fa-fill:before {\n  content: "\\f575";\n}\n.fa-fill-drip:before {\n  content: "\\f576";\n}\n.fa-film:before {\n  content: "\\f008";\n}\n.fa-filter:before {\n  content: "\\f0b0";\n}\n.fa-fingerprint:before {\n  content: "\\f577";\n}\n.fa-fire:before {\n  content: "\\f06d";\n}\n.fa-fire-alt:before {\n  content: "\\f7e4";\n}\n.fa-fire-extinguisher:before {\n  content: "\\f134";\n}\n.fa-firefox:before {\n  content: "\\f269";\n}\n.fa-firefox-browser:before {\n  content: "\\f907";\n}\n.fa-first-aid:before {\n  content: "\\f479";\n}\n.fa-first-order:before {\n  content: "\\f2b0";\n}\n.fa-first-order-alt:before {\n  content: "\\f50a";\n}\n.fa-firstdraft:before {\n  content: "\\f3a1";\n}\n.fa-fish:before {\n  content: "\\f578";\n}\n.fa-fist-raised:before {\n  content: "\\f6de";\n}\n.fa-flag:before {\n  content: "\\f024";\n}\n.fa-flag-checkered:before {\n  content: "\\f11e";\n}\n.fa-flag-usa:before {\n  content: "\\f74d";\n}\n.fa-flask:before {\n  content: "\\f0c3";\n}\n.fa-flickr:before {\n  content: "\\f16e";\n}\n.fa-flipboard:before {\n  content: "\\f44d";\n}\n.fa-flushed:before {\n  content: "\\f579";\n}\n.fa-fly:before {\n  content: "\\f417";\n}\n.fa-folder:before {\n  content: "\\f07b";\n}\n.fa-folder-minus:before {\n  content: "\\f65d";\n}\n.fa-folder-open:before {\n  content: "\\f07c";\n}\n.fa-folder-plus:before {\n  content: "\\f65e";\n}\n.fa-font:before {\n  content: "\\f031";\n}\n.fa-font-awesome:before {\n  content: "\\f2b4";\n}\n.fa-font-awesome-alt:before {\n  content: "\\f35c";\n}\n.fa-font-awesome-flag:before {\n  content: "\\f425";\n}\n.fa-font-awesome-logo-full:before {\n  content: "\\f4e6";\n}\n.fa-fonticons:before {\n  content: "\\f280";\n}\n.fa-fonticons-fi:before {\n  content: "\\f3a2";\n}\n.fa-football-ball:before {\n  content: "\\f44e";\n}\n.fa-fort-awesome:before {\n  content: "\\f286";\n}\n.fa-fort-awesome-alt:before {\n  content: "\\f3a3";\n}\n.fa-forumbee:before {\n  content: "\\f211";\n}\n.fa-forward:before {\n  content: "\\f04e";\n}\n.fa-foursquare:before {\n  content: "\\f180";\n}\n.fa-free-code-camp:before {\n  content: "\\f2c5";\n}\n.fa-freebsd:before {\n  content: "\\f3a4";\n}\n.fa-frog:before {\n  content: "\\f52e";\n}\n.fa-frown:before {\n  content: "\\f119";\n}\n.fa-frown-open:before {\n  content: "\\f57a";\n}\n.fa-fulcrum:before {\n  content: "\\f50b";\n}\n.fa-funnel-dollar:before {\n  content: "\\f662";\n}\n.fa-futbol:before {\n  content: "\\f1e3";\n}\n.fa-galactic-republic:before {\n  content: "\\f50c";\n}\n.fa-galactic-senate:before {\n  content: "\\f50d";\n}\n.fa-gamepad:before {\n  content: "\\f11b";\n}\n.fa-gas-pump:before {\n  content: "\\f52f";\n}\n.fa-gavel:before {\n  content: "\\f0e3";\n}\n.fa-gem:before {\n  content: "\\f3a5";\n}\n.fa-genderless:before {\n  content: "\\f22d";\n}\n.fa-get-pocket:before {\n  content: "\\f265";\n}\n.fa-gg:before {\n  content: "\\f260";\n}\n.fa-gg-circle:before {\n  content: "\\f261";\n}\n.fa-ghost:before {\n  content: "\\f6e2";\n}\n.fa-gift:before {\n  content: "\\f06b";\n}\n.fa-gifts:before {\n  content: "\\f79c";\n}\n.fa-git:before {\n  content: "\\f1d3";\n}\n.fa-git-alt:before {\n  content: "\\f841";\n}\n.fa-git-square:before {\n  content: "\\f1d2";\n}\n.fa-github:before {\n  content: "\\f09b";\n}\n.fa-github-alt:before {\n  content: "\\f113";\n}\n.fa-github-square:before {\n  content: "\\f092";\n}\n.fa-gitkraken:before {\n  content: "\\f3a6";\n}\n.fa-gitlab:before {\n  content: "\\f296";\n}\n.fa-gitter:before {\n  content: "\\f426";\n}\n.fa-glass-cheers:before {\n  content: "\\f79f";\n}\n.fa-glass-martini:before {\n  content: "\\f000";\n}\n.fa-glass-martini-alt:before {\n  content: "\\f57b";\n}\n.fa-glass-whiskey:before {\n  content: "\\f7a0";\n}\n.fa-glasses:before {\n  content: "\\f530";\n}\n.fa-glide:before {\n  content: "\\f2a5";\n}\n.fa-glide-g:before {\n  content: "\\f2a6";\n}\n.fa-globe:before {\n  content: "\\f0ac";\n}\n.fa-globe-africa:before {\n  content: "\\f57c";\n}\n.fa-globe-americas:before {\n  content: "\\f57d";\n}\n.fa-globe-asia:before {\n  content: "\\f57e";\n}\n.fa-globe-europe:before {\n  content: "\\f7a2";\n}\n.fa-gofore:before {\n  content: "\\f3a7";\n}\n.fa-golf-ball:before {\n  content: "\\f450";\n}\n.fa-goodreads:before {\n  content: "\\f3a8";\n}\n.fa-goodreads-g:before {\n  content: "\\f3a9";\n}\n.fa-google:before {\n  content: "\\f1a0";\n}\n.fa-google-drive:before {\n  content: "\\f3aa";\n}\n.fa-google-play:before {\n  content: "\\f3ab";\n}\n.fa-google-plus:before {\n  content: "\\f2b3";\n}\n.fa-google-plus-g:before {\n  content: "\\f0d5";\n}\n.fa-google-plus-square:before {\n  content: "\\f0d4";\n}\n.fa-google-wallet:before {\n  content: "\\f1ee";\n}\n.fa-gopuram:before {\n  content: "\\f664";\n}\n.fa-graduation-cap:before {\n  content: "\\f19d";\n}\n.fa-gratipay:before {\n  content: "\\f184";\n}\n.fa-grav:before {\n  content: "\\f2d6";\n}\n.fa-greater-than:before {\n  content: "\\f531";\n}\n.fa-greater-than-equal:before {\n  content: "\\f532";\n}\n.fa-grimace:before {\n  content: "\\f57f";\n}\n.fa-grin:before {\n  content: "\\f580";\n}\n.fa-grin-alt:before {\n  content: "\\f581";\n}\n.fa-grin-beam:before {\n  content: "\\f582";\n}\n.fa-grin-beam-sweat:before {\n  content: "\\f583";\n}\n.fa-grin-hearts:before {\n  content: "\\f584";\n}\n.fa-grin-squint:before {\n  content: "\\f585";\n}\n.fa-grin-squint-tears:before {\n  content: "\\f586";\n}\n.fa-grin-stars:before {\n  content: "\\f587";\n}\n.fa-grin-tears:before {\n  content: "\\f588";\n}\n.fa-grin-tongue:before {\n  content: "\\f589";\n}\n.fa-grin-tongue-squint:before {\n  content: "\\f58a";\n}\n.fa-grin-tongue-wink:before {\n  content: "\\f58b";\n}\n.fa-grin-wink:before {\n  content: "\\f58c";\n}\n.fa-grip-horizontal:before {\n  content: "\\f58d";\n}\n.fa-grip-lines:before {\n  content: "\\f7a4";\n}\n.fa-grip-lines-vertical:before {\n  content: "\\f7a5";\n}\n.fa-grip-vertical:before {\n  content: "\\f58e";\n}\n.fa-gripfire:before {\n  content: "\\f3ac";\n}\n.fa-grunt:before {\n  content: "\\f3ad";\n}\n.fa-guitar:before {\n  content: "\\f7a6";\n}\n.fa-gulp:before {\n  content: "\\f3ae";\n}\n.fa-h-square:before {\n  content: "\\f0fd";\n}\n.fa-hacker-news:before {\n  content: "\\f1d4";\n}\n.fa-hacker-news-square:before {\n  content: "\\f3af";\n}\n.fa-hackerrank:before {\n  content: "\\f5f7";\n}\n.fa-hamburger:before {\n  content: "\\f805";\n}\n.fa-hammer:before {\n  content: "\\f6e3";\n}\n.fa-hamsa:before {\n  content: "\\f665";\n}\n.fa-hand-holding:before {\n  content: "\\f4bd";\n}\n.fa-hand-holding-heart:before {\n  content: "\\f4be";\n}\n.fa-hand-holding-usd:before {\n  content: "\\f4c0";\n}\n.fa-hand-lizard:before {\n  content: "\\f258";\n}\n.fa-hand-middle-finger:before {\n  content: "\\f806";\n}\n.fa-hand-paper:before {\n  content: "\\f256";\n}\n.fa-hand-peace:before {\n  content: "\\f25b";\n}\n.fa-hand-point-down:before {\n  content: "\\f0a7";\n}\n.fa-hand-point-left:before {\n  content: "\\f0a5";\n}\n.fa-hand-point-right:before {\n  content: "\\f0a4";\n}\n.fa-hand-point-up:before {\n  content: "\\f0a6";\n}\n.fa-hand-pointer:before {\n  content: "\\f25a";\n}\n.fa-hand-rock:before {\n  content: "\\f255";\n}\n.fa-hand-scissors:before {\n  content: "\\f257";\n}\n.fa-hand-spock:before {\n  content: "\\f259";\n}\n.fa-hands:before {\n  content: "\\f4c2";\n}\n.fa-hands-helping:before {\n  content: "\\f4c4";\n}\n.fa-handshake:before {\n  content: "\\f2b5";\n}\n.fa-hanukiah:before {\n  content: "\\f6e6";\n}\n.fa-hard-hat:before {\n  content: "\\f807";\n}\n.fa-hashtag:before {\n  content: "\\f292";\n}\n.fa-hat-cowboy:before {\n  content: "\\f8c0";\n}\n.fa-hat-cowboy-side:before {\n  content: "\\f8c1";\n}\n.fa-hat-wizard:before {\n  content: "\\f6e8";\n}\n.fa-hdd:before {\n  content: "\\f0a0";\n}\n.fa-heading:before {\n  content: "\\f1dc";\n}\n.fa-headphones:before {\n  content: "\\f025";\n}\n.fa-headphones-alt:before {\n  content: "\\f58f";\n}\n.fa-headset:before {\n  content: "\\f590";\n}\n.fa-heart:before {\n  content: "\\f004";\n}\n.fa-heart-broken:before {\n  content: "\\f7a9";\n}\n.fa-heartbeat:before {\n  content: "\\f21e";\n}\n.fa-helicopter:before {\n  content: "\\f533";\n}\n.fa-highlighter:before {\n  content: "\\f591";\n}\n.fa-hiking:before {\n  content: "\\f6ec";\n}\n.fa-hippo:before {\n  content: "\\f6ed";\n}\n.fa-hips:before {\n  content: "\\f452";\n}\n.fa-hire-a-helper:before {\n  content: "\\f3b0";\n}\n.fa-history:before {\n  content: "\\f1da";\n}\n.fa-hockey-puck:before {\n  content: "\\f453";\n}\n.fa-holly-berry:before {\n  content: "\\f7aa";\n}\n.fa-home:before {\n  content: "\\f015";\n}\n.fa-hooli:before {\n  content: "\\f427";\n}\n.fa-hornbill:before {\n  content: "\\f592";\n}\n.fa-horse:before {\n  content: "\\f6f0";\n}\n.fa-horse-head:before {\n  content: "\\f7ab";\n}\n.fa-hospital:before {\n  content: "\\f0f8";\n}\n.fa-hospital-alt:before {\n  content: "\\f47d";\n}\n.fa-hospital-symbol:before {\n  content: "\\f47e";\n}\n.fa-hot-tub:before {\n  content: "\\f593";\n}\n.fa-hotdog:before {\n  content: "\\f80f";\n}\n.fa-hotel:before {\n  content: "\\f594";\n}\n.fa-hotjar:before {\n  content: "\\f3b1";\n}\n.fa-hourglass:before {\n  content: "\\f254";\n}\n.fa-hourglass-end:before {\n  content: "\\f253";\n}\n.fa-hourglass-half:before {\n  content: "\\f252";\n}\n.fa-hourglass-start:before {\n  content: "\\f251";\n}\n.fa-house-damage:before {\n  content: "\\f6f1";\n}\n.fa-houzz:before {\n  content: "\\f27c";\n}\n.fa-hryvnia:before {\n  content: "\\f6f2";\n}\n.fa-html5:before {\n  content: "\\f13b";\n}\n.fa-hubspot:before {\n  content: "\\f3b2";\n}\n.fa-i-cursor:before {\n  content: "\\f246";\n}\n.fa-ice-cream:before {\n  content: "\\f810";\n}\n.fa-icicles:before {\n  content: "\\f7ad";\n}\n.fa-icons:before {\n  content: "\\f86d";\n}\n.fa-id-badge:before {\n  content: "\\f2c1";\n}\n.fa-id-card:before {\n  content: "\\f2c2";\n}\n.fa-id-card-alt:before {\n  content: "\\f47f";\n}\n.fa-ideal:before {\n  content: "\\f913";\n}\n.fa-igloo:before {\n  content: "\\f7ae";\n}\n.fa-image:before {\n  content: "\\f03e";\n}\n.fa-images:before {\n  content: "\\f302";\n}\n.fa-imdb:before {\n  content: "\\f2d8";\n}\n.fa-inbox:before {\n  content: "\\f01c";\n}\n.fa-indent:before {\n  content: "\\f03c";\n}\n.fa-industry:before {\n  content: "\\f275";\n}\n.fa-infinity:before {\n  content: "\\f534";\n}\n.fa-info:before {\n  content: "\\f129";\n}\n.fa-info-circle:before {\n  content: "\\f05a";\n}\n.fa-instagram:before {\n  content: "\\f16d";\n}\n.fa-intercom:before {\n  content: "\\f7af";\n}\n.fa-internet-explorer:before {\n  content: "\\f26b";\n}\n.fa-invision:before {\n  content: "\\f7b0";\n}\n.fa-ioxhost:before {\n  content: "\\f208";\n}\n.fa-italic:before {\n  content: "\\f033";\n}\n.fa-itch-io:before {\n  content: "\\f83a";\n}\n.fa-itunes:before {\n  content: "\\f3b4";\n}\n.fa-itunes-note:before {\n  content: "\\f3b5";\n}\n.fa-java:before {\n  content: "\\f4e4";\n}\n.fa-jedi:before {\n  content: "\\f669";\n}\n.fa-jedi-order:before {\n  content: "\\f50e";\n}\n.fa-jenkins:before {\n  content: "\\f3b6";\n}\n.fa-jira:before {\n  content: "\\f7b1";\n}\n.fa-joget:before {\n  content: "\\f3b7";\n}\n.fa-joint:before {\n  content: "\\f595";\n}\n.fa-joomla:before {\n  content: "\\f1aa";\n}\n.fa-journal-whills:before {\n  content: "\\f66a";\n}\n.fa-js:before {\n  content: "\\f3b8";\n}\n.fa-js-square:before {\n  content: "\\f3b9";\n}\n.fa-jsfiddle:before {\n  content: "\\f1cc";\n}\n.fa-kaaba:before {\n  content: "\\f66b";\n}\n.fa-kaggle:before {\n  content: "\\f5fa";\n}\n.fa-key:before {\n  content: "\\f084";\n}\n.fa-keybase:before {\n  content: "\\f4f5";\n}\n.fa-keyboard:before {\n  content: "\\f11c";\n}\n.fa-keycdn:before {\n  content: "\\f3ba";\n}\n.fa-khanda:before {\n  content: "\\f66d";\n}\n.fa-kickstarter:before {\n  content: "\\f3bb";\n}\n.fa-kickstarter-k:before {\n  content: "\\f3bc";\n}\n.fa-kiss:before {\n  content: "\\f596";\n}\n.fa-kiss-beam:before {\n  content: "\\f597";\n}\n.fa-kiss-wink-heart:before {\n  content: "\\f598";\n}\n.fa-kiwi-bird:before {\n  content: "\\f535";\n}\n.fa-korvue:before {\n  content: "\\f42f";\n}\n.fa-landmark:before {\n  content: "\\f66f";\n}\n.fa-language:before {\n  content: "\\f1ab";\n}\n.fa-laptop:before {\n  content: "\\f109";\n}\n.fa-laptop-code:before {\n  content: "\\f5fc";\n}\n.fa-laptop-medical:before {\n  content: "\\f812";\n}\n.fa-laravel:before {\n  content: "\\f3bd";\n}\n.fa-lastfm:before {\n  content: "\\f202";\n}\n.fa-lastfm-square:before {\n  content: "\\f203";\n}\n.fa-laugh:before {\n  content: "\\f599";\n}\n.fa-laugh-beam:before {\n  content: "\\f59a";\n}\n.fa-laugh-squint:before {\n  content: "\\f59b";\n}\n.fa-laugh-wink:before {\n  content: "\\f59c";\n}\n.fa-layer-group:before {\n  content: "\\f5fd";\n}\n.fa-leaf:before {\n  content: "\\f06c";\n}\n.fa-leanpub:before {\n  content: "\\f212";\n}\n.fa-lemon:before {\n  content: "\\f094";\n}\n.fa-less:before {\n  content: "\\f41d";\n}\n.fa-less-than:before {\n  content: "\\f536";\n}\n.fa-less-than-equal:before {\n  content: "\\f537";\n}\n.fa-level-down-alt:before {\n  content: "\\f3be";\n}\n.fa-level-up-alt:before {\n  content: "\\f3bf";\n}\n.fa-life-ring:before {\n  content: "\\f1cd";\n}\n.fa-lightbulb:before {\n  content: "\\f0eb";\n}\n.fa-line:before {\n  content: "\\f3c0";\n}\n.fa-link:before {\n  content: "\\f0c1";\n}\n.fa-linkedin:before {\n  content: "\\f08c";\n}\n.fa-linkedin-in:before {\n  content: "\\f0e1";\n}\n.fa-linode:before {\n  content: "\\f2b8";\n}\n.fa-linux:before {\n  content: "\\f17c";\n}\n.fa-lira-sign:before {\n  content: "\\f195";\n}\n.fa-list:before {\n  content: "\\f03a";\n}\n.fa-list-alt:before {\n  content: "\\f022";\n}\n.fa-list-ol:before {\n  content: "\\f0cb";\n}\n.fa-list-ul:before {\n  content: "\\f0ca";\n}\n.fa-location-arrow:before {\n  content: "\\f124";\n}\n.fa-lock:before {\n  content: "\\f023";\n}\n.fa-lock-open:before {\n  content: "\\f3c1";\n}\n.fa-long-arrow-alt-down:before {\n  content: "\\f309";\n}\n.fa-long-arrow-alt-left:before {\n  content: "\\f30a";\n}\n.fa-long-arrow-alt-right:before {\n  content: "\\f30b";\n}\n.fa-long-arrow-alt-up:before {\n  content: "\\f30c";\n}\n.fa-low-vision:before {\n  content: "\\f2a8";\n}\n.fa-luggage-cart:before {\n  content: "\\f59d";\n}\n.fa-lyft:before {\n  content: "\\f3c3";\n}\n.fa-magento:before {\n  content: "\\f3c4";\n}\n.fa-magic:before {\n  content: "\\f0d0";\n}\n.fa-magnet:before {\n  content: "\\f076";\n}\n.fa-mail-bulk:before {\n  content: "\\f674";\n}\n.fa-mailchimp:before {\n  content: "\\f59e";\n}\n.fa-male:before {\n  content: "\\f183";\n}\n.fa-mandalorian:before {\n  content: "\\f50f";\n}\n.fa-map:before {\n  content: "\\f279";\n}\n.fa-map-marked:before {\n  content: "\\f59f";\n}\n.fa-map-marked-alt:before {\n  content: "\\f5a0";\n}\n.fa-map-marker:before {\n  content: "\\f041";\n}\n.fa-map-marker-alt:before {\n  content: "\\f3c5";\n}\n.fa-map-pin:before {\n  content: "\\f276";\n}\n.fa-map-signs:before {\n  content: "\\f277";\n}\n.fa-markdown:before {\n  content: "\\f60f";\n}\n.fa-marker:before {\n  content: "\\f5a1";\n}\n.fa-mars:before {\n  content: "\\f222";\n}\n.fa-mars-double:before {\n  content: "\\f227";\n}\n.fa-mars-stroke:before {\n  content: "\\f229";\n}\n.fa-mars-stroke-h:before {\n  content: "\\f22b";\n}\n.fa-mars-stroke-v:before {\n  content: "\\f22a";\n}\n.fa-mask:before {\n  content: "\\f6fa";\n}\n.fa-mastodon:before {\n  content: "\\f4f6";\n}\n.fa-maxcdn:before {\n  content: "\\f136";\n}\n.fa-mdb:before {\n  content: "\\f8ca";\n}\n.fa-medal:before {\n  content: "\\f5a2";\n}\n.fa-medapps:before {\n  content: "\\f3c6";\n}\n.fa-medium:before {\n  content: "\\f23a";\n}\n.fa-medium-m:before {\n  content: "\\f3c7";\n}\n.fa-medkit:before {\n  content: "\\f0fa";\n}\n.fa-medrt:before {\n  content: "\\f3c8";\n}\n.fa-meetup:before {\n  content: "\\f2e0";\n}\n.fa-megaport:before {\n  content: "\\f5a3";\n}\n.fa-meh:before {\n  content: "\\f11a";\n}\n.fa-meh-blank:before {\n  content: "\\f5a4";\n}\n.fa-meh-rolling-eyes:before {\n  content: "\\f5a5";\n}\n.fa-memory:before {\n  content: "\\f538";\n}\n.fa-mendeley:before {\n  content: "\\f7b3";\n}\n.fa-menorah:before {\n  content: "\\f676";\n}\n.fa-mercury:before {\n  content: "\\f223";\n}\n.fa-meteor:before {\n  content: "\\f753";\n}\n.fa-microblog:before {\n  content: "\\f91a";\n}\n.fa-microchip:before {\n  content: "\\f2db";\n}\n.fa-microphone:before {\n  content: "\\f130";\n}\n.fa-microphone-alt:before {\n  content: "\\f3c9";\n}\n.fa-microphone-alt-slash:before {\n  content: "\\f539";\n}\n.fa-microphone-slash:before {\n  content: "\\f131";\n}\n.fa-microscope:before {\n  content: "\\f610";\n}\n.fa-microsoft:before {\n  content: "\\f3ca";\n}\n.fa-minus:before {\n  content: "\\f068";\n}\n.fa-minus-circle:before {\n  content: "\\f056";\n}\n.fa-minus-square:before {\n  content: "\\f146";\n}\n.fa-mitten:before {\n  content: "\\f7b5";\n}\n.fa-mix:before {\n  content: "\\f3cb";\n}\n.fa-mixcloud:before {\n  content: "\\f289";\n}\n.fa-mizuni:before {\n  content: "\\f3cc";\n}\n.fa-mobile:before {\n  content: "\\f10b";\n}\n.fa-mobile-alt:before {\n  content: "\\f3cd";\n}\n.fa-modx:before {\n  content: "\\f285";\n}\n.fa-monero:before {\n  content: "\\f3d0";\n}\n.fa-money-bill:before {\n  content: "\\f0d6";\n}\n.fa-money-bill-alt:before {\n  content: "\\f3d1";\n}\n.fa-money-bill-wave:before {\n  content: "\\f53a";\n}\n.fa-money-bill-wave-alt:before {\n  content: "\\f53b";\n}\n.fa-money-check:before {\n  content: "\\f53c";\n}\n.fa-money-check-alt:before {\n  content: "\\f53d";\n}\n.fa-monument:before {\n  content: "\\f5a6";\n}\n.fa-moon:before {\n  content: "\\f186";\n}\n.fa-mortar-pestle:before {\n  content: "\\f5a7";\n}\n.fa-mosque:before {\n  content: "\\f678";\n}\n.fa-motorcycle:before {\n  content: "\\f21c";\n}\n.fa-mountain:before {\n  content: "\\f6fc";\n}\n.fa-mouse:before {\n  content: "\\f8cc";\n}\n.fa-mouse-pointer:before {\n  content: "\\f245";\n}\n.fa-mug-hot:before {\n  content: "\\f7b6";\n}\n.fa-music:before {\n  content: "\\f001";\n}\n.fa-napster:before {\n  content: "\\f3d2";\n}\n.fa-neos:before {\n  content: "\\f612";\n}\n.fa-network-wired:before {\n  content: "\\f6ff";\n}\n.fa-neuter:before {\n  content: "\\f22c";\n}\n.fa-newspaper:before {\n  content: "\\f1ea";\n}\n.fa-nimblr:before {\n  content: "\\f5a8";\n}\n.fa-node:before {\n  content: "\\f419";\n}\n.fa-node-js:before {\n  content: "\\f3d3";\n}\n.fa-not-equal:before {\n  content: "\\f53e";\n}\n.fa-notes-medical:before {\n  content: "\\f481";\n}\n.fa-npm:before {\n  content: "\\f3d4";\n}\n.fa-ns8:before {\n  content: "\\f3d5";\n}\n.fa-nutritionix:before {\n  content: "\\f3d6";\n}\n.fa-object-group:before {\n  content: "\\f247";\n}\n.fa-object-ungroup:before {\n  content: "\\f248";\n}\n.fa-odnoklassniki:before {\n  content: "\\f263";\n}\n.fa-odnoklassniki-square:before {\n  content: "\\f264";\n}\n.fa-oil-can:before {\n  content: "\\f613";\n}\n.fa-old-republic:before {\n  content: "\\f510";\n}\n.fa-om:before {\n  content: "\\f679";\n}\n.fa-opencart:before {\n  content: "\\f23d";\n}\n.fa-openid:before {\n  content: "\\f19b";\n}\n.fa-opera:before {\n  content: "\\f26a";\n}\n.fa-optin-monster:before {\n  content: "\\f23c";\n}\n.fa-orcid:before {\n  content: "\\f8d2";\n}\n.fa-osi:before {\n  content: "\\f41a";\n}\n.fa-otter:before {\n  content: "\\f700";\n}\n.fa-outdent:before {\n  content: "\\f03b";\n}\n.fa-page4:before {\n  content: "\\f3d7";\n}\n.fa-pagelines:before {\n  content: "\\f18c";\n}\n.fa-pager:before {\n  content: "\\f815";\n}\n.fa-paint-brush:before {\n  content: "\\f1fc";\n}\n.fa-paint-roller:before {\n  content: "\\f5aa";\n}\n.fa-palette:before {\n  content: "\\f53f";\n}\n.fa-palfed:before {\n  content: "\\f3d8";\n}\n.fa-pallet:before {\n  content: "\\f482";\n}\n.fa-paper-plane:before {\n  content: "\\f1d8";\n}\n.fa-paperclip:before {\n  content: "\\f0c6";\n}\n.fa-parachute-box:before {\n  content: "\\f4cd";\n}\n.fa-paragraph:before {\n  content: "\\f1dd";\n}\n.fa-parking:before {\n  content: "\\f540";\n}\n.fa-passport:before {\n  content: "\\f5ab";\n}\n.fa-pastafarianism:before {\n  content: "\\f67b";\n}\n.fa-paste:before {\n  content: "\\f0ea";\n}\n.fa-patreon:before {\n  content: "\\f3d9";\n}\n.fa-pause:before {\n  content: "\\f04c";\n}\n.fa-pause-circle:before {\n  content: "\\f28b";\n}\n.fa-paw:before {\n  content: "\\f1b0";\n}\n.fa-paypal:before {\n  content: "\\f1ed";\n}\n.fa-peace:before {\n  content: "\\f67c";\n}\n.fa-pen:before {\n  content: "\\f304";\n}\n.fa-pen-alt:before {\n  content: "\\f305";\n}\n.fa-pen-fancy:before {\n  content: "\\f5ac";\n}\n.fa-pen-nib:before {\n  content: "\\f5ad";\n}\n.fa-pen-square:before {\n  content: "\\f14b";\n}\n.fa-pencil-alt:before {\n  content: "\\f303";\n}\n.fa-pencil-ruler:before {\n  content: "\\f5ae";\n}\n.fa-penny-arcade:before {\n  content: "\\f704";\n}\n.fa-people-carry:before {\n  content: "\\f4ce";\n}\n.fa-pepper-hot:before {\n  content: "\\f816";\n}\n.fa-percent:before {\n  content: "\\f295";\n}\n.fa-percentage:before {\n  content: "\\f541";\n}\n.fa-periscope:before {\n  content: "\\f3da";\n}\n.fa-person-booth:before {\n  content: "\\f756";\n}\n.fa-phabricator:before {\n  content: "\\f3db";\n}\n.fa-phoenix-framework:before {\n  content: "\\f3dc";\n}\n.fa-phoenix-squadron:before {\n  content: "\\f511";\n}\n.fa-phone:before {\n  content: "\\f095";\n}\n.fa-phone-alt:before {\n  content: "\\f879";\n}\n.fa-phone-slash:before {\n  content: "\\f3dd";\n}\n.fa-phone-square:before {\n  content: "\\f098";\n}\n.fa-phone-square-alt:before {\n  content: "\\f87b";\n}\n.fa-phone-volume:before {\n  content: "\\f2a0";\n}\n.fa-photo-video:before {\n  content: "\\f87c";\n}\n.fa-php:before {\n  content: "\\f457";\n}\n.fa-pied-piper:before {\n  content: "\\f2ae";\n}\n.fa-pied-piper-alt:before {\n  content: "\\f1a8";\n}\n.fa-pied-piper-hat:before {\n  content: "\\f4e5";\n}\n.fa-pied-piper-pp:before {\n  content: "\\f1a7";\n}\n.fa-pied-piper-square:before {\n  content: "\\f91e";\n}\n.fa-piggy-bank:before {\n  content: "\\f4d3";\n}\n.fa-pills:before {\n  content: "\\f484";\n}\n.fa-pinterest:before {\n  content: "\\f0d2";\n}\n.fa-pinterest-p:before {\n  content: "\\f231";\n}\n.fa-pinterest-square:before {\n  content: "\\f0d3";\n}\n.fa-pizza-slice:before {\n  content: "\\f818";\n}\n.fa-place-of-worship:before {\n  content: "\\f67f";\n}\n.fa-plane:before {\n  content: "\\f072";\n}\n.fa-plane-arrival:before {\n  content: "\\f5af";\n}\n.fa-plane-departure:before {\n  content: "\\f5b0";\n}\n.fa-play:before {\n  content: "\\f04b";\n}\n.fa-play-circle:before {\n  content: "\\f144";\n}\n.fa-playstation:before {\n  content: "\\f3df";\n}\n.fa-plug:before {\n  content: "\\f1e6";\n}\n.fa-plus:before {\n  content: "\\f067";\n}\n.fa-plus-circle:before {\n  content: "\\f055";\n}\n.fa-plus-square:before {\n  content: "\\f0fe";\n}\n.fa-podcast:before {\n  content: "\\f2ce";\n}\n.fa-poll:before {\n  content: "\\f681";\n}\n.fa-poll-h:before {\n  content: "\\f682";\n}\n.fa-poo:before {\n  content: "\\f2fe";\n}\n.fa-poo-storm:before {\n  content: "\\f75a";\n}\n.fa-poop:before {\n  content: "\\f619";\n}\n.fa-portrait:before {\n  content: "\\f3e0";\n}\n.fa-pound-sign:before {\n  content: "\\f154";\n}\n.fa-power-off:before {\n  content: "\\f011";\n}\n.fa-pray:before {\n  content: "\\f683";\n}\n.fa-praying-hands:before {\n  content: "\\f684";\n}\n.fa-prescription:before {\n  content: "\\f5b1";\n}\n.fa-prescription-bottle:before {\n  content: "\\f485";\n}\n.fa-prescription-bottle-alt:before {\n  content: "\\f486";\n}\n.fa-print:before {\n  content: "\\f02f";\n}\n.fa-procedures:before {\n  content: "\\f487";\n}\n.fa-product-hunt:before {\n  content: "\\f288";\n}\n.fa-project-diagram:before {\n  content: "\\f542";\n}\n.fa-pushed:before {\n  content: "\\f3e1";\n}\n.fa-puzzle-piece:before {\n  content: "\\f12e";\n}\n.fa-python:before {\n  content: "\\f3e2";\n}\n.fa-qq:before {\n  content: "\\f1d6";\n}\n.fa-qrcode:before {\n  content: "\\f029";\n}\n.fa-question:before {\n  content: "\\f128";\n}\n.fa-question-circle:before {\n  content: "\\f059";\n}\n.fa-quidditch:before {\n  content: "\\f458";\n}\n.fa-quinscape:before {\n  content: "\\f459";\n}\n.fa-quora:before {\n  content: "\\f2c4";\n}\n.fa-quote-left:before {\n  content: "\\f10d";\n}\n.fa-quote-right:before {\n  content: "\\f10e";\n}\n.fa-quran:before {\n  content: "\\f687";\n}\n.fa-r-project:before {\n  content: "\\f4f7";\n}\n.fa-radiation:before {\n  content: "\\f7b9";\n}\n.fa-radiation-alt:before {\n  content: "\\f7ba";\n}\n.fa-rainbow:before {\n  content: "\\f75b";\n}\n.fa-random:before {\n  content: "\\f074";\n}\n.fa-raspberry-pi:before {\n  content: "\\f7bb";\n}\n.fa-ravelry:before {\n  content: "\\f2d9";\n}\n.fa-react:before {\n  content: "\\f41b";\n}\n.fa-reacteurope:before {\n  content: "\\f75d";\n}\n.fa-readme:before {\n  content: "\\f4d5";\n}\n.fa-rebel:before {\n  content: "\\f1d0";\n}\n.fa-receipt:before {\n  content: "\\f543";\n}\n.fa-record-vinyl:before {\n  content: "\\f8d9";\n}\n.fa-recycle:before {\n  content: "\\f1b8";\n}\n.fa-red-river:before {\n  content: "\\f3e3";\n}\n.fa-reddit:before {\n  content: "\\f1a1";\n}\n.fa-reddit-alien:before {\n  content: "\\f281";\n}\n.fa-reddit-square:before {\n  content: "\\f1a2";\n}\n.fa-redhat:before {\n  content: "\\f7bc";\n}\n.fa-redo:before {\n  content: "\\f01e";\n}\n.fa-redo-alt:before {\n  content: "\\f2f9";\n}\n.fa-registered:before {\n  content: "\\f25d";\n}\n.fa-remove-format:before {\n  content: "\\f87d";\n}\n.fa-renren:before {\n  content: "\\f18b";\n}\n.fa-reply:before {\n  content: "\\f3e5";\n}\n.fa-reply-all:before {\n  content: "\\f122";\n}\n.fa-replyd:before {\n  content: "\\f3e6";\n}\n.fa-republican:before {\n  content: "\\f75e";\n}\n.fa-researchgate:before {\n  content: "\\f4f8";\n}\n.fa-resolving:before {\n  content: "\\f3e7";\n}\n.fa-restroom:before {\n  content: "\\f7bd";\n}\n.fa-retweet:before {\n  content: "\\f079";\n}\n.fa-rev:before {\n  content: "\\f5b2";\n}\n.fa-ribbon:before {\n  content: "\\f4d6";\n}\n.fa-ring:before {\n  content: "\\f70b";\n}\n.fa-road:before {\n  content: "\\f018";\n}\n.fa-robot:before {\n  content: "\\f544";\n}\n.fa-rocket:before {\n  content: "\\f135";\n}\n.fa-rocketchat:before {\n  content: "\\f3e8";\n}\n.fa-rockrms:before {\n  content: "\\f3e9";\n}\n.fa-route:before {\n  content: "\\f4d7";\n}\n.fa-rss:before {\n  content: "\\f09e";\n}\n.fa-rss-square:before {\n  content: "\\f143";\n}\n.fa-ruble-sign:before {\n  content: "\\f158";\n}\n.fa-ruler:before {\n  content: "\\f545";\n}\n.fa-ruler-combined:before {\n  content: "\\f546";\n}\n.fa-ruler-horizontal:before {\n  content: "\\f547";\n}\n.fa-ruler-vertical:before {\n  content: "\\f548";\n}\n.fa-running:before {\n  content: "\\f70c";\n}\n.fa-rupee-sign:before {\n  content: "\\f156";\n}\n.fa-sad-cry:before {\n  content: "\\f5b3";\n}\n.fa-sad-tear:before {\n  content: "\\f5b4";\n}\n.fa-safari:before {\n  content: "\\f267";\n}\n.fa-salesforce:before {\n  content: "\\f83b";\n}\n.fa-sass:before {\n  content: "\\f41e";\n}\n.fa-satellite:before {\n  content: "\\f7bf";\n}\n.fa-satellite-dish:before {\n  content: "\\f7c0";\n}\n.fa-save:before {\n  content: "\\f0c7";\n}\n.fa-schlix:before {\n  content: "\\f3ea";\n}\n.fa-school:before {\n  content: "\\f549";\n}\n.fa-screwdriver:before {\n  content: "\\f54a";\n}\n.fa-scribd:before {\n  content: "\\f28a";\n}\n.fa-scroll:before {\n  content: "\\f70e";\n}\n.fa-sd-card:before {\n  content: "\\f7c2";\n}\n.fa-search:before {\n  content: "\\f002";\n}\n.fa-search-dollar:before {\n  content: "\\f688";\n}\n.fa-search-location:before {\n  content: "\\f689";\n}\n.fa-search-minus:before {\n  content: "\\f010";\n}\n.fa-search-plus:before {\n  content: "\\f00e";\n}\n.fa-searchengin:before {\n  content: "\\f3eb";\n}\n.fa-seedling:before {\n  content: "\\f4d8";\n}\n.fa-sellcast:before {\n  content: "\\f2da";\n}\n.fa-sellsy:before {\n  content: "\\f213";\n}\n.fa-server:before {\n  content: "\\f233";\n}\n.fa-servicestack:before {\n  content: "\\f3ec";\n}\n.fa-shapes:before {\n  content: "\\f61f";\n}\n.fa-share:before {\n  content: "\\f064";\n}\n.fa-share-alt:before {\n  content: "\\f1e0";\n}\n.fa-share-alt-square:before {\n  content: "\\f1e1";\n}\n.fa-share-square:before {\n  content: "\\f14d";\n}\n.fa-shekel-sign:before {\n  content: "\\f20b";\n}\n.fa-shield-alt:before {\n  content: "\\f3ed";\n}\n.fa-ship:before {\n  content: "\\f21a";\n}\n.fa-shipping-fast:before {\n  content: "\\f48b";\n}\n.fa-shirtsinbulk:before {\n  content: "\\f214";\n}\n.fa-shoe-prints:before {\n  content: "\\f54b";\n}\n.fa-shopping-bag:before {\n  content: "\\f290";\n}\n.fa-shopping-basket:before {\n  content: "\\f291";\n}\n.fa-shopping-cart:before {\n  content: "\\f07a";\n}\n.fa-shopware:before {\n  content: "\\f5b5";\n}\n.fa-shower:before {\n  content: "\\f2cc";\n}\n.fa-shuttle-van:before {\n  content: "\\f5b6";\n}\n.fa-sign:before {\n  content: "\\f4d9";\n}\n.fa-sign-in-alt:before {\n  content: "\\f2f6";\n}\n.fa-sign-language:before {\n  content: "\\f2a7";\n}\n.fa-sign-out-alt:before {\n  content: "\\f2f5";\n}\n.fa-signal:before {\n  content: "\\f012";\n}\n.fa-signature:before {\n  content: "\\f5b7";\n}\n.fa-sim-card:before {\n  content: "\\f7c4";\n}\n.fa-simplybuilt:before {\n  content: "\\f215";\n}\n.fa-sistrix:before {\n  content: "\\f3ee";\n}\n.fa-sitemap:before {\n  content: "\\f0e8";\n}\n.fa-sith:before {\n  content: "\\f512";\n}\n.fa-skating:before {\n  content: "\\f7c5";\n}\n.fa-sketch:before {\n  content: "\\f7c6";\n}\n.fa-skiing:before {\n  content: "\\f7c9";\n}\n.fa-skiing-nordic:before {\n  content: "\\f7ca";\n}\n.fa-skull:before {\n  content: "\\f54c";\n}\n.fa-skull-crossbones:before {\n  content: "\\f714";\n}\n.fa-skyatlas:before {\n  content: "\\f216";\n}\n.fa-skype:before {\n  content: "\\f17e";\n}\n.fa-slack:before {\n  content: "\\f198";\n}\n.fa-slack-hash:before {\n  content: "\\f3ef";\n}\n.fa-slash:before {\n  content: "\\f715";\n}\n.fa-sleigh:before {\n  content: "\\f7cc";\n}\n.fa-sliders-h:before {\n  content: "\\f1de";\n}\n.fa-slideshare:before {\n  content: "\\f1e7";\n}\n.fa-smile:before {\n  content: "\\f118";\n}\n.fa-smile-beam:before {\n  content: "\\f5b8";\n}\n.fa-smile-wink:before {\n  content: "\\f4da";\n}\n.fa-smog:before {\n  content: "\\f75f";\n}\n.fa-smoking:before {\n  content: "\\f48d";\n}\n.fa-smoking-ban:before {\n  content: "\\f54d";\n}\n.fa-sms:before {\n  content: "\\f7cd";\n}\n.fa-snapchat:before {\n  content: "\\f2ab";\n}\n.fa-snapchat-ghost:before {\n  content: "\\f2ac";\n}\n.fa-snapchat-square:before {\n  content: "\\f2ad";\n}\n.fa-snowboarding:before {\n  content: "\\f7ce";\n}\n.fa-snowflake:before {\n  content: "\\f2dc";\n}\n.fa-snowman:before {\n  content: "\\f7d0";\n}\n.fa-snowplow:before {\n  content: "\\f7d2";\n}\n.fa-socks:before {\n  content: "\\f696";\n}\n.fa-solar-panel:before {\n  content: "\\f5ba";\n}\n.fa-sort:before {\n  content: "\\f0dc";\n}\n.fa-sort-alpha-down:before {\n  content: "\\f15d";\n}\n.fa-sort-alpha-down-alt:before {\n  content: "\\f881";\n}\n.fa-sort-alpha-up:before {\n  content: "\\f15e";\n}\n.fa-sort-alpha-up-alt:before {\n  content: "\\f882";\n}\n.fa-sort-amount-down:before {\n  content: "\\f160";\n}\n.fa-sort-amount-down-alt:before {\n  content: "\\f884";\n}\n.fa-sort-amount-up:before {\n  content: "\\f161";\n}\n.fa-sort-amount-up-alt:before {\n  content: "\\f885";\n}\n.fa-sort-down:before {\n  content: "\\f0dd";\n}\n.fa-sort-numeric-down:before {\n  content: "\\f162";\n}\n.fa-sort-numeric-down-alt:before {\n  content: "\\f886";\n}\n.fa-sort-numeric-up:before {\n  content: "\\f163";\n}\n.fa-sort-numeric-up-alt:before {\n  content: "\\f887";\n}\n.fa-sort-up:before {\n  content: "\\f0de";\n}\n.fa-soundcloud:before {\n  content: "\\f1be";\n}\n.fa-sourcetree:before {\n  content: "\\f7d3";\n}\n.fa-spa:before {\n  content: "\\f5bb";\n}\n.fa-space-shuttle:before {\n  content: "\\f197";\n}\n.fa-speakap:before {\n  content: "\\f3f3";\n}\n.fa-speaker-deck:before {\n  content: "\\f83c";\n}\n.fa-spell-check:before {\n  content: "\\f891";\n}\n.fa-spider:before {\n  content: "\\f717";\n}\n.fa-spinner:before {\n  content: "\\f110";\n}\n.fa-splotch:before {\n  content: "\\f5bc";\n}\n.fa-spotify:before {\n  content: "\\f1bc";\n}\n.fa-spray-can:before {\n  content: "\\f5bd";\n}\n.fa-square:before {\n  content: "\\f0c8";\n}\n.fa-square-full:before {\n  content: "\\f45c";\n}\n.fa-square-root-alt:before {\n  content: "\\f698";\n}\n.fa-squarespace:before {\n  content: "\\f5be";\n}\n.fa-stack-exchange:before {\n  content: "\\f18d";\n}\n.fa-stack-overflow:before {\n  content: "\\f16c";\n}\n.fa-stackpath:before {\n  content: "\\f842";\n}\n.fa-stamp:before {\n  content: "\\f5bf";\n}\n.fa-star:before {\n  content: "\\f005";\n}\n.fa-star-and-crescent:before {\n  content: "\\f699";\n}\n.fa-star-half:before {\n  content: "\\f089";\n}\n.fa-star-half-alt:before {\n  content: "\\f5c0";\n}\n.fa-star-of-david:before {\n  content: "\\f69a";\n}\n.fa-star-of-life:before {\n  content: "\\f621";\n}\n.fa-staylinked:before {\n  content: "\\f3f5";\n}\n.fa-steam:before {\n  content: "\\f1b6";\n}\n.fa-steam-square:before {\n  content: "\\f1b7";\n}\n.fa-steam-symbol:before {\n  content: "\\f3f6";\n}\n.fa-step-backward:before {\n  content: "\\f048";\n}\n.fa-step-forward:before {\n  content: "\\f051";\n}\n.fa-stethoscope:before {\n  content: "\\f0f1";\n}\n.fa-sticker-mule:before {\n  content: "\\f3f7";\n}\n.fa-sticky-note:before {\n  content: "\\f249";\n}\n.fa-stop:before {\n  content: "\\f04d";\n}\n.fa-stop-circle:before {\n  content: "\\f28d";\n}\n.fa-stopwatch:before {\n  content: "\\f2f2";\n}\n.fa-store:before {\n  content: "\\f54e";\n}\n.fa-store-alt:before {\n  content: "\\f54f";\n}\n.fa-strava:before {\n  content: "\\f428";\n}\n.fa-stream:before {\n  content: "\\f550";\n}\n.fa-street-view:before {\n  content: "\\f21d";\n}\n.fa-strikethrough:before {\n  content: "\\f0cc";\n}\n.fa-stripe:before {\n  content: "\\f429";\n}\n.fa-stripe-s:before {\n  content: "\\f42a";\n}\n.fa-stroopwafel:before {\n  content: "\\f551";\n}\n.fa-studiovinari:before {\n  content: "\\f3f8";\n}\n.fa-stumbleupon:before {\n  content: "\\f1a4";\n}\n.fa-stumbleupon-circle:before {\n  content: "\\f1a3";\n}\n.fa-subscript:before {\n  content: "\\f12c";\n}\n.fa-subway:before {\n  content: "\\f239";\n}\n.fa-suitcase:before {\n  content: "\\f0f2";\n}\n.fa-suitcase-rolling:before {\n  content: "\\f5c1";\n}\n.fa-sun:before {\n  content: "\\f185";\n}\n.fa-superpowers:before {\n  content: "\\f2dd";\n}\n.fa-superscript:before {\n  content: "\\f12b";\n}\n.fa-supple:before {\n  content: "\\f3f9";\n}\n.fa-surprise:before {\n  content: "\\f5c2";\n}\n.fa-suse:before {\n  content: "\\f7d6";\n}\n.fa-swatchbook:before {\n  content: "\\f5c3";\n}\n.fa-swift:before {\n  content: "\\f8e1";\n}\n.fa-swimmer:before {\n  content: "\\f5c4";\n}\n.fa-swimming-pool:before {\n  content: "\\f5c5";\n}\n.fa-symfony:before {\n  content: "\\f83d";\n}\n.fa-synagogue:before {\n  content: "\\f69b";\n}\n.fa-sync:before {\n  content: "\\f021";\n}\n.fa-sync-alt:before {\n  content: "\\f2f1";\n}\n.fa-syringe:before {\n  content: "\\f48e";\n}\n.fa-table:before {\n  content: "\\f0ce";\n}\n.fa-table-tennis:before {\n  content: "\\f45d";\n}\n.fa-tablet:before {\n  content: "\\f10a";\n}\n.fa-tablet-alt:before {\n  content: "\\f3fa";\n}\n.fa-tablets:before {\n  content: "\\f490";\n}\n.fa-tachometer-alt:before {\n  content: "\\f3fd";\n}\n.fa-tag:before {\n  content: "\\f02b";\n}\n.fa-tags:before {\n  content: "\\f02c";\n}\n.fa-tape:before {\n  content: "\\f4db";\n}\n.fa-tasks:before {\n  content: "\\f0ae";\n}\n.fa-taxi:before {\n  content: "\\f1ba";\n}\n.fa-teamspeak:before {\n  content: "\\f4f9";\n}\n.fa-teeth:before {\n  content: "\\f62e";\n}\n.fa-teeth-open:before {\n  content: "\\f62f";\n}\n.fa-telegram:before {\n  content: "\\f2c6";\n}\n.fa-telegram-plane:before {\n  content: "\\f3fe";\n}\n.fa-temperature-high:before {\n  content: "\\f769";\n}\n.fa-temperature-low:before {\n  content: "\\f76b";\n}\n.fa-tencent-weibo:before {\n  content: "\\f1d5";\n}\n.fa-tenge:before {\n  content: "\\f7d7";\n}\n.fa-terminal:before {\n  content: "\\f120";\n}\n.fa-text-height:before {\n  content: "\\f034";\n}\n.fa-text-width:before {\n  content: "\\f035";\n}\n.fa-th:before {\n  content: "\\f00a";\n}\n.fa-th-large:before {\n  content: "\\f009";\n}\n.fa-th-list:before {\n  content: "\\f00b";\n}\n.fa-the-red-yeti:before {\n  content: "\\f69d";\n}\n.fa-theater-masks:before {\n  content: "\\f630";\n}\n.fa-themeco:before {\n  content: "\\f5c6";\n}\n.fa-themeisle:before {\n  content: "\\f2b2";\n}\n.fa-thermometer:before {\n  content: "\\f491";\n}\n.fa-thermometer-empty:before {\n  content: "\\f2cb";\n}\n.fa-thermometer-full:before {\n  content: "\\f2c7";\n}\n.fa-thermometer-half:before {\n  content: "\\f2c9";\n}\n.fa-thermometer-quarter:before {\n  content: "\\f2ca";\n}\n.fa-thermometer-three-quarters:before {\n  content: "\\f2c8";\n}\n.fa-think-peaks:before {\n  content: "\\f731";\n}\n.fa-thumbs-down:before {\n  content: "\\f165";\n}\n.fa-thumbs-up:before {\n  content: "\\f164";\n}\n.fa-thumbtack:before {\n  content: "\\f08d";\n}\n.fa-ticket-alt:before {\n  content: "\\f3ff";\n}\n.fa-times:before {\n  content: "\\f00d";\n}\n.fa-times-circle:before {\n  content: "\\f057";\n}\n.fa-tint:before {\n  content: "\\f043";\n}\n.fa-tint-slash:before {\n  content: "\\f5c7";\n}\n.fa-tired:before {\n  content: "\\f5c8";\n}\n.fa-toggle-off:before {\n  content: "\\f204";\n}\n.fa-toggle-on:before {\n  content: "\\f205";\n}\n.fa-toilet:before {\n  content: "\\f7d8";\n}\n.fa-toilet-paper:before {\n  content: "\\f71e";\n}\n.fa-toolbox:before {\n  content: "\\f552";\n}\n.fa-tools:before {\n  content: "\\f7d9";\n}\n.fa-tooth:before {\n  content: "\\f5c9";\n}\n.fa-torah:before {\n  content: "\\f6a0";\n}\n.fa-torii-gate:before {\n  content: "\\f6a1";\n}\n.fa-tractor:before {\n  content: "\\f722";\n}\n.fa-trade-federation:before {\n  content: "\\f513";\n}\n.fa-trademark:before {\n  content: "\\f25c";\n}\n.fa-traffic-light:before {\n  content: "\\f637";\n}\n.fa-trailer:before {\n  content: "\\f941";\n}\n.fa-train:before {\n  content: "\\f238";\n}\n.fa-tram:before {\n  content: "\\f7da";\n}\n.fa-transgender:before {\n  content: "\\f224";\n}\n.fa-transgender-alt:before {\n  content: "\\f225";\n}\n.fa-trash:before {\n  content: "\\f1f8";\n}\n.fa-trash-alt:before {\n  content: "\\f2ed";\n}\n.fa-trash-restore:before {\n  content: "\\f829";\n}\n.fa-trash-restore-alt:before {\n  content: "\\f82a";\n}\n.fa-tree:before {\n  content: "\\f1bb";\n}\n.fa-trello:before {\n  content: "\\f181";\n}\n.fa-tripadvisor:before {\n  content: "\\f262";\n}\n.fa-trophy:before {\n  content: "\\f091";\n}\n.fa-truck:before {\n  content: "\\f0d1";\n}\n.fa-truck-loading:before {\n  content: "\\f4de";\n}\n.fa-truck-monster:before {\n  content: "\\f63b";\n}\n.fa-truck-moving:before {\n  content: "\\f4df";\n}\n.fa-truck-pickup:before {\n  content: "\\f63c";\n}\n.fa-tshirt:before {\n  content: "\\f553";\n}\n.fa-tty:before {\n  content: "\\f1e4";\n}\n.fa-tumblr:before {\n  content: "\\f173";\n}\n.fa-tumblr-square:before {\n  content: "\\f174";\n}\n.fa-tv:before {\n  content: "\\f26c";\n}\n.fa-twitch:before {\n  content: "\\f1e8";\n}\n.fa-twitter:before {\n  content: "\\f099";\n}\n.fa-twitter-square:before {\n  content: "\\f081";\n}\n.fa-typo3:before {\n  content: "\\f42b";\n}\n.fa-uber:before {\n  content: "\\f402";\n}\n.fa-ubuntu:before {\n  content: "\\f7df";\n}\n.fa-uikit:before {\n  content: "\\f403";\n}\n.fa-umbraco:before {\n  content: "\\f8e8";\n}\n.fa-umbrella:before {\n  content: "\\f0e9";\n}\n.fa-umbrella-beach:before {\n  content: "\\f5ca";\n}\n.fa-underline:before {\n  content: "\\f0cd";\n}\n.fa-undo:before {\n  content: "\\f0e2";\n}\n.fa-undo-alt:before {\n  content: "\\f2ea";\n}\n.fa-uniregistry:before {\n  content: "\\f404";\n}\n.fa-unity:before {\n  content: "\\f949";\n}\n.fa-universal-access:before {\n  content: "\\f29a";\n}\n.fa-university:before {\n  content: "\\f19c";\n}\n.fa-unlink:before {\n  content: "\\f127";\n}\n.fa-unlock:before {\n  content: "\\f09c";\n}\n.fa-unlock-alt:before {\n  content: "\\f13e";\n}\n.fa-untappd:before {\n  content: "\\f405";\n}\n.fa-upload:before {\n  content: "\\f093";\n}\n.fa-ups:before {\n  content: "\\f7e0";\n}\n.fa-usb:before {\n  content: "\\f287";\n}\n.fa-user:before {\n  content: "\\f007";\n}\n.fa-user-alt:before {\n  content: "\\f406";\n}\n.fa-user-alt-slash:before {\n  content: "\\f4fa";\n}\n.fa-user-astronaut:before {\n  content: "\\f4fb";\n}\n.fa-user-check:before {\n  content: "\\f4fc";\n}\n.fa-user-circle:before {\n  content: "\\f2bd";\n}\n.fa-user-clock:before {\n  content: "\\f4fd";\n}\n.fa-user-cog:before {\n  content: "\\f4fe";\n}\n.fa-user-edit:before {\n  content: "\\f4ff";\n}\n.fa-user-friends:before {\n  content: "\\f500";\n}\n.fa-user-graduate:before {\n  content: "\\f501";\n}\n.fa-user-injured:before {\n  content: "\\f728";\n}\n.fa-user-lock:before {\n  content: "\\f502";\n}\n.fa-user-md:before {\n  content: "\\f0f0";\n}\n.fa-user-minus:before {\n  content: "\\f503";\n}\n.fa-user-ninja:before {\n  content: "\\f504";\n}\n.fa-user-nurse:before {\n  content: "\\f82f";\n}\n.fa-user-plus:before {\n  content: "\\f234";\n}\n.fa-user-secret:before {\n  content: "\\f21b";\n}\n.fa-user-shield:before {\n  content: "\\f505";\n}\n.fa-user-slash:before {\n  content: "\\f506";\n}\n.fa-user-tag:before {\n  content: "\\f507";\n}\n.fa-user-tie:before {\n  content: "\\f508";\n}\n.fa-user-times:before {\n  content: "\\f235";\n}\n.fa-users:before {\n  content: "\\f0c0";\n}\n.fa-users-cog:before {\n  content: "\\f509";\n}\n.fa-usps:before {\n  content: "\\f7e1";\n}\n.fa-ussunnah:before {\n  content: "\\f407";\n}\n.fa-utensil-spoon:before {\n  content: "\\f2e5";\n}\n.fa-utensils:before {\n  content: "\\f2e7";\n}\n.fa-vaadin:before {\n  content: "\\f408";\n}\n.fa-vector-square:before {\n  content: "\\f5cb";\n}\n.fa-venus:before {\n  content: "\\f221";\n}\n.fa-venus-double:before {\n  content: "\\f226";\n}\n.fa-venus-mars:before {\n  content: "\\f228";\n}\n.fa-viacoin:before {\n  content: "\\f237";\n}\n.fa-viadeo:before {\n  content: "\\f2a9";\n}\n.fa-viadeo-square:before {\n  content: "\\f2aa";\n}\n.fa-vial:before {\n  content: "\\f492";\n}\n.fa-vials:before {\n  content: "\\f493";\n}\n.fa-viber:before {\n  content: "\\f409";\n}\n.fa-video:before {\n  content: "\\f03d";\n}\n.fa-video-slash:before {\n  content: "\\f4e2";\n}\n.fa-vihara:before {\n  content: "\\f6a7";\n}\n.fa-vimeo:before {\n  content: "\\f40a";\n}\n.fa-vimeo-square:before {\n  content: "\\f194";\n}\n.fa-vimeo-v:before {\n  content: "\\f27d";\n}\n.fa-vine:before {\n  content: "\\f1ca";\n}\n.fa-vk:before {\n  content: "\\f189";\n}\n.fa-vnv:before {\n  content: "\\f40b";\n}\n.fa-voicemail:before {\n  content: "\\f897";\n}\n.fa-volleyball-ball:before {\n  content: "\\f45f";\n}\n.fa-volume-down:before {\n  content: "\\f027";\n}\n.fa-volume-mute:before {\n  content: "\\f6a9";\n}\n.fa-volume-off:before {\n  content: "\\f026";\n}\n.fa-volume-up:before {\n  content: "\\f028";\n}\n.fa-vote-yea:before {\n  content: "\\f772";\n}\n.fa-vr-cardboard:before {\n  content: "\\f729";\n}\n.fa-vuejs:before {\n  content: "\\f41f";\n}\n.fa-walking:before {\n  content: "\\f554";\n}\n.fa-wallet:before {\n  content: "\\f555";\n}\n.fa-warehouse:before {\n  content: "\\f494";\n}\n.fa-water:before {\n  content: "\\f773";\n}\n.fa-wave-square:before {\n  content: "\\f83e";\n}\n.fa-waze:before {\n  content: "\\f83f";\n}\n.fa-weebly:before {\n  content: "\\f5cc";\n}\n.fa-weibo:before {\n  content: "\\f18a";\n}\n.fa-weight:before {\n  content: "\\f496";\n}\n.fa-weight-hanging:before {\n  content: "\\f5cd";\n}\n.fa-weixin:before {\n  content: "\\f1d7";\n}\n.fa-whatsapp:before {\n  content: "\\f232";\n}\n.fa-whatsapp-square:before {\n  content: "\\f40c";\n}\n.fa-wheelchair:before {\n  content: "\\f193";\n}\n.fa-whmcs:before {\n  content: "\\f40d";\n}\n.fa-wifi:before {\n  content: "\\f1eb";\n}\n.fa-wikipedia-w:before {\n  content: "\\f266";\n}\n.fa-wind:before {\n  content: "\\f72e";\n}\n.fa-window-close:before {\n  content: "\\f410";\n}\n.fa-window-maximize:before {\n  content: "\\f2d0";\n}\n.fa-window-minimize:before {\n  content: "\\f2d1";\n}\n.fa-window-restore:before {\n  content: "\\f2d2";\n}\n.fa-windows:before {\n  content: "\\f17a";\n}\n.fa-wine-bottle:before {\n  content: "\\f72f";\n}\n.fa-wine-glass:before {\n  content: "\\f4e3";\n}\n.fa-wine-glass-alt:before {\n  content: "\\f5ce";\n}\n.fa-wix:before {\n  content: "\\f5cf";\n}\n.fa-wizards-of-the-coast:before {\n  content: "\\f730";\n}\n.fa-wolf-pack-battalion:before {\n  content: "\\f514";\n}\n.fa-won-sign:before {\n  content: "\\f159";\n}\n.fa-wordpress:before {\n  content: "\\f19a";\n}\n.fa-wordpress-simple:before {\n  content: "\\f411";\n}\n.fa-wpbeginner:before {\n  content: "\\f297";\n}\n.fa-wpexplorer:before {\n  content: "\\f2de";\n}\n.fa-wpforms:before {\n  content: "\\f298";\n}\n.fa-wpressr:before {\n  content: "\\f3e4";\n}\n.fa-wrench:before {\n  content: "\\f0ad";\n}\n.fa-x-ray:before {\n  content: "\\f497";\n}\n.fa-xbox:before {\n  content: "\\f412";\n}\n.fa-xing:before {\n  content: "\\f168";\n}\n.fa-xing-square:before {\n  content: "\\f169";\n}\n.fa-y-combinator:before {\n  content: "\\f23b";\n}\n.fa-yahoo:before {\n  content: "\\f19e";\n}\n.fa-yammer:before {\n  content: "\\f840";\n}\n.fa-yandex:before {\n  content: "\\f413";\n}\n.fa-yandex-international:before {\n  content: "\\f414";\n}\n.fa-yarn:before {\n  content: "\\f7e3";\n}\n.fa-yelp:before {\n  content: "\\f1e9";\n}\n.fa-yen-sign:before {\n  content: "\\f157";\n}\n.fa-yin-yang:before {\n  content: "\\f6ad";\n}\n.fa-yoast:before {\n  content: "\\f2b1";\n}\n.fa-youtube:before {\n  content: "\\f167";\n}\n.fa-youtube-square:before {\n  content: "\\f431";\n}\n.fa-zhihu:before {\n  content: "\\f63f";\n}\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n.sr-only-focusable:active,\n.sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n/*!\n * Font Awesome Free 5.12.0 by @fontawesome - https://fontawesome.com\n * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)\n */\n@font-face {\n  font-family: \'Font Awesome 5 Free\';\n  font-style: normal;\n  font-weight: 400;\n  font-display: auto;\n  src: url('+k+");\n  src: url("+S+") format('embedded-opentype'), url("+M+") format('woff2'), url("+A+") format('woff'), url("+I+") format('truetype'), url("+T+') format(\'svg\');\n}\n.far {\n  font-family: \'Font Awesome 5 Free\';\n  font-weight: 400;\n}\n#objtree-window {\n  background: #202020;\n  font-family: Verdana, Geneva, sans-serif;\n  font-size: 14px;\n  color: white;\n  overflow: auto;\n  position: absolute;\n  left: 0px;\n  right: 0px;\n  top: 0px;\n  bottom: 24px;\n  scrollbar-width: thin;\n  user-select: none;\n  -moz-user-select: none;\n  -khtml-user-select: none;\n  -webkit-user-select: none;\n  -webkit-touch-callout: none;\n  -o-user-select: none;\n}\n#objtree-window .tree-item .tree-item-header {\n  text-indent: 10px hanging;\n  vertical-align: middle;\n  line-height: 24px;\n}\n#objtree-window .tree-item .tree-item-header .tree-item-expander {\n  width: 15px;\n  text-align: center;\n  font-family: \'Font Awesome 5 Free\';\n  font-weight: 900;\n  -moz-osx-font-smoothing: grayscale;\n  -webkit-font-smoothing: antialiased;\n  display: inline-block;\n  font-style: normal;\n  font-variant: normal;\n  text-rendering: auto;\n  line-height: 1;\n  font-size: 14px;\n  margin-left: 5px;\n  margin-right: 3px;\n}\n#objtree-window .tree-item .tree-item-header .tree-item-expander.fa-pull-left {\n  margin-right: 0.3em;\n}\n#objtree-window .tree-item .tree-item-header .tree-item-expander.fa-pull-right {\n  margin-left: 0.3em;\n}\n#objtree-window .tree-item .tree-item-header .tree-item-expander:before {\n  content: "\\f0da";\n}\n#objtree-window .tree-item .tree-item-header .tree-item-expander.leaf:before {\n  content: "";\n}\n#objtree-window .tree-item .tree-item-header .tree-item-eye {\n  text-align: center;\n  -moz-osx-font-smoothing: grayscale;\n  -webkit-font-smoothing: antialiased;\n  display: inline-block;\n  font-style: normal;\n  font-variant: normal;\n  text-rendering: auto;\n  line-height: 1;\n  font-family: \'Font Awesome 5 Free\';\n  font-weight: 400;\n  width: 18px;\n  font-size: 14px;\n  margin-left: 2px;\n  margin-right: 2px;\n}\n#objtree-window .tree-item .tree-item-header .tree-item-eye.fa-pull-left {\n  margin-right: 0.3em;\n}\n#objtree-window .tree-item .tree-item-header .tree-item-eye.fa-pull-right {\n  margin-left: 0.3em;\n}\n#objtree-window .tree-item .tree-item-header .tree-item-eye:before {\n  content: "\\f06e";\n}\n#objtree-window .tree-item .tree-item-header .tree-item-icon {\n  display: inline-block;\n  margin-right: 2px;\n  max-height: 24px;\n  max-width: 48px;\n  vertical-align: top;\n}\n#objtree-window .tree-item .tree-item-header .tree-item-label {\n  display: inline;\n}\n#objtree-window .tree-item.expanded > .tree-item-header .tree-item-expander:before {\n  content: "\\f0d7";\n}\n#objtree-window .tree-item.expanded > .tree-item-content {\n  display: block;\n}\n#objtree-window .tree-item.viewport-hide > .tree-item-header .tree-item-eye:before {\n  content: "\\f070";\n  color: #555555;\n}\n#objtree-window .tree-item.selected > .tree-item-header {\n  background-color: #2f943c;\n}\n#objtree-window .tree-item .tree-item-content {\n  display: none;\n  margin-left: 15px;\n}\n#objtree-search {\n  left: 0px;\n  width: 100%;\n  bottom: 0px;\n  height: 24px;\n  position: absolute;\n  background: linear-gradient(to bottom, #4a4a4a 0%, #404040 100%);\n  font-family: Verdana, Geneva, sans-serif;\n  font-size: 12px;\n  line-height: 24px;\n  color: white;\n  box-sizing: border-box;\n  border: 1px solid #888;\n}\n#uiframes-container {\n  pointer-events: none;\n}\n#uiframes-container,\n.uiframe-modal {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  overflow: hidden;\n}\n#uiframes-container .uiframe-container,\n.uiframe-modal .uiframe-container {\n  position: absolute;\n  background: transparent;\n  padding: 8px;\n  pointer-events: auto;\n}\n#uiframes-container .uiframe-container .uiframe,\n.uiframe-modal .uiframe-container .uiframe {\n  position: absolute;\n  background: #202020;\n  font-family: Verdana, Geneva, sans-serif;\n  font-size: 13px;\n  color: white;\n  margin: 7px;\n  box-shadow: 10px 10px 20px rgba(0, 0, 0, 0.3);\n  left: 0px;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  border: 1px solid #40628a;\n  cursor: auto;\n  user-select: none;\n  display: flex;\n  flex-direction: column;\n  -moz-user-select: none;\n  -khtml-user-select: none;\n  -webkit-user-select: none;\n  -webkit-touch-callout: none;\n  -o-user-select: none;\n}\n#uiframes-container .uiframe-container .uiframe .uiframe-header,\n.uiframe-modal .uiframe-container .uiframe .uiframe-header {\n  flex-basis: 30px;\n  font-size: 16px;\n  color: #8ba5c4;\n  overflow: hidden;\n  cursor: default;\n  line-height: 30px;\n  padding-left: 10px;\n  flex-shrink: 0;\n  position: relative;\n}\n#uiframes-container .uiframe-container .uiframe .uiframe-header .uiframe-close-button,\n.uiframe-modal .uiframe-container .uiframe .uiframe-header .uiframe-close-button {\n  position: absolute;\n  height: 100%;\n  right: 0px;\n  top: 0px;\n  font-family: \'Font Awesome 5 Free\';\n  font-weight: 900;\n  -moz-osx-font-smoothing: grayscale;\n  -webkit-font-smoothing: antialiased;\n  display: inline-block;\n  font-style: normal;\n  font-variant: normal;\n  text-rendering: auto;\n  line-height: 1;\n  font-size: 28px;\n  line-height: 30px;\n  margin-right: 4px;\n}\n#uiframes-container .uiframe-container .uiframe .uiframe-header .uiframe-close-button.fa-pull-left,\n.uiframe-modal .uiframe-container .uiframe .uiframe-header .uiframe-close-button.fa-pull-left {\n  margin-right: 0.3em;\n}\n#uiframes-container .uiframe-container .uiframe .uiframe-header .uiframe-close-button.fa-pull-right,\n.uiframe-modal .uiframe-container .uiframe .uiframe-header .uiframe-close-button.fa-pull-right {\n  margin-left: 0.3em;\n}\n#uiframes-container .uiframe-container .uiframe .uiframe-header .uiframe-close-button:before,\n.uiframe-modal .uiframe-container .uiframe .uiframe-header .uiframe-close-button:before {\n  content: "\\f00d";\n}\n#uiframes-container .uiframe-container .uiframe .uiframe-header .uiframe-close-button:hover,\n.uiframe-modal .uiframe-container .uiframe .uiframe-header .uiframe-close-button:hover {\n  opacity: 0.7;\n}\n#uiframes-container .uiframe-container .uiframe .uiframe-header .uiframe-close-button:active,\n.uiframe-modal .uiframe-container .uiframe .uiframe-header .uiframe-close-button:active {\n  transform: translate(1px, 1px);\n}\n#uiframes-container .uiframe-container .uiframe .uiframe-content,\n.uiframe-modal .uiframe-container .uiframe .uiframe-content {\n  overflow: auto;\n  padding: 8px;\n  flex-grow: 1;\n  scrollbar-width: thin;\n}\n#uiframes-container .uiframe-container .uiframe .uiframe-footer,\n.uiframe-modal .uiframe-container .uiframe .uiframe-footer {\n  flex-shrink: 0;\n  flex-basis: auto;\n  text-align: center;\n  vertical-align: middle;\n  padding: 5px;\n}\n#uiframes-container .uiframe-container .uiframe:focus,\n.uiframe-modal .uiframe-container .uiframe:focus {\n  outline: none;\n}\n#uiframes-container .uiframe-container .uiframe:focus-within .uiframe-header,\n.uiframe-modal .uiframe-container .uiframe:focus-within .uiframe-header {\n  color: #e9c183;\n}\nbody {\n  font-family: Verdana, Geneva, sans-serif;\n  font-size: 13px;\n  color: white;\n  background-color: black;\n}\n#ui-container {\n  display: flex;\n  position: absolute;\n  left: 0px;\n  top: 32px;\n  right: 0px;\n  bottom: 0px;\n}\n#ui-container #objtree-container {\n  position: relative;\n  width: 350px;\n}\n#ui-container #mapwindow-container {\n  user-select: none;\n  -moz-user-select: none;\n  -khtml-user-select: none;\n  -webkit-user-select: none;\n  -webkit-touch-callout: none;\n  -o-user-select: none;\n  flex-basis: 600px;\n  flex-grow: 1;\n  position: relative;\n}\n#ui-container #mapwindow-container #mapwindow {\n  background-color: #444488;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0px;\n  left: 0px;\n  image-rendering: optimizeSpeed;\n  image-rendering: -moz-crisp-edges;\n  image-rendering: -o-crisp-edges;\n  image-rendering: -webkit-optimize-contrast;\n  image-rendering: pixelated;\n  image-rendering: optimize-contrast;\n}\n#ui-container #mapwindow-container #mapwindow:focus {\n  outline: none;\n}\n#ui-container #mapwindow-container #tabwindow {\n  position: absolute;\n  left: 0px;\n  right: 0px;\n  top: 0px;\n  height: 35px;\n  background-color: #222244;\n  overflow-x: auto;\n  overflow-y: hidden;\n  scrollbar-width: thin;\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: flex-start;\n}\n#ui-container #mapwindow-container #tabwindow .tab {\n  flex: 0 1 auto;\n  min-width: 100px;\n  background-color: #333366;\n  border-right: 1px solid #444488;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  padding: 5px 30px 0px 10px;\n  color: lightgrey;\n  user-select: none;\n  -moz-user-select: none;\n  -khtml-user-select: none;\n  -webkit-user-select: none;\n  -webkit-touch-callout: none;\n  -o-user-select: none;\n}\n#ui-container #mapwindow-container #tabwindow .tab.selected {\n  background-color: #444488;\n  color: white;\n}\n#ui-container #mapwindow-container #tabwindow .tab .close-button {\n  font-family: \'Font Awesome 5 Free\';\n  font-weight: 900;\n  -moz-osx-font-smoothing: grayscale;\n  -webkit-font-smoothing: antialiased;\n  display: inline-block;\n  font-style: normal;\n  font-variant: normal;\n  text-rendering: auto;\n  line-height: 1;\n  float: right;\n  margin-right: -20px;\n  margin-top: 3px;\n  color: lightgrey;\n}\n#ui-container #mapwindow-container #tabwindow .tab .close-button.fa-pull-left {\n  margin-right: 0.3em;\n}\n#ui-container #mapwindow-container #tabwindow .tab .close-button.fa-pull-right {\n  margin-left: 0.3em;\n}\n#ui-container #mapwindow-container #tabwindow .tab.selected .close-button:after,\n#ui-container #mapwindow-container #tabwindow .tab:hover .close-button:after,\n#ui-container #mapwindow-container #tabwindow .tab.modified:hover .close-button:after {\n  content: "\\f00d";\n  font-size: 13px;\n}\n#ui-container #mapwindow-container #tabwindow .tab.modified .close-button:after {\n  content: "\\f111";\n  font-size: 10px;\n}\n#ui-container #mapwindow-container #toolwindow {\n  position: absolute;\n  top: 35px;\n  left: 0px;\n  padding: 2px;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n#ui-container #mapwindow-container #toolwindow .tool {\n  margin: 2px;\n  border: 10px solid transparent;\n}\n#ui-container #mapwindow-container #toolwindow .tool.selected,\n#ui-container #mapwindow-container #toolwindow .tool.selected:hover {\n  background: #2f943c;\n}\n#ui-container #mapwindow-container #toolwindow .tool:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n#ui-container #mapwindow-container #notificationwindow {\n  position: absolute;\n  top: 35px;\n  max-width: 500px;\n  right: 0px;\n  padding: 2px;\n}\n#ui-container #mapwindow-container #notificationwindow .notif-card {\n  pointer-events: none;\n  padding: 20px;\n  font-size: 24px;\n  max-width: 500px;\n  transition: opacity 2s;\n  opacity: 1;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n#ui-container #mapwindow-container #instancewindow {\n  position: absolute;\n  bottom: 0px;\n  right: 0px;\n  max-width: 300px;\n  max-height: 60%;\n  padding: 2px;\n  background-color: rgba(0, 0, 0, 0.8);\n  overflow: auto;\n  white-space: nowrap;\n  scrollbar-width: thin;\n}\n#ui-container #mapwindow-container #instancewindow pre {\n  display: inline-block;\n  margin: 0px;\n}\n#ui-container #mapwindow-container #instancewindow .horizontal-node-container {\n  display: inline-block;\n}\n#ui-container #mapwindow-container #instancewindow .vertical-node-container {\n  display: block;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.3);\n}\n#ui-container #mapwindow-container #instancewindow .variant-node {\n  display: inline-block;\n  margin: 1px;\n}\n#ui-container #mapwindow-container #instancewindow .variant-node.variant-instance {\n  display: block;\n}\n#ui-container #mapwindow-container #instancewindow .variant-leaf {\n  border: 2px solid transparent;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n#ui-container #mapwindow-container #instancewindow .variant-leaf img {\n  max-width: 64px;\n  max-height: 64px;\n  image-rendering: optimizeSpeed;\n  image-rendering: -moz-crisp-edges;\n  image-rendering: -o-crisp-edges;\n  image-rendering: -webkit-optimize-contrast;\n  image-rendering: pixelated;\n  image-rendering: optimize-contrast;\n}\n#ui-container #mapwindow-container #instancewindow .selected {\n  background-color: #2f943c;\n}\n#ui-container #mapwindow-container #instancewindow:empty {\n  display: none;\n}\n#ui-container #mapwindow-container #statustextwindow {\n  position: absolute;\n  bottom: 0px;\n  left: 0px;\n  background-color: rgba(0, 0, 0, 0.8);\n  font-family: \'Courier New\', Courier, monospace;\n  font-size: 18px;\n}\n#ui-menubar {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  right: 0px;\n  height: 32px;\n  overflow-x: auto;\n  overflow-y: hidden;\n  background: #40628a;\n  white-space: nowrap;\n  scrollbar-width: thin;\n  user-select: none;\n  -moz-user-select: none;\n  -khtml-user-select: none;\n  -webkit-user-select: none;\n  -webkit-touch-callout: none;\n  -o-user-select: none;\n}\n.uiframe-modal {\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n}\nbody.loading {\n  overflow: hidden;\n}\nbody.loading #loading {\n  display: flex;\n}\n#loading {\n  background-color: rgba(0, 0, 0, 0.8);\n  left: 0px;\n  top: 0px;\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  display: none;\n  align-items: center;\n  justify-content: center;\n  z-index: 5;\n}\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(1440deg);\n  }\n}\n#loading::after {\n  content: "";\n  width: 20px;\n  height: 200px;\n  background-color: white;\n  animation-name: spin;\n  animation-duration: 2s;\n  animation-iteration-count: infinite;\n  border-radius: 10px;\n}\n/* Fancy scrollbars on chrome! */\n::-webkit-scrollbar {\n  background-color: transparent;\n}\n::-webkit-scrollbar:vertical {\n  width: 10px;\n}\n::-webkit-scrollbar:horizontal {\n  height: 10px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #444;\n  border-radius: 5px;\n  background: linear-gradient(to right, #505050 0%, #5a5a5a 100%);\n  border: 1px solid #333333;\n}\n::-webkit-scrollbar-corner {\n  background-color: #222222;\n}\n::-webkit-scrollbar-track {\n  background-color: #222222;\n}\n',""]),t.default=_},function(e,t,n){"use strict";const r=n(126),i=n(127),a=n(130),o=n(131),s=n(43),f=n(219),c=n(273),h=n(274),l=n(7),{FileMenu:d,OptionsMenu:u,HelpMenu:p}=n(275),b=n(42),m=n(62),_=n(110),g=n(111),v=n(277),y=n(278),w=n(282),x=n(283);class E{constructor(){document.title="FastDMM2",this.loading_counter=0,this.has_meaningful_interact=!1,this.file_context=null,this.parser=null,this.pipe_manager=null,this.dmm=null,this.dmm_tabs=[],this.tabs_elem=document.getElementById("tabwindow"),this.map_window=new f(this),this.objtree_window=new c(this),this.instance_window=new h(this),this.file_menu=new d(this),this.file_menu.add_to_menubar(document.getElementById("ui-menubar"),"File"),this.options_menu=new u(this),this.options_menu.add_to_menubar(document.getElementById("ui-menubar"),"Options"),this.help_menu=new p(this),this.help_menu.add_to_menubar(document.getElementById("ui-menubar"),"Help"),window.onbeforeunload=this.beforeunload.bind(this),window.onunload=this.unload.bind(this),window.addEventListener("keydown",this.keydown.bind(this)),window.addEventListener("keyup",this.keyup.bind(this)),this.running_object_count=new Map,this.handle_instance_added=this.handle_instance_added.bind(this),this.handle_instance_removed=this.handle_instance_removed.bind(this),this.ready=!1,this.changelog_data=null,this.select_tool=new w(this),this.placement_modes=[new g(this),new v(this),new y(this),this.select_tool],this.placement_mode=null,this.initialize_placement_modes();let e=new URLSearchParams(window.location.search);if(this.welcome_panel=null,e.has("repo")){let t=e.get("repo"),n=e.get("branch"),i=e.get("map");try{this.has_meaningful_interact=!0,this.try_initialize_github(t,n,()=>{this.open_dmm(i)})}catch(e){this.welcome_panel=new r(this,e)}}else this.welcome_panel=new r(this);this.changelog_data=x,localStorage.getItem("last_cl_length")!=this.changelog_data.length&&(localStorage.setItem("last_cl_length",this.changelog_data.length),new _(this,{changelog_data:this.changelog_data,modal:!0}))}set_loading(){this.loading_counter++,this.loading_counter>0&&(document.body.classList.add("loading"),document.getElementById("loading").focus())}clear_loading(){this.loading_counter--,this.loading_counter<=0&&document.body.classList.remove("loading")}async initialize_to_context(e){let t;try{this.set_loading(),this.file_context=e,e.initialize&&await e.initialize(),this.parser=new s(this.read_text_file.bind(this));let n=this.file_context.dme_files.filter(e=>!e.includes("/")),r=null;if(1==n.length)r=n[0];else{let e=n.filter(e=>"tgstation.dme"!=e);r=e.length>=1?e[0]:n.length>=1?n[0]:this.file_context.dme_files[0]}t=new b(this,"Loading "+r,!0),this.clear_loading(),console.log("loading "+r),await this.parser.parse_file(r,t.set_progress.bind(t)),this.map_window.clear_all(),this.objtree_window.build_tree(),this.pipe_manager=new m(this),this.ready=!0}catch(e){this.file_context=null,console.error(e),new r(this,""+e)}t&&t.close(),this.clear_loading()}open_dmm(e){console.log("Loading "+e),this.read_text_file(e).then(t=>{this.add_tab(new l(this.parser,e,t))})}add_tab(e){if(!(e instanceof l))throw new Error("Expected dmm");this.dmm_tabs.push(e);let t=document.createElement("div");t.classList.add("tab"),e.tab_elem=t,t.addEventListener("click",t=>{t.defaultPrevented||(t.preventDefault(),this.set_tab(e))});let n=document.createElement("div");n.classList.add("close-button"),n.addEventListener("click",async t=>{t.preventDefault(),e.modified&&!window.confirm("You have unsaved changes. Close anyways?")||this.close_tab(e)}),t.appendChild(n);let r=document.createElement("span");r.textContent=e.filename?e.filename.substring(e.filename.lastIndexOf("/")+1):"untitled",t.appendChild(r),t.title=e.filename||"untitled",this.tabs_elem.appendChild(t);for(let[t,n]of e.running_object_count)this.handle_instance_added(t,n);e.on("instance_added",this.handle_instance_added),e.on("instance_removed",this.handle_instance_removed),this.set_tab(e)}set_tab(e){e!=this.dmm&&(this.dmm&&this.dmm.tab_elem.classList.remove("selected"),this.dmm=e,this.dmm&&this.dmm.tab_elem.classList.add("selected"))}close_tab(e){let t=this.dmm_tabs.indexOf(e);if(-1!=t){if(this.dmm==e){let e=this.dmm_tabs[t+1]||this.dmm_tabs[t-1];this.set_tab(e)}this.dmm_tabs.splice(t,1),this.tabs_elem.removeChild(e.tab_elem),e.removeListener("instance_added",this.handle_instance_added),e.removeListener("instance_removed",this.handle_instance_removed);for(let[t,n]of e.running_object_count)this.handle_instance_removed(t,n)}}read_text_file(e){return new Promise((t,n)=>{this.file_context.read_file(e).then(e=>{let n=new FileReader;n.addEventListener("loadend",()=>{t(n.result)}),n.readAsText(e)},n)})}async try_initialize_github(e,t,n){let r=await i.make_from_repo_name(this,e,t),a=this.initialize_to_context(r);n&&a.then(n)}async try_initialize_webkitdirectory(e){this.initialize_to_context(new a(this,e))}async try_initialize_native_fs(e){this.initialize_to_context(await o.from_directory_handle(this,e))}initialize_placement_modes(){let e=document.getElementById("toolwindow");for(let t=0;t<this.placement_modes.length;t++){let n=this.placement_modes[t],r=document.createElement("span");r.classList.add("fas",n.constructor.fa_icon,"tool"),r.title=n.constructor.description,t<9&&(r.title+=" (Ctrl-"+(t+1)+")"),null!=n.constructor.usage&&(r.title+="\nUsage: \n"+n.constructor.usage),r.addEventListener("click",e=>{this.set_placement_mode(n,e)}),n.button_elem=r,e.appendChild(r)}this.set_placement_mode(this.placement_modes[0]),e.appendChild(document.createElement("br"));let t=document.createElement("span");t.classList.add("fas","fa-caret-up","tool"),t.title="Go Up (Page-Up)",t.addEventListener("click",()=>{this.dmm&&this.dmm.mapwindow_z<this.dmm.maxz&&this.dmm.mapwindow_z++});let n=document.createElement("span");n.classList.add("fas","fa-caret-down","tool"),n.title="Go Down (Page-Down)",n.addEventListener("click",()=>{this.dmm&&this.dmm.mapwindow_z>1&&this.dmm.mapwindow_z--}),e.appendChild(t),e.appendChild(n)}set_placement_mode(e,t){e!=this.placement_mode&&(this.placement_mode&&(this.placement_mode.button_elem.classList.remove("selected"),this.placement_mode.unselect_tool(t)),this.placement_mode=e,this.placement_mode&&(this.placement_mode.button_elem.classList.add("selected"),this.placement_mode.select_tool(t)))}beforeunload(e){for(let t of this.dmm_tabs)t.modified&&(e.returnValue="You have unsaved changes")}unload(e){this.map_window.gl.getExtension("WEBGL_lose_context").loseContext()}keydown(e){if(this.placement_mode.update_is_pixel(e),!e.defaultPrevented&&!e.target.closest("input")&&!e.target.isContentEditable){if(this.dmm&&e.ctrlKey&&"KeyZ"==e.code)e.preventDefault(),this.dmm.undo();else if(this.dmm&&e.ctrlKey&&"KeyY"==e.code)e.preventDefault(),this.dmm.redo();else if(this.ready&&e.ctrlKey&&"KeyF"==e.code)e.preventDefault(),this.objtree_window.search_bar.focus();else if(this.dmm&&"PageUp"==e.code)this.dmm.mapwindow_z<this.dmm.maxz&&this.dmm.mapwindow_z++;else if(this.dmm&&"PageDown"==e.code)this.dmm.mapwindow_z>1&&this.dmm.mapwindow_z--;else if(e.ctrlKey&&e.code.startsWith("Digit")){let t=+e.code.substring(5)-1;if(e.shiftKey){let e=this.dmm_tabs[t];e&&this.set_tab(e)}else{let e=this.placement_modes[t];e&&this.set_placement_mode(e)}e.preventDefault()}else this.ready&&e.altKey&&"Digit1"==e.code?this.objtree_window.toggle_typepath_vis("/area"):this.ready&&e.altKey&&"Digit2"==e.code?this.objtree_window.toggle_typepath_vis("/mob"):this.ready&&e.altKey&&"Digit3"==e.code?this.objtree_window.toggle_typepath_vis("/obj"):this.ready&&e.altKey&&"Digit4"==e.code?this.objtree_window.toggle_typepath_vis("/turf"):this.dmm&&e.target==this.map_window.canvas&&"ArrowLeft"==e.code?this.dmm.mapwindow_x>1&&this.dmm.mapwindow_x--:this.dmm&&e.target==this.map_window.canvas&&"ArrowDown"==e.code?this.dmm.mapwindow_y>1&&this.dmm.mapwindow_y--:this.dmm&&e.target==this.map_window.canvas&&"ArrowRight"==e.code?this.dmm.mapwindow_x<this.dmm.maxx&&this.dmm.mapwindow_x++:this.dmm&&e.target==this.map_window.canvas&&"ArrowUp"==e.code&&this.dmm.mapwindow_y<this.dmm.maxy&&this.dmm.mapwindow_y++;for(let t of this.placement_modes)if(t.handle_global_hotkey(e))return void e.preventDefault();this.placement_mode&&this.placement_mode.handle_hotkey(e)&&e.preventDefault()}}keyup(e){this.placement_mode.update_is_pixel(e)}make_active_object(e){(e.istype("/turf")||e.istype("/area")||e.istype("/obj")||e.istype("/mob"))&&this.instance_window.set_selected(e.toString(),!0)}handle_instance_added(e,t=1){let n=this.running_object_count.get(e)||0;n<=0&&n+t>0?this.instance_window.add_instance(e):n>0&&n+t<=0&&this.instance_window.remove_instance(e),n+=t,n<=0?this.running_object_count.delete(e):this.running_object_count.set(e,n)}handle_instance_removed(e,t=1){let n=this.running_object_count.get(e)||0;n<=0&&n-t>0?this.instance_window.add_instance(e):n>0&&n-t<=0&&this.instance_window.remove_instance(e),n-=t,n<=0?this.running_object_count.delete(e):this.running_object_count.set(e,n)}notification(e){let t=document.getElementById("notificationwindow"),n=document.createElement("div");n.classList.add("notif-card"),n.textContent=e,t.children.length?t.insertBefore(n,t.firstElementChild):t.appendChild(n),setTimeout(()=>{n.style.opacity="0"},4e3),setTimeout(()=>{t.removeChild(n)},6500)}}E.Parser=s,e.exports=E},function(e,t,n){const r=n(12);e.exports=class extends r{constructor(e,t=null){super(e,{title:"Open Environment",width:520,height:300,can_close:!1,modal:!0}),e.welcome_panel&&e.welcome_panel!=this&&e.welcome_panel.close(),e.welcome_panel=this,this.header_obj.classList.add("center"),this.content_obj.classList.add("center"),this.content_obj.innerHTML="\n        <div class='error-text small-vertical-margins' style='color:red'></div>\n\t\t<div class='vertical-margins'>\n            <div class='small-vertical-margins'><input class='button github-repo-field' type='text' value='' placeholder='Github Repository (Ex. tgstation/tgstation)' style='width:250px'></div>\n\t\t\t<div class='small-vertical-margins'><div class='button github-go-button'>Open Github Repository</div></div>\n        </div>\n        <div class='vertical-margins local-workspace'></div>\n        <div class='vertical-margins'>\n            <a href='https://github.com/monster860/FastDMM2' target=\"_blank\">GitHub</a> | <a href='https://github.com/monster860/FastDMM2/issues/new' target=\"_blank\">Report Issue</a>\n        </div>\n        ",t&&(this.$(".error-text").textContent=t),this.$(".github-go-button").addEventListener("click",()=>{e.has_meaningful_interact=!0,this.try_initialize(e.try_initialize_github(this.$(".github-repo-field").value))}),this.$(".github-repo-field").addEventListener("keydown",t=>{e.has_meaningful_interact=!0,"Enter"==t.code&&(t.preventDefault(),this.try_initialize(e.try_initialize_github(this.$(".github-repo-field").value)))}),this.$(".github-repo-field").value=window.localStorage.getItem("last_successful_github_repo")||"yogstation13/yogstation";let n=this.$(".local-workspace");if(window.chooseFileSystemEntries){let t=document.createElement("button");t.classList.add("button"),t.textContent="Open Local Workspace";let r=!1;t.addEventListener("click",async()=>{if(!r)try{e.has_meaningful_interact=!0,r=!0;let t=await window.chooseFileSystemEntries({type:"open-directory"});this.try_initialize(e.try_initialize_native_fs(t),()=>{r=!1})}catch(e){throw r=!1,e}}),n.appendChild(t)}else{let t=document.createElement("input");t.type="file",void 0!==t.webkitdirectory&&(t.webkitdirectory=!0,t.addEventListener("change",()=>{e.has_meaningful_interact=!0,this.try_initialize(e.try_initialize_webkitdirectory(t.files),()=>{t.value=""})}),n.appendChild(t))}this.on("close",()=>{e.welcome_panel=null})}try_initialize(e,t){e.then(()=>{this.close()},e=>{e?(console.error(e),this.$(".error-text").textContent=e):this.$(".error-text").textContent="",t&&t()})}}},function(e,t,n){"use strict";const r=n(128),i=n(129),a=n(42),o=n(31);function s(e){if(!e)return;let t=e.headers.get("link");if(!t)return;let n=/<([^>]+)>; rel="next"/.exec(t);return n?n[1]:void 0}e.exports=class e{constructor(e,t,n,r,i){if(this.dme_files=[],this.dmm_files=[],this.tree_map=new Map,this.active_reads=new Map,this.use_tree(i),!this.dme_files.length)throw"No .dme file";this.editor=e,this.name=t,this.branch_name=n,this.commit_hash=r,this.cache=null,this.cache_queue=[],this.cache_queue_timeout=null,this.cache_read_queue=[],this.cache_read_queue_timeout=null,window.localStorage.setItem("last_successful_github_repo",t)}use_tree(e){this.dme_files.length=0,this.dmm_files.length=0;for(let t of e.tree)t.path.endsWith(".dme")?this.dme_files.push(t.path):(t.path.endsWith(".dmm")||t.path.endsWith(".dmp"))&&this.dmm_files.push(t.path);this.dmm_files.sort(),this.dme_files.sort(),this.tree=e,this.tree_map.clear();for(let e of this.tree.tree)this.tree_map.set(e.path.toLowerCase(),e);this.active_reads.clear()}async initialize(){if("indexedDB"in window)try{navigator.storage&&!await navigator.storage.persisted()&&await navigator.storage.persist();let e=await new Promise((e,t)=>{let n=window.indexedDB.open("fastdmm2_gh_blob_cache",1);n.onsuccess=t=>{e(t.target.result)},n.onerror=e=>{t(e)},n.onupgradeneeded=e=>{let t=e.target.result;t.createObjectStore("blobs"),t.createObjectStore("last_used",{keyPath:"sha"}).createIndex("last_used","last_used",{unique:!1})}});this.cache=e}catch(e){console.error(e)}}read_file(e){let t,n=this.tree_map.get(e.toLowerCase());if(!n)throw new Error("Non-existent file "+e);return n.path!=e&&console.warn(`Case of path doesn't match - in code: '${e}', in github: '${n.path}'`),this.active_reads.has(n.path)?this.active_reads.get(n.path):(t=(async()=>{let e,r;if(this.cache&&(e=await this.cache_read(n.sha)),e)this.active_reads.get(n.path)==t&&this.active_reads.delete(n.path);else{for(let t=0;t<5;t++)try{let t=await fetch(`https://cdn.jsdelivr.net/gh/${this.name}@${this.commit_hash}/${n.path}`,{cache:"force-cache"});if(200!=t.status)throw new Error(`${t.status} ${t.statusText} - ${await t.text()}`);e=await t.blob(),r=null;break}catch(e){r=e,await new Promise(e=>{setTimeout(e,3e3+2e3*Math.random())})}this.cache?(this.cache_queue.push({blob:e,sha:n.sha,promise:t,path:n.path}),this.enqueue_clear_cache_queue()):this.active_reads.get(n.path)==t&&this.active_reads.delete(n.path)}if(r)throw r;return e})(),this.active_reads.set(t.blob),t)}cache_read(e){return this.cache_read_queue_timeout||(this.cache_read_queue_timeout=setTimeout(this.clear_cache_read_queue.bind(this),200)),new Promise(t=>{this.cache_read_queue.push([e,t])})}clear_cache_read_queue(){let e=this.cache_read_queue;this.cache_read_queue=[];let t=this.cache.transaction(["blobs"],"readonly");t.onerror=t=>{console.error(t);for(let t of e)t[1]()};let n=t.objectStore("blobs");for(let t of e){let e=n.get(t[0]);e.onsuccess=()=>{let n=e.result;n&&(this.enqueue_clear_cache_queue(),this.cache_queue.push({update_lastused:t[0],size:n.size})),t[1](n)},e.onerror=e=>{t[1]()}}this.cache_read_queue_timeout=null}enqueue_clear_cache_queue(){this.cache_queue_timeout||(this.cache_queue_timeout=setTimeout(this.clear_cache_queue.bind(this),1e3))}async clear_cache_queue(){let e=this.cache_queue;this.cache_queue=[];try{let t,n=2**28;if(navigator.storage){let r=await navigator.storage.estimate();n=Math.min(r.quota,2**28)-r.usage-1e6;let i=0;for(let t of e)t.blob&&(i+=t.blob.size);i>n&&(t=await this.evict_cache(n,i)),n=Math.min(r.quota,2**28)-r.usage-1e6}let r=(new Date).getTime(),i=this.cache.transaction(["last_used","blobs"],"readwrite"),a=i.objectStore("last_used"),o=i.objectStore("blobs");for(let n of e)if(n.update_lastused){if(t&&t.has(n.update_lastused))continue;a.put({sha:n.update_lastused,last_used:r,size:n.size})}else if(n.blob){if(t&&t.has(n.sha))continue;o.put(n.blob,n.sha),a.put({sha:n.sha,last_used:r,size:n.blob.size})}await new Promise((e,t)=>{i.onerror=t,i.oncomplete=e})}catch(e){console.error(e)}this.cache_queue_timeout=null;for(let t of e)t.path&&this.active_reads.get(t.path)==t.promise&&this.active_reads.delete(t.path)}async evict_cache(e,t){if(t<=e)return;let n=new Set,r=this.cache.transaction(["last_used","blobs"],"readwrite"),i=r.objectStore("last_used"),a=r.objectStore("blobs"),o=0;i.index("last_used").openCursor().onsuccess=r=>{let i=r.target.result;if(i){let r=i.value.size;e+=r,o+=r,n.add(i.value.sha),i.delete(),a.delete(i.value.sha),e<t&&i.continue()}},await new Promise((e,t)=>{r.oncomplete=e,r.onerror=t}),console.log("Evicted "+n.size+" old objects ("+o+" bytes)")}add_file_menu_options(e,t){let n=null!=localStorage.getItem("gh_token");t.appendChild(e.build_menu_item({label:n?"Log Out of Github":"Log Into Github",click_handler:n?this.github_logout.bind(this):this.github_login.bind(this)})),t.appendChild(e.build_menu_item({label:"Commit Maps",click_handler:this.commit_maps.bind(this),disabled:!this.editor.dmm||!n}))}github_login(){window.open("https://github.com/login/oauth/authorize?client_id=0ffb004f786288b87437&scope=public_repo","_blank")}github_logout(){localStorage.removeItem("gh_token")}async commit_maps(){this.editor.set_loading();let e,t={allow_direct:!1,allow_direct_branch:!1,allow_fork_branch:!1};try{if(!localStorage.getItem("gh_token"))throw new Error("No Token");e=(await this.auth_result_json(await fetch("https://api.github.com/user",{headers:{authorization:"token "+localStorage.getItem("gh_token")}}))).login,this.name.startsWith(e+"/")||(t.allow_fork_branch=!0);try{let n=await this.auth_result_json(await fetch(`https://api.github.com/repos/${this.name}/collaborators/${e}/permission`,{method:"GET",headers:{authorization:"token "+localStorage.getItem("gh_token")}}));"admin"!=n.permission&&"write"!=n.permission||(this.branch_name!=this.commit_hash&&(t.allow_direct=!0),t.allow_direct_branch=!0)}catch(e){console.warn(e)}}finally{this.editor.clear_loading()}let n=await new i(this.editor,t).wait_until_close();if(!n)return;let r=new a(this.editor,"Committing changes",!0);try{let t,i;if("direct"==n.commit_type)i=this.branch_name,t=this.name;else if(i=("fdmm-patch-"+Math.floor(1e8*Math.random())+"-"+e).substring(0,40),"direct-branch"==n.commit_type)t=this.name;else{if(r.set_progress(0,"Creating fork..."),!localStorage.getItem("gh_token"))throw new Error("No Token");let e=await this.auth_result_json(await fetch(`https://api.github.com/repos/${this.name}/forks`,{method:"POST",headers:{authorization:"token "+localStorage.getItem("gh_token"),accept:"application/json"}}));t=e.full_name;for(let e=0;e<20;e++){if((await this.auth_result_json(await fetch(`https://api.github.com/repos/${t}/branches?per_page=100`,{method:"GET",headers:{authorization:"token "+localStorage.getItem("gh_token"),accept:"application/json"}}))).length)break;await new Promise(e=>{setTimeout(e,5e3)})}let n=t.substring(0,t.indexOf("/"))+":"+e.default_branch,i=this.name.substring(0,this.name.indexOf("/"))+":"+this.commit_hash;r.set_progress(.05,"Comparing branches..."),await fetch(`https://api.github.com/repos/${t}/compare/${n}...${i}`,{method:"GET",headers:{authorization:"token "+localStorage.getItem("gh_token"),accept:"application/json"}})}let a=new Map;for(let e=0;e<this.editor.dmm_tabs.length;e++){let n=this.editor.dmm_tabs[e];n.filename||(n.filename="untitled-"+Math.floor(1e5*Math.random())+".dmm"),r.set_progress(.1+e/this.editor.dmm_tabs.length*.8,"Uploading "+n.filename+"...");let i=this.tree_map.get(n.filename.toLowerCase()),o=i?i.sha:null,s=n.toString(),f=await this.create_gh_text_blob(t,s);o!=f&&a.set(n.filename,f)}if(!a.size)throw"No changes to commit";r.set_progress(.9,"Creating tree...");let s=await this.create_gh_tree(t,this.tree.sha,a);r.set_progress(.93,"Creating commit...");let f=(await this.auth_result_json(await fetch(`https://api.github.com/repos/${t}/git/commits`,{method:"POST",headers:{authorization:"token "+localStorage.getItem("gh_token"),"content-type":"application/json",accept:"application/json"},body:JSON.stringify({message:n.message||"oi this fucker forgot to put a message",tree:s,parents:[this.commit_hash]})}))).sha;console.log(f),r.set_progress(.96,"Updating branch...");if("direct"==n.commit_type){try{await this.auth_result_json(await fetch(`https://api.github.com/repos/${t}/git/refs/heads/${i}`,{method:"PATCH",headers:{authorization:"token "+localStorage.getItem("gh_token"),"content-type":"application/json",accept:"application/json"},body:JSON.stringify({sha:f})}))}catch(e){console.warn(e),f=(await this.auth_result_json(await fetch(`https://api.github.com/repos/${t}/merges`,{method:"POST",headers:{authorization:"token "+localStorage.getItem("gh_token"),"content-type":"application/json",accept:"application/json"},body:JSON.stringify({base:i,head:f})}))).sha}r.close(),"Open Commit"==await new o(this.editor,{title:"Commit Successful",message:"Click Open Commit to open the commit in a new tab",modal:!0,options:["Open Commit","Close"]}).wait_until_close()&&window.open(`https://github.com/${t}/commit/${f}`,"_blank")}else{let e=t.substring(0,t.indexOf("/"))+":"+i;await this.auth_result_json(await fetch(`https://api.github.com/repos/${t}/git/refs`,{method:"POST",headers:{authorization:"token "+localStorage.getItem("gh_token"),"content-type":"application/json",accept:"application/json"},body:JSON.stringify({ref:"refs/heads/"+i,sha:f})})),r.close(),await new o(this.editor,{title:"Commit Successful",message:"Click Open to open a new tab to create a pull request.",modal:!0,options:["Create Pull Request"]}).wait_until_close(),window.open(`https://github.com/${this.name}/compare/${this.branch_name}...${e}`,"_blank")}for(let e of this.editor.dmm_tabs)e.modified=!1;this.editor.set_loading();try{let e=await this.auth_result_json(await fetch("https://api.github.com/repos/"+t+"/commits/"+i,{headers:{authorization:"token "+localStorage.getItem("gh_token"),accept:"application/json"}})),n=await this.auth_result_json(await fetch(e.commit.tree.url+"?recursive=1",{headers:{authorization:"token "+localStorage.getItem("gh_token"),accept:"application/json"}}));this.branch_name=i,this.name=t,this.commit_hash=f,this.use_tree(n)}finally{this.editor.clear_loading()}}catch(e){try{r.close()}catch(e){}throw e}}async create_gh_text_blob(e,t){if(!localStorage.getItem("gh_token"))throw new Error("No Token");return(await this.auth_result_json(await fetch(`https://api.github.com/repos/${e}/git/blobs`,{method:"POST",headers:{authorization:"token "+localStorage.getItem("gh_token"),"content-type":"application/json",accept:"application/json"},body:JSON.stringify({content:t,encoding:"utf-8"})}))).sha}async create_gh_tree(e,t,n){if(!localStorage.getItem("gh_token"))throw new Error("No Token");let r=[];for(let[e,t]of n)r.push({path:e,mode:"100644",tyee:"blob",sha:t});return(await this.auth_result_json(await fetch(`https://api.github.com/repos/${e}/git/trees`,{method:"POST",headers:{authorization:"token "+localStorage.getItem("gh_token"),"content-type":"application/json",accept:"application/json"},body:JSON.stringify({base_tree:t,tree:r})}))).sha}async auth_result_json(e){let t=await e.json();if("Bad credentials"==t.message)throw localStorage.removeItem("gh_token"),new Error("Bad credentials");if(e.status>=400)throw new Error(t.message);return t}static async make_from_repo_name(t,n,i){try{if(t.set_loading(),!/^[a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38}\/[a-z\d](?:[a-z\d-\.]){0,100}$/i.test(n))throw"Bad repository name";let a=await fetch("https://api.github.com/repos/"+n),o=await a.json();if(200!=a.status)throw"Repository: "+o.message;if(n=o.full_name,!i){let e=await fetch("https://api.github.com/repos/"+n+"/branches?per_page=100"),a=await e.json();if(200!=e.status)throw a.message;for(;s(e);){e=await fetch(s(e));let t=await e.json();if(200!=e.status)throw t.message;a.push(...t)}t.clear_loading();try{i=await new r(t,a,o.default_branch).wait_until_close()}finally{t.set_loading()}if(!i)throw null}let f=await fetch("https://api.github.com/repos/"+n+"/commits/"+i),c=await f.json();if(200!=f.status)throw"Branch: "+c.message;let h=await fetch(c.commit.tree.url+"?recursive=1"),l=await h.json();if(200!=f.status)throw"Tree: "+l.message;return new e(t,n,i,c.sha,l)}finally{t.clear_loading()}}}},function(e,t,n){const r=n(12),i=n(41);e.exports=class extends r{constructor(e,t,n){super(e,{title:"Choose a branch or commit",width:365,height:110,can_close:!1,modal:!0}),this.branches=t,this.content_obj.innerHTML="\n\t\t<div class='small-vertical-margins'>\n\t\t\t<div class='button dropdown branch-dropdown' style='width:335px'><span class='branch-text' contenteditable></span></div>\n\t\t</div>\n\t\t<div class='small-vertical-margins center'>\n\t\t\t<div class='button ok-button'>OK</div>\n\t\t\t<div class='button cancel-button'>Cancel</div>\n\t\t</div>\n\t\t",this.branches=t,this.branch_dropdown=this.$(".branch-dropdown"),this.branch_text=this.$(".branch-text");let r=document.createElement("div");r.classList.add("dropdown-content");for(let e of t){let t=document.createElement("div");t.classList.add("button","dropdown-item"),t.textContent=e.name,t.addEventListener("click",t=>{t.preventDefault(),this.branch_text.textContent=e.name,this.branch_dropdown.removeChild(this.menu_div),this.refresh_selected()}),r.children.length&&e.name==n?r.insertBefore(t,r.firstElementChild):r.appendChild(t)}this.branch_text.textContent=n,this.menu_div=r,this.branch_dropdown.addEventListener("click",e=>{if(e.defaultPrevented)return;let t=this.refresh_selected();i(this.branch_dropdown,this.menu_div),t&&t.scrollIntoView({behavior:"instant"})}),this.branch_dropdown.addEventListener("dblclick",()=>{this.branch_text.focus()}),this.branch_text.addEventListener("input",e=>{this.branch_text.textContent=this.branch_text.textContent.replace(/[\r\n]/i,""),this.refresh_selected()}),this.$(".ok-button").addEventListener("click",()=>{this.is_branch_valid()&&(this.close_response=this.branch_text.textContent,this.close())}),this.$(".cancel-button").addEventListener("click",()=>{this.close_response=null,this.close()})}is_branch_valid(){let e=this.branch_text.textContent;for(let t of this.branches)if(t.name==e)return!0;return/^[0-9a-f]{40}$/i.test(e)}refresh_selected(){let e,t=this.branch_text.textContent;for(let n of this.menu_div.children)n.textContent.toLowerCase()==t.toLowerCase()?(n.textContent!=t&&(this.branch_text.textContent=n.textContent),n.classList.add("selected"),e=n):n.classList.remove("selected");return this.is_branch_valid()?this.$(".ok-button").classList.remove("disabled"):this.$(".ok-button").classList.add("disabled"),e}}},function(e,t,n){const r=n(12);e.exports=class extends r{constructor(e,{allow_direct:t=!0,allow_direct_branch:n=!0,allow_fork_branch:r=!0}={}){super(e,{title:"Commit Changes",width:600,height:250,can_close:!0}),this.content_obj.innerHTML="\n\t\t\t<div class='vertical-margins'>\n\t\t\t\t<input type='text' class='button commit-message' style='width:100%' placeholder='Commit Message (required)'>\n\t\t\t</div>\n\t\t\t<div class='vertical-margins'>\n\t\t\t\t<form class='commit-type'>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t",this.commit_input=this.$(".commit-message"),this.form=this.$(".commit-type"),t&&this.make_radio_option("direct",`Commit your changes directly to ${this.editor.file_context.name}:${this.editor.file_context.branch_name}`,!r),n&&this.make_radio_option("direct-branch",`Make a branch on ${this.editor.file_context.name} and open a pull request`,!t&&!r),r&&this.make_radio_option("fork-branch",`Make a branch on your fork of ${this.editor.file_context.name} and open a pull request`,!0);let i=document.createElement("div");i.classList.add("button"),i.textContent="OK",i.addEventListener("click",()=>{if(!this.commit_input.value)return void this.commit_input.focus();let e=null;for(let t of this.form)if("commit-type"==t.name&&t.checked){e=t.value;break}e&&(this.close_response={message:this.commit_input.value,commit_type:e},this.close())}),this.footer_obj.appendChild(i);let a=document.createElement("div");a.classList.add("button"),a.textContent="Cancel",a.addEventListener("click",()=>{this.close()}),this.footer_obj.appendChild(a)}make_radio_option(e,t,n=!1){let r=document.createElement("input");r.type="radio",r.name="commit-type",r.id=e,r.value=e;let i=document.createElement("label");i.htmlFor=e,i.textContent=t;let a=document.createElement("div");a.appendChild(r),a.appendChild(i),this.form.appendChild(a),r.checked=n}}},function(e,t,n){"use strict";e.exports=class{constructor(e,t){this.dme_files=[],this.dmm_files=[],this.file_map=new Map,this.prefix="";for(let e of t){this.prefix||(this.prefix=e.webkitRelativePath.substring(0,e.webkitRelativePath.indexOf("/")+1));let t=e.webkitRelativePath.substring(this.prefix.length);t.endsWith(".dme")?this.dme_files.push(t):(t.endsWith(".dmm")||t.endsWith(".dmp"))&&this.dmm_files.push(t),this.file_map.set(t.toLowerCase(),e)}if(this.dmm_files.sort(),this.dme_files.sort(),!this.dme_files.length)throw"No .dme file"}async initialize(){}read_file(e){let t=e.toLowerCase(),n=this.file_map.get(t);if(!n)throw new Error("Non-existent file "+e);return this.prefix+e!=n.webkitRelativePath&&console.warn(`Case of path doesn't match - in code: '${e}', in file system: '${n.webkitRelativePath.substring(this.prefix.length)}'`),Promise.resolve(n)}}},function(e,t,n){"use strict";const r=n(66),i=n(31),a=n(42),o=n(7);e.exports=class e{constructor(e,t,n){this.editor=e,this.dme_files=[],this.dmm_files=[],this.handle=t,this.prefix="",this.file_map=new Map,console.log(n);for(let e of n)e.path.endsWith(".dme")?this.dme_files.push(e.path):(e.path.endsWith(".dmm")||e.path.endsWith(".dmp"))&&this.dmm_files.push(e.path),this.file_map.set(e.path.toLowerCase(),e);if(this.dmm_files.sort(),this.dme_files.sort(),!this.dme_files.length)throw"No .dme file"}async initialize(){}async read_file(e){let t=e.toLowerCase(),n=this.file_map.get(t);if(!n)throw new Error("Non-existent file "+e);return e!=n.path&&console.warn(`Case of path doesn't match - in code: '${e}', in file system: '${n.path}'`),await n.handle.getFile()}static async walk_directory(e,t=""){let n=[];for await(const i of e.getEntries()){let e=r.join(t,i.name);".git"!=i.name&&"node_modules"!=i.name&&("tools"!=e&&"data/logs"!=e&&(i.isDirectory?n.push(await this.walk_directory(i,e)):n.push({path:e,handle:i})))}return n.flat()}static async from_directory_handle(t,n){let r;t.set_loading();try{r=await this.walk_directory(n)}finally{t.clear_loading()}return new e(t,n,r)}add_file_menu_options(e,t){t.appendChild(e.build_menu_item({label:"Save",click_handler:this.save_map.bind(this,void 0),disabled:!this.editor.dmm})),t.appendChild(e.build_menu_item({label:"Validate All Maps",click_handler:this.validate_maps.bind(this,void 0)}))}async save_map(e=this.editor.dmm){if(!e)return;e.filename||(e.filename="untitled-"+Math.floor(1e5*Math.random())+".dmm");let t=this.file_map.has(e.filename.toLowerCase())?this.file_map.get(e.filename.toLowerCase()).handle:null;this.editor.set_loading();try{let n=e.toString();if(!t){t=this.handle;let n=e.filename.split(/[\/\\]/g);n=n.filter(e=>e.trim().length>0);for(let e=0;e<n.length;e++){let r=n[e];t=e==n.length-1?await t.getFile(r,{create:!0}):await t.getDirectory(r,{create:!0})}this.file_map.set(e.filename.toLowerCase(),t)}let r=await t.createWritable();await r.write(n),await r.close(),e.modified=!1}finally{this.editor.clear_loading()}}async validate_maps(){if("Yes"!=await new i(this.editor,{title:"Validate maps?",modal:!1,options:["Yes","No"],message:"This will open all the map files in your workspace and re-save them, applying any rules such as set_instance_var() or instance_var_whitelist. Are you sure you want to continue?"}).wait_until_close())return;if(this.editor.file_context!=this)return;let e=new a(editor,"Validating...",!0),t=0;try{for(let n=0;n<this.dmm_files.length;n++){let r=this.dmm_files[n];e.set_progress(n/this.dmm_files.length,r);try{let e=await this.editor.read_text_file(r),t=new o(this.editor.parser,r,e);await this.save_map(t)}catch(e){t++,console.error("While validating "+r+":"),console.error(e)}}}finally{e.close()}t>0&&await new i(this.editor,{title:"Error",modal:!1,options:["OK"],message:t+" map"+(t>1?"s":"")+" failed to validate. Please check the console for details.",message_classes:["error-text"]}).wait_until_close()}}},function(e,t){function n(e){return(...t)=>180*e(...t)/Math.PI}function r(e){return t=>e(t*Math.PI/180)}e.exports=new Map(Object.entries({abs:Math.abs,arccos:n(Math.acos),arcsin:n(Math.asin),arctan:(e,t)=>null==t?180*Math.atan(e)/Math.PI:180*Math.atan2(t,e)/Math.PI,ascii2text:e=>String.fromCharCode(e),ckey:e=>e.toLowerCase().replace(/[^a-z0-9@]/gi,""),ckeyEx:e=>e.replace(/[^a-z0-9@]/gi,""),clamp:(e,t,n)=>(null==e&&(e=0),Math.min(Math.max(e,t),n)),copytext:(e,t,n)=>e.substring(t-1,n-1),cos:r(Math.cos),length:e=>e.length,text2num:parseFloat,round:(e,t)=>null==t?Math.floor(e):Math.round(e/t)*t,sin:r(Math.sin),sqrt:Math.sqrt,tan:r(Math.tan),text2ascii:e=>e.charCodeAt(0)}))},function(e,t,n){const{ByondList:r,ByondNewlist:i,ByondFile:a,ByondTypepath:o,ByondNew:s,ByondMatrix:f}=n(13),{ProcCallNode:c}=n(68);class h{constructor(e){this.path=e,this.vars=new Map,this.var_metas=new Map,this.fastdmm_props=new Map,this.fastdmm_macros=[],"/"!=e&&this.vars.set("type",new o(e)),this.subtypes=[],this.parent=null}istype(e){return this.path==e||!!this.parent&&this.parent.istype(e)}set_var(e,t=null){this.vars.set(e,t)}get_var(e){return this.vars.has(e)?this.vars.get(e):this.parent?this.parent.get_var(e):void 0}eval_var(e,t){if(!this.vars.has(t))return this.parent?this.parent.eval_var(e,t):void 0;let n=this.vars.get(t);if(null!=n&&"object"==typeof n&&!(n instanceof a||n instanceof r||n instanceof i||n instanceof o||n instanceof s||n instanceof f))try{this.vars.set(t,null),n=n.evaluate_constant(this.make_eval_context(e)),this.vars.set(t,n)}catch(e){console.warn(new Error(`Could not evaluate ${this.path} var/${t}: ${e.stack}`)),this.vars.set(this.identifier,void 0),n=void 0}return n}make_eval_context(e){return{types:e.types,src:this}}set_var_meta(e,t){if(this.var_metas.get(e))throw new Error(`Duplicate definition for ${this.path}/var/${e}`);this.var_metas.set(e,t)}get_var_meta(e){return this.var_metas.has(e)?this.var_metas.get(e):this.parent?this.parent.get_var_meta(e):void 0}get_fastdmm_prop(e,t){let n=null;return this.fastdmm_props.has(e)?n=this.fastdmm_props.get(e):this.parent&&(n=this.parent.get_fastdmm_prop(e)),t&&n&&(n=n.evaluate_constant(t)),n}*get_fastdmm_macros(e,t=!1){if(t){this.parent&&(yield*this.parent.get_fastdmm_macros(e,t));for(let t of this.fastdmm_macros)t.identifier==e&&(yield t)}else{for(let t=this.fastdmm_macros.length-1;t>=0;t--){let n=this.fastdmm_macros[t];n.identifier==e&&(yield n)}this.parent&&(yield*this.parent.get_fastdmm_macros(e,t))}}handle_fastdmm_macro(e){if(!(e instanceof c))throw new Error("Not a proc call");for(let t=0;t<e.args.length;t++){let n=e.args[t],r=e.arg_names[t];if(r){if(!l.has(r))throw new Error("Unrecognized FASTDMM_PROP property: "+r+" in type "+this.path);this.fastdmm_props.set(r,n)}else{if(!(n instanceof c))throw new Error("FASTDMM_PROP error in type "+this.path+" - unexpected "+(n?n.constructor.name:n));if(!d.has(n.identifier))throw new Error("Unrecognized FASTDMM_PROP macro: "+r+" in type "+this.path);this.fastdmm_macros.push(n)}}}toString(){return this.path}}h.VarMeta=class{constructor(){this.type=null,this.is_global=!1,this.is_tmp=!1}};const l=new Set(["pinned_vars","dir_amount","pipe_group","pipe_interference_group","pipe_type","pipe_astar_cost"]),d=new Set(["set_instance_vars"]);e.exports=h},function(e,t){e.exports='\n#define EXCEPTION(value) new /exception(value)\n#define ASSERT(expression) if(!(expression)) { CRASH("[__FILE__]:[__LINE__]:Assertion Failed: [#X]")}\n\n#define DM_VERSION 513\n#define DM_BUILD 1526\n#define FASTDMM 1\n\n// eye and sight\n#define SEEINVIS 2\n#define SEEMOBS 2\n#define SEEOBJS 2\n#define SEETURFS 2\n\n// gliding\n#define NO_STEPS 0\n#define FORWARD_STEPS 1\n#define SLIDE_STEPS 2\n#define SYNC_STEPS 3\n\n// appearance_flags\n#define LONG_GLIDE 1\n#define RESET_COLOR 2\n#define RESET_ALPHA 4\n#define RESET_TRANSFORM 8\n#define NO_CLIENT_COLOR 16\n#define KEEP_TOGETHER 32\n#define KEEP_APART 64\n#define PLANE_MASTER 128\n#define TILE_BOUND 256\n#define PIXEL_SCALE 512\n#define PASS_MOUSE 1024\n\n#define CONTROL_FREAK_ALL 1\n#define CONTROL_FREAK_SKIN 2\n#define CONTROL_FREAK_MACROS 4\n\n// icons\n#define ICON_ADD 0\n#define ICON_SUBTRACT 1\n#define ICON_MULTIPLY 2\n#define ICON_OVERLAY 3\n#define ICON_AND 4\n#define ICON_OR 5\n#define ICON_UNDERLAY 6\n\n// matrix\n#define MATRIX_COPY 0\n#define MATRIX_MULTIPLY 1\n#define MATRIX_ADD 2\n#define MATRIX_SUBTRACT 3\n#define MATRIX_INVERT 4\n#define MATRIX_ROTATE 5\n#define MATRIX_SCALE 6\n#define MATRIX_TRANSLATE 7\n#define MATRIX_INTERPOLATE 8\n#define MATRIX_MODIFY 128\n\n// animation easing\n#define LINEAR_EASING 0\n#define SINE_EASING 1\n#define CIRCULAR_EASING 2\n#define CUBIC_EASING 3\n#define BOUNCE_EASING 4\n#define ELASTIC_EASING 5\n#define BACK_EASING 6\n#define QUAD_EASING 7\n#define EASE_IN 64\n#define EASE_OUT 128\n#define JUMP_EASING 0123456789\n\n// animation flags\n#define ANIMATION_END_NOW 1\n#define ANIMATION_LINEAR_TRANSFORM 2\n#define ANIMATION_PARALLEL 4\n#define ANIMATION_RELATIVE 256\n\n// Database\n#define DATABASE_OPEN 0\n#define DATABASE_CLOSE 1\n#define DATABASE_ERROR_CODE 2\n#define DATABASE_ERROR 3\n#define DATABASE_QUERY_CLEAR 4\n#define DATABASE_QUERY_ADD 5\n#define DATABASE_QUERY_EXEC 8\n#define DATABASE_QUERY_NEXT 9\n#define DATABASE_QUERY_ABORT 10\n#define DATABASE_QUERY_RESET 11\n#define DATABASE_QUERY_ROWS_AFFECTED 12\n#define DATABASE_ROW_COLUMN_NAMES 16\n#define DATABASE_ROW_COLUMN_VALUE 17\n#define DATABASE_ROW_LIST 18\n\n// alpha mask filter\n#define MASK_INVERSE 1\n#define MASK_SWAP 2\n\n// rgb filter\n#define FILTER_COLOR_RGB 1\n#define FILTER_COLOR_HSV 2\n#define FILTER_COLOR_HSL 4\n#define FILTER_COLOR_HCY 8\n\n// layering\n#define FILTER_OVERLAY 1\n#define FILTER_UNDERLAY 2\n\n// ray filter\n#define FLAG_OVERLAY 1\n#define FLAG_UNDERLAY 2\n\n// ripple filter\n//#define WAVE_BOUND 2\n\n// wave filter\n#define WAVE_SIDEWAYS 1\n#define WAVE_BOUND 2\n\n// vis flags\n#define VIS_INHERIT_ICON 1\n#define VIS_INHERIT_ICON_STATE 2\n#define VIS_INHERIT_DIR 4\n#define VIS_INHERIT_LAYER 8\n#define VIS_INHERIT_PLANE 16\n#define VIS_INHERIT_ID 32\n#define VIS_UNDERLAY 64\n#define VIS_HIDE 128\n\n// directions\nvar/const\n\tNORTH = 1\n\tSOUTH = 2\n\tEAST = 4\n\tWEST = 8\n\tNORTHEAST = 5\n\tNORTHWEST = 9\n\tSOUTHEAST = 6\n\tSOUTHWEST = 10\n\tUP = 16\n\tDOWN = 32\n\n// eye and sight\nvar/const\n\tBLIND = 1\n\tSEE_MOBS = 4\n\tSEE_OBJS = 8\n\tSEE_TURFS = 16\n\tSEE_SELF = 32\n\tSEE_INFRA = 64\n\tSEE_PIXELS = 256\n\tSEE_THRU = 512\n\tSEE_BLACKNESS = 1024\n\nvar/const\n\tMOB_PERSPECTIVE = 0\n\tEYE_PERSPECTIVE = 1\n\tEDGE_PERSPECTIVE = 2\n\n// layers\nvar/const\n\tFLOAT_LAYER = -1\n\tAREA_LAYER = 1\n\tTURF_LAYER = 2\n\tOBJ_LAYER = 3\n\tMOB_LAYER = 4\n\tFLY_LAYER = 5\n\tEFFECTS_LAYER = 5000\n\tTOPDOWN_LAYER = 10000\n\tBACKGROUND_LAYER = 20000\n\tFLOAT_PLANE = -32767\n\n// map formats\nvar/const\n\tTOPDOWN_MAP = 0\n\tISOMETRIC_MAP = 1\n\tSIDE_MAP = 2\n\tTILED_ICON_MAP = 32768\n\n\nvar/const\n\tTRUE = 1\n\tFALSE = 0\n\nvar/const\n\tMALE = "male"\n\tFEMALE = "female"\n\tNEUTER = "neuter"\n\tPLURAL = "plural"\n\n// mouse\nvar/const\n\tMOUSE_INACTIVE_POINTER = 0\n\tMOUSE_ACTIVE_POINTER = 1\n\tMOUSE_DRAG_POINTER = 3\n\tMOUSE_DROP_POINTER = 4\n\tMOUSE_ARROW_POINTER = 5\n\tMOUSE_CROSSHAIRS_POINTER = 6\n\tMOUSE_HAND_POINTER = 7\n\nvar/const\n\tMOUSE_LEFT_BUTTON = 1\n\tMOUSE_RIGHT_BUTTON = 2\n\tMOUSE_MIDDLE_BUTTON = 4\n\tMOUSE_CTRL_KEY = 8\n\tMOUSE_SHIFT_KEY = 16\n\tMOUSE_ALT_KEY = 32\n\nvar/const\n\tMS_WINDOWS = "MS Windows"\n\tUNIX = "UNIX"\n\n// sound\nvar/const\n\tSOUND_MUTE = 1\n\tSOUND_PAUSED = 2\n\tSOUND_STREAM = 4\n\tSOUND_UPDATE = 16\n\n// blend_mode\nvar/const\n\tBLEND_DEFAULT = 0\n\tBLEND_OVERLAY = 1\n\tBLEND_ADD = 2\n\tBLEND_SUBTRACT = 3\n\tBLEND_MULTIPLY = 4\n\n/datum\n/datum/var/const/type\n/datum/var/const/parent_type\n/datum/var/tag\n//datum/var/const/list/vars\n\n/atom\n/atom/parent_type = /datum\n/atom/var/alpha = 255\n/atom/var/tmp/appearance\n/atom/var/appearance_flags = 0\n/atom/var/blend_mode = 0\n/atom/var/color = ""\n//atom/movable/var/list/atom/contents = list() // map editor only considers movables as having contents\n/atom/var/density = 0\n/atom/var/desc = ""\n/atom/var/dir = 2\n/atom/var/gender = "neuter"\n/atom/var/icon/icon\n/atom/var/icon_state\n/atom/var/invisibility = 0\n/atom/var/infra_luminosity = 0\n//atom/var/tmp/atom/loc\n/atom/var/layer = 1\n/atom/var/luminosity = 0\n/atom/var/maptext\n/atom/var/maptext_width = 32\n/atom/var/maptext_height = 32\n/atom/var/maptext_x = 0\n/atom/var/maptext_y = 0\n/atom/var/mouse_over_pointer = 0\n/atom/var/mouse_drag_pointer = 0\n/atom/var/mouse_drop_pointer = 1\n/atom/var/mouse_drop_zone = 0\n/atom/var/mouse_opacity = 1\n/atom/var/name = ""\n/atom/var/opacity = 0\n//atom/var/tmp/list/overlays\n//atom/var/override\n/atom/var/pixel_x = 0\n/atom/var/pixel_y = 0\n/atom/var/pixel_w = 0\n/atom/var/pixel_z = 0\n/atom/var/plane = 0\n/atom/var/suffix = ""\n/atom/var/text = ""\n/atom/var/matrix/transform\n//atom/var/tmp/list/underlays\n/atom/var/tmp/list/verbs\n//atom/var/tmp/x\n//atom/var/tmp/y\n//atom/var/tmp/z\n/atom/var/list/filters\n/atom/var/render_target\n/atom/var/render_source\n/atom/var/vis_flags\n\n/atom/movable\n/atom/movable/var/animate_movement = 1\n/atom/movable/var/bound_x = 0\n/atom/movable/var/bound_y = 0\n/atom/movable/var/bound_width = 32\n/atom/movable/var/bound_height = 32\n/atom/movable/var/list/atom/contents = list() // map editor only considers movables as having contents\n//atom/movable/var/tmp/list/locs  // not editable\n/atom/movable/var/screen_loc = ""\n/atom/movable/var/glide_size = 0\n/atom/movable/var/step_size = 32\n/atom/movable/var/step_x = 0\n/atom/movable/var/step_y = 0\n//atom/movable/var/list/vis_contents\n//atom/movable/var/tmp/list/vis_locs\n\n/area/parent_type = /atom\n/area/layer = 1\n/area/luminosity = 1\n\n/turf/parent_type = /atom\n/turf/layer = 2\n/turf/var/list/vis_contents\n/turf/var/tmp/list/vis_locs\n\n/obj/parent_type = /atom/movable\n/obj/layer = 3\n\n/mob/parent_type = /atom/movable\n/mob/layer = 4\n//mob/var/tmp/ckey  // not editable, use key instead\n//mob/var/tmp/client/client  // not editable\n//mob/var/list/group  // not editable, but it\'s not obvious why\n/mob/var/key = ""\n/mob/var/see_infrared = 0\n/mob/var/see_invisible = 0\n/mob/var/see_in_dark = 2\n/mob/var/sight\n\n/world\n/world/var/icon_size = 32 // the only one that matters anyways\n'},function(e,t,n){"use strict";const r=n(16),i=n(32),a=n(43),o=n(136);let s=0;const f=new i({icon:"_fastdmm_interface.dmi",icon_state:"error"}),c=Symbol("INSTANCE_VAR_DEFAULT"),h=Symbol("INSTANCE_VAR_KEEP"),l={var_overrides:new Map(Object.entries({INSTANCE_VAR_DEFAULT:c,INSTANCE_VAR_KEEP:h}))};class d{constructor(e,t="/obj",n){if(this.context=e,t instanceof d)this.vars=new Map(t.vars),t=t.type;else if(this.vars=new Map,t.includes("{")){let e=a.eval_text(t);t=e.path,n=e.vars}if(this.type=t,this.type_obj=null,e&&e.types.has(t)&&(this.type_obj=e.types.get(t)),n)for(let[e,t]of n instanceof Map?n:Object.entries(n))this.vars.set(e,t);this.cached_appearance=null,this.cached_hidden=!1,this.cached_hidden_cache_index=-1,this.id=++s,this.update_vars(),Object.seal(this)}toString(e=!1){let t=[];for(let[e,n]of[...this.vars].sort((e,t)=>e[0]>t[0]?1:-1))t.push(e+" = "+r(n));return t.length?e?`${this.type}{\n\t${t.join(";\n\t")}\n\t}`:`${this.type}{${t.join("; ")}}`:this.type}istype(e,t=!1){return this.type==e||(!(t||!this.type_obj||!this.type_obj.istype(e))||!(t||this.type_obj||!this.type.startsWith(e+"/")))}get_var(e){return this.vars.has(e)?this.vars.get(e):this.type_obj?this.type_obj.get_var(e):void 0}set_var(e,t){this.vars.set(e,t),this.cached_appearance=null}eval_var(e,t){return this.get_var(t)}make_eval_context(){return{types:this.context.types,src:this}}copy(){return new d(this.context,this.type,this.vars)}get_appearance(){if(!this.type_obj)return f;if(!this.cached_appearance){let e=this.get_var("icon"),t=this.get_var("alpha"),n=this.get_var("color"),r=this.get_var("plane")<<16>>16;if((r>1e4||r<-1e4)&&(r=r- -32767<<16>>16),null==t?t=1:t/=255,"string"==typeof n&&""!=n){let e=o(n);e?(n=[e.r/255,e.g/255,e.b/255],null!=e.a&&(t*=e.a)):(console.warn("Cannot parse "+n),n=[1,1,1])}else n=[1,1,1];this.cached_appearance=new i({icon:e?e.file:null,icon_state:this.get_var("icon_state"),dir:15&this.get_var("dir"),color:n,layer:+this.get_var("layer")||0,plane:r,pixel_x:this.get_var("pixel_x")<<16>>16,pixel_y:this.get_var("pixel_y")<<16>>16,pixel_w:this.get_var("pixel_w")<<16>>16,pixel_z:this.get_var("pixel_z")<<16>>16,alpha:t})}return this.cached_appearance}get_fastdmm_prop(e,t){if(this.type_obj)return this.type_obj.get_fastdmm_prop(e,t)}get_fastdmm_macros(e,t=!1){return this.type_obj?this.type_obj.get_fastdmm_macros(e,t):[]}update_vars(){let e,t=[];for(let n of this.get_fastdmm_macros("set_instance_vars",!1))for(let r=0;r<n.args.length;r++){let i=n.arg_names[r];if(!i||t.includes(i))continue;t.push(i),e||(e=this.make_eval_context(),Object.assign(e,l));let a=n.args[r].evaluate_constant(e);a!=h&&(a==c?this.vars.delete(i):this.vars.set(i,a))}}}class u{constructor(e,t,n,r,i=[],a=!1){if(this.dmm=e,this.x=t,this.y=n,this.z=r,this.contents=i,!this.contents.length&&!a){let e=this.dmm.context.types.get("/world").get_var("turf"),t=this.dmm.context.types.get("/world").get_var("area");this.contents.push(new d(this.dmm.context,e?e.path:"/turf")),this.contents.push(new d(this.dmm.context,t?t.path:"/area"))}for(let e of this.contents)this.dmm.handle_instance_added(e.toString());this.id=++s,this.area_frame_appearance=void 0}[Symbol.iterator](){return this.contents[Symbol.iterator]()}get_step(e){let t=this.x,n=this.y,r=this.z;return 1&e&&n++,2&e&&n--,4&e&&t++,8&e&&t--,this.dmm.get_tile(t,n,r)}get_dir(e,t=!1){let n=0;if(e)if(t){let t=e.x-this.x,n=e.y-this.y;if(t>Math.abs(n))return 4;if(t<-Math.abs(n))return 8;if(n>0)return 1;if(n<0)return 2}else e.x>this.x&&(n|=4),e.x<this.x&&(n|=8),e.y>this.y&&(n|=1),e.y<this.y&&(n|=2);return n}locate(e,t=!1){for(let n of this.contents)if(t?n.type==e:n.istype(e))return n}get_turf(){return this.locate("/turf")}get_area(){return this.locate("/area")}set_turf(e){"string"==typeof e&&(e=new d(this.dmm.context,e));let t=-1,n=-1;for(let e=0;e<this.contents.length;e++)this.contents[e].istype("/turf")&&(t=e),this.contents[e].istype("/area")&&(n=e);-1!=t?this.replace_object(t,e):-1!=n?this.splice(n,0,e):this.push(e)}set_area(e){"string"==typeof e&&(e=new d(this.dmm.context,e));let t=-1,n=-1;for(let e=0;e<this.contents.length;e++)this.contents[e].istype("/turf")&&(t=e),this.contents[e].istype("/area")&&(n=e);-1!=n?this.replace_object(n,e):-1!=t?this.splice(t+1,0,e):this.push(e)}add_object(e){"string"==typeof e&&(e=new d(this.dmm.context,e));let t=-1;for(let e=0;e<this.contents.length;e++){let n=this.contents[e].type;if(n.startsWith("/turf")||n.startsWith("/area")){t=e;break}}-1!=t?this.splice(t,0,e):this.push(e)}place(e){"string"==typeof e&&(e=new d(this.dmm.context,e)),e.istype("/turf")?this.set_turf(e):e.istype("/area")?this.set_area(e):this.add_object(e)}delete(e){let t=this.contents.indexOf(e);if(-1!=t)if(e==this.get_turf()){let e=this.dmm.context.types.get("/world").get_var("turf");this.set_turf(e?e.path:"/turf")}else if(e==this.get_area()){let e=this.dmm.context.types.get("/world").get_var("area");this.set_area(e?e.path:"/area")}else this.splice(t,1)}push(e){return this.dmm.modified=!0,this.dmm.undo_frame.push([this,this.pop]),this.dmm.last_change_index=++s,this.dmm.handle_instance_added(""+e),e.istype("/area")&&this.area_dirty(),this.contents.push(e)}pop(){if(this.dmm.modified=!0,!this.contents.length)throw new Error("Cannot pop empty contents for tile");let e=this.contents.pop();return this.dmm.undo_frame.push([this,this.push,this.popped]),this.dmm.last_change_index=++s,this.dmm.handle_instance_removed(""+e),e.istype("/area")&&this.area_dirty(),e}splice(e,t,...n){if(this.dmm.modified=!0,e<0)throw new Error("Negative splice index");if(e>this.contents.length&&(e=this.contents.length),t<0)throw new Error("Negative splice amount");for(let e of n)this.dmm.handle_instance_added(""+e),e.istype("/area")&&this.area_dirty();let r=this.contents.splice(e,t,...n);for(let e of r)this.dmm.handle_instance_removed(""+e),e.istype("/area")&&this.area_dirty();return this.dmm.undo_frame.push([this,this.splice,e,n.length,...r]),this.dmm.last_change_index=++s,r}replace_object(e,t){if(this.dmm.modified=!0,this.index<0||this.index>=this.contents.length)throw new Error(`Cannot set index ${e} of tile ${x},${y},${z} with only ${this.contents.length} elements`);this.dmm.handle_instance_added(""+t),t.istype("/area")&&this.area_dirty(),this.dmm.handle_instance_removed(""+this.contents[e]),this.contents[e].istype("/area")&&this.area_dirty(),this.dmm.undo_frame.push([this,this.replace_object,e,this.contents[e]]),this.dmm.last_change_index=++s,this.contents[e]=t}toString(e=!1){let t="(";for(let n=0;n<this.contents.length;n++)0!=n&&(t+=","),e&&(t+="\n"),t+=this.contents[n].toString(e);return t+=")",t}area_dirty(){this.area_frame_appearance=void 0;for(let e=0;e<4;e++){let t=1<<e,n=this.get_step(t);n&&(n.area_frame_appearance=void 0)}}get_frame_appearance(){if(void 0!==this.area_frame_appearance)return this.area_frame_appearance;let e=this.get_area(),t=0;for(let n=0;n<4;n++){let r=1<<n,i=this.get_step(r);i?i.get_area().toString()!=e.toString()&&(t|=r):t|=r}return this.area_frame_appearance=p[t]}}const p=[null];for(let e=1;e<16;e++)p.push(new i({icon:"_fastdmm_interface.dmi",icon_state:""+e,layer:100,plane:1e5,alpha:.5}));p[0]=null,e.exports={Tile:u,Instance:d}},function(e,t,n){var r=n(137);e.exports=function(e){return function(e){var t=r[e.toLowerCase()];if(!t)return;return{r:t[0],g:t[1],b:t[2]}}(e)||function(e){if("#"==e[0]&&4==e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}}(e)||function(e){if("#"==e[0]&&7==e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}}(e)||function(e){if(0==e.indexOf("rgb(")){var t=(e=e.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}}(e)||function(e){if(0==e.indexOf("rgba(")){var t=(e=e.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:t[3]}}}(e)}},function(e,t){e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]}},function(e,t,n){"use strict";t.randomBytes=t.rng=t.pseudoRandomBytes=t.prng=n(19),t.createHash=t.Hash=n(24),t.createHmac=t.Hmac=n(77);var r=n(157),i=Object.keys(r),a=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(i);t.getHashes=function(){return a};var o=n(80);t.pbkdf2=o.pbkdf2,t.pbkdf2Sync=o.pbkdf2Sync;var s=n(159);t.Cipher=s.Cipher,t.createCipher=s.createCipher,t.Cipheriv=s.Cipheriv,t.createCipheriv=s.createCipheriv,t.Decipher=s.Decipher,t.createDecipher=s.createDecipher,t.Decipheriv=s.Decipheriv,t.createDecipheriv=s.createDecipheriv,t.getCiphers=s.getCiphers,t.listCiphers=s.listCiphers;var f=n(174);t.DiffieHellmanGroup=f.DiffieHellmanGroup,t.createDiffieHellmanGroup=f.createDiffieHellmanGroup,t.getDiffieHellman=f.getDiffieHellman,t.createDiffieHellman=f.createDiffieHellman,t.DiffieHellman=f.DiffieHellman;var c=n(180);t.createSign=c.createSign,t.Sign=c.Sign,t.createVerify=c.createVerify,t.Verify=c.Verify,t.createECDH=n(214);var h=n(215);t.publicEncrypt=h.publicEncrypt,t.privateEncrypt=h.privateEncrypt,t.publicDecrypt=h.publicDecrypt,t.privateDecrypt=h.privateDecrypt;var l=n(218);t.randomFill=l.randomFill,t.randomFillSync=l.randomFillSync,t.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},t.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),o=r[0],s=r[1],f=new a(function(e,t,n){return 3*(t+n)/4-n}(0,o,s)),h=0,l=s>0?o-4:o;for(n=0;n<l;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],f[h++]=t>>16&255,f[h++]=t>>8&255,f[h++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,f[h++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,f[h++]=t>>8&255,f[h++]=255&t);return f},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(h(e,o,o+16383>s?s:o+16383));1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,f=o.length;s<f;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function h(e,t,n){for(var i,a,o=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,f=(1<<s)-1,c=f>>1,h=-7,l=n?i-1:0,d=n?-1:1,u=e[t+l];for(l+=d,a=u&(1<<-h)-1,u>>=-h,h+=s;h>0;a=256*a+e[t+l],l+=d,h-=8);for(o=a&(1<<-h)-1,a>>=-h,h+=r;h>0;o=256*o+e[t+l],l+=d,h-=8);if(0===a)a=1-c;else{if(a===f)return o?NaN:1/0*(u?-1:1);o+=Math.pow(2,r),a-=c}return(u?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,f,c=8*a-i-1,h=(1<<c)-1,l=h>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,u=r?0:a-1,p=r?1:-1,b=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-o))<1&&(o--,f*=2),(t+=o+l>=1?d/f:d*Math.pow(2,1-l))*f>=2&&(o++,f/=2),o+l>=h?(s=0,o=h):o+l>=1?(s=(t*f-1)*Math.pow(2,i),o+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,i),o=0));i>=8;e[n+u]=255&s,u+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[n+u]=255&o,u+=p,o/=256,c-=8);e[n+u-p]|=128*b}},function(e,t){},function(e,t,n){"use strict";var r=n(48).Buffer,i=n(143);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,i,a=r.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,n=a,i=s,t.copy(n,i),s+=o.data.length,o=o.next;return a},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(145),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(10))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,a,o,s,f=1,c={},h=!1,l=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){a.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(i=l.documentElement,r=function(e){var t=l.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&p(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(o+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return c[f]=i,r(f),f++},d.clearImmediate=u}function u(e){delete c[e]}function p(e){if(h)setTimeout(p,0,e);else{var t=c[e];if(t){h=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{u(e),h=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(10),n(5))},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(10))},function(e,t,n){"use strict";e.exports=a;var r=n(74),i=Object.create(n(25));function a(e){if(!(this instanceof a))return new a(e);r.call(this,e)}i.inherits=n(0),i.inherits(a,r),a.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(49)},function(e,t,n){e.exports=n(17)},function(e,t,n){e.exports=n(47).Transform},function(e,t,n){e.exports=n(47).PassThrough},function(e,t,n){var r=n(0),i=n(21),a=n(1).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function f(){this.init(),this._w=s,i.call(this,64,56)}function c(e){return e<<30|e>>>2}function h(e,t,n,r){return 0===e?t&n|~t&r:2===e?t&n|t&r|n&r:t^n^r}r(f,i),f.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},f.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,i=0|this._b,a=0|this._c,s=0|this._d,f=0|this._e,l=0;l<16;++l)n[l]=e.readInt32BE(4*l);for(;l<80;++l)n[l]=n[l-3]^n[l-8]^n[l-14]^n[l-16];for(var d=0;d<80;++d){var u=~~(d/20),p=0|((t=r)<<5|t>>>27)+h(u,i,a,s)+f+n[d]+o[u];f=s,s=a,a=c(i),i=r,r=p}this._a=r+this._a|0,this._b=i+this._b|0,this._c=a+this._c|0,this._d=s+this._d|0,this._e=f+this._e|0},f.prototype._hash=function(){var e=a.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=f},function(e,t,n){var r=n(0),i=n(21),a=n(1).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function f(){this.init(),this._w=s,i.call(this,64,56)}function c(e){return e<<5|e>>>27}function h(e){return e<<30|e>>>2}function l(e,t,n,r){return 0===e?t&n|~t&r:2===e?t&n|t&r|n&r:t^n^r}r(f,i),f.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},f.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,i=0|this._b,a=0|this._c,s=0|this._d,f=0|this._e,d=0;d<16;++d)n[d]=e.readInt32BE(4*d);for(;d<80;++d)n[d]=(t=n[d-3]^n[d-8]^n[d-14]^n[d-16])<<1|t>>>31;for(var u=0;u<80;++u){var p=~~(u/20),b=c(r)+l(p,i,a,s)+f+n[u]+o[p]|0;f=s,s=a,a=h(i),i=r,r=b}this._a=r+this._a|0,this._b=i+this._b|0,this._c=a+this._c|0,this._d=s+this._d|0,this._e=f+this._e|0},f.prototype._hash=function(){var e=a.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=f},function(e,t,n){var r=n(0),i=n(75),a=n(21),o=n(1).Buffer,s=new Array(64);function f(){this.init(),this._w=s,a.call(this,64,56)}r(f,i),f.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},f.prototype._hash=function(){var e=o.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=f},function(e,t,n){var r=n(0),i=n(76),a=n(21),o=n(1).Buffer,s=new Array(160);function f(){this.init(),this._w=s,a.call(this,128,112)}r(f,i),f.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},f.prototype._hash=function(){var e=o.allocUnsafe(48);function t(t,n,r){e.writeInt32BE(t,r),e.writeInt32BE(n,r+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},e.exports=f},function(e,t,n){"use strict";var r=n(0),i=n(1).Buffer,a=n(14),o=i.alloc(128);function s(e,t){a.call(this,"digest"),"string"==typeof t&&(t=i.from(t)),this._alg=e,this._key=t,t.length>64?t=e(t):t.length<64&&(t=i.concat([t,o],64));for(var n=this._ipad=i.allocUnsafe(64),r=this._opad=i.allocUnsafe(64),s=0;s<64;s++)n[s]=54^t[s],r[s]=92^t[s];this._hash=[n]}r(s,a),s.prototype._update=function(e){this._hash.push(e)},s.prototype._final=function(){var e=this._alg(i.concat(this._hash));return this._alg(i.concat([this._opad,e]))},e.exports=s},function(e,t,n){e.exports=n(79)},function(e,t,n){(function(t,r){var i,a=n(81),o=n(82),s=n(83),f=n(1).Buffer,c=t.crypto&&t.crypto.subtle,h={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},l=[];function d(e,t,n,r,i){return c.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then((function(e){return c.deriveBits({name:"PBKDF2",salt:t,iterations:n,hash:{name:i}},e,r<<3)})).then((function(e){return f.from(e)}))}e.exports=function(e,n,u,p,b,m){"function"==typeof b&&(m=b,b=void 0);var _=h[(b=b||"sha1").toLowerCase()];if(!_||"function"!=typeof t.Promise)return r.nextTick((function(){var t;try{t=s(e,n,u,p,b)}catch(e){return m(e)}m(null,t)}));if(a(e,n,u,p),"function"!=typeof m)throw new Error("No callback provided to pbkdf2");f.isBuffer(e)||(e=f.from(e,o)),f.isBuffer(n)||(n=f.from(n,o)),function(e,t){e.then((function(e){r.nextTick((function(){t(null,e)}))}),(function(e){r.nextTick((function(){t(e)}))}))}(function(e){if(t.process&&!t.process.browser)return Promise.resolve(!1);if(!c||!c.importKey||!c.deriveBits)return Promise.resolve(!1);if(void 0!==l[e])return l[e];var n=d(i=i||f.alloc(8),i,10,128,e).then((function(){return!0})).catch((function(){return!1}));return l[e]=n,n}(_).then((function(t){return t?d(e,n,u,p,_):s(e,n,u,p,b)})),m)}}).call(this,n(10),n(5))},function(e,t,n){var r=n(160),i=n(54),a=n(55),o=n(173),s=n(35);function f(e,t,n){if(e=e.toLowerCase(),a[e])return i.createCipheriv(e,t,n);if(o[e])return new r({key:t,iv:n,mode:e});throw new TypeError("invalid suite type")}function c(e,t,n){if(e=e.toLowerCase(),a[e])return i.createDecipheriv(e,t,n);if(o[e])return new r({key:t,iv:n,mode:e,decrypt:!0});throw new TypeError("invalid suite type")}t.createCipher=t.Cipher=function(e,t){var n,r;if(e=e.toLowerCase(),a[e])n=a[e].key,r=a[e].iv;else{if(!o[e])throw new TypeError("invalid suite type");n=8*o[e].key,r=o[e].iv}var i=s(t,!1,n,r);return f(e,i.key,i.iv)},t.createCipheriv=t.Cipheriv=f,t.createDecipher=t.Decipher=function(e,t){var n,r;if(e=e.toLowerCase(),a[e])n=a[e].key,r=a[e].iv;else{if(!o[e])throw new TypeError("invalid suite type");n=8*o[e].key,r=o[e].iv}var i=s(t,!1,n,r);return c(e,i.key,i.iv)},t.createDecipheriv=t.Decipheriv=c,t.listCiphers=t.getCiphers=function(){return Object.keys(o).concat(i.getCiphers())}},function(e,t,n){var r=n(14),i=n(161),a=n(0),o=n(1).Buffer,s={"des-ede3-cbc":i.CBC.instantiate(i.EDE),"des-ede3":i.EDE,"des-ede-cbc":i.CBC.instantiate(i.EDE),"des-ede":i.EDE,"des-cbc":i.CBC.instantiate(i.DES),"des-ecb":i.DES};function f(e){r.call(this);var t,n=e.mode.toLowerCase(),i=s[n];t=e.decrypt?"decrypt":"encrypt";var a=e.key;o.isBuffer(a)||(a=o.from(a)),"des-ede"!==n&&"des-ede-cbc"!==n||(a=o.concat([a,a.slice(0,8)]));var f=e.iv;o.isBuffer(f)||(f=o.from(f)),this._des=i.create({key:a,iv:f,type:t})}s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],e.exports=f,a(f,r),f.prototype._update=function(e){return o.from(this._des.update(e))},f.prototype._final=function(){return o.from(this._des.final())}},function(e,t,n){"use strict";t.utils=n(84),t.Cipher=n(53),t.DES=n(85),t.CBC=n(162),t.EDE=n(163)},function(e,t,n){"use strict";var r=n(8),i=n(0),a={};function o(e){r.equal(e.length,8,"Invalid IV length"),this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}t.instantiate=function(e){function t(t){e.call(this,t),this._cbcInit()}i(t,e);for(var n=Object.keys(a),r=0;r<n.length;r++){var o=n[r];t.prototype[o]=a[o]}return t.create=function(e){return new t(e)},t},a._cbcInit=function(){var e=new o(this.options.iv);this._cbcState=e},a._update=function(e,t,n,r){var i=this._cbcState,a=this.constructor.super_.prototype,o=i.iv;if("encrypt"===this.type){for(var s=0;s<this.blockSize;s++)o[s]^=e[t+s];a._update.call(this,o,0,n,r);for(s=0;s<this.blockSize;s++)o[s]=n[r+s]}else{a._update.call(this,e,t,n,r);for(s=0;s<this.blockSize;s++)n[r+s]^=o[s];for(s=0;s<this.blockSize;s++)o[s]=e[t+s]}}},function(e,t,n){"use strict";var r=n(8),i=n(0),a=n(53),o=n(85);function s(e,t){r.equal(t.length,24,"Invalid key length");var n=t.slice(0,8),i=t.slice(8,16),a=t.slice(16,24);this.ciphers="encrypt"===e?[o.create({type:"encrypt",key:n}),o.create({type:"decrypt",key:i}),o.create({type:"encrypt",key:a})]:[o.create({type:"decrypt",key:a}),o.create({type:"encrypt",key:i}),o.create({type:"decrypt",key:n})]}function f(e){a.call(this,e);var t=new s(this.type,this.options.key);this._edeState=t}i(f,a),e.exports=f,f.create=function(e){return new f(e)},f.prototype._update=function(e,t,n,r){var i=this._edeState;i.ciphers[0]._update(e,t,n,r),i.ciphers[1]._update(n,r,n,r),i.ciphers[2]._update(n,r,n,r)},f.prototype._pad=o.prototype._pad,f.prototype._unpad=o.prototype._unpad},function(e,t,n){var r=n(55),i=n(89),a=n(1).Buffer,o=n(90),s=n(14),f=n(34),c=n(35);function h(e,t,n){s.call(this),this._cache=new d,this._cipher=new f.AES(t),this._prev=a.from(n),this._mode=e,this._autopadding=!0}n(0)(h,s),h.prototype._update=function(e){var t,n;this._cache.add(e);for(var r=[];t=this._cache.get();)n=this._mode.encrypt(this,t),r.push(n);return a.concat(r)};var l=a.alloc(16,16);function d(){this.cache=a.allocUnsafe(0)}function u(e,t,n){var s=r[e.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"==typeof t&&(t=a.from(t)),t.length!==s.key/8)throw new TypeError("invalid key length "+t.length);if("string"==typeof n&&(n=a.from(n)),"GCM"!==s.mode&&n.length!==s.iv)throw new TypeError("invalid iv length "+n.length);return"stream"===s.type?new o(s.module,t,n):"auth"===s.type?new i(s.module,t,n):new h(s.module,t,n)}h.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(l))throw this._cipher.scrub(),new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},d.prototype.add=function(e){this.cache=a.concat([this.cache,e])},d.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},d.prototype.flush=function(){for(var e=16-this.cache.length,t=a.allocUnsafe(e),n=-1;++n<e;)t.writeUInt8(e,n);return a.concat([this.cache,t])},t.createCipheriv=u,t.createCipher=function(e,t){var n=r[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var i=c(t,!1,n.key,n.iv);return u(e,i.key,i.iv)}},function(e,t){t.encrypt=function(e,t){return e._cipher.encryptBlock(t)},t.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},function(e,t,n){var r=n(26);t.encrypt=function(e,t){var n=r(t,e._prev);return e._prev=e._cipher.encryptBlock(n),e._prev},t.decrypt=function(e,t){var n=e._prev;e._prev=t;var i=e._cipher.decryptBlock(t);return r(i,n)}},function(e,t,n){var r=n(1).Buffer,i=n(26);function a(e,t,n){var a=t.length,o=i(t,e._cache);return e._cache=e._cache.slice(a),e._prev=r.concat([e._prev,n?t:o]),o}t.encrypt=function(e,t,n){for(var i,o=r.allocUnsafe(0);t.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=r.allocUnsafe(0)),!(e._cache.length<=t.length)){o=r.concat([o,a(e,t,n)]);break}i=e._cache.length,o=r.concat([o,a(e,t.slice(0,i),n)]),t=t.slice(i)}return o}},function(e,t,n){var r=n(1).Buffer;function i(e,t,n){var i=e._cipher.encryptBlock(e._prev)[0]^t;return e._prev=r.concat([e._prev.slice(1),r.from([n?t:i])]),i}t.encrypt=function(e,t,n){for(var a=t.length,o=r.allocUnsafe(a),s=-1;++s<a;)o[s]=i(e,t[s],n);return o}},function(e,t,n){var r=n(1).Buffer;function i(e,t,n){for(var r,i,o=-1,s=0;++o<8;)r=t&1<<7-o?128:0,s+=(128&(i=e._cipher.encryptBlock(e._prev)[0]^r))>>o%8,e._prev=a(e._prev,n?r:i);return s}function a(e,t){var n=e.length,i=-1,a=r.allocUnsafe(e.length);for(e=r.concat([e,r.from([t])]);++i<n;)a[i]=e[i]<<1|e[i+1]>>7;return a}t.encrypt=function(e,t,n){for(var a=t.length,o=r.allocUnsafe(a),s=-1;++s<a;)o[s]=i(e,t[s],n);return o}},function(e,t,n){(function(e){var r=n(26);function i(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}t.encrypt=function(t,n){for(;t._cache.length<n.length;)t._cache=e.concat([t._cache,i(t)]);var a=t._cache.slice(0,n.length);return t._cache=t._cache.slice(n.length),r(n,a)}}).call(this,n(2).Buffer)},function(e,t,n){var r=n(1).Buffer,i=r.alloc(16,0);function a(e){var t=r.allocUnsafe(16);return t.writeUInt32BE(e[0]>>>0,0),t.writeUInt32BE(e[1]>>>0,4),t.writeUInt32BE(e[2]>>>0,8),t.writeUInt32BE(e[3]>>>0,12),t}function o(e){this.h=e,this.state=r.alloc(16,0),this.cache=r.allocUnsafe(0)}o.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},o.prototype._multiply=function(){for(var e,t,n,r=[(e=this.h).readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)],i=[0,0,0,0],o=-1;++o<128;){for(0!=(this.state[~~(o/8)]&1<<7-o%8)&&(i[0]^=r[0],i[1]^=r[1],i[2]^=r[2],i[3]^=r[3]),n=0!=(1&r[3]),t=3;t>0;t--)r[t]=r[t]>>>1|(1&r[t-1])<<31;r[0]=r[0]>>>1,n&&(r[0]=r[0]^225<<24)}this.state=a(i)},o.prototype.update=function(e){var t;for(this.cache=r.concat([this.cache,e]);this.cache.length>=16;)t=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(t)},o.prototype.final=function(e,t){return this.cache.length&&this.ghash(r.concat([this.cache,i],16)),this.ghash(a([0,e,0,t])),this.state},e.exports=o},function(e,t,n){var r=n(89),i=n(1).Buffer,a=n(55),o=n(90),s=n(14),f=n(34),c=n(35);function h(e,t,n){s.call(this),this._cache=new l,this._last=void 0,this._cipher=new f.AES(t),this._prev=i.from(n),this._mode=e,this._autopadding=!0}function l(){this.cache=i.allocUnsafe(0)}function d(e,t,n){var s=a[e.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"==typeof n&&(n=i.from(n)),"GCM"!==s.mode&&n.length!==s.iv)throw new TypeError("invalid iv length "+n.length);if("string"==typeof t&&(t=i.from(t)),t.length!==s.key/8)throw new TypeError("invalid key length "+t.length);return"stream"===s.type?new o(s.module,t,n,!0):"auth"===s.type?new r(s.module,t,n,!0):new h(s.module,t,n)}n(0)(h,s),h.prototype._update=function(e){var t,n;this._cache.add(e);for(var r=[];t=this._cache.get(this._autopadding);)n=this._mode.decrypt(this,t),r.push(n);return i.concat(r)},h.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return function(e){var t=e[15];if(t<1||t>16)throw new Error("unable to decrypt data");var n=-1;for(;++n<t;)if(e[n+(16-t)]!==t)throw new Error("unable to decrypt data");if(16===t)return;return e.slice(0,16-t)}(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},l.prototype.add=function(e){this.cache=i.concat([this.cache,e])},l.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},l.prototype.flush=function(){if(this.cache.length)return this.cache},t.createDecipher=function(e,t){var n=a[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var r=c(t,!1,n.key,n.iv);return d(e,r.key,r.iv)},t.createDecipheriv=d},function(e,t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}},function(e,t,n){(function(e){var r=n(91),i=n(178),a=n(179);var o={binary:!0,hex:!0,base64:!0};t.DiffieHellmanGroup=t.createDiffieHellmanGroup=t.getDiffieHellman=function(t){var n=new e(i[t].prime,"hex"),r=new e(i[t].gen,"hex");return new a(n,r)},t.createDiffieHellman=t.DiffieHellman=function t(n,i,s,f){return e.isBuffer(i)||void 0===o[i]?t(n,"binary",i,s):(i=i||"binary",f=f||"binary",s=s||new e([2]),e.isBuffer(s)||(s=new e(s,f)),"number"==typeof n?new a(r(n,s),s,!0):(e.isBuffer(n)||(n=new e(n,i)),new a(n,s,!0)))}}).call(this,n(2).Buffer)},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){},function(e,t){},function(e){e.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},function(e,t,n){(function(t){var r=n(4),i=new(n(92)),a=new r(24),o=new r(11),s=new r(10),f=new r(3),c=new r(7),h=n(91),l=n(19);function d(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this._pub=new r(e),this}function u(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this._priv=new r(e),this}e.exports=b;var p={};function b(e,t,n){this.setGenerator(t),this.__prime=new r(e),this._prime=r.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,n?(this.setPublicKey=d,this.setPrivateKey=u):this._primeCode=8}function m(e,n){var r=new t(e.toArray());return n?r.toString(n):r}Object.defineProperty(b.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(e,t){var n=t.toString("hex"),r=[n,e.toString(16)].join("_");if(r in p)return p[r];var l,d=0;if(e.isEven()||!h.simpleSieve||!h.fermatTest(e)||!i.test(e))return d+=1,d+="02"===n||"05"===n?8:4,p[r]=d,d;switch(i.test(e.shrn(1))||(d+=2),n){case"02":e.mod(a).cmp(o)&&(d+=8);break;case"05":(l=e.mod(s)).cmp(f)&&l.cmp(c)&&(d+=8);break;default:d+=4}return p[r]=d,d}(this.__prime,this.__gen)),this._primeCode}}),b.prototype.generateKeys=function(){return this._priv||(this._priv=new r(l(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},b.prototype.computeSecret=function(e){var n=(e=(e=new r(e)).toRed(this._prime)).redPow(this._priv).fromRed(),i=new t(n.toArray()),a=this.getPrime();if(i.length<a.length){var o=new t(a.length-i.length);o.fill(0),i=t.concat([o,i])}return i},b.prototype.getPublicKey=function(e){return m(this._pub,e)},b.prototype.getPrivateKey=function(e){return m(this._priv,e)},b.prototype.getPrime=function(e){return m(this.__prime,e)},b.prototype.getGenerator=function(e){return m(this._gen,e)},b.prototype.setGenerator=function(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this.__gen=e,this._gen=new r(e),this}}).call(this,n(2).Buffer)},function(e,t,n){(function(t){var r=n(24),i=n(20),a=n(0),o=n(181),s=n(213),f=n(79);function c(e){i.Writable.call(this);var t=f[e];if(!t)throw new Error("Unknown message digest");this._hashType=t.hash,this._hash=r(t.hash),this._tag=t.id,this._signType=t.sign}function h(e){i.Writable.call(this);var t=f[e];if(!t)throw new Error("Unknown message digest");this._hash=r(t.hash),this._tag=t.id,this._signType=t.sign}function l(e){return new c(e)}function d(e){return new h(e)}Object.keys(f).forEach((function(e){f[e].id=new t(f[e].id,"hex"),f[e.toLowerCase()]=f[e]})),a(c,i.Writable),c.prototype._write=function(e,t,n){this._hash.update(e),n()},c.prototype.update=function(e,n){return"string"==typeof e&&(e=new t(e,n)),this._hash.update(e),this},c.prototype.sign=function(e,t){this.end();var n=this._hash.digest(),r=o(n,e,this._hashType,this._signType,this._tag);return t?r.toString(t):r},a(h,i.Writable),h.prototype._write=function(e,t,n){this._hash.update(e),n()},h.prototype.update=function(e,n){return"string"==typeof e&&(e=new t(e,n)),this._hash.update(e),this},h.prototype.verify=function(e,n,r){"string"==typeof n&&(n=new t(n,r)),this.end();var i=this._hash.digest();return s(n,i,e,this._signType,this._tag)},e.exports={Sign:l,Verify:d,createSign:l,createVerify:d}}).call(this,n(2).Buffer)},function(e,t,n){(function(t){var r=n(77),i=n(57),a=n(58).ec,o=n(4),s=n(37),f=n(102);function c(e,n,i,a){if((e=new t(e.toArray())).length<n.byteLength()){var o=new t(n.byteLength()-e.length);o.fill(0),e=t.concat([o,e])}var s=i.length,f=function(e,n){e=(e=h(e,n)).mod(n);var r=new t(e.toArray());if(r.length<n.byteLength()){var i=new t(n.byteLength()-r.length);i.fill(0),r=t.concat([i,r])}return r}(i,n),c=new t(s);c.fill(1);var l=new t(s);return l.fill(0),l=r(a,l).update(c).update(new t([0])).update(e).update(f).digest(),c=r(a,l).update(c).digest(),{k:l=r(a,l).update(c).update(new t([1])).update(e).update(f).digest(),v:c=r(a,l).update(c).digest()}}function h(e,t){var n=new o(e),r=(e.length<<3)-t.bitLength();return r>0&&n.ishrn(r),n}function l(e,n,i){var a,o;do{for(a=new t(0);8*a.length<e.bitLength();)n.v=r(i,n.k).update(n.v).digest(),a=t.concat([a,n.v]);o=h(a,e),n.k=r(i,n.k).update(n.v).update(new t([0])).digest(),n.v=r(i,n.k).update(n.v).digest()}while(-1!==o.cmp(e));return o}function d(e,t,n,r){return e.toRed(o.mont(n)).redPow(t).fromRed().mod(r)}e.exports=function(e,n,r,u,p){var b=s(n);if(b.curve){if("ecdsa"!==u&&"ecdsa/rsa"!==u)throw new Error("wrong private key type");return function(e,n){var r=f[n.curve.join(".")];if(!r)throw new Error("unknown curve "+n.curve.join("."));var i=new a(r).keyFromPrivate(n.privateKey).sign(e);return new t(i.toDER())}(e,b)}if("dsa"===b.type){if("dsa"!==u)throw new Error("wrong private key type");return function(e,n,r){var i,a=n.params.priv_key,s=n.params.p,f=n.params.q,u=n.params.g,p=new o(0),b=h(e,f).mod(f),m=!1,_=c(a,f,e,r);for(;!1===m;)i=l(f,_,r),p=d(u,i,s,f),0===(m=i.invm(f).imul(b.add(a.mul(p))).mod(f)).cmpn(0)&&(m=!1,p=new o(0));return function(e,n){e=e.toArray(),n=n.toArray(),128&e[0]&&(e=[0].concat(e));128&n[0]&&(n=[0].concat(n));var r=[48,e.length+n.length+4,2,e.length];return r=r.concat(e,[2,n.length],n),new t(r)}(p,m)}(e,b,r)}if("rsa"!==u&&"ecdsa/rsa"!==u)throw new Error("wrong private key type");e=t.concat([p,e]);for(var m=b.modulus.byteLength(),_=[0,1];e.length+_.length+1<m;)_.push(255);_.push(0);for(var g=-1;++g<e.length;)_.push(e[g]);return i(_,b)},e.exports.getKey=c,e.exports.makeKey=l}).call(this,n(2).Buffer)},function(e){e.exports=JSON.parse('{"name":"elliptic","version":"6.5.3","description":"EC cryptography","main":"lib/elliptic.js","files":["lib"],"scripts":{"jscs":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","jshint":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","lint":"npm run jscs && npm run jshint","unit":"istanbul test _mocha --reporter=spec test/index.js","test":"npm run lint && npm run unit","version":"grunt dist && git add dist/"},"repository":{"type":"git","url":"git@github.com:indutny/elliptic"},"keywords":["EC","Elliptic","curve","Cryptography"],"author":"Fedor Indutny <fedor@indutny.com>","license":"MIT","bugs":{"url":"https://github.com/indutny/elliptic/issues"},"homepage":"https://github.com/indutny/elliptic","devDependencies":{"brfs":"^1.4.3","coveralls":"^3.0.8","grunt":"^1.0.4","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^9.0.1","istanbul":"^0.4.2","jscs":"^3.0.7","jshint":"^2.10.3","mocha":"^6.2.2"},"dependencies":{"bn.js":"^4.4.0","brorand":"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0","inherits":"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},"_resolved":"https://registry.npmjs.org/elliptic/-/elliptic-6.5.3.tgz","_integrity":"sha512-IMqzv5wNQf+E6aHeIqATs0tOLeOTwj1QKbRcS3jBbYkl5oLAserA8yJTT7/VyHUYG91PRmPyeQDObKLPpeS4dw==","_from":"elliptic@6.5.3"}')},function(e,t,n){"use strict";var r=n(9),i=n(4),a=n(0),o=n(36),s=r.assert;function f(e){o.call(this,"short",e),this.a=new i(e.a,16).toRed(this.red),this.b=new i(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function c(e,t,n,r){o.BasePoint.call(this,e,"affine"),null===t&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(t,16),this.y=new i(n,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function h(e,t,n,r){o.BasePoint.call(this,e,"jacobian"),null===t&&null===n&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(t,16),this.y=new i(n,16),this.z=new i(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}a(f,o),e.exports=f,f.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,n;if(e.beta)t=new i(e.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);t=(t=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(e.lambda)n=new i(e.lambda,16);else{var a=this._getEndoRoots(this.n);0===this.g.mul(a[0]).x.cmp(this.g.x.redMul(t))?n=a[0]:(n=a[1],s(0===this.g.mul(n).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:n,basis:e.basis?e.basis.map((function(e){return{a:new i(e.a,16),b:new i(e.b,16)}})):this._getEndoBasis(n)}}},f.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:i.mont(e),n=new i(2).toRed(t).redInvm(),r=n.redNeg(),a=new i(3).toRed(t).redNeg().redSqrt().redMul(n);return[r.redAdd(a).fromRed(),r.redSub(a).fromRed()]},f.prototype._getEndoBasis=function(e){for(var t,n,r,a,o,s,f,c,h,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),d=e,u=this.n.clone(),p=new i(1),b=new i(0),m=new i(0),_=new i(1),g=0;0!==d.cmpn(0);){var v=u.div(d);c=u.sub(v.mul(d)),h=m.sub(v.mul(p));var y=_.sub(v.mul(b));if(!r&&c.cmp(l)<0)t=f.neg(),n=p,r=c.neg(),a=h;else if(r&&2==++g)break;f=c,u=d,d=c,m=p,p=h,_=b,b=y}o=c.neg(),s=h;var w=r.sqr().add(a.sqr());return o.sqr().add(s.sqr()).cmp(w)>=0&&(o=t,s=n),r.negative&&(r=r.neg(),a=a.neg()),o.negative&&(o=o.neg(),s=s.neg()),[{a:r,b:a},{a:o,b:s}]},f.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],r=t[1],i=r.b.mul(e).divRound(this.n),a=n.b.neg().mul(e).divRound(this.n),o=i.mul(n.a),s=a.mul(r.a),f=i.mul(n.b),c=a.mul(r.b);return{k1:e.sub(o).sub(s),k2:f.add(c).neg()}},f.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),r=n.redSqrt();if(0!==r.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var a=r.fromRed().isOdd();return(t&&!a||!t&&a)&&(r=r.redNeg()),this.point(e,r)},f.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,r=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(r).redIAdd(this.b);return 0===n.redSqr().redISub(i).cmpn(0)},f.prototype._endoWnafMulAdd=function(e,t,n){for(var r=this._endoWnafT1,i=this._endoWnafT2,a=0;a<e.length;a++){var o=this._endoSplit(t[a]),s=e[a],f=s._getBeta();o.k1.negative&&(o.k1.ineg(),s=s.neg(!0)),o.k2.negative&&(o.k2.ineg(),f=f.neg(!0)),r[2*a]=s,r[2*a+1]=f,i[2*a]=o.k1,i[2*a+1]=o.k2}for(var c=this._wnafMulAdd(1,r,i,2*a,n),h=0;h<2*a;h++)r[h]=null,i[h]=null;return c},a(c,o.BasePoint),f.prototype.point=function(e,t,n){return new c(this,e,t,n)},f.prototype.pointFromJSON=function(e,t){return c.fromJSON(this,e,t)},c.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,r=function(e){return n.point(e.x.redMul(n.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(r)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(r)}}}return t}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(e,t,n){"string"==typeof t&&(t=JSON.parse(t));var r=e.point(t[0],t[1],n);if(!t[2])return r;function i(t){return e.point(t[0],t[1],n)}var a=t[2];return r.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[r].concat(a.doubles.points.map(i))},naf:a.naf&&{wnd:a.naf.wnd,points:[r].concat(a.naf.points.map(i))}},r},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),r=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,r)},c.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),r=e.redInvm(),i=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(r),a=i.redSqr().redISub(this.x.redAdd(this.x)),o=i.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(e){return e=new i(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},c.prototype.mulAdd=function(e,t,n){var r=[this,t],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i):this.curve._wnafMulAdd(1,r,i,2)},c.prototype.jmulAdd=function(e,t,n){var r=[this,t],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i,!0):this.curve._wnafMulAdd(1,r,i,2,!0)},c.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},c.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,r=function(e){return e.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(r)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(r)}}}return t},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},a(h,o.BasePoint),f.prototype.jpoint=function(e,t,n){return new h(this,e,t,n)},h.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),r=this.y.redMul(t).redMul(e);return this.curve.point(n,r)},h.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},h.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),r=this.x.redMul(t),i=e.x.redMul(n),a=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(n.redMul(this.z)),s=r.redSub(i),f=a.redSub(o);if(0===s.cmpn(0))return 0!==f.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),h=c.redMul(s),l=r.redMul(c),d=f.redSqr().redIAdd(h).redISub(l).redISub(l),u=f.redMul(l.redISub(d)).redISub(a.redMul(h)),p=this.z.redMul(e.z).redMul(s);return this.curve.jpoint(d,u,p)},h.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,r=e.x.redMul(t),i=this.y,a=e.y.redMul(t).redMul(this.z),o=n.redSub(r),s=i.redSub(a);if(0===o.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var f=o.redSqr(),c=f.redMul(o),h=n.redMul(f),l=s.redSqr().redIAdd(c).redISub(h).redISub(h),d=s.redMul(h.redISub(l)).redISub(i.redMul(c)),u=this.z.redMul(o);return this.curve.jpoint(l,d,u)},h.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,n=0;n<e;n++)t=t.dbl();return t}var r=this.curve.a,i=this.curve.tinv,a=this.x,o=this.y,s=this.z,f=s.redSqr().redSqr(),c=o.redAdd(o);for(n=0;n<e;n++){var h=a.redSqr(),l=c.redSqr(),d=l.redSqr(),u=h.redAdd(h).redIAdd(h).redIAdd(r.redMul(f)),p=a.redMul(l),b=u.redSqr().redISub(p.redAdd(p)),m=p.redISub(b),_=u.redMul(m);_=_.redIAdd(_).redISub(d);var g=c.redMul(s);n+1<e&&(f=f.redMul(d)),a=b,s=g,c=_}return this.curve.jpoint(a,c.redMul(i),s)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},h.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),a=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(r).redISub(a);o=o.redIAdd(o);var s=r.redAdd(r).redIAdd(r),f=s.redSqr().redISub(o).redISub(o),c=a.redIAdd(a);c=(c=c.redIAdd(c)).redIAdd(c),e=f,t=s.redMul(o.redISub(f)).redISub(c),n=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),l=this.y.redSqr(),d=l.redSqr(),u=this.x.redAdd(l).redSqr().redISub(h).redISub(d);u=u.redIAdd(u);var p=h.redAdd(h).redIAdd(h),b=p.redSqr(),m=d.redIAdd(d);m=(m=m.redIAdd(m)).redIAdd(m),e=b.redISub(u).redISub(u),t=p.redMul(u.redISub(e)).redISub(m),n=(n=this.y.redMul(this.z)).redIAdd(n)}return this.curve.jpoint(e,t,n)},h.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),a=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(r).redISub(a);o=o.redIAdd(o);var s=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),f=s.redSqr().redISub(o).redISub(o);e=f;var c=a.redIAdd(a);c=(c=c.redIAdd(c)).redIAdd(c),t=s.redMul(o.redISub(f)).redISub(c),n=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),l=this.y.redSqr(),d=this.x.redMul(l),u=this.x.redSub(h).redMul(this.x.redAdd(h));u=u.redAdd(u).redIAdd(u);var p=d.redIAdd(d),b=(p=p.redIAdd(p)).redAdd(p);e=u.redSqr().redISub(b),n=this.y.redAdd(this.z).redSqr().redISub(l).redISub(h);var m=l.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),t=u.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,n)},h.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,r=this.z,i=r.redSqr().redSqr(),a=t.redSqr(),o=n.redSqr(),s=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(i)),f=t.redAdd(t),c=(f=f.redIAdd(f)).redMul(o),h=s.redSqr().redISub(c.redAdd(c)),l=c.redISub(h),d=o.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var u=s.redMul(l).redISub(d),p=n.redAdd(n).redMul(r);return this.curve.jpoint(h,u,p)},h.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),r=t.redSqr(),i=e.redAdd(e).redIAdd(e),a=i.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(r),s=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(a)).redSqr(),f=r.redIAdd(r);f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var c=i.redIAdd(o).redSqr().redISub(a).redISub(s).redISub(f),h=t.redMul(c);h=(h=h.redIAdd(h)).redIAdd(h);var l=this.x.redMul(s).redISub(h);l=(l=l.redIAdd(l)).redIAdd(l);var d=this.y.redMul(c.redMul(f.redISub(c)).redISub(o.redMul(s)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var u=this.z.redAdd(o).redSqr().redISub(n).redISub(s);return this.curve.jpoint(l,d,u)},h.prototype.mul=function(e,t){return e=new i(e,t),this.curve._wnafMul(this,e)},h.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(0!==this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0))return!1;var r=t.redMul(this.z),i=n.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(r)).cmpn(0)},h.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(n))return!0;for(var r=e.clone(),i=this.curve.redN.redMul(t);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(i),0===this.x.cmp(n))return!0}},h.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},h.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(e,t,n){"use strict";var r=n(4),i=n(0),a=n(36),o=n(9);function s(e){a.call(this,"mont",e),this.a=new r(e.a,16).toRed(this.red),this.b=new r(e.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function f(e,t,n){a.BasePoint.call(this,e,"projective"),null===t&&null===n?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(t,16),this.z=new r(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(s,a),e.exports=s,s.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),r=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t);return 0===r.redSqrt().redSqr().cmp(r)},i(f,a.BasePoint),s.prototype.decodePoint=function(e,t){return this.point(o.toArray(e,t),1)},s.prototype.point=function(e,t){return new f(this,e,t)},s.prototype.pointFromJSON=function(e){return f.fromJSON(this,e)},f.prototype.precompute=function(){},f.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},f.fromJSON=function(e,t){return new f(e,t[0],t[1]||e.one)},f.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},f.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},f.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),n=e.redSub(t),r=e.redMul(t),i=n.redMul(t.redAdd(this.curve.a24.redMul(n)));return this.curve.point(r,i)},f.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},f.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),r=this.x.redSub(this.z),i=e.x.redAdd(e.z),a=e.x.redSub(e.z).redMul(n),o=i.redMul(r),s=t.z.redMul(a.redAdd(o).redSqr()),f=t.x.redMul(a.redISub(o).redSqr());return this.curve.point(s,f)},f.prototype.mul=function(e){for(var t=e.clone(),n=this,r=this.curve.point(null,null),i=[];0!==t.cmpn(0);t.iushrn(1))i.push(t.andln(1));for(var a=i.length-1;a>=0;a--)0===i[a]?(n=n.diffAdd(r,this),r=r.dbl()):(r=n.diffAdd(r,this),n=n.dbl());return r},f.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},f.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},f.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},f.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},f.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(e,t,n){"use strict";var r=n(9),i=n(4),a=n(0),o=n(36),s=r.assert;function f(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,o.call(this,"edwards",e),this.a=new i(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),s(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function c(e,t,n,r,a){o.BasePoint.call(this,e,"projective"),null===t&&null===n&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(t,16),this.y=new i(n,16),this.z=r?new i(r,16):this.curve.one,this.t=a&&new i(a,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}a(f,o),e.exports=f,f.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},f.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},f.prototype.jpoint=function(e,t,n,r){return this.point(e,t,n,r)},f.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),r=this.c2.redSub(this.a.redMul(n)),a=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=r.redMul(a.redInvm()),s=o.redSqrt();if(0!==s.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var f=s.fromRed().isOdd();return(t&&!f||!t&&f)&&(s=s.redNeg()),this.point(e,s)},f.prototype.pointFromY=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),r=n.redSub(this.c2),a=n.redMul(this.d).redMul(this.c2).redSub(this.a),o=r.redMul(a.redInvm());if(0===o.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var s=o.redSqrt();if(0!==s.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return s.fromRed().isOdd()!==t&&(s=s.redNeg()),this.point(s,e)},f.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),r=t.redMul(this.a).redAdd(n),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return 0===r.cmp(i)},a(c,o.BasePoint),f.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},f.prototype.point=function(e,t,n,r){return new c(this,e,t,n,r)},c.fromJSON=function(e,t){return new c(e,t[0],t[1],t[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},c.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var r=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),a=r.redAdd(t),o=a.redSub(n),s=r.redSub(t),f=i.redMul(o),c=a.redMul(s),h=i.redMul(s),l=o.redMul(a);return this.curve.point(f,c,l,h)},c.prototype._projDbl=function(){var e,t,n,r=this.x.redAdd(this.y).redSqr(),i=this.x.redSqr(),a=this.y.redSqr();if(this.curve.twisted){var o=(c=this.curve._mulA(i)).redAdd(a);if(this.zOne)e=r.redSub(i).redSub(a).redMul(o.redSub(this.curve.two)),t=o.redMul(c.redSub(a)),n=o.redSqr().redSub(o).redSub(o);else{var s=this.z.redSqr(),f=o.redSub(s).redISub(s);e=r.redSub(i).redISub(a).redMul(f),t=o.redMul(c.redSub(a)),n=o.redMul(f)}}else{var c=i.redAdd(a);s=this.curve._mulC(this.z).redSqr(),f=c.redSub(s).redSub(s);e=this.curve._mulC(r.redISub(c)).redMul(f),t=this.curve._mulC(c).redMul(i.redISub(a)),n=c.redMul(f)}return this.curve.point(e,t,n)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),r=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),a=n.redSub(t),o=i.redSub(r),s=i.redAdd(r),f=n.redAdd(t),c=a.redMul(o),h=s.redMul(f),l=a.redMul(f),d=o.redMul(s);return this.curve.point(c,h,d,l)},c.prototype._projAdd=function(e){var t,n,r=this.z.redMul(e.z),i=r.redSqr(),a=this.x.redMul(e.x),o=this.y.redMul(e.y),s=this.curve.d.redMul(a).redMul(o),f=i.redSub(s),c=i.redAdd(s),h=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(a).redISub(o),l=r.redMul(f).redMul(h);return this.curve.twisted?(t=r.redMul(c).redMul(o.redSub(this.curve._mulA(a))),n=f.redMul(c)):(t=r.redMul(c).redMul(o.redSub(a)),n=this.curve._mulC(f).redMul(c)),this.curve.point(l,t,n)},c.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},c.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},c.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!1)},c.prototype.jmulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},c.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var n=e.clone(),r=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(r),0===this.x.cmp(t))return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},function(e,t,n){"use strict";t.sha1=n(187),t.sha224=n(188),t.sha256=n(96),t.sha384=n(189),t.sha512=n(97)},function(e,t,n){"use strict";var r=n(11),i=n(27),a=n(95),o=r.rotl32,s=r.sum32,f=r.sum32_5,c=a.ft_1,h=i.BlockHash,l=[1518500249,1859775393,2400959708,3395469782];function d(){if(!(this instanceof d))return new d;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}r.inherits(d,h),e.exports=d,d.blockSize=512,d.outSize=160,d.hmacStrength=80,d.padLength=64,d.prototype._update=function(e,t){for(var n=this.W,r=0;r<16;r++)n[r]=e[t+r];for(;r<n.length;r++)n[r]=o(n[r-3]^n[r-8]^n[r-14]^n[r-16],1);var i=this.h[0],a=this.h[1],h=this.h[2],d=this.h[3],u=this.h[4];for(r=0;r<n.length;r++){var p=~~(r/20),b=f(o(i,5),c(p,a,h,d),u,n[r],l[p]);u=d,d=h,h=o(a,30),a=i,i=b}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],a),this.h[2]=s(this.h[2],h),this.h[3]=s(this.h[3],d),this.h[4]=s(this.h[4],u)},d.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(e,t,n){"use strict";var r=n(11),i=n(96);function a(){if(!(this instanceof a))return new a;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(a,i),e.exports=a,a.blockSize=512,a.outSize=224,a.hmacStrength=192,a.padLength=64,a.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},function(e,t,n){"use strict";var r=n(11),i=n(97);function a(){if(!(this instanceof a))return new a;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(a,i),e.exports=a,a.blockSize=1024,a.outSize=384,a.hmacStrength=192,a.padLength=128,a.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},function(e,t,n){"use strict";var r=n(11),i=n(27),a=r.rotl32,o=r.sum32,s=r.sum32_3,f=r.sum32_4,c=i.BlockHash;function h(){if(!(this instanceof h))return new h;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function l(e,t,n,r){return e<=15?t^n^r:e<=31?t&n|~t&r:e<=47?(t|~n)^r:e<=63?t&r|n&~r:t^(n|~r)}function d(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function u(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}r.inherits(h,c),t.ripemd160=h,h.blockSize=512,h.outSize=160,h.hmacStrength=192,h.padLength=64,h.prototype._update=function(e,t){for(var n=this.h[0],r=this.h[1],i=this.h[2],c=this.h[3],h=this.h[4],g=n,v=r,y=i,w=c,x=h,E=0;E<80;E++){var k=o(a(f(n,l(E,r,i,c),e[p[E]+t],d(E)),m[E]),h);n=h,h=c,c=a(i,10),i=r,r=k,k=o(a(f(g,l(79-E,v,y,w),e[b[E]+t],u(E)),_[E]),x),g=x,x=w,w=a(y,10),y=v,v=k}k=s(this.h[1],i,w),this.h[1]=s(this.h[2],c,x),this.h[2]=s(this.h[3],h,g),this.h[3]=s(this.h[4],n,v),this.h[4]=s(this.h[0],r,y),this.h[0]=k},h.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],b=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],_=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(e,t,n){"use strict";var r=n(11),i=n(8);function a(e,t,n){if(!(this instanceof a))return new a(e,t,n);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(t,n))}e.exports=a,a.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),i(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},a.prototype.update=function(e,t){return this.inner.update(e,t),this},a.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},function(e,t){e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(e,t,n){"use strict";var r=n(4),i=n(194),a=n(9),o=n(59),s=n(56),f=a.assert,c=n(195),h=n(196);function l(e){if(!(this instanceof l))return new l(e);"string"==typeof e&&(f(o.hasOwnProperty(e),"Unknown curve "+e),e=o[e]),e instanceof o.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=l,l.prototype.keyPair=function(e){return new c(this,e)},l.prototype.keyFromPrivate=function(e,t){return c.fromPrivate(this,e,t)},l.prototype.keyFromPublic=function(e,t){return c.fromPublic(this,e,t)},l.prototype.genKeyPair=function(e){e||(e={});for(var t=new i({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||s(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),a=this.n.sub(new r(2));;){var o=new r(t.generate(n));if(!(o.cmp(a)>0))return o.iaddn(1),this.keyFromPrivate(o)}},l.prototype._truncateToN=function(e,t){var n=8*e.byteLength()-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},l.prototype.sign=function(e,t,n,a){"object"==typeof n&&(a=n,n=null),a||(a={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new r(e,16));for(var o=this.n.byteLength(),s=t.getPrivate().toArray("be",o),f=e.toArray("be",o),c=new i({hash:this.hash,entropy:s,nonce:f,pers:a.pers,persEnc:a.persEnc||"utf8"}),l=this.n.sub(new r(1)),d=0;;d++){var u=a.k?a.k(d):new r(c.generate(this.n.byteLength()));if(!((u=this._truncateToN(u,!0)).cmpn(1)<=0||u.cmp(l)>=0)){var p=this.g.mul(u);if(!p.isInfinity()){var b=p.getX(),m=b.umod(this.n);if(0!==m.cmpn(0)){var _=u.invm(this.n).mul(m.mul(t.getPrivate()).iadd(e));if(0!==(_=_.umod(this.n)).cmpn(0)){var g=(p.getY().isOdd()?1:0)|(0!==b.cmp(m)?2:0);return a.canonical&&_.cmp(this.nh)>0&&(_=this.n.sub(_),g^=1),new h({r:m,s:_,recoveryParam:g})}}}}}},l.prototype.verify=function(e,t,n,i){e=this._truncateToN(new r(e,16)),n=this.keyFromPublic(n,i);var a=(t=new h(t,"hex")).r,o=t.s;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var s,f=o.invm(this.n),c=f.mul(e).umod(this.n),l=f.mul(a).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(c,n.getPublic(),l)).isInfinity()&&s.eqXToP(a):!(s=this.g.mulAdd(c,n.getPublic(),l)).isInfinity()&&0===s.getX().umod(this.n).cmp(a)},l.prototype.recoverPubKey=function(e,t,n,i){f((3&n)===n,"The recovery param is more than two bits"),t=new h(t,i);var a=this.n,o=new r(e),s=t.r,c=t.s,l=1&n,d=n>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw new Error("Unable to find sencond key candinate");s=d?this.curve.pointFromX(s.add(this.curve.n),l):this.curve.pointFromX(s,l);var u=t.r.invm(a),p=a.sub(o).mul(u).umod(a),b=c.mul(u).umod(a);return this.g.mulAdd(p,s,b)},l.prototype.getKeyRecoveryParam=function(e,t,n,r){if(null!==(t=new h(t,r)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var a;try{a=this.recoverPubKey(e,t,i)}catch(e){continue}if(a.eq(n))return i}throw new Error("Unable to find valid recovery factor")}},function(e,t,n){"use strict";var r=n(60),i=n(93),a=n(8);function o(e){if(!(this instanceof o))return new o(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=i.toArray(e.entropy,e.entropyEnc||"hex"),n=i.toArray(e.nonce,e.nonceEnc||"hex"),r=i.toArray(e.pers,e.persEnc||"hex");a(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,n,r)}e.exports=o,o.prototype._init=function(e,t,n){var r=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},o.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},o.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},o.prototype.reseed=function(e,t,n,r){"string"!=typeof t&&(r=n,n=t,t=null),e=i.toArray(e,t),n=i.toArray(n,r),a(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1},o.prototype.generate=function(e,t,n,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(r=n,n=t,t=null),n&&(n=i.toArray(n,r||"hex"),this._update(n));for(var a=[];a.length<e;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);var o=a.slice(0,e);return this._update(n),this._reseed++,i.encode(o,t)}},function(e,t,n){"use strict";var r=n(4),i=n(9).assert;function a(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=a,a.fromPublic=function(e,t,n){return t instanceof a?t:new a(e,{pub:t,pubEnc:n})},a.fromPrivate=function(e,t,n){return t instanceof a?t:new a(e,{priv:t,privEnc:n})},a.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},a.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},a.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},a.prototype._importPrivate=function(e,t){this.priv=new r(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},a.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?i(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},a.prototype.derive=function(e){return e.mul(this.priv).getX()},a.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)},a.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},a.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(e,t,n){"use strict";var r=n(4),i=n(9),a=i.assert;function o(e,t){if(e instanceof o)return e;this._importDER(e,t)||(a(e.r&&e.s,"Signature without r or s"),this.r=new r(e.r,16),this.s=new r(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function s(){this.place=0}function f(e,t){var n=e[t.place++];if(!(128&n))return n;var r=15&n;if(0===r||r>4)return!1;for(var i=0,a=0,o=t.place;a<r;a++,o++)i<<=8,i|=e[o],i>>>=0;return!(i<=127)&&(t.place=o,i)}function c(e){for(var t=0,n=e.length-1;!e[t]&&!(128&e[t+1])&&t<n;)t++;return 0===t?e:e.slice(t)}function h(e,t){if(t<128)e.push(t);else{var n=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|n);--n;)e.push(t>>>(n<<3)&255);e.push(t)}}e.exports=o,o.prototype._importDER=function(e,t){e=i.toArray(e,t);var n=new s;if(48!==e[n.place++])return!1;var a=f(e,n);if(!1===a)return!1;if(a+n.place!==e.length)return!1;if(2!==e[n.place++])return!1;var o=f(e,n);if(!1===o)return!1;var c=e.slice(n.place,o+n.place);if(n.place+=o,2!==e[n.place++])return!1;var h=f(e,n);if(!1===h)return!1;if(e.length!==h+n.place)return!1;var l=e.slice(n.place,h+n.place);if(0===c[0]){if(!(128&c[1]))return!1;c=c.slice(1)}if(0===l[0]){if(!(128&l[1]))return!1;l=l.slice(1)}return this.r=new r(c),this.s=new r(l),this.recoveryParam=null,!0},o.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&n[0]&&(n=[0].concat(n)),t=c(t),n=c(n);!(n[0]||128&n[1]);)n=n.slice(1);var r=[2];h(r,t.length),(r=r.concat(t)).push(2),h(r,n.length);var a=r.concat(n),o=[48];return h(o,a.length),o=o.concat(a),i.encode(o,e)}},function(e,t,n){"use strict";var r=n(60),i=n(59),a=n(9),o=a.assert,s=a.parseBytes,f=n(198),c=n(199);function h(e){if(o("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof h))return new h(e);e=i[e].curve;this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=r.sha512}e.exports=h,h.prototype.sign=function(e,t){e=s(e);var n=this.keyFromSecret(t),r=this.hashInt(n.messagePrefix(),e),i=this.g.mul(r),a=this.encodePoint(i),o=this.hashInt(a,n.pubBytes(),e).mul(n.priv()),f=r.add(o).umod(this.curve.n);return this.makeSignature({R:i,S:f,Rencoded:a})},h.prototype.verify=function(e,t,n){e=s(e),t=this.makeSignature(t);var r=this.keyFromPublic(n),i=this.hashInt(t.Rencoded(),r.pubBytes(),e),a=this.g.mul(t.S());return t.R().add(r.pub().mul(i)).eq(a)},h.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return a.intFromLE(e.digest()).umod(this.curve.n)},h.prototype.keyFromPublic=function(e){return f.fromPublic(this,e)},h.prototype.keyFromSecret=function(e){return f.fromSecret(this,e)},h.prototype.makeSignature=function(e){return e instanceof c?e:new c(this,e)},h.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},h.prototype.decodePoint=function(e){var t=(e=a.parseBytes(e)).length-1,n=e.slice(0,t).concat(-129&e[t]),r=0!=(128&e[t]),i=a.intFromLE(n);return this.curve.pointFromY(i,r)},h.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},h.prototype.decodeInt=function(e){return a.intFromLE(e)},h.prototype.isPoint=function(e){return e instanceof this.pointClass}},function(e,t,n){"use strict";var r=n(9),i=r.assert,a=r.parseBytes,o=r.cachedProperty;function s(e,t){this.eddsa=e,this._secret=a(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=a(t.pub)}s.fromPublic=function(e,t){return t instanceof s?t:new s(e,{pub:t})},s.fromSecret=function(e,t){return t instanceof s?t:new s(e,{secret:t})},s.prototype.secret=function(){return this._secret},o(s,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),o(s,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),o(s,"privBytes",(function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,r=t.slice(0,e.encodingLength);return r[0]&=248,r[n]&=127,r[n]|=64,r})),o(s,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),o(s,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),o(s,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),s.prototype.sign=function(e){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},s.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},s.prototype.getSecret=function(e){return i(this._secret,"KeyPair is public only"),r.encode(this.secret(),e)},s.prototype.getPublic=function(e){return r.encode(this.pubBytes(),e)},e.exports=s},function(e,t,n){"use strict";var r=n(4),i=n(9),a=i.assert,o=i.cachedProperty,s=i.parseBytes;function f(e,t){this.eddsa=e,"object"!=typeof t&&(t=s(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),a(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof r&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}o(f,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),o(f,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),o(f,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),o(f,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),f.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},f.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},e.exports=f},function(e,t,n){"use strict";var r=n(28);t.certificate=n(210);var i=r.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));t.RSAPrivateKey=i;var a=r.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));t.RSAPublicKey=a;var o=r.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())}));t.PublicKey=o;var s=r.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),f=r.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(s),this.key("subjectPrivateKey").octstr())}));t.PrivateKey=f;var c=r.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));t.EncryptedPrivateKey=c;var h=r.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));t.DSAPrivateKey=h,t.DSAparam=r.define("DSAparam",(function(){this.int()}));var l=r.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(d),this.key("publicKey").optional().explicit(1).bitstr())}));t.ECPrivateKey=l;var d=r.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));t.signature=r.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},function(e,t,n){var r=n(28),i=n(0);function a(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}t.define=function(e,t){return new a(e,t)},a.prototype._createNamed=function(e){var t;try{t=n(202).runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(e){t=function(e){this._initNamed(e)}}return i(t,e),t.prototype._initNamed=function(t){e.call(this,t)},new t(this)},a.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(r.decoders[e])),this.decoders[e]},a.prototype.decode=function(e,t,n){return this._getDecoder(t).decode(e,n)},a.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(r.encoders[e])),this.encoders[e]},a.prototype.encode=function(e,t,n){return this._getEncoder(t).encode(e,n)}},function(module,exports){var indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,n){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(e){return function(e,t,n){e[t]=n}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var n=t.contentWindow,r=n.eval,i=n.execScript;!r&&i&&(i.call(n,"null"),r=n.eval),forEach(Object_keys(e),(function(t){n[t]=e[t]})),forEach(globals,(function(t){e[t]&&(n[t]=e[t])}));var a=Object_keys(n),o=r.call(n,this.code);return forEach(Object_keys(n),(function(t){(t in e||-1===indexOf(a,t))&&(e[t]=n[t])})),forEach(globals,(function(t){t in e||defineProp(e,t,n[t])})),document.body.removeChild(t),o},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),n=this.runInContext(t);return e&&forEach(Object_keys(t),(function(n){e[n]=t[n]})),n},forEach(Object_keys(Script.prototype),(function(e){exports[e]=Script[e]=function(t){var n=Script(t);return n[e].apply(n,[].slice.call(arguments,1))}})),exports.isContext=function(e){return e instanceof Context},exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"==typeof e&&forEach(Object_keys(e),(function(n){t[n]=e[n]})),t}},function(e,t,n){var r=n(0);function i(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function a(e,t){this.path=e,this.rethrow(t)}t.Reporter=i,i.prototype.isError=function(e){return e instanceof a},i.prototype.save=function(){var e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},i.prototype.restore=function(e){var t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},i.prototype.enterKey=function(e){return this._reporterState.path.push(e)},i.prototype.exitKey=function(e){var t=this._reporterState;t.path=t.path.slice(0,e-1)},i.prototype.leaveKey=function(e,t,n){var r=this._reporterState;this.exitKey(e),null!==r.obj&&(r.obj[t]=n)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){var e=this._reporterState,t=e.obj;return e.obj={},t},i.prototype.leaveObject=function(e){var t=this._reporterState,n=t.obj;return t.obj=e,n},i.prototype.error=function(e){var t,n=this._reporterState,r=e instanceof a;if(t=r?e:new a(n.path.map((function(e){return"["+JSON.stringify(e)+"]"})).join(""),e.message||e,e.stack),!n.options.partial)throw t;return r||n.errors.push(t),t},i.prototype.wrapResult=function(e){var t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},r(a,Error),a.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,a),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},function(e,t,n){var r=n(29).Reporter,i=n(29).EncoderBuffer,a=n(29).DecoderBuffer,o=n(8),s=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],f=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(s);function c(e,t){var n={};this._baseState=n,n.enc=e,n.parent=t||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}e.exports=c;var h=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];c.prototype.clone=function(){var e=this._baseState,t={};h.forEach((function(n){t[n]=e[n]}));var n=new this.constructor(t.parent);return n._baseState=t,n},c.prototype._wrap=function(){var e=this._baseState;f.forEach((function(t){this[t]=function(){var n=new this.constructor(this);return e.children.push(n),n[t].apply(n,arguments)}}),this)},c.prototype._init=function(e){var t=this._baseState;o(null===t.parent),e.call(this),t.children=t.children.filter((function(e){return e._baseState.parent===this}),this),o.equal(t.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(e){var t=this._baseState,n=e.filter((function(e){return e instanceof this.constructor}),this);e=e.filter((function(e){return!(e instanceof this.constructor)}),this),0!==n.length&&(o(null===t.children),t.children=n,n.forEach((function(e){e._baseState.parent=this}),this)),0!==e.length&&(o(null===t.args),t.args=e,t.reverseArgs=e.map((function(e){if("object"!=typeof e||e.constructor!==Object)return e;var t={};return Object.keys(e).forEach((function(n){n==(0|n)&&(n|=0);var r=e[n];t[r]=n})),t})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(e){c.prototype[e]=function(){var t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}})),s.forEach((function(e){c.prototype[e]=function(){var t=this._baseState,n=Array.prototype.slice.call(arguments);return o(null===t.tag),t.tag=e,this._useArgs(n),this}})),c.prototype.use=function(e){o(e);var t=this._baseState;return o(null===t.use),t.use=e,this},c.prototype.optional=function(){return this._baseState.optional=!0,this},c.prototype.def=function(e){var t=this._baseState;return o(null===t.default),t.default=e,t.optional=!0,this},c.prototype.explicit=function(e){var t=this._baseState;return o(null===t.explicit&&null===t.implicit),t.explicit=e,this},c.prototype.implicit=function(e){var t=this._baseState;return o(null===t.explicit&&null===t.implicit),t.implicit=e,this},c.prototype.obj=function(){var e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},c.prototype.key=function(e){var t=this._baseState;return o(null===t.key),t.key=e,this},c.prototype.any=function(){return this._baseState.any=!0,this},c.prototype.choice=function(e){var t=this._baseState;return o(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map((function(t){return e[t]}))),this},c.prototype.contains=function(e){var t=this._baseState;return o(null===t.use),t.contains=e,this},c.prototype._decode=function(e,t){var n=this._baseState;if(null===n.parent)return e.wrapResult(n.children[0]._decode(e,t));var r,i=n.default,o=!0,s=null;if(null!==n.key&&(s=e.enterKey(n.key)),n.optional){var f=null;if(null!==n.explicit?f=n.explicit:null!==n.implicit?f=n.implicit:null!==n.tag&&(f=n.tag),null!==f||n.any){if(o=this._peekTag(e,f,n.any),e.isError(o))return o}else{var c=e.save();try{null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),o=!0}catch(e){o=!1}e.restore(c)}}if(n.obj&&o&&(r=e.enterObject()),o){if(null!==n.explicit){var h=this._decodeTag(e,n.explicit);if(e.isError(h))return h;e=h}var l=e.offset;if(null===n.use&&null===n.choice){if(n.any)c=e.save();var d=this._decodeTag(e,null!==n.implicit?n.implicit:n.tag,n.any);if(e.isError(d))return d;n.any?i=e.raw(c):e=d}if(t&&t.track&&null!==n.tag&&t.track(e.path(),l,e.length,"tagged"),t&&t.track&&null!==n.tag&&t.track(e.path(),e.offset,e.length,"content"),i=n.any?i:null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),e.isError(i))return i;if(n.any||null!==n.choice||null===n.children||n.children.forEach((function(n){n._decode(e,t)})),n.contains&&("octstr"===n.tag||"bitstr"===n.tag)){var u=new a(i);i=this._getUse(n.contains,e._reporterState.obj)._decode(u,t)}}return n.obj&&o&&(i=e.leaveObject(r)),null===n.key||null===i&&!0!==o?null!==s&&e.exitKey(s):e.leaveKey(s,n.key,i),i},c.prototype._decodeGeneric=function(e,t,n){var r=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,r.args[0],n):/str$/.test(e)?this._decodeStr(t,e,n):"objid"===e&&r.args?this._decodeObjid(t,r.args[0],r.args[1],n):"objid"===e?this._decodeObjid(t,null,null,n):"gentime"===e||"utctime"===e?this._decodeTime(t,e,n):"null_"===e?this._decodeNull(t,n):"bool"===e?this._decodeBool(t,n):"objDesc"===e?this._decodeStr(t,e,n):"int"===e||"enum"===e?this._decodeInt(t,r.args&&r.args[0],n):null!==r.use?this._getUse(r.use,t._reporterState.obj)._decode(t,n):t.error("unknown tag: "+e)},c.prototype._getUse=function(e,t){var n=this._baseState;return n.useDecoder=this._use(e,t),o(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},c.prototype._decodeChoice=function(e,t){var n=this._baseState,r=null,i=!1;return Object.keys(n.choice).some((function(a){var o=e.save(),s=n.choice[a];try{var f=s._decode(e,t);if(e.isError(f))return!1;r={type:a,value:f},i=!0}catch(t){return e.restore(o),!1}return!0}),this),i?r:e.error("Choice not matched")},c.prototype._createEncoderBuffer=function(e){return new i(e,this.reporter)},c.prototype._encode=function(e,t,n){var r=this._baseState;if(null===r.default||r.default!==e){var i=this._encodeValue(e,t,n);if(void 0!==i&&!this._skipDefault(i,t,n))return i}},c.prototype._encodeValue=function(e,t,n){var i=this._baseState;if(null===i.parent)return i.children[0]._encode(e,t||new r);var a=null;if(this.reporter=t,i.optional&&void 0===e){if(null===i.default)return;e=i.default}var o=null,s=!1;if(i.any)a=this._createEncoderBuffer(e);else if(i.choice)a=this._encodeChoice(e,t);else if(i.contains)o=this._getUse(i.contains,n)._encode(e,t),s=!0;else if(i.children)o=i.children.map((function(n){if("null_"===n._baseState.tag)return n._encode(null,t,e);if(null===n._baseState.key)return t.error("Child should have a key");var r=t.enterKey(n._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");var i=n._encode(e[n._baseState.key],t,e);return t.leaveKey(r),i}),this).filter((function(e){return e})),o=this._createEncoderBuffer(o);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return t.error("Too many args for : "+i.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");var f=this.clone();f._baseState.implicit=null,o=this._createEncoderBuffer(e.map((function(n){var r=this._baseState;return this._getUse(r.args[0],e)._encode(n,t)}),f))}else null!==i.use?a=this._getUse(i.use,n)._encode(e,t):(o=this._encodePrimitive(i.tag,e),s=!0);if(!i.any&&null===i.choice){var c=null!==i.implicit?i.implicit:i.tag,h=null===i.implicit?"universal":"context";null===c?null===i.use&&t.error("Tag could be omitted only for .use()"):null===i.use&&(a=this._encodeComposite(c,s,h,o))}return null!==i.explicit&&(a=this._encodeComposite(i.explicit,!1,"context",a)),a},c.prototype._encodeChoice=function(e,t){var n=this._baseState,r=n.choice[e.type];return r||o(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),r._encode(e.value,t)},c.prototype._encodePrimitive=function(e,t){var n=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&n.args)return this._encodeObjid(t,n.reverseArgs[0],n.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,n.args&&n.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},c.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},c.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(e)}},function(e,t,n){var r=n(99);t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=r._reverse(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=r._reverse(t.tag)},function(e,t,n){var r=t;r.der=n(100),r.pem=n(207)},function(e,t,n){var r=n(0),i=n(2).Buffer,a=n(100);function o(e){a.call(this,e),this.enc="pem"}r(o,a),e.exports=o,o.prototype.decode=function(e,t){for(var n=e.toString().split(/[\r\n]+/g),r=t.label.toUpperCase(),o=/^-----(BEGIN|END) ([^-]+)-----$/,s=-1,f=-1,c=0;c<n.length;c++){var h=n[c].match(o);if(null!==h&&h[2]===r){if(-1!==s){if("END"!==h[1])break;f=c;break}if("BEGIN"!==h[1])break;s=c}}if(-1===s||-1===f)throw new Error("PEM section not found for: "+r);var l=n.slice(s+1,f).join("");l.replace(/[^a-z0-9\+\/=]+/gi,"");var d=new i(l,"base64");return a.prototype.decode.call(this,d,t)}},function(e,t,n){var r=t;r.der=n(101),r.pem=n(209)},function(e,t,n){var r=n(0),i=n(101);function a(e){i.call(this,e),this.enc="pem"}r(a,i),e.exports=a,a.prototype.encode=function(e,t){for(var n=i.prototype.encode.call(this,e).toString("base64"),r=["-----BEGIN "+t.label+"-----"],a=0;a<n.length;a+=64)r.push(n.slice(a,a+64));return r.push("-----END "+t.label+"-----"),r.join("\n")}},function(e,t,n){"use strict";var r=n(28),i=r.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),a=r.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),o=r.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),s=r.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())})),f=r.define("RelativeDistinguishedName",(function(){this.setof(a)})),c=r.define("RDNSequence",(function(){this.seqof(f)})),h=r.define("Name",(function(){this.choice({rdnSequence:this.use(c)})})),l=r.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))})),d=r.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),u=r.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(o),this.key("issuer").use(h),this.key("validity").use(l),this.key("subject").use(h),this.key("subjectPublicKeyInfo").use(s),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(d).optional())})),p=r.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(u),this.key("signatureAlgorithm").use(o),this.key("signatureValue").bitstr())}));e.exports=p},function(e){e.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},function(e,t,n){var r=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/\=]+)[\n\r]+/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,a=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/\=]+)-----END \1-----$/m,o=n(35),s=n(54),f=n(1).Buffer;e.exports=function(e,t){var n,c=e.toString(),h=c.match(r);if(h){var l="aes"+h[1],d=f.from(h[2],"hex"),u=f.from(h[3].replace(/[\r\n]/g,""),"base64"),p=o(t,d.slice(0,8),parseInt(h[1],10)).key,b=[],m=s.createDecipheriv(l,p,d);b.push(m.update(u)),b.push(m.final()),n=f.concat(b)}else{var _=c.match(a);n=new f(_[2].replace(/[\r\n]/g,""),"base64")}return{tag:c.match(i)[1],data:n}}},function(e,t,n){(function(t){var r=n(4),i=n(58).ec,a=n(37),o=n(102);function s(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=t)throw new Error("invalid sig")}e.exports=function(e,n,f,c,h){var l=a(f);if("ec"===l.type){if("ecdsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");return function(e,t,n){var r=o[n.data.algorithm.curve.join(".")];if(!r)throw new Error("unknown curve "+n.data.algorithm.curve.join("."));var a=new i(r),s=n.data.subjectPrivateKey.data;return a.verify(t,e,s)}(e,n,l)}if("dsa"===l.type){if("dsa"!==c)throw new Error("wrong public key type");return function(e,t,n){var i=n.data.p,o=n.data.q,f=n.data.g,c=n.data.pub_key,h=a.signature.decode(e,"der"),l=h.s,d=h.r;s(l,o),s(d,o);var u=r.mont(i),p=l.invm(o);return 0===f.toRed(u).redPow(new r(t).mul(p).mod(o)).fromRed().mul(c.toRed(u).redPow(d.mul(p).mod(o)).fromRed()).mod(i).mod(o).cmp(d)}(e,n,l)}if("rsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");n=t.concat([h,n]);for(var d=l.modulus.byteLength(),u=[1],p=0;n.length+u.length+2<d;)u.push(255),p++;u.push(0);for(var b=-1;++b<n.length;)u.push(n[b]);u=new t(u);var m=r.mont(l.modulus);e=(e=new r(e).toRed(m)).redPow(new r(l.publicExponent)),e=new t(e.fromRed().toArray());var _=p<8?1:0;for(d=Math.min(e.length,u.length),e.length!==u.length&&(_=1),b=-1;++b<d;)_|=e[b]^u[b];return 0===_}}).call(this,n(2).Buffer)},function(e,t,n){(function(t){var r=n(58),i=n(4);e.exports=function(e){return new o(e)};var a={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function o(e){this.curveType=a[e],this.curveType||(this.curveType={name:e}),this.curve=new r.ec(this.curveType.name),this.keys=void 0}function s(e,n,r){Array.isArray(e)||(e=e.toArray());var i=new t(e);if(r&&i.length<r){var a=new t(r-i.length);a.fill(0),i=t.concat([a,i])}return n?i.toString(n):i}a.p224=a.secp224r1,a.p256=a.secp256r1=a.prime256v1,a.p192=a.secp192r1=a.prime192v1,a.p384=a.secp384r1,a.p521=a.secp521r1,o.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},o.prototype.computeSecret=function(e,n,r){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),s(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),r,this.curveType.byteLength)},o.prototype.getPublicKey=function(e,t){var n=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(n[n.length-1]%2?n[0]=7:n[0]=6),s(n,e)},o.prototype.getPrivateKey=function(e){return s(this.keys.getPrivate(),e)},o.prototype.setPublicKey=function(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this.keys._importPublic(e),this},o.prototype.setPrivateKey=function(e,n){n=n||"utf8",t.isBuffer(e)||(e=new t(e,n));var r=new i(e);return r=r.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(r),this}}).call(this,n(2).Buffer)},function(e,t,n){t.publicEncrypt=n(216),t.privateDecrypt=n(217),t.privateEncrypt=function(e,n){return t.publicEncrypt(e,n,!0)},t.publicDecrypt=function(e,n){return t.privateDecrypt(e,n,!0)}},function(e,t,n){var r=n(37),i=n(19),a=n(24),o=n(103),s=n(104),f=n(4),c=n(105),h=n(57),l=n(1).Buffer;e.exports=function(e,t,n){var d;d=e.padding?e.padding:n?1:4;var u,p=r(e);if(4===d)u=function(e,t){var n=e.modulus.byteLength(),r=t.length,c=a("sha1").update(l.alloc(0)).digest(),h=c.length,d=2*h;if(r>n-d-2)throw new Error("message too long");var u=l.alloc(n-r-d-2),p=n-h-1,b=i(h),m=s(l.concat([c,u,l.alloc(1,1),t],p),o(b,p)),_=s(b,o(m,h));return new f(l.concat([l.alloc(1),_,m],n))}(p,t);else if(1===d)u=function(e,t,n){var r,a=t.length,o=e.modulus.byteLength();if(a>o-11)throw new Error("message too long");r=n?l.alloc(o-a-3,255):function(e){var t,n=l.allocUnsafe(e),r=0,a=i(2*e),o=0;for(;r<e;)o===a.length&&(a=i(2*e),o=0),(t=a[o++])&&(n[r++]=t);return n}(o-a-3);return new f(l.concat([l.from([0,n?1:2]),r,l.alloc(1),t],o))}(p,t,n);else{if(3!==d)throw new Error("unknown padding");if((u=new f(t)).cmp(p.modulus)>=0)throw new Error("data too long for modulus")}return n?h(u,p):c(u,p)}},function(e,t,n){var r=n(37),i=n(103),a=n(104),o=n(4),s=n(57),f=n(24),c=n(105),h=n(1).Buffer;e.exports=function(e,t,n){var l;l=e.padding?e.padding:n?1:4;var d,u=r(e),p=u.modulus.byteLength();if(t.length>p||new o(t).cmp(u.modulus)>=0)throw new Error("decryption error");d=n?c(new o(t),u):s(t,u);var b=h.alloc(p-d.length);if(d=h.concat([b,d],p),4===l)return function(e,t){var n=e.modulus.byteLength(),r=f("sha1").update(h.alloc(0)).digest(),o=r.length;if(0!==t[0])throw new Error("decryption error");var s=t.slice(1,o+1),c=t.slice(o+1),l=a(s,i(c,o)),d=a(c,i(l,n-o-1));if(function(e,t){e=h.from(e),t=h.from(t);var n=0,r=e.length;e.length!==t.length&&(n++,r=Math.min(e.length,t.length));var i=-1;for(;++i<r;)n+=e[i]^t[i];return n}(r,d.slice(0,o)))throw new Error("decryption error");var u=o;for(;0===d[u];)u++;if(1!==d[u++])throw new Error("decryption error");return d.slice(u)}(u,d);if(1===l)return function(e,t,n){var r=t.slice(0,2),i=2,a=0;for(;0!==t[i++];)if(i>=t.length){a++;break}var o=t.slice(2,i-1);("0002"!==r.toString("hex")&&!n||"0001"!==r.toString("hex")&&n)&&a++;o.length<8&&a++;if(a)throw new Error("decryption error");return t.slice(i)}(0,d,n);if(3===l)return d;throw new Error("unknown padding")}},function(e,t,n){"use strict";(function(e,r){function i(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var a=n(1),o=n(19),s=a.Buffer,f=a.kMaxLength,c=e.crypto||e.msCrypto,h=Math.pow(2,32)-1;function l(e,t){if("number"!=typeof e||e!=e)throw new TypeError("offset must be a number");if(e>h||e<0)throw new TypeError("offset must be a uint32");if(e>f||e>t)throw new RangeError("offset out of range")}function d(e,t,n){if("number"!=typeof e||e!=e)throw new TypeError("size must be a number");if(e>h||e<0)throw new TypeError("size must be a uint32");if(e+t>n||e>f)throw new RangeError("buffer too small")}function u(e,t,n,i){if(r.browser){var a=e.buffer,s=new Uint8Array(a,t,n);return c.getRandomValues(s),i?void r.nextTick((function(){i(null,e)})):e}if(!i)return o(n).copy(e,t),e;o(n,(function(n,r){if(n)return i(n);r.copy(e,t),i(null,e)}))}c&&c.getRandomValues||!r.browser?(t.randomFill=function(t,n,r,i){if(!(s.isBuffer(t)||t instanceof e.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof n)i=n,n=0,r=t.length;else if("function"==typeof r)i=r,r=t.length-n;else if("function"!=typeof i)throw new TypeError('"cb" argument must be a function');return l(n,t.length),d(r,n,t.length),u(t,n,r,i)},t.randomFillSync=function(t,n,r){void 0===n&&(n=0);if(!(s.isBuffer(t)||t instanceof e.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');l(n,t.length),void 0===r&&(r=t.length-n);return d(r,n,t.length),u(t,n,r)}):(t.randomFill=i,t.randomFillSync=i)}).call(this,n(10),n(5))},function(e,t,n){"use strict";const r=n(220),i=n(45),a=n(267),o=n(32),s=n(22),f=n(270),c=n(41);class h{constructor(e){this.editor=e,this.canvas=document.getElementById("mapwindow"),this.timestamp=performance.now(),this.gl=null,this.canvas.addEventListener("mousedown",this.canvas_mousedown.bind(this)),this.canvas.addEventListener("mouseout",this.canvas_mouseout.bind(this)),this.canvas.addEventListener("mousemove",this.canvas_mousemove.bind(this)),document.addEventListener("mouseup",this.document_mouseup.bind(this)),this.canvas.addEventListener("wheel",this.canvas_wheel.bind(this)),this.canvas.addEventListener("contextmenu",this.canvas_contextmenu.bind(this)),this.mouse_x=null,this.mouse_y=null,this.mouse_x_float=null,this.mouse_y_float=null,this.mouse_last_event=null,this.mouse_pixel_tile=null,this.mouse_pixel_instance=null,this.active_placement_handler=null,this.draw_dirty=!0,this.last_draw_hash=null,this.icons=new Map,this.icon_promises=new Map,this.icon_preview_cache=new Map,this.icon_clear_cycle=0,this.frame_areas=!0,this.context_menu=new f(e),this.init_rendering(),window.requestAnimationFrame(this.animation_frame_callback.bind(this))}clear_all(){this.clear_gl(),this.icons.clear(),this.icon_promises.clear(),this.icon_clear_cycle++,this.enqueue_icon_load("_fastdmm_interface.dmi")}clear_gl(){const e=this.gl;for(let[t,n]of this.gl_texture_cache)e.deleteTexture(n);this.gl_texture_cache.clear()}animation_frame_callback(e){try{this.frame(e)}catch(e){console.error(e)}window.requestAnimationFrame(this.animation_frame_callback.bind(this))}frame(e){if(this.timestamp=e,this.gl_context_lost)return;let t=this.canvas.getBoundingClientRect(),n=t.width*window.devicePixelRatio,r=t.height*window.devicePixelRatio,a=[this.mapwindow_x,this.mapwindow_y,this.mapwindow_z,this.mapwindow_zoom,this.mapwindow_log_zoom,this.mouse_x,this.mouse_y,this.mouse_pixel_tile?this.mouse_pixel_tile.id:"",this.mouse_pixel_instance?this.mouse_pixel_instance.id:"",this.editor.dmm?this.editor.dmm.last_change_index:"",this.editor.objtree_window.hidden_set_change_index,this.editor.placement_mode?this.editor.placement_mode.is_pixel+","+this.editor.placement_mode.last_change_index:"",this.active_placement_handler?this.active_placement_handler.last_change_index:"",n,r,this.frame_areas].join("/");if(!this.draw_dirty&&a==this.last_draw_hash)return;this.draw_dirty=!1,this.last_draw_hash=a,this.canvas.width!=n&&(this.canvas.width=n),this.canvas.height!=r&&(this.canvas.height=r);let f=this.canvas.getContext("2d"),c=[],h=!1;if(this.editor.dmm){let e=this.editor.dmm,t=Math.floor(Math.max(this.mapwindow_x-this.canvas.width/32/2/this.mapwindow_zoom-2,1)),n=Math.floor(Math.max(this.mapwindow_y-this.canvas.height/32/2/this.mapwindow_zoom-2,1)),r=Math.ceil(Math.min(this.mapwindow_x+this.canvas.width/32/2/this.mapwindow_zoom+2,e.maxx)),i=Math.ceil(Math.min(this.mapwindow_y+this.canvas.height/32/2/this.mapwindow_zoom+2,e.maxy));for(let a=this.mapwindow_z;a>=1;a--)for(let f=t;f<=r;f++)for(let t=n;t<=i;t++){let n=e.get_tile(f,t,a);for(let e=0;e<n.contents.length;e++){let r=n.contents[e];if(null!=r){if(r.cached_hidden_cache_index!=this.editor.objtree_window.hidden_set_change_index&&(r.cached_hidden_cache_index=this.editor.objtree_window.hidden_set_change_index,r.cached_hidden=this.editor.objtree_window.hidden_set.has(r.type)),!r.cached_hidden){let e=r.get_appearance();if(this.editor.placement_mode&&this.editor.placement_mode.is_pixel&&this.mouse_pixel_instance==r&&this.mouse_pixel_tile==n){let t=e.color;e=new o(e),e.color=[t[0]-.5,t[1]+.5,t[2]-.5],h=!0}c.push(new s(e,f,t,a,n,r,!0))}}else n.splice(n.contents,1),console.warn(`Removing null object at ${f},${t},${this.mapwindow_z}`),e--}if(this.frame_areas){let e=n.get_frame_appearance();e&&c.push(new s(e,f,t,a))}}}this.active_placement_handler&&this.active_placement_handler.visualize(c),this.editor.placement_mode.visualize(c),null==this.mouse_x||h||c.push(new s(new o({icon:"white",alpha:.5,layer:1e3,plane:1e5}),this.mouse_x,this.mouse_y,this.mapwindow_z)),c=c.filter(e=>!(!e||!e.appearance)),c.sort((e,t)=>e.z!=t.z?e.z-t.z:e.appearance.plane!=t.appearance.plane?e.appearance.plane-t.appearance.plane:e.appearance.layer!=t.appearance.layer?e.appearance.layer-t.appearance.layer:e.y!=t.y?e.y-t.y:0);const l=this.gl;let d=Math.max(l.canvas.width,this.canvas.width),u=Math.max(l.canvas.height,this.canvas.height);d==l.canvas.width&&u==l.canvas.height||(l.canvas.width=d,l.canvas.height=u,this.gl_click_framebuffer&&(l.deleteTexture(this.gl_click_texture),l.deleteFramebuffer(this.gl_click_framebuffer)),this.gl_click_texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.gl_click_texture),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.drawingBufferWidth,l.drawingBufferHeight,0,l.RGBA,l.UNSIGNED_BYTE,null),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),this.gl_click_framebuffer=l.createFramebuffer(),l.bindFramebuffer(l.FRAMEBUFFER,this.gl_click_framebuffer),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,this.gl_click_texture,0),l.bindFramebuffer(l.FRAMEBUFFER,null)),l.bindFramebuffer(l.FRAMEBUFFER,this.gl_click_framebuffer),l.viewport(0,0,this.canvas.width,this.canvas.height),l.clearColor(255,255,255,255),l.clear(l.COLOR_BUFFER_BIT),l.bindFramebuffer(l.FRAMEBUFFER,null),l.viewport(0,0,this.canvas.width,this.canvas.height),l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT),this.gl_enable_framebuffer=!0,this.gl_viewport=[this.canvas.width,this.canvas.height];let p=new i(this.mapwindow_zoom,0,0,this.mapwindow_zoom,-Math.round(this.mapwindow_x*this.mapwindow_zoom*32)+(this.canvas.width%2==1?.5:0),-Math.round(this.mapwindow_y*this.mapwindow_zoom*32)+(this.canvas.height%2==1?.5:0));for(let e=0;e<c.length;e++){let t=c[e];this.draw_appearance(p.translate(32*t.x,32*t.y),t.z-this.mapwindow_z,t.appearance,void 0,t.detect_clicks?e:-1)}this.last_render_instances=c,this.gl_current_batch&&this.gl_current_batch.draw(),this.update_pixel_from_mouse(this.mouse_last_event),f.globalCompositeOperation="copy",f.drawImage(l.canvas,0,this.canvas.height-l.canvas.height);let b=`${null!=this.mouse_x?`${this.mouse_x},${this.mouse_y}`:"??,??"},${this.mapwindow_z}`;if(this.active_placement_handler){let e=this.active_placement_handler.get_status_text();e&&(b+=" "+e)}document.getElementById("statustextwindow").textContent=b}enqueue_icon_load(e){if("string"!=typeof e)return;if(!this.editor.file_context&&"_fastdmm_interface.dmi"!=e)return;let t,n=e.toLowerCase();if(this.icons.has(n))return this.icons.get(n)||this.icon_promises.get(n);this.icons.set(n,null),t="_fastdmm_interface.dmi"==e?fetch("interface.dmi").then(e=>e.blob()):this.editor.file_context.read_file(e);let i=t.then(e=>r(e)).then(e=>(this.icons.set(n,e),this.draw_dirty=!0,e),e=>{console.warn(e)});return this.icon_promises.set(e,i),i}update_from_mouse(e){this.mouse_x_float=(e.offsetX*devicePixelRatio-this.canvas.width/2)/this.mapwindow_zoom/32+this.mapwindow_x,this.mouse_y_float=-(e.offsetY*devicePixelRatio-this.canvas.height/2)/this.mapwindow_zoom/32+this.mapwindow_y,this.mouse_x=Math.floor(this.mouse_x_float),this.mouse_y=Math.floor(this.mouse_y_float);let t=this.editor.dmm;this.mouse_last_event=e,(!t||this.mouse_x<1||this.mouse_y<1||this.mouse_x>t.maxx||this.mouse_y>t.maxy)&&(this.mouse_x=null,this.mouse_y=null),this.update_pixel_from_mouse(e)}update_pixel_from_mouse(e){const t=this.gl;if(this.gl_enable_framebuffer&&e&&this.last_render_instances){t.bindFramebuffer(t.FRAMEBUFFER,this.gl_click_framebuffer);let e=new Uint8Array(4),n=0|this.mouse_last_event.offsetX,r=t.canvas.height-this.mouse_last_event.offsetY|0;t.readPixels(n,r,1,1,t.RGBA,t.UNSIGNED_BYTE,e),t.bindFramebuffer(t.FRAMEBUFFER,null);let i=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3];if(i>=0&&i<this.last_render_instances.length){let e=this.last_render_instances[i],t=e.instance,n=e.tile;this.mouse_pixel_tile=n,this.mouse_pixel_instance=t}else this.mouse_pixel_tile=null,this.mouse_pixel_instance=null}else this.mouse_pixel_tile=null,this.mouse_pixel_instance=null}canvas_mousemove(e){e={offsetX:e.offsetX,offsetY:e.offsetY},setTimeout(()=>{let t=this.mouse_x,n=this.mouse_y;if(this.update_from_mouse(e),this.mouse_x&&this.mouse_y&&this.active_placement_handler){let e=this.editor.dmm.get_tile(this.mouse_x,this.mouse_y,this.mapwindow_z);e&&this.active_placement_handler.mousemove(e,this.mouse_x!=t||this.mouse_y!=n),this.active_placement_handler.mousemove_pixel(this.mouse_x_float,this.mouse_y_float)}},1)}document_mouseup(){this.active_placement_handler&&(this.active_placement_handler.mouseup(),this.active_placement_handler=null,this.draw_dirty=!0)}canvas_mouseout(){this.mouse_x=null,this.mouse_y=null,this.mouse_x_float=null,this.mouse_y_float=null,this.mouse_last_event=null}canvas_mousedown(e){if(!e.ctrlKey&&!e.shiftKey&&1==e.button||0==e.button&&e.altKey){let t=e,n=()=>{document.removeEventListener("mouseup",n),document.removeEventListener("mousemove",r)},r=e=>{this.mapwindow_x-=(e.screenX-t.screenX)/32/this.mapwindow_zoom,this.mapwindow_y+=(e.screenY-t.screenY)/32/this.mapwindow_zoom;let n=this.editor.dmm?this.editor.dmm.maxx:1,r=this.editor.dmm?this.editor.dmm.maxy:1;this.mapwindow_x<1&&(this.mapwindow_x=1),this.mapwindow_y<1&&(this.mapwindow_y=1),this.mapwindow_x>n&&(this.mapwindow_x=n),this.mapwindow_y>r&&(this.mapwindow_y=r),t=e};return document.addEventListener("mouseup",n),document.addEventListener("mousemove",r),e.preventDefault(),void this.canvas.focus()}if((!document.activeElement||!document.activeElement.closest(".dropdown-content"))&&this.editor.dmm&&2!=e.button&&!this.active_placement_handler){this.draw_dirty=!0;let t=this.editor.instance_window.selected;this.editor.placement_mode.handle_pixel_mousedown(e,this.mouse_pixel_tile,this.mouse_pixel_instance,t);let n=this.editor.dmm.get_tile(this.mouse_x,this.mouse_y,this.mapwindow_z);n&&(this.active_placement_handler=this.editor.placement_mode.get_handler(e,n,t))}}canvas_contextmenu(e){if(!e.shiftKey){let t=this.editor.dmm.get_tile(this.mouse_x,this.mouse_y,this.mapwindow_z),n=this.context_menu.build_menu(t);c(document.body,n,{point:[e.clientX,e.clientY]}),e.preventDefault()}}canvas_wheel(e){let t=e.deltaY;e.deltaMode==WheelEvent.DOM_DELTA_PIXEL?t/=100:e.deltaMode==WheelEvent.DOM_DELTA_LINE&&(t/=3),this.mapwindow_log_zoom-=Math.max(-1,Math.min(1,t)),this.mapwindow_log_zoom=Math.max(-5,Math.min(5,this.mapwindow_log_zoom)),this.mapwindow_zoom=2**Math.round(this.mapwindow_log_zoom),e.preventDefault(),this.update_from_mouse(e)}get mapwindow_x(){return this.editor.dmm?this.editor.dmm.mapwindow_x:1}get mapwindow_y(){return this.editor.dmm?this.editor.dmm.mapwindow_y:1}get mapwindow_z(){return this.editor.dmm?this.editor.dmm.mapwindow_z:1}get mapwindow_zoom(){return this.editor.dmm?this.editor.dmm.mapwindow_zoom:1}get mapwindow_log_zoom(){return this.editor.dmm?this.editor.dmm.mapwindow_log_zoom:0}set mapwindow_x(e){this.editor.dmm&&(this.editor.dmm.mapwindow_x=e)}set mapwindow_y(e){this.editor.dmm&&(this.editor.dmm.mapwindow_y=e)}set mapwindow_z(e){this.editor.dmm&&(this.editor.dmm.mapwindow_z=e)}set mapwindow_zoom(e){this.editor.dmm&&(this.editor.dmm.mapwindow_zoom=e)}set mapwindow_log_zoom(e){this.editor.dmm&&(this.editor.dmm.mapwindow_log_zoom=e)}}h.prototype.init_rendering=a.init_rendering,h.prototype.compile_shader=a.compile_shader,h.prototype.compile_shader_program=a.compile_shader_program,h.prototype.get_texture=a.get_texture,h.prototype.draw_appearance=a.draw_appearance,h.prototype.build_preview_icon=a.build_preview_icon,Object.assign(h.prototype,a),e.exports=h},function(e,t,n){"use strict";(function(t){let r=n(221),i=n(30);const a=[2,1,4,8,6,10,5,9];e.exports=async function(e){if(!e)throw new Error("null blob");let n=await new Promise(t=>{let n=new FileReader;n.addEventListener("loadend",()=>{t(n.result)}),n.readAsArrayBuffer(e)}),o=new Blob([e],{type:"image/png"}),s=document.createElement("img"),f=new Promise((e,t)=>{s.onload=e,s.onerror=t});const c={image:s,icon_states:new Map,icon_states_movement:new Map,width:0,height:0};s.src=URL.createObjectURL(o);try{let e=new r(new t(n)),[o,h]=await new Promise((t,n)=>{let r,i;e.on("error",e=>{n(e)}),e.on("IHDR",e=>{r=e,i&&t([r,i])}),e.on("zTXt",e=>{i=e,r&&t([r,i])}),e.on("tEXt",e=>{i=e,r&&t([r,i])})}),l=(h.text||await new Promise((e,t)=>{i.inflate(h.compressedText,(n,r)=>{n&&t(n),e(r)})})).toString("ascii").split("\n"),d=0,u=0,p=[],b=null,m=0;for(let e=0;e<l.length;e++){let t=/\t?([a-zA-Z0-9]+) ?= ?"?([^\r\n"]+)/.exec(l[e]);if(!t)continue;let n=t[1],r=t[2];"width"==n?d=+r:"height"==n?u=+r:"state"==n?(b&&p.push(b),b={state:r}):"dirs"==n||"frames"==n||"movement"==n?b[n]=+r:"delay"==n&&(b.delay=JSON.parse("["+r+"]"))}b&&p.push(b);for(let e=0;e<p.length;e++){let t=p[e];m+=t.frames*t.dirs,t.delay||(t.delay=[1]),t.frames||(t.frames=1),t.dirs||(t.dirs=1)}d||u||!m||(u=o.height,d=o.width/m),c.width=d,c.height=u;let _=o.width/d,g=0;for(let e=0;e<p.length;e++){let t=p[e],n={},r=t.state;n.dir_count=t.dirs,n.width=d,n.height=u;let i=new Map;for(let e=0;e<t.dirs;e++){let n={},r=[];n.frames=r;let o=0;for(let n=0;n<t.frames;n++){let i=g+n*t.dirs+e;r.push({x:i%_*d,y:Math.floor(i/_)*u,delay:t.delay[n]}),o+=t.delay[n]}n.total_delay=o,i.set(a[e],n)}n.dirs=i,n.tile_size=32,t.movement?c.icon_states_movement.set(r,n):c.icon_states.set(r,n),g+=t.dirs*t.frames}await f}finally{URL.revokeObjectURL(s.src)}return c}}).call(this,n(2).Buffer)},function(e,t,n){(function(t,r){var i=n(20).Stream,a=n(15),o=n(224),s=n(61),f=n(226);function c(e){if(!(this instanceof c))return new c(e);if(this.parser=new s,this.strict=!0,this.writable=!0,this.readable=!0,this.finished=!1,this.chunks=[],this.injections=[],e)if(t.isBuffer(e))this.end(e);else{if("function"!=typeof e.pipe){var n=new TypeError("PNG constructor takes either a buffer or a stream");throw n.input=e,n.inputType=typeof e,n}e.pipe(this)}}a.inherits(c,i),c.Chunk=f,c.prototype.delayEmit=function(){var e=arguments;return r.nextTick(function(){this.emit.apply(this,e)}.bind(this)),this},c.prototype.write=function(e){return e?(this.delayEmit("data",e),this.parser.write(e),this.process(),this):this},c.prototype.end=function(e){return e&&this.write(e),this.writable=!1,this.finished=!0,this.delayEmit("end",this.chunks),this.processInjections(),this},c.prototype.addChunk=function(e){return this.chunks.push(e),this[e.type]?this[e.type].push(e):this[e.type]=[e],this},c.prototype._readSignature=function(){var e,t=this.parser,n=c.SIGNATURE,r=t.getBuffer().length,i=n.length;return r<i?this:(e=t.eat(i),o(e,n)?(this.delayEmit("signature"),this.process(),this):(this.delayEmit("error",new TypeError("Signature mismatch, not a PNG")),this.writable=!1,this))},c.prototype.process=function(){var e=this.parser;if(e.position()<8)return this._readSignature();var t=e.remaining();if(!t||t<4)return this;var n=e.peak(4).readUInt32BE(0);if(t<(n+=c.TYPE_LENGTH+c.CRC_LENGTH))return this;try{var r=new f(e,this.IHDR)}catch(e){return this.delayEmit("error",e),this}return"IDAT"!==r.type||this.IDAT||this.delayEmit("imagedata begin"),this.addChunk(r),this.delayEmit("chunk",r),this.delayEmit(r.type,r),"IEND"!==r.type&&this.process(),this},c.prototype.inject=function(e,t,n){return"function"==typeof t&&(n=t,t={test:"same"}),n||(n=!0),this.injections.push({chunk:e,opts:t,condition:n}),this.finished&&this.processInjections(),this},c.prototype.processInjections=function(){if(this.injections.length){var e,t=this.chunks,n=[];return this.injections.forEach((function(r){var i=r.opts,a=r.chunk.type,o=r.condition;if(!0===o)return n.push(r.chunk);for(e=0;e<t.length;e++)if(("same"!==i.test||t[e].type===a)&&!1===o(t[e]))return!1;n.push(r.chunk)})),this.injections=[],t.splice.bind(t,1,0).apply(null,n),this}},c.prototype.out=function(e,n){var a=n||new i;a.readable=!0;var o=this.chunks,s=o.length,f=0,h=[],l=c.SIGNATURE;if(!this.finished){var d=this.out.bind(this,e,a);return this.once("end",d),a}function u(n,i){var o;(h[i]=n,++f===s)&&(h.unshift(l),o=t.concat(h),e&&e(null,o),r.nextTick((function(){a.emit("data",o),a.emit("end",o),a.readable=!1})))}return o.forEach((function(e,t){if(e._buffer)return u(e._buffer,t);e.out((function(e){u(e,t)}))})),a},c.prototype.destroy=function(){},c.SIGNATURE=t([137,80,78,71,13,10,26,10]),c.TYPE_LENGTH=4,c.CRC_LENGTH=4,e.exports=c}).call(this,n(2).Buffer,n(5))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){var r=n(2).Buffer;e.exports=function(e,t){if(r.isBuffer(e)&&r.isBuffer(t)){if("function"==typeof e.equals)return e.equals(t);if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}}},function(e,t,n){var r=n(2).Buffer;r.concat=r.concat||function(e,t){if(!Array.isArray(e))throw new Error("Usage: Buffer.concat(list, [length])");if(0===e.length)return new r(0);if(1===e.length)return e[0];if("number"!=typeof t){t=0;for(var n=0;n<e.length;n++){t+=(o=e[n]).length}}var i=new r(t),a=0;for(n=0;n<e.length;n++){var o;(o=e[n]).copy(i,a),a+=o.length}return i},e.exports=r},function(e,t,n){(function(t){var r=n(61);n(3);function i(e,t){if("function"!=typeof e.eat&&(e=r(e)),this.parser=e,this.header=t,e.remaining()>=12)return this._process()}i.prototype._process=function(){var e=this.parser,n=e.eat(4),r=n.readUInt32BE(0),a=e.eat(4),o=a.toString();if(!o.match(/\w+/))throw new Error("invalid chunk type, got: "+this.type);var s=r?e.eat(r):t(0),f=e.eat(4),c=new(i[o]||i.Unknown)(s,this.header,o);return c.crc=f,c._rawData=s,c._buffer=t.concat([n,a,s,f]),c},i.Unknown=function(e,t,n){this.type=n,this.data=e,this.header=t},i.IHDR=i.ImageHeader=n(243),i.PLTE=i.Palette=n(244),i.IDAT=i.ImageData=n(245),i.IEND=i.ImageTrailer=n(246),i.tEXt=i.TextualData=n(247),i.zTXt=i.CompressedText=n(248),i.iTXt=i.InternationalText=n(249),i.cHRM=i.Chromaticities=n(250),i.gAMA=i.Gamma=n(251),i.tRNS=i.Transparency=n(252),i.iCCP=i.ICCProfile=n(253),i.bKGD=i.BackgroundColour=n(254),i.pHYs=i.PhysicalDimensions=n(255),i.sRGB=i.StandardRGBColourSpace=n(256),i.sBIT=i.SignificantBits=n(257),i.hIST=i.Histogram=n(258),i.sPLT=i.SuggestedPalette=n(259),i.tIME=i.LastModified=n(260),i.oFFs=i.Offset=n(261),i.pCAL=i.PixelCalibration=n(262),i.sCAL=i.Scale=n(263),i.gIFg=i.GifControl=n(264),i.gIFx=i.GifApplication=n(265),i.sTER=i.Stereogram=n(266),e.exports=i}).call(this,n(2).Buffer)},function(e,t,n){var r=n(2).Buffer,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function a(e){var t=r(4);return t.writeInt32BE(e,0),t}function o(e){r.isBuffer(e)||(e=r(e));for(var t=4294967295,n=0;n<e.length;n++)t=i[255&(t^e[n])]^t>>>8;return 4294967295^t}function s(){return a(o.apply(null,arguments))}s.signed=function(){return o.apply(null,arguments)},s.unsigned=function(){return s.apply(null,arguments).readUInt32BE(0)},e.exports=s},function(e,t,n){"use strict";(function(e,r){var i=n(106),a=n(230),o=n(231),s=n(234),f=n(237);for(var c in f)t[c]=f[c];t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7;function h(e){if("number"!=typeof e||e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}h.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,i(this.init_done,"close before init"),i(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?o.deflateEnd(this.strm):this.mode!==t.INFLATE&&this.mode!==t.GUNZIP&&this.mode!==t.INFLATERAW&&this.mode!==t.UNZIP||s.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null)},h.prototype.write=function(e,t,n,r,i,a,o){return this._write(!0,e,t,n,r,i,a,o)},h.prototype.writeSync=function(e,t,n,r,i,a,o){return this._write(!1,e,t,n,r,i,a,o)},h.prototype._write=function(n,a,o,s,f,c,h,l){if(i.equal(arguments.length,8),i(this.init_done,"write before init"),i(this.mode!==t.NONE,"already finalized"),i.equal(!1,this.write_in_progress,"write already in progress"),i.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,i.equal(!1,void 0===a,"must provide flush value"),this.write_in_progress=!0,a!==t.Z_NO_FLUSH&&a!==t.Z_PARTIAL_FLUSH&&a!==t.Z_SYNC_FLUSH&&a!==t.Z_FULL_FLUSH&&a!==t.Z_FINISH&&a!==t.Z_BLOCK)throw new Error("Invalid flush value");if(null==o&&(o=e.alloc(0),f=0,s=0),this.strm.avail_in=f,this.strm.input=o,this.strm.next_in=s,this.strm.avail_out=l,this.strm.output=c,this.strm.next_out=h,this.flush=a,!n)return this._process(),this._checkError()?this._afterSync():void 0;var d=this;return r.nextTick((function(){d._process(),d._after()})),this},h.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},h.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=o.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=t.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=s.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=s.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=s.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=s.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},h.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},h.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},h.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},h.prototype.init=function(e,n,r,a,o){i(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),i(e>=8&&e<=15,"invalid windowBits"),i(n>=-1&&n<=9,"invalid compression level"),i(r>=1&&r<=9,"invalid memlevel"),i(a===t.Z_FILTERED||a===t.Z_HUFFMAN_ONLY||a===t.Z_RLE||a===t.Z_FIXED||a===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(n,e,r,a,o),this._setDictionary()},h.prototype.params=function(){throw new Error("deflateParams Not supported")},h.prototype.reset=function(){this._reset(),this._setDictionary()},h.prototype._init=function(e,n,r,i,f){switch(this.level=e,this.windowBits=n,this.memLevel=r,this.strategy=i,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new a,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=o.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=s.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=f,this.write_in_progress=!1,this.init_done=!0},h.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=o.deflateSetDictionary(this.strm,this.dictionary)}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},h.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=o.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=s.inflateReset(this.strm)}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=h}).call(this,n(2).Buffer,n(5))},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,f=o(e),c=1;c<arguments.length;c++){for(var h in n=Object(arguments[c]))i.call(n,h)&&(f[h]=n[h]);if(r){s=r(n);for(var l=0;l<s.length;l++)a.call(n,s[l])&&(f[s[l]]=n[s[l]])}}return f}},function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){"use strict";var r,i=n(39),a=n(232),o=n(107),s=n(108),f=n(233);function c(e,t){return e.msg=f[t],t}function h(e){return(e<<1)-(e>4?9:0)}function l(e){for(var t=e.length;--t>=0;)e[t]=0}function d(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function u(e,t){a._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,d(e.strm)}function p(e,t){e.pending_buf[e.pending++]=t}function b(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function m(e,t){var n,r,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,f=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,c=e.window,h=e.w_mask,l=e.prev,d=e.strstart+258,u=c[a+o-1],p=c[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(n=t)+o]===p&&c[n+o-1]===u&&c[n]===c[a]&&c[++n]===c[a+1]){a+=2,n++;do{}while(c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&a<d);if(r=258-(d-a),a=d-258,r>o){if(e.match_start=t,o=r,r>=s)break;u=c[a+o-1],p=c[a+o]}}}while((t=l[t&h])>f&&0!=--i);return o<=e.lookahead?o:e.lookahead}function _(e){var t,n,r,a,f,c,h,l,d,u,p=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=p+(p-262)){i.arraySet(e.window,e.window,p,p,0),e.match_start-=p,e.strstart-=p,e.block_start-=p,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=p?r-p:0}while(--n);t=n=p;do{r=e.prev[--t],e.prev[t]=r>=p?r-p:0}while(--n);a+=p}if(0===e.strm.avail_in)break;if(c=e.strm,h=e.window,l=e.strstart+e.lookahead,d=a,u=void 0,(u=c.avail_in)>d&&(u=d),n=0===u?0:(c.avail_in-=u,i.arraySet(h,c.input,c.next_in,u,l),1===c.state.wrap?c.adler=o(c.adler,h,u,l):2===c.state.wrap&&(c.adler=s(c.adler,h,u,l)),c.next_in+=u,c.total_in+=u,u),e.lookahead+=n,e.lookahead+e.insert>=3)for(f=e.strstart-e.insert,e.ins_h=e.window[f],e.ins_h=(e.ins_h<<e.hash_shift^e.window[f+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[f+3-1])&e.hash_mask,e.prev[f&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=f,f++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)}function g(e,t){for(var n,r;;){if(e.lookahead<262){if(_(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=m(e,n)),e.match_length>=3)if(r=a._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(u(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(u(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(u(e,!1),0===e.strm.avail_out)?1:2}function v(e,t){for(var n,r,i;;){if(e.lookahead<262){if(_(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=m(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(u(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=a._tr_tally(e,0,e.window[e.strstart-1]))&&u(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(u(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(u(e,!1),0===e.strm.avail_out)?1:2}function y(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),l(this.dyn_ltree),l(this.dyn_dtree),l(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),l(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),l(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function x(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=0,a._tr_init(t),0):c(e,-2)}function E(e){var t,n=x(e);return 0===n&&((t=e.state).window_size=2*t.w_size,l(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n}function k(e,t,n,r,a,o){if(!e)return-2;var s=1;if(-1===t&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),a<1||a>9||8!==n||r<8||r>15||t<0||t>9||o<0||o>4)return c(e,-2);8===r&&(r=9);var f=new w;return e.state=f,f.strm=e,f.wrap=s,f.gzhead=null,f.w_bits=r,f.w_size=1<<f.w_bits,f.w_mask=f.w_size-1,f.hash_bits=a+7,f.hash_size=1<<f.hash_bits,f.hash_mask=f.hash_size-1,f.hash_shift=~~((f.hash_bits+3-1)/3),f.window=new i.Buf8(2*f.w_size),f.head=new i.Buf16(f.hash_size),f.prev=new i.Buf16(f.w_size),f.lit_bufsize=1<<a+6,f.pending_buf_size=4*f.lit_bufsize,f.pending_buf=new i.Buf8(f.pending_buf_size),f.d_buf=1*f.lit_bufsize,f.l_buf=3*f.lit_bufsize,f.level=t,f.strategy=o,f.method=n,E(e)}r=[new y(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(_(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,u(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-262&&(u(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(u(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(u(e,!1),e.strm.avail_out),1)})),new y(4,4,8,4,g),new y(4,5,16,8,g),new y(4,6,32,32,g),new y(4,4,16,16,v),new y(8,16,32,32,v),new y(8,16,128,128,v),new y(8,32,128,256,v),new y(32,128,258,1024,v),new y(32,258,258,4096,v)],t.deflateInit=function(e,t){return k(e,t,8,15,8,0)},t.deflateInit2=k,t.deflateReset=E,t.deflateResetKeep=x,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?-2:(e.state.gzhead=t,0):-2},t.deflate=function(e,t){var n,i,o,f;if(!e||!e.state||t>5||t<0)return e?c(e,-2):-2;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&4!==t)return c(e,0===e.avail_out?-5:-2);if(i.strm=e,n=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,p(i,31),p(i,139),p(i,8),i.gzhead?(p(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),p(i,255&i.gzhead.time),p(i,i.gzhead.time>>8&255),p(i,i.gzhead.time>>16&255),p(i,i.gzhead.time>>24&255),p(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),p(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(p(i,255&i.gzhead.extra.length),p(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(p(i,0),p(i,0),p(i,0),p(i,0),p(i,0),p(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),p(i,3),i.status=113);else{var m=8+(i.w_bits-8<<4)<<8;m|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(m|=32),m+=31-m%31,i.status=113,b(i,m),0!==i.strstart&&(b(i,e.adler>>>16),b(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),d(e),o=i.pending,i.pending!==i.pending_buf_size));)p(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),d(e),o=i.pending,i.pending===i.pending_buf_size)){f=1;break}f=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,p(i,f)}while(0!==f);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===f&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),d(e),o=i.pending,i.pending===i.pending_buf_size)){f=1;break}f=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,p(i,f)}while(0!==f);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===f&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&d(e),i.pending+2<=i.pending_buf_size&&(p(i,255&e.adler),p(i,e.adler>>8&255),e.adler=0,i.status=113)):i.status=113),0!==i.pending){if(d(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&h(t)<=h(n)&&4!==t)return c(e,-5);if(666===i.status&&0!==e.avail_in)return c(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&666!==i.status){var g=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(_(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(u(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(u(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(u(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var n,r,i,o,s=e.window;;){if(e.lookahead<=258){if(_(e),e.lookahead<=258&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){o=e.strstart+258;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);e.match_length=258-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=a._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(u(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(u(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(u(e,!1),0===e.strm.avail_out)?1:2}(i,t):r[i.level].func(i,t);if(3!==g&&4!==g||(i.status=666),1===g||3===g)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===g&&(1===t?a._tr_align(i):5!==t&&(a._tr_stored_block(i,0,0,!1),3===t&&(l(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),d(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(p(i,255&e.adler),p(i,e.adler>>8&255),p(i,e.adler>>16&255),p(i,e.adler>>24&255),p(i,255&e.total_in),p(i,e.total_in>>8&255),p(i,e.total_in>>16&255),p(i,e.total_in>>24&255)):(b(i,e.adler>>>16),b(i,65535&e.adler)),d(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?c(e,-2):(e.state=null,113===t?c(e,-3):0):-2},t.deflateSetDictionary=function(e,t){var n,r,a,s,f,c,h,d,u=t.length;if(!e||!e.state)return-2;if(2===(s=(n=e.state).wrap)||1===s&&42!==n.status||n.lookahead)return-2;for(1===s&&(e.adler=o(e.adler,t,u,0)),n.wrap=0,u>=n.w_size&&(0===s&&(l(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new i.Buf8(n.w_size),i.arraySet(d,t,u-n.w_size,n.w_size,0),t=d,u=n.w_size),f=e.avail_in,c=e.next_in,h=e.input,e.avail_in=u,e.next_in=0,e.input=t,_(n);n.lookahead>=3;){r=n.strstart,a=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--a);n.strstart=r,n.lookahead=2,_(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=c,e.input=h,e.avail_in=f,n.wrap=s,0},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){"use strict";var r=n(39);function i(e){for(var t=e.length;--t>=0;)e[t]=0}var a=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],o=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],f=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],c=new Array(576);i(c);var h=new Array(60);i(h);var l=new Array(512);i(l);var d=new Array(256);i(d);var u=new Array(29);i(u);var p,b,m,_=new Array(30);function g(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function v(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function y(e){return e<256?l[e]:l[256+(e>>>7)]}function w(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function x(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,w(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function E(e,t,n){x(e,n[2*t],n[2*t+1])}function k(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function S(e,t,n){var r,i,a=new Array(16),o=0;for(r=1;r<=15;r++)a[r]=o=o+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=k(a[s]++,s))}}function M(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function A(e){e.bi_valid>8?w(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function I(e,t,n,r){var i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]}function T(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&I(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!I(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function R(e,t,n){var r,i,s,f,c=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],i=e.pending_buf[e.l_buf+c],c++,0===r?E(e,i,t):(E(e,(s=d[i])+256+1,t),0!==(f=a[s])&&x(e,i-=u[s],f),E(e,s=y(--r),n),0!==(f=o[s])&&x(e,r-=_[s],f))}while(c<e.last_lit);E(e,256,t)}function z(e,t){var n,r,i,a=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,f=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<f;n++)0!==a[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=o[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)T(e,a,n);i=f;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],T(e,a,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,a[2*i]=a[2*n]+a[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,a[2*n+1]=a[2*r+1]=i,e.heap[1]=i++,T(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,a,o,s,f=t.dyn_tree,c=t.max_code,h=t.stat_desc.static_tree,l=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,u=t.stat_desc.extra_base,p=t.stat_desc.max_length,b=0;for(a=0;a<=15;a++)e.bl_count[a]=0;for(f[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(a=f[2*f[2*(r=e.heap[n])+1]+1]+1)>p&&(a=p,b++),f[2*r+1]=a,r>c||(e.bl_count[a]++,o=0,r>=u&&(o=d[r-u]),s=f[2*r],e.opt_len+=s*(a+o),l&&(e.static_len+=s*(h[2*r+1]+o)));if(0!==b){do{for(a=p-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[p]--,b-=2}while(b>0);for(a=p;0!==a;a--)for(r=e.bl_count[a];0!==r;)(i=e.heap[--n])>c||(f[2*i+1]!==a&&(e.opt_len+=(a-f[2*i+1])*f[2*i],f[2*i+1]=a),r--)}}(e,t),S(a,c,e.bl_count)}function C(e,t,n){var r,i,a=-1,o=t[1],s=0,f=7,c=4;for(0===o&&(f=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++s<f&&i===o||(s<c?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=i,0===o?(f=138,c=3):i===o?(f=6,c=3):(f=7,c=4))}function L(e,t,n){var r,i,a=-1,o=t[1],s=0,f=7,c=4;for(0===o&&(f=138,c=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++s<f&&i===o)){if(s<c)do{E(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(E(e,i,e.bl_tree),s--),E(e,16,e.bl_tree),x(e,s-3,2)):s<=10?(E(e,17,e.bl_tree),x(e,s-3,3)):(E(e,18,e.bl_tree),x(e,s-11,7));s=0,a=i,0===o?(f=138,c=3):i===o?(f=6,c=3):(f=7,c=4)}}i(_);var B=!1;function j(e,t,n,i){x(e,0+(i?1:0),3),function(e,t,n,i){A(e),i&&(w(e,n),w(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}t._tr_init=function(e){B||(!function(){var e,t,n,r,i,f=new Array(16);for(n=0,r=0;r<28;r++)for(u[r]=n,e=0;e<1<<a[r];e++)d[n++]=r;for(d[n-1]=r,i=0,r=0;r<16;r++)for(_[r]=i,e=0;e<1<<o[r];e++)l[i++]=r;for(i>>=7;r<30;r++)for(_[r]=i<<7,e=0;e<1<<o[r]-7;e++)l[256+i++]=r;for(t=0;t<=15;t++)f[t]=0;for(e=0;e<=143;)c[2*e+1]=8,e++,f[8]++;for(;e<=255;)c[2*e+1]=9,e++,f[9]++;for(;e<=279;)c[2*e+1]=7,e++,f[7]++;for(;e<=287;)c[2*e+1]=8,e++,f[8]++;for(S(c,287,f),e=0;e<30;e++)h[2*e+1]=5,h[2*e]=k(e,5);p=new g(c,a,257,286,15),b=new g(h,o,0,30,15),m=new g(new Array(0),s,0,19,7)}(),B=!0),e.l_desc=new v(e.dyn_ltree,p),e.d_desc=new v(e.dyn_dtree,b),e.bl_desc=new v(e.bl_tree,m),e.bi_buf=0,e.bi_valid=0,M(e)},t._tr_stored_block=j,t._tr_flush_block=function(e,t,n,r){var i,a,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),z(e,e.l_desc),z(e,e.d_desc),o=function(e){var t;for(C(e,e.dyn_ltree,e.l_desc.max_code),C(e,e.dyn_dtree,e.d_desc.max_code),z(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*f[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=i&&(i=a)):i=a=n+5,n+4<=i&&-1!==t?j(e,t,n,r):4===e.strategy||a===i?(x(e,2+(r?1:0),3),R(e,c,h)):(x(e,4+(r?1:0),3),function(e,t,n,r){var i;for(x(e,t-257,5),x(e,n-1,5),x(e,r-4,4),i=0;i<r;i++)x(e,e.bl_tree[2*f[i]+1],3);L(e,e.dyn_ltree,t-1),L(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),R(e,e.dyn_ltree,e.dyn_dtree)),M(e),r&&A(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(d[n]+256+1)]++,e.dyn_dtree[2*y(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){x(e,2,3),E(e,256,c),function(e){16===e.bi_valid?(w(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,n){"use strict";var r=n(39),i=n(107),a=n(108),o=n(235),s=n(236);function f(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function c(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function h(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):-2}function l(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,h(e)):-2}function d(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?-2:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,l(e))):-2}function u(e,t){var n,r;return e?(r=new c,e.state=r,r.window=null,0!==(n=d(e,t))&&(e.state=null),n):-2}var p,b,m=!0;function _(e){if(m){var t;for(p=new r.Buf32(512),b=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,p,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,b,0,e.work,{bits:5}),m=!1}e.lencode=p,e.lenbits=9,e.distcode=b,e.distbits=5}function g(e,t,n,i){var a,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),i>=o.wsize?(r.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((a=o.wsize-o.wnext)>i&&(a=i),r.arraySet(o.window,t,n-i,a,o.wnext),(i-=a)?(r.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}t.inflateReset=l,t.inflateReset2=d,t.inflateResetKeep=h,t.inflateInit=function(e){return u(e,15)},t.inflateInit2=u,t.inflate=function(e,t){var n,c,h,l,d,u,p,b,m,v,y,w,x,E,k,S,M,A,I,T,R,z,C,L,B=0,j=new r.Buf8(4),O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(n=e.state).mode&&(n.mode=13),d=e.next_out,h=e.output,p=e.avail_out,l=e.next_in,c=e.input,u=e.avail_in,b=n.hold,m=n.bits,v=u,y=p,z=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;m<16;){if(0===u)break e;u--,b+=c[l++]<<m,m+=8}if(2&n.wrap&&35615===b){n.check=0,j[0]=255&b,j[1]=b>>>8&255,n.check=a(n.check,j,2,0),b=0,m=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&b)<<8)+(b>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&b)){e.msg="unknown compression method",n.mode=30;break}if(m-=4,R=8+(15&(b>>>=4)),0===n.wbits)n.wbits=R;else if(R>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<R,e.adler=n.check=1,n.mode=512&b?10:12,b=0,m=0;break;case 2:for(;m<16;){if(0===u)break e;u--,b+=c[l++]<<m,m+=8}if(n.flags=b,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=b>>8&1),512&n.flags&&(j[0]=255&b,j[1]=b>>>8&255,n.check=a(n.check,j,2,0)),b=0,m=0,n.mode=3;case 3:for(;m<32;){if(0===u)break e;u--,b+=c[l++]<<m,m+=8}n.head&&(n.head.time=b),512&n.flags&&(j[0]=255&b,j[1]=b>>>8&255,j[2]=b>>>16&255,j[3]=b>>>24&255,n.check=a(n.check,j,4,0)),b=0,m=0,n.mode=4;case 4:for(;m<16;){if(0===u)break e;u--,b+=c[l++]<<m,m+=8}n.head&&(n.head.xflags=255&b,n.head.os=b>>8),512&n.flags&&(j[0]=255&b,j[1]=b>>>8&255,n.check=a(n.check,j,2,0)),b=0,m=0,n.mode=5;case 5:if(1024&n.flags){for(;m<16;){if(0===u)break e;u--,b+=c[l++]<<m,m+=8}n.length=b,n.head&&(n.head.extra_len=b),512&n.flags&&(j[0]=255&b,j[1]=b>>>8&255,n.check=a(n.check,j,2,0)),b=0,m=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((w=n.length)>u&&(w=u),w&&(n.head&&(R=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,c,l,w,R)),512&n.flags&&(n.check=a(n.check,c,w,l)),u-=w,l+=w,n.length-=w),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===u)break e;w=0;do{R=c[l+w++],n.head&&R&&n.length<65536&&(n.head.name+=String.fromCharCode(R))}while(R&&w<u);if(512&n.flags&&(n.check=a(n.check,c,w,l)),u-=w,l+=w,R)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===u)break e;w=0;do{R=c[l+w++],n.head&&R&&n.length<65536&&(n.head.comment+=String.fromCharCode(R))}while(R&&w<u);if(512&n.flags&&(n.check=a(n.check,c,w,l)),u-=w,l+=w,R)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;m<16;){if(0===u)break e;u--,b+=c[l++]<<m,m+=8}if(b!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}b=0,m=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;m<32;){if(0===u)break e;u--,b+=c[l++]<<m,m+=8}e.adler=n.check=f(b),b=0,m=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=d,e.avail_out=p,e.next_in=l,e.avail_in=u,n.hold=b,n.bits=m,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){b>>>=7&m,m-=7&m,n.mode=27;break}for(;m<3;){if(0===u)break e;u--,b+=c[l++]<<m,m+=8}switch(n.last=1&b,m-=1,3&(b>>>=1)){case 0:n.mode=14;break;case 1:if(_(n),n.mode=20,6===t){b>>>=2,m-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}b>>>=2,m-=2;break;case 14:for(b>>>=7&m,m-=7&m;m<32;){if(0===u)break e;u--,b+=c[l++]<<m,m+=8}if((65535&b)!=(b>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&b,b=0,m=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(w=n.length){if(w>u&&(w=u),w>p&&(w=p),0===w)break e;r.arraySet(h,c,l,w,d),u-=w,l+=w,p-=w,d+=w,n.length-=w;break}n.mode=12;break;case 17:for(;m<14;){if(0===u)break e;u--,b+=c[l++]<<m,m+=8}if(n.nlen=257+(31&b),b>>>=5,m-=5,n.ndist=1+(31&b),b>>>=5,m-=5,n.ncode=4+(15&b),b>>>=4,m-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;m<3;){if(0===u)break e;u--,b+=c[l++]<<m,m+=8}n.lens[O[n.have++]]=7&b,b>>>=3,m-=3}for(;n.have<19;)n.lens[O[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C={bits:n.lenbits},z=s(0,n.lens,0,19,n.lencode,0,n.work,C),n.lenbits=C.bits,z){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;S=(B=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,M=65535&B,!((k=B>>>24)<=m);){if(0===u)break e;u--,b+=c[l++]<<m,m+=8}if(M<16)b>>>=k,m-=k,n.lens[n.have++]=M;else{if(16===M){for(L=k+2;m<L;){if(0===u)break e;u--,b+=c[l++]<<m,m+=8}if(b>>>=k,m-=k,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}R=n.lens[n.have-1],w=3+(3&b),b>>>=2,m-=2}else if(17===M){for(L=k+3;m<L;){if(0===u)break e;u--,b+=c[l++]<<m,m+=8}m-=k,R=0,w=3+(7&(b>>>=k)),b>>>=3,m-=3}else{for(L=k+7;m<L;){if(0===u)break e;u--,b+=c[l++]<<m,m+=8}m-=k,R=0,w=11+(127&(b>>>=k)),b>>>=7,m-=7}if(n.have+w>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;w--;)n.lens[n.have++]=R}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,C={bits:n.lenbits},z=s(1,n.lens,0,n.nlen,n.lencode,0,n.work,C),n.lenbits=C.bits,z){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,C={bits:n.distbits},z=s(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,C),n.distbits=C.bits,z){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(u>=6&&p>=258){e.next_out=d,e.avail_out=p,e.next_in=l,e.avail_in=u,n.hold=b,n.bits=m,o(e,y),d=e.next_out,h=e.output,p=e.avail_out,l=e.next_in,c=e.input,u=e.avail_in,b=n.hold,m=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;S=(B=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,M=65535&B,!((k=B>>>24)<=m);){if(0===u)break e;u--,b+=c[l++]<<m,m+=8}if(S&&0==(240&S)){for(A=k,I=S,T=M;S=(B=n.lencode[T+((b&(1<<A+I)-1)>>A)])>>>16&255,M=65535&B,!(A+(k=B>>>24)<=m);){if(0===u)break e;u--,b+=c[l++]<<m,m+=8}b>>>=A,m-=A,n.back+=A}if(b>>>=k,m-=k,n.back+=k,n.length=M,0===S){n.mode=26;break}if(32&S){n.back=-1,n.mode=12;break}if(64&S){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&S,n.mode=22;case 22:if(n.extra){for(L=n.extra;m<L;){if(0===u)break e;u--,b+=c[l++]<<m,m+=8}n.length+=b&(1<<n.extra)-1,b>>>=n.extra,m-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;S=(B=n.distcode[b&(1<<n.distbits)-1])>>>16&255,M=65535&B,!((k=B>>>24)<=m);){if(0===u)break e;u--,b+=c[l++]<<m,m+=8}if(0==(240&S)){for(A=k,I=S,T=M;S=(B=n.distcode[T+((b&(1<<A+I)-1)>>A)])>>>16&255,M=65535&B,!(A+(k=B>>>24)<=m);){if(0===u)break e;u--,b+=c[l++]<<m,m+=8}b>>>=A,m-=A,n.back+=A}if(b>>>=k,m-=k,n.back+=k,64&S){e.msg="invalid distance code",n.mode=30;break}n.offset=M,n.extra=15&S,n.mode=24;case 24:if(n.extra){for(L=n.extra;m<L;){if(0===u)break e;u--,b+=c[l++]<<m,m+=8}n.offset+=b&(1<<n.extra)-1,b>>>=n.extra,m-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===p)break e;if(w=y-p,n.offset>w){if((w=n.offset-w)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}w>n.wnext?(w-=n.wnext,x=n.wsize-w):x=n.wnext-w,w>n.length&&(w=n.length),E=n.window}else E=h,x=d-n.offset,w=n.length;w>p&&(w=p),p-=w,n.length-=w;do{h[d++]=E[x++]}while(--w);0===n.length&&(n.mode=21);break;case 26:if(0===p)break e;h[d++]=n.length,p--,n.mode=21;break;case 27:if(n.wrap){for(;m<32;){if(0===u)break e;u--,b|=c[l++]<<m,m+=8}if(y-=p,e.total_out+=y,n.total+=y,y&&(e.adler=n.check=n.flags?a(n.check,h,y,d-y):i(n.check,h,y,d-y)),y=p,(n.flags?b:f(b))!==n.check){e.msg="incorrect data check",n.mode=30;break}b=0,m=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;m<32;){if(0===u)break e;u--,b+=c[l++]<<m,m+=8}if(b!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}b=0,m=0}n.mode=29;case 29:z=1;break e;case 30:z=-3;break e;case 31:return-4;case 32:default:return-2}return e.next_out=d,e.avail_out=p,e.next_in=l,e.avail_in=u,n.hold=b,n.bits=m,(n.wsize||y!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&g(e,e.output,e.next_out,y-e.avail_out)?(n.mode=31,-4):(v-=e.avail_in,y-=e.avail_out,e.total_in+=v,e.total_out+=y,n.total+=y,n.wrap&&y&&(e.adler=n.check=n.flags?a(n.check,h,y,e.next_out-y):i(n.check,h,y,e.next_out-y)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===v&&0===y||4===t)&&0===z&&(z=-5),z)},t.inflateEnd=function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?-2:(n.head=t,t.done=!1,0):-2},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?-2:11===n.mode&&i(1,t,r,0)!==n.check?-3:g(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):-2},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,i,a,o,s,f,c,h,l,d,u,p,b,m,_,g,v,y,w,x,E,k,S,M;n=e.state,r=e.next_in,S=e.input,i=r+(e.avail_in-5),a=e.next_out,M=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),f=n.dmax,c=n.wsize,h=n.whave,l=n.wnext,d=n.window,u=n.hold,p=n.bits,b=n.lencode,m=n.distcode,_=(1<<n.lenbits)-1,g=(1<<n.distbits)-1;e:do{p<15&&(u+=S[r++]<<p,p+=8,u+=S[r++]<<p,p+=8),v=b[u&_];t:for(;;){if(u>>>=y=v>>>24,p-=y,0===(y=v>>>16&255))M[a++]=65535&v;else{if(!(16&y)){if(0==(64&y)){v=b[(65535&v)+(u&(1<<y)-1)];continue t}if(32&y){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&v,(y&=15)&&(p<y&&(u+=S[r++]<<p,p+=8),w+=u&(1<<y)-1,u>>>=y,p-=y),p<15&&(u+=S[r++]<<p,p+=8,u+=S[r++]<<p,p+=8),v=m[u&g];n:for(;;){if(u>>>=y=v>>>24,p-=y,!(16&(y=v>>>16&255))){if(0==(64&y)){v=m[(65535&v)+(u&(1<<y)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(x=65535&v,p<(y&=15)&&(u+=S[r++]<<p,(p+=8)<y&&(u+=S[r++]<<p,p+=8)),(x+=u&(1<<y)-1)>f){e.msg="invalid distance too far back",n.mode=30;break e}if(u>>>=y,p-=y,x>(y=a-o)){if((y=x-y)>h&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(E=0,k=d,0===l){if(E+=c-y,y<w){w-=y;do{M[a++]=d[E++]}while(--y);E=a-x,k=M}}else if(l<y){if(E+=c+l-y,(y-=l)<w){w-=y;do{M[a++]=d[E++]}while(--y);if(E=0,l<w){w-=y=l;do{M[a++]=d[E++]}while(--y);E=a-x,k=M}}}else if(E+=l-y,y<w){w-=y;do{M[a++]=d[E++]}while(--y);E=a-x,k=M}for(;w>2;)M[a++]=k[E++],M[a++]=k[E++],M[a++]=k[E++],w-=3;w&&(M[a++]=k[E++],w>1&&(M[a++]=k[E++]))}else{E=a-x;do{M[a++]=M[E++],M[a++]=M[E++],M[a++]=M[E++],w-=3}while(w>2);w&&(M[a++]=M[E++],w>1&&(M[a++]=M[E++]))}break}}break}}while(r<i&&a<s);r-=w=p>>3,u&=(1<<(p-=w<<3))-1,e.next_in=r,e.next_out=a,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=a<s?s-a+257:257-(a-s),n.hold=u,n.bits=p}},function(e,t,n){"use strict";var r=n(39),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,f,c,h,l,d){var u,p,b,m,_,g,v,y,w,x=d.bits,E=0,k=0,S=0,M=0,A=0,I=0,T=0,R=0,z=0,C=0,L=null,B=0,j=new r.Buf16(16),O=new r.Buf16(16),P=null,N=0;for(E=0;E<=15;E++)j[E]=0;for(k=0;k<f;k++)j[t[n+k]]++;for(A=x,M=15;M>=1&&0===j[M];M--);if(A>M&&(A=M),0===M)return c[h++]=20971520,c[h++]=20971520,d.bits=1,0;for(S=1;S<M&&0===j[S];S++);for(A<S&&(A=S),R=1,E=1;E<=15;E++)if(R<<=1,(R-=j[E])<0)return-1;if(R>0&&(0===e||1!==M))return-1;for(O[1]=0,E=1;E<15;E++)O[E+1]=O[E]+j[E];for(k=0;k<f;k++)0!==t[n+k]&&(l[O[t[n+k]]++]=k);if(0===e?(L=P=l,g=19):1===e?(L=i,B-=257,P=a,N-=257,g=256):(L=o,P=s,g=-1),C=0,k=0,E=S,_=h,I=A,T=0,b=-1,m=(z=1<<A)-1,1===e&&z>852||2===e&&z>592)return 1;for(;;){v=E-T,l[k]<g?(y=0,w=l[k]):l[k]>g?(y=P[N+l[k]],w=L[B+l[k]]):(y=96,w=0),u=1<<E-T,S=p=1<<I;do{c[_+(C>>T)+(p-=u)]=v<<24|y<<16|w|0}while(0!==p);for(u=1<<E-1;C&u;)u>>=1;if(0!==u?(C&=u-1,C+=u):C=0,k++,0==--j[E]){if(E===M)break;E=t[n+l[k]]}if(E>A&&(C&m)!==b){for(0===T&&(T=A),_+=S,R=1<<(I=E-T);I+T<M&&!((R-=j[I+T])<=0);)I++,R<<=1;if(z+=1<<I,1===e&&z>852||2===e&&z>592)return 1;c[b=C&m]=A<<24|I<<16|_-h|0}}return 0!==C&&(c[_+C]=E-T<<24|64<<16|0),d.bits=A,0}},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){var r=n(15),i=n(239),a=n(241),o=n(242),s=o.prototype;function f(e,t){if(!(this instanceof f))return new f(e,t);this.initialize.apply(this,arguments)}r.inherits(f,o),f.getSize=function(e){var t=f.RANGE;return t[8].test(e)?8:t[16].test(e)?16:t[32].test(e)?32:void 0},f.prototype.initialize=function(e,t){if(this._pos=0,this._endianness=t||"BE",this._generateMethodTable(),"string"==typeof e)return this.setupBuffer(e.length),this.write(e),this;if(r.isArray(e)){var n=e.map((function(e){var t={};return"number"==typeof e?(t.value=e,t.width=f.getSize(e)):t=e,t})),i=n.reduce((function(e,t){return e+t.width/8}),0);return this.setupBuffer(i),n.forEach(function(e){this.writeInt.call(this,e)}.bind(this)),this}this.setupBuffer(e)},f.prototype.setupBuffer=function(e,t){t=t||{fill:!0};var n=this._buffer=o(e);return t.fill&&n.fill(0),this.parent=n.parent,this.length=n.length,this.offset=n.offset,this.pool=n.pool,this._makeArrayLike(),this},f.prototype.out=function(){return this._buffer},f.prototype.write=function(e){if(r.isArray(e)||o.isBuffer(e))return this.writeRaw.apply(this,arguments);var t=e;return e.value&&(t=e.value),"string"==typeof t?this.writeString.apply(this,arguments):this.writeInt.apply(this,arguments)},f.prototype.writeInt=function(e,t){var n,r=f.RANGE[32],a=f.INT_SIZES;if("object"==typeof e&&e.value&&(e=(t=e).value),"string"==typeof e){if(!e.match(/^\d+$/))throw i.type(e,"integer");e=parseInt(e,10)}if(!r.test(e))throw i.range(e,r);if(t&&(t.size||t.width)){var o=t.size||t.width;if(!~a.indexOf(o))throw i.size(o,a);n=this._methods.bySize[e>0?"unsigned":"signed"][o]}else n=this._methods.filter((function(t){if(t.test(e))return t}))[0];if(!n)throw i.dispatch(e,t);var s=this.remaining();if(n.length>s)throw i.overflow(e,n.length,s);return n.method.call(this._buffer,e,this.position()),this.move(n.length),this},f.prototype.writeString=function(e,t){t||(t={}),"null"in t||(t.null=!0);var n=o(e),r=n.length;if(t.size){var a,s=t.size;return r>s?this.write(n.slice(0,s)):((a=o(s-r)).fill(0),this.write(o.concat([n,a])))}if(n.length>this.remaining())throw i.overflow(e,n.length,this.remaining());return this.write(n),!1!==t.null&&this.remaining()>0&&this.write(f.NULL_BYTE),this},f.prototype.writeRaw=function(e,t){if(o.isBuffer(e))return this._copyBuffer(e);if(t&&!0===t.safe){for(var n=0;n<e.length;n++)this.write8(e[n]);return this}var r=f.RANGE[8];for(n=0;n<e.length;n++){if("number"!=typeof e[n])throw i.arrayType(e,n);if(!r.test(e[n]))throw i.range(e[n],r)}return this.writeRaw(e,{safe:!0})},f.prototype.remaining=function(){return this.length-this._pos},f.prototype.attach=function(e,t){var n=f.prototype;return Object.keys(n).filter((function(e){return e.match(/^write/)})).forEach(function(t){var n=this[t].bind(this);e[t]=n}.bind(this)),t&&(e[t]=this),e},f.prototype.write8=function(e){return this.writeInt(e,{size:8})},f.prototype.write16=function(e){return this.writeInt(e,{size:16})},f.prototype.write32=function(e){return this.writeInt(e,{size:32})},f.prototype.full=function(){return 0===this.remaining()},f.prototype.position=function(e){var t=a(0,this.length);if(void 0!==e){if("number"!=typeof e)throw i.type(e,"Number");if(!t.test(e)||isNaN(e))throw i.range(e,t);return this._pos=e,this}return this._pos},f.prototype.reset=function(){return this._buffer.fill(0),this.position(0),this},f.prototype.move=function(e){if("number"!=typeof e)throw i.type(e,"Number");var t=this.position();return this.position(t+e)},f.prototype._copyBuffer=function(e){return e.copy(this,this.position()),this.move(e.length),this},f.prototype._generateMethodTable=function(){var e=this._endianness,t=f.UNSIGNED_RANGE,n=f.SIGNED_RANGE;this._methods=[{method:s.writeUInt8,length:1,test:t[8].test},{method:s["writeUInt16"+e],length:2,test:t[16].test},{method:s["writeUInt32"+e],length:4,test:t[32].test},{method:s.writeInt8,length:1,test:n[8].test},{method:s["writeInt16"+e],length:2,test:n[16].test},{method:s["writeInt32"+e],length:4,test:n[32].test}],this._methods.bySize={unsigned:{8:this._methods[0],16:this._methods[1],32:this._methods[2]},signed:{8:this._methods[3],16:this._methods[4],32:this._methods[5]}}},f.prototype._makeArrayLike=function(){for(var e=f.RANGE[8],t=(this.length,0);t<this.length;t++)(function(t){Object.defineProperty(this,t,{get:function(){return this.get(t)},set:function(n){if(!e.test(n))throw i.range(n,e);return this.set(t,n)},enumerable:!0,configurable:!0})}).bind(this)(t)},f.RANGE={8:a(-128,255),16:a(-32768,65535),32:a(-2147483648,4294967295)},f.UNSIGNED_RANGE={8:a(0,255),16:a(0,65535),32:a(0,4294967295)},f.SIGNED_RANGE={8:a(-128,127),16:a(-32768,32767),32:a(-2147483648,2147483647)},f.INT_SIZES=[8,16,32],f.NULL_BYTE=o([0]),e.exports=f},function(e,t,n){var r=n(15),i=n(240);e.exports={overflow:function(e,t,n){return i.create({name:"OverflowError",message:"Not enough space in the buffer left to write `"+e+"` (tried to write "+t+" bytes, only "+n+" remaining.)",writeLength:t,remaining:n,amountOver:t-n})},size:function(e,t){return i.create({name:"RangeError",message:r.format("Given an invalid size for writing an int (given: %s, expects: %j)",e,t),sizeGiven:e})},range:function(e,t){return i.create({name:"RangeError",message:r.format("Value outside of the valid range %j (given: %d)",t,e),min:t.min,max:t.max,value:e})},type:function(e,t){return i.create({name:"TypeError",message:r.format("Invalid type, got %s, expected %s",typeof e,t),value:e,valueType:typeof e,expectedType:t})},arrayType:function(e,t){return i.create({name:"TypeError",message:r.format("Trying to write array with non-numeric types (%j at position %d)",e[t],t),array:e,position:t,value:e[t]})},dispatch:function(e,t){return i.create({name:"DispatchError",message:r.format("Could not figure out how to dispatch (data: %j, opts: %j)",e,t)})}}},function(e,t,n){(function(e){var r=n(18);n(15);t.registered={},Error.prototype.toJSON||Object.defineProperty(Error.prototype,"toJSON",{enumerable:!1,value:function(){return function(e){for(var t=arguments.length,n=new Array(t-1),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach((function(t){Object.keys(t).forEach((function(n){var r=t.__lookupGetter__(n),i=t.__lookupSetter__(n);r||i?(i&&e.__defineSetter__(n,i),r&&e.__defineGetter__(n,r)):e[n]=t[n]}))})),e}({message:this.message,stack:this.stack,arguments:this.arguments,type:this.type},this)}}),t.create=function e(n,r){if(arguments[1]||t.registered[n]||(r=n,n=null),r&&r.stack)return r;var i,a,o;if("function"==typeof r&&(r=r()),Array.isArray(r))i=r.join(" "),r=null;else if(r)switch(typeof r){case"string":i=r||"Unspecified error",r=null;break;case"object":i=r&&r.message||"Unspecified error";break;default:i="Unspecified error"}return a=n&&t.registered[n]||Error,(o=new a(i)).name&&"Error"!==o.name||(o.name=r&&r.name||a.name||"Error"),o.stack?(o.stack=o.stack.split("\n"),o.stack.splice(1,1),o.stack=o.stack.join("\n")):(Error.call(o),Error.captureStackTrace(o,e)),r&&Object.keys(r).forEach((function(e){o[e]=r[e]})),o},t.merge=function(e,n,r){var i=t.create(n,r);return Array.isArray(e)||"object"!=typeof e||Object.keys(e).forEach((function(t){-1===["stack","type","arguments","message"].indexOf(t)&&(i[t]=e[t])})),i.name=i.name||e.name,i.message=i.message||e.message,i.stack=e.stack||i.stack,e.message&&(i.description=e.message),e.stack&&e.stack.split&&(i.stacktrace=e.stack.split("\n")),i},t.handle=function(n,i,a){if(n=t.create(n),"function"==typeof i&&i(n),"function"!=typeof i||a){var o=a||i||new r.EventEmitter;return e.nextTick((function(){o.emit("error",n)})),o}},t.register=function(e,n){1===arguments.length&&(e=(n=e).name.toLowerCase()),t.registered[e]=n},t.unregister=function(e){delete t.registered[e]}}).call(this,n(5))},function(e,t){function n(e,t){if(!(this instanceof n))return new n(e,t);this.min=e,this.max=t,this.array=[e,t],this.test=this.test.bind(this)}n.prototype.test=function(e){return!(e<this.min||e>this.max)},n.prototype.toJSON=function(){return"["+this.array.join(", ")+"]"},e.exports=n},function(e,t,n){var r=n(2).Buffer;r.concat=r.concat||function(e,t){if(!Array.isArray(e))throw new Error("Usage: Buffer.concat(list, [length])");if(0===e.length)return new r(0);if(1===e.length)return e[0];if("number"!=typeof t){t=0;for(var n=0;n<e.length;n++){t+=(o=e[n]).length}}var i=new r(t),a=0;for(n=0;n<e.length;n++){var o;(o=e[n]).copy(i,a),a+=o.length}return i},e.exports=r},function(e,t,n){var r=n(3).make("IHDR");r.prototype.initialize=function(e){var t=this.getParser(e);this.critical=!0,this.width=t.eatUInt(4),this.height=t.eatUInt(4),this.bitDepth=t.eatUInt(1),this.colourType=t.eatUInt(1),this.compressionMethod=t.eatUInt(1),this.filterMethod=t.eatUInt(1),this.interlaceMethod=t.eatUInt(1)},r.prototype.writeData=function(e){var t=this.colourType;return void 0===t&&(t=this.colorType),e.write32(this.width).write32(this.height).write8(this.bitDepth).write8(t).write8(this.compressionMethod||0).write8(this.filterMethod||0).write8(this.interlaceMethod||0),e},r.prototype.length=function(){return 13},r.COLOUR_TYPES={0:"greyscale",2:"truecolour",3:"indexed-colour",4:"greyscale with alpha",6:"truecolour with alpha"},r.GREYSCALE=0,r.TRUECOLOUR=2,r.INDEXED_COLOUR=3,r.GREYSCALE_ALPHA=4,r.TRUECOLOUR_ALPHA=6,r.BIT_DEPTHS={greyscale:[1,2,4,8,16],truecolour:[8,16],"indexed-colour":[1,2,4,8],"greyscale with alpha":[8,16],"truecolour with alpha":[8,16]},r.INTERLACE_METHODS={0:"none",1:"adam7"},r.NONE=0,r.ADAM7=1,r.COMPRESSION_METHODS={0:"zlib deflate/inflate"},r.ZLIB=0,r.FILTER_METHODS={0:"standard"},r.STANDARD=0,e.exports=r},function(e,t,n){var r=n(3),i=n(23).Colour,a=r.make("PLTE");a.prototype.initialize=function(e){var t,n=this.getParser(e);for(this.critical=!0,this.colours=[];t=n.eat(3);)this.colours.push(new i(t[0],t[1],t[2]))},a.prototype.writeData=function(e){return(this.colours||this.colors).forEach((function(t){e.write8(t.red).write8(t.green).write8(t.blue)})),e},a.prototype.length=function(){return 3*this.colours.length},e.exports=a},function(e,t,n){var r=n(3).make("IDAT");r.prototype.initialize=function(e){var t=this.getParser(e);this.type="IDAT",this.critical=!0,this.data=t.getBuffer()},r.prototype.writeData=function(e){return e.write(this.data),e},r.prototype.length=function(){return this.data.length},e.exports=r},function(e,t,n){(function(t){var r=n(3).make("IEND");r.prototype.out=function(e){return e(t([0,0,0,0,73,69,78,68,174,66,96,130]))},e.exports=r}).call(this,n(2).Buffer)},function(e,t,n){(function(t){var r=n(3).make("tEXt");r.prototype.initialize=function(e){var t=this.getParser(e);this.keyword=t.eatString();var n=t.eatRest();this.text=n&&null!==n?n.toString():""},r.prototype.writeData=function(e){return e.write(this.keyword).write(this.text),e},r.prototype.length=function(){return this.keyword.length+1+t(this.text).length},e.exports=r}).call(this,n(2).Buffer)},function(e,t,n){var r=n(3),i=n(30),a=r.make("zTXt");a.prototype.initialize=function(e){var t=this.getParser(e);this.keyword=t.eatString(),this.compressionMethod=t.eatUInt(1),this.compressedText=t.eatRest(),this.text=null},a.prototype.out=function(e){i.deflate(this.text,function(t,n){t&&(t.message="there was a problem deflating the text: "+t.message,e(t));var r=this.keyword.length+1+1+n.length,i=this._outputPrepare(r);i.write(this.keyword).write(this.compressionMethod||0).write(n),i.done(e)}.bind(this))},e.exports=a},function(e,t,n){(function(t){var r=n(3),i=n(30),a=r.make("iTXt");a.prototype.initialize=function(e){var t=this.getParser(e);this.keyword=t.eatString(),this.compressed=t.eatBool(),this.compressionMethod=t.eatUInt(1),this.languageTag=t.eatString(),this.translatedKeyword=t.eatString(),this.compressedText=t.eatRest(),this.compressed||(this.text=this.compressedText.toString())},a.prototype.out=function(e){if(!this.compressed)return this._startOutput(this.text).done(e);i.deflate(this.text,function(t,n){if(t)return e(new Error("there was a problem deflating the text:"+t));this.compressedText=n,this._startOutput(n).done(e)}.bind(this))},a.prototype._startOutput=function(e){var t=this._outputPrepare();return t.write(this.keyword).write(0|!!this.compressed).write(this.compressionMethod||0).write(this.languageTag||"").write(this.translatedKeyword||"").write(e),t},a.prototype.length=function(){return this.keyword.length+1+1+1+(t(this.languageTag||"").length+1)+(t(this.translatedKeyword||"").length+1)+(this.compressed?this.compressedText.length:t(this.text||"").length)},e.exports=a}).call(this,n(2).Buffer)},function(e,t,n){var r=n(3),i=n(23),a=i.Point,o=r.make("cHRM");o.prototype.initialize=function(e){var t=this.getParser(e);function n(){var e=i.fourByteFraction(t.eat(4)),n=i.fourByteFraction(t.eat(4));return new a(e,n)}this.whitePoint=n(),this.red=n(),this.green=n(),this.blue=n()},o.prototype.writeData=function(e){return e.write32(i.intFromFourByteFraction(this.whitePoint.x)).write32(i.intFromFourByteFraction(this.whitePoint.y)).write32(i.intFromFourByteFraction(this.red.x)).write32(i.intFromFourByteFraction(this.red.y)).write32(i.intFromFourByteFraction(this.green.x)).write32(i.intFromFourByteFraction(this.green.y)).write32(i.intFromFourByteFraction(this.blue.x)).write32(i.intFromFourByteFraction(this.blue.y)),e},o.prototype.length=function(){return 32},e.exports=o},function(e,t,n){var r=n(3),i=n(23),a=r.make("gAMA");a.prototype.initialize=function(e){var t=this.getParser(e);this.gamma=i.fourByteFraction(t.eat(4))},a.prototype.writeData=function(e){return e.write32(i.intFromFourByteFraction(this.gamma)),e},a.prototype.length=function(){return 4},e.exports=a},function(e,t,n){var r=n(3).make("tRNS");r.prototype.initialize=function(e,t){var n=this.getParser(e);this.type="tRNS";var r=this.colourType=t.colourType;if(0===r)this.greyscale=n.eatUInt(2);else if(2===r)this.red=n.eatUInt(2),this.green=n.eatUInt(2),this.blue=n.eatUInt(2);else if(3===r){var i;for(this.palette=[];i=n.eat(1);)this.palette.push(i.readUInt8(0))}},r.prototype.length=function(){var e=this.colourType;return 0===e?2:2===e?6:this.palette.length},r.prototype.writeData=function(e){var t=this.colourType;return 0===t?(e.write16(this.greyscale),e):2===t?(e.write16(this.red).write16(this.green).write16(this.blue),e):(this.palette.forEach(e.write8),e)},e.exports=r},function(e,t,n){(function(t){var r=n(3),i=(n(30),r.make("iCCP"));i.prototype.initialize=function(e){var t=this.getParser(e);this.profileName=t.eatString(),this.compressionMethod=t.eatUInt(1),this.compressedProfile=t.eatRest()},i.prototype.writeData=function(e){return e.write(this.profileName).write(this.compressionMethod).write(this.compressedProfile),e},i.prototype.length=function(){return t(this.profileName).length+1+1+this.compressedProfile.length},e.exports=i}).call(this,n(2).Buffer)},function(e,t,n){var r=n(3).make("bKGD");r.prototype.initialize=function(e,t){var n=this.getParser(e);this.type="bKGD";var r=this.colourType=t.colourType;0===r||4===r?this.greyscale=n.eatUInt(2):2===r||6===r?(this.red=n.eatUInt(2),this.green=n.eatUInt(2),this.blue=n.eatUInt(2)):this.paletteIndex=n.eatUInt(1)},r.prototype.writeData=function(e){var t=this.colourType;return 0===t||4===t?(e.write8(this.greyscale),e):2===t||6===t?(e.write16(this.red).write16(this.green).write16(this.blue),e):(e.write8(this.paletteIndex),e)},r.prototype.length=function(){var e=this.colourType;return 0===e||4===e?2:2===e||6===e?6:1},e.exports=r},function(e,t,n){var r=n(3),i=n(23).Point,a=r.make("pHYs");a.prototype.initialize=function(e){var t=this.getParser(e);this.pixelsPerUnit=new i(t.eatUInt(4),t.eatUInt(4)),this.unitSpecifier=t.eatUInt(1)},a.prototype.writeData=function(e){var t=this.pixelsPerUnit;return e.write32(t.x||t[0]).write32(t.y||t[1]).write8(this.unitSpecifier),e},a.prototype.length=function(){return 9},a.UNIT_SPECIFIERS=["unknown","meter"],e.exports=a},function(e,t,n){var r=n(3).make("sRGB");r.prototype.initialize=function(e){var t=this.getParser(e);this.renderingIntent=t.eatUInt(1)},r.prototype.length=function(){return 1},r.prototype.writeData=function(e){return e.write(this.renderingIntent),e},r.RENDERING_INTENTS=["perceptual","relative colorimetric","saturation","absolute colorimetric"],r.PERCEPTUAL=0,r.RELATIVE_COLORIMETRIC=1,r.SATURATION=2,r.ABSOLUTE_COLORIMETRIC=3,e.exports=r},function(e,t,n){var r=n(3).make("sBIT");r.prototype.initialize=function(e,t){var n=this.getParser(e),r=this.colourType=t.colourType;0===r?this.greyscale=n.eatUInt(1):2===r||3===r?(this.red=n.eatUInt(1),this.green=n.eatUInt(1),this.blue=n.eatUInt(1)):4===r?(this.greyscale=n.eatUInt(1),this.alpha=n.eatUInt(1)):6===r&&(this.red=n.eatUInt(1),this.green=n.eatUInt(1),this.blue=n.eatUInt(1),this.alpha=n.eatUInt(1))},r.prototype.length=function(){var e=this.colourType;return 0===e?1:2===e||3===e?3:4===e?2:6===e?4:void 0},r.prototype.writeData=function(e){var t=this.colourType;return 0===t?e.write(this.greyscale):2===t||3===t?(e.write(this.red).write(this.green).write(this.blue),e):4===t?(e.write(this.greyscale).write(this.alpha),e):6===t?(e.write(this.red).write(this.green).write(this.blue).write(this.alpha),e):void 0},e.exports=r},function(e,t,n){var r=n(3),i=n(23),a=r.make("hIST");a.prototype.initialize=function(e){var t=this.getParser(e);this.frequencies=t.eatRest({chunkSize:2}).map(i.to16Bit)},a.prototype.length=function(){return 2*this.frequencies.length},a.prototype.writeData=function(e){return this.frequencies.forEach((function(t){e.write16(t)})),e},e.exports=a},function(e,t,n){(function(t){var r=n(3).make("sPLT");r.prototype.initialize=function(e){var t,n,r=this.getParser(e);this.paletteName=r.eatString(),this.sampleDepth=r.eatUInt(1),this.palette=[],n=2===(t=16===this.sampleDepth?2:1)?10:6,this.palette=r.eatRest({chunkSize:n}).map(function(e){var n=this.getParser(e);return{red:n.eatUInt(t),green:n.eatUInt(t),blue:n.eatUInt(t),alpha:n.eatUInt(t),frequency:n.eatUInt(2)}}.bind(this))},r.prototype.sizes=function(e){var t=16===(this.sampleDepth||e)?2:1;return{colour:t,chunk:2===t?10:6}},r.prototype.length=function(){var e=this.sizes();return t(this.paletteName).length+1+1+this.palette.length*e.chunk},r.prototype.writeData=function(e){var t=e["write"+this.sampleDepth];return e.write(this.paletteName.trim()).write(sampleDepth),this.palette.forEach((function(n){t(n.red),t(n.green),t(n.blue),t(n.alpha),e.write16(n.frequency)})),e},e.exports=r}).call(this,n(2).Buffer)},function(e,t,n){var r=n(3).make("tIME");r.prototype.initialize=function(e){var t=this.getParser(e);this.year=t.eatUInt(2),this.month=t.eatUInt(1),this.day=t.eatUInt(1),this.hour=t.eatUInt(1),this.minute=t.eatUInt(1),this.second=t.eatUInt(1),this.date=new Date(this.year,this.month-1,this.day,this.hour-1,this.minute,this.second)},r.prototype.writeData=function(e){return e.write16(this.year).write8(this.month).write8(this.day).write8(this.hour).write8(this.minute).write8(this.second),e},r.prototype.length=function(){return 7},e.exports=r},function(e,t,n){var r=n(3),i=n(23).Point,a=r.make("oFFs");a.prototype.initialize=function(e){var t=this.getParser(e),n=t.eatInt(4),r=t.eatInt(4);this.position=new i(n,r),this.unitSpecifier=t.eatUInt(1)},a.prototype.length=function(){return 9},a.prototype.writeData=function(e){return e.write32(this.position.x).write32(this.position.y).write(this.unitSpecifier),e},a.UNIT_SPECIFIERS=["pixels","microns"],a.PIXELS=0,a.MICRONS=1,e.exports=a},function(e,t,n){var r=n(3).make("pCAL");r.prototype.initialize=function(e){var t=this.getParser(e);this.name=t.eatString(),this.originalZero=t.eatInt(4),this.originalMaximum=t.eatInt(4),this.equationType=t.eatUInt(1);t.eatUInt(1);for(this.parameters=[];t.remaining();)this.parameters.push({unit:t.eatString(),parameter:parseFloat(t.eatString())})},r.prototype.length=function(){var e=0;return e+=this.name.length+1,e+=4,e+=4,e+=1,e+=1,e=this.parameters.reduce((function(e,t){return e+(t.unit.length+1)+(t.parameter.toString().length+1)}),e),e-=1},r.prototype.writeData=function(e){return e.write(this.name),e.write32(this.originalZero),e.write32(this.originalMaximum),e.write8(this.equationType),e.write8(this.parameters.length),this.parameters.forEach((function(t){e.write(t.unit),e.write(t.parameter.toString())})),e},r.EQUATION_TYPES=["linear","base-e exponential","arbitrary-base exponential","hyperbolic"],r.LINEAR=0,r.BASE_E_EXPONENTAL=1,r.ARIBTRARY_BASE_EXPONENTIAL=2,r.HYPERBOLIC=3,e.exports=r},function(e,t,n){var r=n(3).make("sCAL");r.prototype.initialize=function(e){var t=this.getParser(e);this.unitSpecifier=t.eatUInt(1),this.width=parseFloat(t.eatString()),this.height=parseFloat(t.eatString())},r.prototype.length=function(){var e=1;return e+=this.width.toString().length+1,e+=this.height.toString().length},r.prototype.writeData=function(e){return e.write8(this.unitSpecifier).write(this.width.toString()).write(this.height.toString()),e},r.UNIT_SPECIFIERS=["meters","radians"],r.METERS=0,r.RADIANS=1,e.exports=r},function(e,t,n){var r=n(3).make("gIFg");r.prototype.initialize=function(e){var t=this.getParser(e);this.disposalMethod=t.eatUInt(1),this.userInput=t.eatBool(),this.delay=t.eatUInt(2)},r.prototype.length=function(){return 4},r.prototype.writeData=function(e){return e.write(this.disposalMethod).write(0|this.userInput).write16(this.delay),e},r.DISPOSAL_METHODS=["none","background","previous"],r.NONE=0,r.BACKGROUND=1,r.PREVIOUS=2,e.exports=r},function(e,t,n){var r=n(3).make("gIFx");r.prototype.initialize=function(e){var t=this.getParser(e);this.appIdentifier=t.eat(8).toString().replace(/\u0000/g,""),this.authCode=t.eat(3),this.appData=t.eatRest()},r.prototype.length=function(){var e=8;return e+=3,e+=this.appData.length},r.prototype.writeData=function(e){return e.writeString(this.appIdentifier,{size:8}).write(this.authCode).write(this.appData),e},e.exports=r},function(e,t,n){function r(e){var t=this.getParser(e);this.type="sTER",this.mode=t.eatUInt(1)}n(3).inherits(r),r.MODES=["cross-fuse","diverging-fuse"],r.CROSS_FUSE=0,r.DIVERGING_FUSE=1,e.exports=r},function(e,t,n){"use strict";const r=n(268),i=n(45),a=n(269),o=n(7).Instance;let s=document.createElement("canvas");const f={icon_states:new Map([["",{width:32,height:32,dirs:new Map([[2,{total_delay:100,frames:[{x:0,y:0,delay:100}]}]])}]]),image:{width:32,height:32}};e.exports={init_rendering:function(){this.is_webgl2="WebGL2RenderingContext"in window,this.gl=document.createElement("canvas").getContext(this.is_webgl2?"webgl2":"webgl");const e=this.gl;this.gl_canvas=e.canvas,this.gl_enable_framebuffer=!0,this.is_webgl2&&(this.mipmap_generator=new Worker("mipmap_generator.js"),this.mipmap_generator.onmessage=t=>{let n=t.data,r=this.gl_texture_cache.get(n.key);if(r){e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAX_LEVEL,n.out_bufs.length);for(let t=1;t<=n.out_bufs.length;t++)e.texImage2D(e.TEXTURE_2D,t,e.RGBA,n.width>>t,n.height>>t,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(n.out_bufs[t-1]));e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR)}}),(()=>{this.max_icons_per_batch=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),256);let t=function e(t,n){if(0==n)return"";if(1==n)return`color *= texture2D(u_texture[${t}], v_uv);`;{let r=Math.ceil(n/2);return`if(v_tex_index < ${r+t}.0){${e(t,r)}}else{${e(t+r,n-r)}}`}}(0,this.max_icons_per_batch);this.shader_default=this.compile_shader_program("\nprecision mediump float;\nattribute vec3 a_position;\nattribute vec4 a_color;\nvarying vec4 v_color;\nattribute vec4 a_pointerid;\nvarying vec4 v_pointerid;\nattribute vec2 a_uv;\nvarying vec2 v_uv;\nattribute float a_tex_index;\nvarying float v_tex_index;\nuniform vec2 u_viewport_size;\nvoid main() {\n\tv_color = vec4(a_color.xyz * pow(0.5, -a_position.z), a_color.w);\n\tv_pointerid = a_pointerid;\n\tv_uv = a_uv;\n\tv_tex_index = a_tex_index;\n\tgl_Position = vec4(a_position.xy / u_viewport_size * 2.0 * pow(15.0/16.0, -a_position.z), 0.0, 1.0);\n}\n",`\nprecision mediump float;\nuniform sampler2D u_texture[${this.max_icons_per_batch}];\nvarying vec4 v_color;\nvarying vec2 v_uv;\nvarying float v_tex_index;\nvarying vec4 v_pointerid;\nuniform vec2 u_viewport_size;\nuniform bool u_is_pointer_pass;\nvoid main() {     // fucking shit why is there no bitwise and\n\tvec4 color = v_color;\n\t${t}\n\tif(u_is_pointer_pass) {\n\t\tif(color.a > 0.0001 && v_pointerid.r < 0.9999) {\n\t\t\tgl_FragColor = v_pointerid;\n\t\t} else {\n\t\t\tdiscard;\n\t\t}\n\t} else {\n\t\tgl_FragColor = color;\n\t}\n}\n`),this.gl_viewport=[32,32],this.gl_current_batch=null,this.gl_texture_cache=new Map,this.gl_uniform_cache=new Map,this.gl_uniform_cache.set(this.shader_default,{u_viewport_size:e.getUniformLocation(this.shader_default,"u_viewport_size"),u_is_pointer_pass:e.getUniformLocation(this.shader_default,"u_is_pointer_pass")}),this.gl_white_texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.gl_white_texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([255,255,255,255])),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA)})(),this.gl_context_lost=!1},compile_shader:function(e,t){const n=this.gl;let r=n.createShader(t);if(n.shaderSource(r,e),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS))throw new Error((t==n.VERTEX_SHADER?"VERTEX SHADER ":"FRAGMENT SHADER ")+n.getShaderInfoLog(r));return r},compile_shader_program:function(e,t){const n=this.gl;let r=n.createProgram();if(n.attachShader(r,this.compile_shader(e,n.VERTEX_SHADER)),n.attachShader(r,this.compile_shader(t,n.FRAGMENT_SHADER)),n.linkProgram(r),!n.getProgramParameter(r,n.LINK_STATUS))throw new Error(n.getProgramInfoLog(r));return r},get_texture:function(e){if("white"==e)return this.gl_white_texture;if("string"!=typeof e)return;let t=e.toLowerCase();const n=this.gl;if(this.gl_texture_cache.has(t))return this.gl_texture_cache.get(t);if(this.icons.has(t)){let e=this.icons.get(t);if(!e)return this.gl_white_texture;let r=e.image;if(!r||!r.complete)return this.gl_white_texture;let i=n.createTexture();try{n.bindTexture(n.TEXTURE_2D,i),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r);let a=e.width,o=e.height;if(this.is_webgl2&&0==(1&a)&&0==(1&o)&&a&&o){s.width<r.width&&(s.width=r.width),s.height<r.height&&(s.height=r.height);let n=s.getContext("2d");n.globalCompositeOperation="copy",n.drawImage(r,0,0);let i=n.getImageData(0,0,r.width,r.height);this.mipmap_generator.postMessage({width:r.width,height:r.height,icon_width:e.width,icon_height:e.height,key:t,in_buf:i.data.buffer},[i.data.buffer])}n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)}finally{this.gl_texture_cache.set(t,i)}return i}return this.enqueue_icon_load(e),this.gl_white_texture},draw_appearance:function(e,t,n,o,s=-1){let c=n.dir;e=e.translate(n.pixel_x,n.pixel_y),n.transform!=i.identity&&(e=e.multiply(n.transform));let h,l=n.icon;if(!l)return;let d=n.icon_state;if("white"==l?h=f:(this.icons.has(l&&l.toLowerCase())||this.enqueue_icon_load(l),h=this.icons.get(l&&l.toLowerCase()),h||(h=this.icons.get("_fastdmm_interface.dmi"),l="_fastdmm_interface.dmi",d="")),h){let i=h.icon_states.get(d)||h.icon_states.get(" ")||h.icon_states.get("");if(i||(h=this.icons.get("_fastdmm_interface.dmi"),h&&(l="_fastdmm_interface.dmi",d="",i=h.icon_states.get("")||h.icon_states.get(" "))),i){let f=null,d=a[i.dir_count]||a[1];if(f=i.dirs.get(d[c])||i.dirs.get(2),f){let a=f.frames[0];this.gl_current_batch&&this.gl_current_batch.constructor==r&&this.gl_current_batch.can_fit(6,l)||(this.gl_current_batch&&this.gl_current_batch.draw(),this.gl_current_batch&&this.gl_current_batch.constructor==r||(this.gl_current_batch=new r(this)));let c=this.gl_current_batch,d=h.image,u=1/d.width,p=1/d.height,b=c.icon_list.indexOf(l);-1==b&&(b=c.icon_list.length,c.icon_list.push(l));let m=i.width,_=i.height,g=n.color,v=n.alpha,y=c.buffers.vertices.buf,w=c.buffers.uv.buf,x=c.buffers.colors.buf,E=c.buffers.pointer_ids.buf,k=c.buffers.texture_indices.buf;for(let n=0;n<2;n++)for(let r=0;r<3;r++){let i=n+r,f=1&i,h=(2&i)>>1,l=c.num_vertices,d=l<<1,S=d+l,M=l<<2;k[l]=b;let A=f*m,I=h*_,T=e.multiply_x(A,I),R=e.multiply_y(A,I);y[S]=T,y[S+1]=R,y[S+2]=t,o&&(o[0]=Math.min(o[0],T),o[1]=Math.min(o[1],R),o[2]=Math.max(o[2],T),o[3]=Math.max(o[3],R)),w[d]=(a.x+f*m)*u,w[d+1]=(a.y+(1-h)*_)*p,x[M]=g[0],x[M+1]=g[1],x[M+2]=g[2],x[M+3]=v,E[M]=s>>>24&255,E[M+1]=s>>>16&255,E[M+2]=s>>>8&255,E[M+3]=255&s,c.num_vertices++}}}}},build_preview_icon:async function(e){let t=this.icon_clear_cycle;!e instanceof o&&"text"==typeof e&&(e=new o(this.editor.parser,e));let n=e.get_var("icon"),r=e.get_var("icon_state"),i=e.get_var("dir");n?n=n.file:(n="_fastdmm_interface.dmi",r="");let s=await this.enqueue_icon_load(n.toLowerCase());if(s||(s=await this.enqueue_icon_load("_fastdmm_interface.dmi"),r=""),!s)return;let f=s.icon_states.get(r)||s.icon_states.get(" ")||s.icon_states.get("");if(f||(s=await this.enqueue_icon_load("_fastdmm_interface.dmi"),s&&(n="_fastdmm_interface.dmi",r="",f=s.icon_states.get("")||s.icon_states.get(" "))),!f)return;if(t!=this.icon_clear_cycle)return;let c=null,h=a[f.dir_count]||a[1];if(c=f.dirs.get(h[i])||f.dirs.get(2),!c)return;await new Promise(e=>{setTimeout(e,10)});let l=c.frames[0],d=e.get_var("color"),u=`${n}:${r}:${d}:${i}`;if(this.icon_preview_cache.has(u))return this.icon_preview_cache.get(u);let p=document.createElement("canvas");p.width=f.width,p.height=f.height;let b=p.getContext("2d");b.drawImage(s.image,l.x,l.y,f.width,f.height,0,0,f.width,f.height),d&&(b.globalCompositeOperation="multiply",b.fillStyle=d,b.fillRect(0,0,f.width,f.height),b.globalCompositeOperation="destination-in",b.drawImage(s.image,l.x,l.y,f.width,f.height,0,0,f.width,f.height));let m={width:p.width,height:p.height,url:p.toDataURL()};return this.icon_preview_cache.set(u,m),m}}},function(e,t,n){"use strict";e.exports=class{constructor(e){if(this.icon_list=[],this.num_vertices=0,this.client=e,this.init_buffers(),this.program=this.client.shader_default,this.client.gl_current_batch)throw new Error("GL batch already exists");this.client.gl_current_batch=this,this.cycle=0}init_buffers(){let e=this.client.gl;this.max_vertices=4096,this.buffers={vertices:{buf:new Float32Array(3*this.max_vertices),size:3,attrib:"a_position",gl_buf:null,gl_pos:null,type:e.FLOAT,normalize:!1},uv:{buf:new Float32Array(2*this.max_vertices),size:2,attrib:"a_uv",gl_buf:null,gl_pos:null,type:e.FLOAT,normalize:!1},colors:{buf:new Float32Array(4*this.max_vertices),size:4,attrib:"a_color",gl_buf:null,gl_pos:null,type:e.FLOAT,normalize:!1},pointer_ids:{buf:new Uint8Array(4*this.max_vertices),size:4,attrib:"a_pointerid",gl_buf:null,gl_pos:null,type:e.UNSIGNED_BYTE,normalize:!0},texture_indices:{buf:new Uint8Array(this.max_vertices),size:1,attrib:"a_tex_index",gl_buf:null,gl_pos:null,type:e.UNSIGNED_BYTE,normalize:!1}}}reset(){this.num_vertices=0,this.icon_list.length=0,this.cycle++}bind_textures(){const e=this.client.gl;for(let t=0;t<this.icon_list.length;t++){let n=e.getUniformLocation(this.program,`u_texture[${t}]`);e.uniform1i(n,t),e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.client.get_texture(this.icon_list[t]))}}can_fit(e,t){if(this.num_vertices+e>this.max_vertices)return!1;if("string"==typeof t)return!!this.icon_list.includes(t)||this.icon_list.length<this.client.max_icons_per_batch;let n=this.icon_list;for(let e of t)this.icon_list.includes(e)||n++;return!(n>this.client.max_icons_per_batch)}assign_uniforms(e=!1){const t=this.client.gl;let n=this.client.gl_uniform_cache.get(this.program);t.uniform2fv(n.u_viewport_size,this.client.gl_viewport),t.uniform1f(n.u_is_pointer_pass,+e)}draw(){if(!this.num_vertices)return;if(this.client.gl_current_batch!=this)throw new Error("Cannot draw non-active batch");let e=this.client.gl;e.useProgram(this.program),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),this.bind_textures(),this.assign_uniforms();for(let t of Object.values(this.buffers)){let n=t.gl_buf=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,t.buf.subarray(0,this.num_vertices*t.size),e.STREAM_DRAW);let r=t.gl_pos=e.getAttribLocation(this.program,t.attrib);e.vertexAttribPointer(r,t.size,t.type,t.normalize,0,0),e.enableVertexAttribArray(r)}e.bindFramebuffer(e.FRAMEBUFFER,null),e.drawArrays(e.TRIANGLES,0,this.num_vertices),this.client.gl_enable_framebuffer&&(this.assign_uniforms(!0),e.bindFramebuffer(e.FRAMEBUFFER,this.client.gl_click_framebuffer),e.blendFunc(e.ONE,e.ZERO),e.drawArrays(e.TRIANGLES,0,this.num_vertices));for(let t of Object.values(this.buffers))e.deleteBuffer(t.gl_buf),t.gl_buf=null;this.reset()}}},function(e,t,n){"use strict";e.exports=[[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[3,3,3,3,12,3,3,3,12,3,3,3,12,3,3,3],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,1,2,2,4,4,2,4,8,8,8,4,1,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[3,3,3,3,12,5,6,12,12,9,10,12,12,3,3,3],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,1,2,2,4,5,6,4,8,9,10,8,4,1,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[3,3,3,3,12,5,6,7,12,9,10,11,12,13,14,15],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]]},function(e,t,n){"use strict";const r=n(109),i=n(271),a=n(16);class o extends r{build_menu(e,t){let n=this.build_menu_base();return n.appendChild(this.build_menu_item({label:"Make Active Object",click_handler:this.make_active_object,click_handler_args:[e,t]})),n.appendChild(this.build_menu_item({label:"Delete",click_handler:this.delete,click_handler_args:[e,t]})),n.appendChild(this.build_menu_item({label:"View Variables",click_handler:this.edit_vars,click_handler_args:[e,t]})),n}delete(e,t,n){t.delete(n)}edit_vars(e,t,n){new i(this.editor,t,n)}make_active_object(e,t,n){this.editor.make_active_object(n)}}e.exports=class extends r{constructor(e){super(e),this.object_menu=new o(this.editor)}build_menu(e){let t=this.build_menu_base();if(e){this.editor.placement_mode==this.editor.select_tool&&this.editor.select_tool.selection_info_map.has(this.editor.dmm)&&(t.appendChild(this.build_menu_item({label:"Rotate 90 CW",click_handler:this.rotate,click_handler_args:[e,90]})),t.appendChild(this.build_menu_item({label:"Rotate 90 CCW",click_handler:this.rotate,click_handler_args:[e,-90]})),t.appendChild(this.build_menu_item({label:"Rotate 180",click_handler:this.rotate,click_handler_args:[e,180]})),t.appendChild(document.createElement("hr")));for(let n of e){let r=document.createElement("img");this.editor.map_window.build_preview_icon(n).then(e=>{e&&(r.src=e.url)});let i=document.createElement("span");n.type_obj?i.classList.add("unimportant-text"):i.classList.add("error-text"),i.textContent=n.type,t.appendChild(this.build_menu_item({label:[r,i,document.createElement("br"),a(n.get_var("name"))],submenu:this.object_menu,submenu_args:[e,n],classes_to_add:["map-instance-dropdown-item"]}))}}return t}rotate(e,t,n){let r=this.editor.select_tool.selection_info_map.get(this.editor.dmm);this.editor.placement_mode==this.editor.select_tool&&r&&this.editor.select_tool.rotate_selection(r,n)}}},function(e,t,n){const r=n(12),i=n(16),a=n(272),o=n(7),s=n(31),{ByondTypepath:f}=n(13),{Instance:c}=n(7);e.exports=class extends r{constructor(e,t,n){super(e,{title:n.get_var("name"),width:400,height:600}),this.tile=t,this.original_instance=n,this.instance=n,this.instance_vars=new Map([...n.vars]),this.footer_obj.classList.add("edit-vars-footer"),this.content_obj.classList.add("edit-vars-content"),this.content_obj.innerHTML="<input type='text' class='vv-search-box' placeholder=\"Search\"></input><table class='var-table'></table>",this.search_text=null,this.populate(),this.content_obj.addEventListener("dblclick",this.handle_dblclick.bind(this));let r=document.createElement("div");r.classList.add("button"),r.textContent="OK";let i=document.createElement("div");i.classList.add("button"),i.textContent="Cancel",this.footer_obj.appendChild(r),this.footer_obj.appendChild(i),i.addEventListener("click",()=>{this.close()}),r.addEventListener("click",()=>{let e=this.tile.contents.indexOf(this.original_instance);if(-1!=e){let t=new o.Instance(this.instance.context,this.instance.type,this.instance_vars);this.tile.replace_object(e,t)}else new s(this.editor,{title:"Error",message:"The instance you are editing no longer exists",modal:!1,message_classes:["error-text"]});this.close()}),this.$(".vv-search-box").addEventListener("input",e=>{this.search_text=e.target.value,this.populate()})}populate(){if(this.$(".var-table").innerHTML="",this.search_text){let e=!1;for(let t of[...this.instance_vars.keys()].sort())t.includes(this.search_text)&&(this.instance.type_obj&&this.instance.type_obj.get_var_meta(t)||(e||(this.add_header_row("Undefined Vars",["error-text"]),e=!0),this.add_var_row(t)));for(let e=this.instance.type_obj;null!=e;e=e.parent){if(!e.var_metas.size)continue;let t=!1;for(let n of[...e.var_metas.keys()].sort())n.includes(this.search_text)&&(t||(t=!0,this.add_header_row(e.path)),this.add_var_row(n))}return}let e=this.instance.get_fastdmm_prop("pinned_vars",this.instance.make_eval_context());if(e&&e.keys.length){this.add_header_row("Pinned");for(let t of e.keys)this.add_var_row(t)}let t=!1;for(let e of[...this.instance_vars.keys()].sort())this.instance.type_obj&&this.instance.type_obj.get_var_meta(e)||(t||(this.add_header_row("Undefined Vars",["error-text"]),t=!0),this.add_var_row(e));for(let e=this.instance.type_obj;null!=e;e=e.parent)if(e.var_metas.size){this.add_header_row(e.path);for(let t of[...e.var_metas.keys()].sort())this.add_var_row(t)}}add_header_row(e,t){let n=this.$(".var-table"),r=document.createElement("tr"),i=document.createElement("th");t&&i.classList.add(...t),i.colSpan=2,i.textContent=e,i.title=e,r.appendChild(i),n.appendChild(r)}add_var_row(e){let t=this.$(".var-table"),n=document.createElement("tr"),r=document.createElement("td");r.textContent=e,r.title=e;let a=document.createElement("td");a.dataset.varname=e;let o=i(this.instance.get_var(e));this.instance_vars.has(e)&&a.classList.add("var-value-modified"),a.textContent=o,a.title=o,n.appendChild(r),n.appendChild(a),t.appendChild(n)}update_var(e){if("type"!=e)for(let t of this.$$("[data-varname="+e+"]"))this.instance_vars.has(e)?t.classList.add("var-value-modified"):t.classList.remove("var-value-modified"),t.textContent=i(this.instance_vars.has(e)?this.instance_vars.get(e):this.instance.type_obj.get_var(e)),t.title=t.textContent;else this.populate()}handle_dblclick(e){let t=e.target.closest("td");if(t&&t.dataset.varname){let e=t.dataset.varname;t.contentEditable=!0,t.focus();let n=window.getSelection(),r=document.createRange();r.selectNodeContents(t),n.removeAllRanges(),n.addRange(r);let o=()=>{t.removeEventListener("keydown",h),t.removeEventListener("focusout",l),t.removeEventListener("input",d),t.contentEditable=!1,this.update_var(e)},h=async n=>{if("Enter"==n.code){n.preventDefault();let r=t.textContent;if(""==r.trim())this.instance_vars.delete(e),o();else{o();try{let t=await this.editor.parser.eval_text(r);if(!a(t)&&"Yes"!=await new s(this.editor,{title:"Warning",message:`The value you have entered (${i(t)}) may not be parsed correctly by some map parsers. Are you sure you wish to enter this value?`,modal:!0,message_classes:["warning-text"],options:["Yes","No"]}).wait_until_close())return;if("type"==e){if(!(t instanceof f&&this.editor.parser.types.has(t.path)))throw new Error("Not a valid type");this.search_text=null,this.$(".vv-search-box").value="",this.instance=new c(this.instance.context,t.path,this.instance.vars)}else this.instance_vars.set(e,t);o()}catch(n){console.error(n),new s(this.editor,{title:"Error",message:n,modal:!1,message_classes:["error-text"]})}}}else"Escape"==n.code&&(n.preventDefault(),o())},l=()=>{o()},d=e=>{t.textContent=t.textContent.replace(/\r?\n/g,"")};t.addEventListener("keydown",h),t.addEventListener("focusout",l),t.addEventListener("input",d)}}}},function(e,t,n){const{ByondList:r,ByondNewlist:i,ByondTypepath:a,ByondFile:o,ByondNew:s,ByondMatrix:f}=n(13),c=n(16);e.exports=function e(t){if(null==t)return!0;if("number"==typeof t)return t!=1/0&&(t!=-1/0&&t==t);if("string"==typeof t)return c(t)==`"${t}"`;if(t instanceof s)return!1;if(t instanceof a)return!t.vars||!t.vars.size;if(t instanceof o)return!0;if(t instanceof i)return!1;if(t instanceof r){if(t.keys)for(let n=0;n<t.keys.length;n++){if(t.values&&void 0!==t.values[n]&&!e(t.values[n]))return!1;if(!e(t.keys[n]))return!1}return!0}return!1}},function(e,t,n){"use strict";e.exports=class{constructor(e){this.editor=e,this.container=document.getElementById("objtree-window"),this.search_bar=document.getElementById("objtree-search"),this.tree_elem=document.createElement("div"),this.list_elem=document.createElement("div"),this.container.appendChild(this.tree_elem),this.container.addEventListener("click",this.click_handler.bind(this)),this.search_bar.addEventListener("input",this.search_input.bind(this)),this.search_bar.addEventListener("keydown",this.search_keydown.bind(this)),this.is_searching=!1,this.node_elements=new Map,this.node_elements_search=new Map,this.hidden_set=new Set,this.hidden_set_change_index=0,this.selected_path=null}set_searching(e){e!=this.is_searching&&(e?(this.tree_elem.parentElement==this.container&&this.container.removeChild(this.tree_elem),this.container.appendChild(this.list_elem),this.container.scrollTop=0):(this.list_elem.parentElement==this.container&&this.container.removeChild(this.list_elem),this.container.appendChild(this.tree_elem)),this.is_searching=e)}click_handler(e){let t=e.target.closest(".tree-item"),n=e.target.closest(".tree-item-expander");return n?(t.classList.contains("expanded")?(t.classList.remove("expanded"),t.querySelector(".tree-item-content").innerHTML=""):(this.fill_children(t.dataset.typepath),t.classList.add("expanded")),void e.preventDefault()):(n=e.target.closest(".tree-item-eye"),n?(this.set_hidden_recursive(t.dataset.typepath,!t.classList.contains("viewport-hide")),this.hidden_set_change_index++,void e.preventDefault()):(n=e.target.closest(".tree-item-header"),n?(this.selected_path!=t.dataset.typepath&&this.set_selected(t.dataset.typepath,!1,!1),void e.preventDefault()):void 0))}toggle_typepath_vis(e){this.set_hidden_recursive(e,!this.hidden_set.has(e)),this.hidden_set_change_index++}search_input(){let e=this.search_bar.value,t=e.length>0;if(this.set_searching(t),t){let t=0;for(let t of[...this.list_elem.children])t.dataset.typepath.includes(e)||this.list_elem.removeChild(t);let n=new DocumentFragment,r=this.list_elem.firstChild;for(let[i,a]of this.sorted_types){if(!i.includes(e))continue;if(t++,t>200)break;let o=this.create_or_get_list_node(i,a);o&&(o==r?(this.list_elem.insertBefore(n,o),n=new DocumentFragment,r=r.nextSibling):n.appendChild(o))}r?this.list_elem.insertBefore(n,r):this.list_elem.appendChild(n)}else this.selected_path&&this.set_selected(this.selected_path,!0)}search_keydown(e){if(this.search_bar.value)if("Enter"==e.code||"Escape"==e.code)"Enter"==e.code&&this.list_elem.children.length&&!this.list_elem.querySelector(".selected")&&this.set_selected(this.list_elem.firstChild.dataset.typepath),this.search_bar.value="",this.search_input(),e.target.blur(),e.preventDefault();else if("ArrowDown"==e.code&&this.list_elem.children.length){let t=this.list_elem.querySelector(".selected"),n=t&&t.nextSibling||this.list_elem.firstChild;this.set_selected(n.dataset.typepath),e.preventDefault()}else if("ArrowUp"==e.code&&this.list_elem.children.length){let t=this.list_elem.querySelector(".selected"),n=t&&t.previousSibling;n&&this.set_selected(n.dataset.typepath),e.preventDefault()}}create_or_get_node(e,t=!1,n,r){let i=this.node_elements.get(e);if(i&&i.parentElement)return t&&this.fill_children(e,n,i.querySelector(".tree-item-content")),i;if(n||(n=this.editor.parser.types.get(e)),!n)return void console.warn("No type object for "+e+" in object tree");if(!r)if(["/area","/mob","/obj","/turf"].includes(e))r=this.tree_elem;else if(n.parent&&((r=this.create_or_get_node(n.parent.path,!0,n.parent))&&(r=r.querySelector(".tree-item-content")),i=this.node_elements.get(e),i&&i.parentElement))return t&&this.fill_children(e,n,i.querySelector(".tree-item-content")),i;if(!r)return void console.warn("No parent element for "+e+" in object tree");if(i)return r.appendChild(i),i;let a=document.createElement("div");a.classList.add("tree-item"),a.dataset.typepath=e,this.node_elements.set(e,a),this.make_item_header(a,e,n,!0);let o=document.createElement("div");return o.classList.add("tree-item-content"),a.appendChild(o),r.appendChild(a),t&&this.fill_children(e,n,o),a}create_or_get_list_node(e,t){let n=this.node_elements_search.get(e);if(n)return n;t||(t=this.editor.parser.types.get(e));let r=document.createElement("div");return r.classList.add("tree-item"),r.dataset.typepath=e,this.make_item_header(r,e,t,!1,!0),this.node_elements_search.set(e,r),r}make_item_header(e,t,n,r,i=!1){let a=document.createElement("div");if(a.classList.add("tree-item-header"),this.selected_path==t&&e.classList.add("selected"),e.appendChild(a),r){let e=document.createElement("div");e.classList.add("tree-item-expander"),0==n.subtypes.length&&e.classList.add("leaf"),a.appendChild(e)}let o=document.createElement("div");o.classList.add("tree-item-eye"),this.hidden_set.has(t)&&e.classList.add("viewport-hide"),a.appendChild(o);let s=document.createElement("img");s.classList.add("tree-item-icon"),a.appendChild(s),this.editor.map_window.build_preview_icon(n).then(e=>{e&&(s.src=e.url)});let f=document.createElement("div");f.classList.add("tree-item-label");let c=t;!i&&n.parent&&c.startsWith(n.parent.path)&&(c=c.substring(n.parent.path.length+1)),c=c.replace(/\//g,"/"),f.textContent=c,a.appendChild(f)}fill_children(e,t,n){t||(t=this.editor.parser.types.get(e));for(let e of t.subtypes)this.create_or_get_node(e.path,!1,e,n)}build_tree(){this.selected_path=null,this.sorted_types=[...this.editor.parser.types].sort((e,t)=>e[0]>t[0]?1:-1).filter(e=>e[1].istype("/area")||e[1].istype("/mob")||e[1].istype("/obj")||e[1].istype("/turf")),this.node_elements.clear(),this.node_elements_search.clear(),this.hidden_set.clear(),this.tree_elem.innerHTML="";for(let e of["/area","/mob","/obj","/turf"])this.create_or_get_node(e,!1)}set_selected(e,t=!1,n=!0){if(e==this.selected_path)return;for(let e of[...this.node_elements.values()])e.classList.remove("selected");for(let e of[...this.node_elements_search.values()])e.classList.remove("selected");let r=this.searching?this.node_elements.get(e):this.create_or_get_node(e,!1);if(r){let n=r;for(;n&&n.classList.contains("tree-item");)if(n!=r&&(this.fill_children(n.dataset.typepath,null,n.querySelector(".tree-item-content")),n.classList.add("expanded")),n.parentElement)n=n.parentElement.closest(".tree-item");else{let e=this.editor.parser.types.get(n.dataset.typepath);n=this.node_elements.get(e.parent.path)}r.classList.add("selected"),setTimeout(()=>{e==this.selected_path&&r.scrollIntoView({block:t?"center":"nearest",inline:"nearest",behavior:"smooth"})},1)}this.selected_path=e,this.editor.instance_window.rebuild(),this.editor.instance_window.set_selected(e);let i=this.node_elements_search.get(e);i&&(i.classList.add("selected"),i.scrollIntoView({block:n?"center":"nearest",inline:"nearest"}))}set_hidden_recursive(e,t=!1,n){if(n||(n=this.editor.parser.types.get(e)),!n)return;let r=this.node_elements.get(e);r&&(t?r.classList.add("viewport-hide"):r.classList.remove("viewport-hide"));let i=this.node_elements_search.get(e);i&&(t?i.classList.add("viewport-hide"):i.classList.remove("viewport-hide")),t?this.hidden_set.add(e):this.hidden_set.delete(e);for(let e of n.subtypes)this.set_hidden_recursive(e.path,t,e)}}},function(e,t,n){"use strict";const{Instance:r}=n(7),i=n(16);e.exports=class{constructor(e){this.editor=e,this.selected=null,this.container=document.getElementById("instancewindow"),this.map_instances=new Map,this.using_variants=!1,this.container.addEventListener("click",this.handle_click.bind(this))}handle_click(e){if(!e.target)return;let t=e.target.closest(".variant-leaf");t&&t.dataset.instance&&this.set_selected(t.dataset.instance)}set_selected(e,t=!1){if(e==this.selected||!e)return;let n=e;e.includes("{")&&(n=e.substring(0,e.indexOf("{"))),n!=this.editor.objtree_window.selected_path&&this.editor.objtree_window.set_selected(n,t,t),this.selected=e;for(let n of this.container.querySelectorAll(".variant-leaf"))n.dataset.instance==e?(n.classList.add("selected"),n.scrollIntoView({block:t?"center":"nearest",inline:"nearest",behavior:"smooth"})):n.classList.remove("selected")}rebuild(){this.container.innerHTML="",this.using_variants=!1;let e=[];for(let t of this.map_instances)t[1].type==this.editor.objtree_window.selected_path&&e.push(t);e.sort((e,t)=>e[0]>t[0]?1:-1);for(let[t,n]of e)this.container.appendChild(this.build_single_instance(t,n))}build_single_instance(e,t){let n=document.createElement("div");n.classList.add("vertical-node-container");let r=document.createElement("div");r.classList.add("variant-node","variant-leaf"),r.dataset.instance=e,n.appendChild(r);let a=document.createElement("img");if(r.appendChild(a),this.editor.map_window.build_preview_icon(t).then(e=>{a.src=e.url,a.width=e.width,a.height=e.height}),t.vars.size){let e=document.createElement("pre"),r=[];for(let[e,n]of[...t.vars].sort((e,t)=>e[0]>t[0]?1:-1))r.push(e+" = "+i(n));e.textContent=r.join("\n"),n.appendChild(e)}return n}add_instance(e){let t=new r(this.editor.parser,e);this.map_instances.set(e,t);let n=this.editor.objtree_window.selected_path;if(!this.using_variants&&n&&(n==e||e.startsWith(n+"{"))){let n=null;for(let t of this.container.querySelectorAll(".variant-leaf"))if(t.dataset.instance>e){n=t.closest(".vertical-node-container");break}let r=this.build_single_instance(e,t);n?this.container.insertBefore(r,n):this.container.appendChild(r,n)}}remove_instance(e){this.map_instances.delete(e);let t=this.editor.objtree_window.selected_path;if(!this.using_variants&&t&&(t==e||e.startsWith(t+"{")))for(let t of this.container.querySelectorAll(".variant-leaf"))if(t.dataset.instance==e){let e=t.closest(".vertical-node-container");e.parentElement.removeChild(e)}}}},function(e,t,n){"use strict";const r=n(109),i=n(276),a=n(7),o=n(110);class s extends r{build_menu(e=""){let t=this.build_menu_base(),n=new Set;if(this.editor.file_context)for(let r of this.editor.file_context.dmm_files){if(!r.startsWith(e))continue;let i=r.substring(e.length),a=i.indexOf("/");if(-1!=a){let r=i.substring(0,a);n.has(r)||(t.appendChild(this.build_menu_item({label:r,submenu:this,submenu_args:[e+i.substring(0,a+1)]})),n.add(r))}else t.appendChild(this.build_menu_item({label:i,click_handler:this.open,click_handler_args:[r]}))}return t}open(e,t){this.editor.open_dmm(t)}}class f extends r{build_menu(){if(!this.editor.dmm)return null;let e=this.build_menu_base();return e.appendChild(this.build_menu_item({label:"LF",click_handler:this.set_crlf,click_handler_args:[!1],classes_to_add:this.editor.dmm.is_crlf?[]:["selected"]})),e.appendChild(this.build_menu_item({label:"CRLF",click_handler:this.set_crlf,click_handler_args:[!0],classes_to_add:this.editor.dmm.is_crlf?["selected"]:[]})),e.appendChild(document.createElement("hr")),e.appendChild(this.build_menu_item({label:"Standard",click_handler:this.set_format,click_handler_args:["standard"],classes_to_add:"standard"==this.editor.dmm.format?["selected"]:[]})),e.appendChild(this.build_menu_item({label:"TGM",click_handler:this.set_format,click_handler_args:["tgm"],classes_to_add:"tgm"==this.editor.dmm.format?["selected"]:[]})),e.appendChild(this.build_menu_item({label:"Maphash",click_handler:this.set_format,click_handler_args:["maphash"],classes_to_add:"maphash"==this.editor.dmm.format?["selected"]:[]})),e.appendChild(document.createElement("hr")),e.appendChild(this.build_menu_item({label:`Size: ${this.editor.dmm.maxx}x${this.editor.dmm.maxy}x${this.editor.dmm.maxz}`,click_handler:this.resize})),e}set_crlf(e,t=!1){this.editor.dmm.is_crlf=t}set_format(e,t="standard"){this.editor.dmm.format=t}}let c={GitHub:"https://github.com/monster860/FastDMM2","Report Issue":"https://github.com/monster860/FastDMM2/issues/new"};e.exports={FileMenu:class extends r{build_menu(){let e=this.build_menu_base();return e.appendChild(this.build_menu_item({label:"New",click_handler:this.new_map})),e.appendChild(this.build_menu_item({label:"Open",submenu:new s(this.editor),disabled:null==this.editor.file_context})),e.appendChild(this.build_menu_item({label:"Export",click_handler:this.export_map,disabled:!this.editor.dmm})),this.editor.file_context.add_file_menu_options&&this.editor.file_context.add_file_menu_options(this,e),e}export_map(){let e=this.editor.dmm;e&&e.download()}async new_map(){let e=await new i(this.editor,null,"New Map",!1).wait_until_close();if(!e)return;let t=new a(this.editor.parser,e.filename,e.maxx,e.maxy,e.maxz),n=!1;for(let e of this.editor.dmm_tabs){n=!0,t.is_crlf=e.is_crlf,t.format=e.format;break}if(!n){this.editor.set_loading();for(let e of this.editor.file_context.dmm_files)try{let r=await this.editor.read_text_file(e),i=new a(this.editor.parser,e,r);t.is_crlf=i.is_crlf,t.format=i.format,n=!0;break}catch(e){console.error(e)}this.editor.clear_loading()}this.editor.add_tab(t)}},OptionsMenu:class extends r{constructor(e){super(e),this.dmm_menu=new f(e)}build_menu(){let e=this.build_menu_base();return e.appendChild(this.build_menu_item({label:"Frame Areas",click_handler:this.toggle_frame_areas,classes_to_add:this.editor.map_window.frame_areas?["on"]:[]})),e.appendChild(this.build_menu_item({label:"Map Options",submenu:this.dmm_menu,disabled:null==this.editor.dmm})),e}toggle_frame_areas(){this.editor.map_window.frame_areas=!this.editor.map_window.frame_areas}},HelpMenu:class extends r{constructor(e){super(e)}build_menu(){let e=this.build_menu_base();for(let[t,n]of Object.entries(c))e.appendChild(this.build_menu_item({label:t,click_handler:this.open_url,click_handler_args:[n]}));return e.appendChild(this.build_menu_item({label:"Show Changelog",click_handler:this.open_changelog})),e}open_url(e,t){window.open(t,"_blank")}open_changelog(){new o(this,{changelog_data:this.editor.changelog_data,modal:!0})}}}},function(e,t,n){const r=n(12);e.exports=class extends r{constructor(e,t,n="Map Options"){super(e,{title:n,width:400,height:300,can_close:!0}),this.close_response=null,this.content_obj.innerHTML="\n\t\t\t<div class='vertical-margins'>\n\t\t\t\t<input type='text' class='button filename-input' pattern='^(?=.*[^?%*:|\"<>.])[^?%*:|\"<>]+$' style='width:100%'>\n\t\t\t</div>\n\t\t\t<div class='vertical-margins'>\n\t\t\t\t<table>\n\t\t\t\t\t<tr><td>Width</td><td><input type='number' class='button maxx-input'></td></tr>\n\t\t\t\t\t<tr><td>Height</td><td><input type='number' class='button maxy-input'></td></tr>\n\t\t\t\t\t<tr><td>Z-levels</td><td><input type='number' class='button maxz-input'></td></tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t";let r=this.$(".filename-input");r.value=t?t.filename:"untitled-"+Math.floor(1e5*Math.random())+".dmm";let i=this.$(".maxx-input");i.min=1,i.max=1024,i.value=t?t.maxx:10;let a=this.$(".maxy-input");a.min=1,a.max=1024,a.value=t?t.maxy:10;let o=this.$(".maxz-input");o.min=1,o.max=64,o.value=t?t.maxz:1;let s=document.createElement("div");s.classList.add("button"),s.textContent="OK",s.addEventListener("click",()=>{+i.value<1&&(i.value=1),+a.value<1&&(a.value=1),+o.value<1&&(o.value=1),this.close_response={dmm:t,filename:r.value.replace(/\\/g,"/"),maxx:+i.value,maxy:+a.value,maxz:+o.value},this.close()}),this.footer_obj.appendChild(s);let f=document.createElement("div");f.classList.add("button"),f.textContent="Cancel",f.addEventListener("click",()=>{this.close_response=null,this.close()}),this.footer_obj.appendChild(f)}}},function(e,t,n){"use strict";const r=n(63),i=n(40),a=n(32),o=n(22),s=new a({icon:"_fastdmm_interface.dmi",icon_state:"15",color:[1,1,1],layer:500,plane:1e5,alpha:.4});class f extends i{mousedown(e){this.initial_tile=this.editor.map_window.mouse_pixel_tile,this.instance=this.editor.map_window.mouse_pixel_instance,this.mouse_tile=e,this.curr_mouse_tile=e}mousemove(e){this.curr_mouse_tile=e}mouseup(){let e=this.initial_tile;if(!this.curr_mouse_tile||!e)return;let t=e.dmm.get_tile(e.x+this.dx(),e.y+this.dy(),e.z);t&&e&&e.contents.includes(this.instance)&&!t.contents.includes(this.instance)&&(e.delete(this.instance),t.place(this.instance)),e.dmm.push_undo()}visualize(e){if(this.curr_mouse_tile)for(let t of e)t.instance==this.instance&&t.tile==this.initial_tile&&(t.x+=this.dx(),t.y+=this.dy())}dx(){return this.curr_mouse_tile?this.curr_mouse_tile.x-this.mouse_tile.x:0}dy(){return this.curr_mouse_tile?this.curr_mouse_tile.y-this.mouse_tile.y:0}}class c extends i{mousedown(e){this.initial_tile=this.editor.map_window.mouse_pixel_tile,this.instance=this.editor.map_window.mouse_pixel_instance,this.replacement_instance=this.instance,this.start_mx=this.editor.map_window.mouse_x_float,this.start_my=this.editor.map_window.mouse_y_float,this.last_dx=0,this.last_dy=0}mousemove_pixel(e){if(!this.editor.map_window.mouse_x_float)return;let t=Math.round(32*(this.editor.map_window.mouse_x_float-this.start_mx)),n=Math.round(32*(this.editor.map_window.mouse_y_float-this.start_my));this.last_dx==t&&this.last_dy==n||(this.last_dx=t,this.last_dy=n,this.mark_dirty(),this.replacement_instance=this.instance.copy(),this.replacement_instance.set_var("pixel_x",this.instance.get_var("pixel_x")+t),this.replacement_instance.set_var("pixel_y",this.instance.get_var("pixel_y")+n),0==t&&this.instance.vars.has("pixel_x")||this.replacement_instance.get_var("pixel_x")!=this.replacement_instance.type_obj.get_var("pixel_x")||this.replacement_instance.vars.delete("pixel_x"),0==n&&this.instance.vars.has("pixel_y")||this.replacement_instance.get_var("pixel_y")!=this.replacement_instance.type_obj.get_var("pixel_y")||this.replacement_instance.vars.delete("pixel_y"))}mouseup(){let e=this.initial_tile,t=e.contents.indexOf(this.instance);-1!=t&&e.replace_object(t,this.replacement_instance),e.dmm.push_undo()}visualize(e){for(let t of e)t.instance==this.instance&&t.tile==this.initial_tile&&(t.appearance=this.replacement_instance.get_appearance());e.push(new o(s,this.initial_tile.x,this.initial_tile.y,this.initial_tile.z,this.initial_tile))}get_status_text(){return`pixel_x=${this.replacement_instance.get_var("pixel_x")};pixel_y=${this.replacement_instance.get_var("pixel_y")}`}}class h extends r{update_is_pixel(){this.is_pixel=!0}get_handler(e,t,n){if(this.editor.map_window.mouse_pixel_instance)return e.shiftKey||e.ctrlKey?!e.shiftKey&&e.ctrlKey?new c(this.editor,t,n):void 0:new f(this.editor,t,n)}}h.fa_icon="fa-arrows-alt",h.description="Drag",h.usage="Click/Drag - Move Object\nCtrl Click/Drag - Move object by pixel_x/y\nCtrl Shift Middle Click - Delete Object",h.uses_instance_panel=!1,e.exports=h},function(e,t,n){"use strict";const r=n(111),i=n(40),{Instance:a}=n(7),o=n(22),s=n(279);class f extends i{mousedown(e){e.dmm==this.dmm&&(this.tiles=[e],this.preview_instances=null,this.pipe_group=this.editor.pipe_manager.get_pipe_group(new a(this.editor.parser,this.type)),this.mousemove(e))}mousemove(e){if(e.dmm!=this.dmm)return;let t=this.tiles[this.tiles.length-1],n=this.editor.pipe_manager.is_pipe_group_diagonal(this.pipe_group);for(;t!=e;){let r=t.get_dir(e,!n);if(!r)break;if(t=t.get_step(r),!t)break;this.preview_instances=null,t==this.tiles[this.tiles.length-2]?this.tiles.pop():this.tiles.push(t)}}mouseup(){for(let e=0;e<this.tiles.length;e++){let t=this.tiles[e],n=t.get_dir(this.tiles[e-1]),r=t.get_dir(this.tiles[e+1]),i=this.editor.pipe_manager.place_group_instance(this.pipe_group,t,n,r);i&&t.place(i)}this.dmm.push_undo()}visualize(e){if(!this.preview_instances){this.preview_instances=[];for(let e=0;e<this.tiles.length;e++){let t=this.tiles[e],n=t.get_dir(this.tiles[e-1]),r=t.get_dir(this.tiles[e+1]);!n&&r?n=this.editor.pipe_manager.get_group_dirs(this.pipe_group,t)[0]:n&&!r&&(r=this.editor.pipe_manager.get_group_dirs(this.pipe_group,t)[0]);let i=this.editor.pipe_manager.make_group_instance(this.pipe_group,n,r);i&&this.preview_instances.push([t,i])}}for(let[t,n]of this.preview_instances)e.push(new o(n.get_appearance(),t.x,t.y,t.z))}}class c extends i{mousedown(e){e.dmm==this.dmm&&(this.start_tile=e,this.tiles=[],this.preview_instances=null,this.pipe_group=this.editor.pipe_manager.get_pipe_group(new a(this.editor.parser,this.type)),this.pipe_interference_group=this.editor.pipe_manager.get_pipe_interference_groups(new a(this.editor.parser,this.type)))}mousemove(e,t){if(e.dmm!=this.dmm)return;if(!t)return;if(e==this.start_tile)return void(this.tiles=[]);let n=new s(this.dmm,this.editor.pipe_manager,this.pipe_group,this.pipe_interference_group,this.start_tile);n.cost_limit=1e4,this.tiles=n.run(e)||[],this.preview_instances=null}mouseup(){for(let e=0;e<this.tiles.length;e++){let t=this.tiles[e],n=t.get_dir(this.tiles[e-1]),r=t.get_dir(this.tiles[e+1]),i=this.editor.pipe_manager.place_group_instance(this.pipe_group,t,n,r);i&&t.place(i)}this.dmm.push_undo()}visualize(e){if(!this.preview_instances){this.preview_instances=[];for(let e=0;e<this.tiles.length;e++){let t=this.tiles[e],n=t.get_dir(this.tiles[e-1]),r=t.get_dir(this.tiles[e+1]);!n&&r?n=this.editor.pipe_manager.get_group_dirs(this.pipe_group,t)[0]:n&&!r&&(r=this.editor.pipe_manager.get_group_dirs(this.pipe_group,t)[0]);let i=this.editor.pipe_manager.make_group_instance(this.pipe_group,n,r);i&&this.preview_instances.push([t,i])}}for(let[t,n]of this.preview_instances)e.push(new o(n.get_appearance(),t.x,t.y,t.z))}}class h extends r{get_handler(e,t,n){return!this.is_pixel&&n&&!e.ctrlKey&&this.editor.pipe_manager.get_pipe_group(new a(this.editor.parser,n))?e.shiftKey?new f(this.editor,t,n):new c(this.editor,t,n):super.get_handler(e,t,n)}}h.HandlerPipe=f,h.fa_icon="fa-wave-square",h.description="Pipe Placement",h.usage="Click/Drag - Place Pipes With AStar\nShift Click/Drag - Place Pipes Without AStar\nCtrl Shift Click - Make Active Object/View Varialbes\nCtrl Shift Middle Click - Delete Object",h.uses_instance_panel=!0,e.exports=h},function(e,t,n){"use strict";const r=n(280);e.exports=class extends r{constructor(e,t,n,r,i){super(e),this.pipe_group=n,this.pipe_interference_group=r,this.pipe_manager=t,this.target_tile=i,this.cost_limit=1e4,this.is_diagonal=this.pipe_manager.is_pipe_group_diagonal(this.pipe_group)}check_complete(e){return e.tile==this.target_tile}get_adjacent(e){let t=[],n=e.previous_node?e.previous_node.tile.get_dir(e.tile):0;for(let r of this.is_diagonal?[1,2,4,8,5,6,9,10]:[1,2,4,8]){if(this.pipe_manager.check_pipe_interference(this.pipe_group,this.pipe_interference_group,e.tile,r,!0))continue;let i=3&r&&12&r,a=0;n&&n!=r&&a++;let o=e.tile.get_step(r);for(let e of o)a+=this.pipe_manager.get_astar_cost(e);i&&(a*=1.5),t.push([o,a])}return t}calculate_heuristic(e){return this.is_diagonal?Math.sqrt((e.x-this.target_tile.x)**2+(e.y-this.target_tile.y)**2+(e.z-this.target_tile.z)**2):Math.abs(e.x-this.target_tile.x)+Math.abs(e.y-this.target_tile.y)+Math.abs(e.z-this.target_tile.z)}}},function(e,t,n){"use strict";const r=n(281);class i{constructor(e,t){this.tile=e,this.g_score=1/0,this.h_score=t,this.previous_node=null}get f_score(){return this.g_score+this.h_score}}e.exports=class{constructor(e){this.dmm=e,this.cost_limit=1/0}run(...e){if(!e)return;let t=new r((e,t)=>e.f_score-t.f_score),n=new Map;e&&e.length&&"number"==typeof e[0]&&(e=[e]);for(let r of e){if(n.has(r))continue;let e=new i(r,this.calculate_heuristic(r));e.g_score=0,n.set(r,e),t.insert(e)}let a=null;for(;!t.is_empty();){let e=t.pop(),r=this.get_adjacent(e);for(let[o,s]of r){if(s<=0)throw new Error("negative g-cost");if(s+e.g_score>this.cost_limit)continue;let r=n.get(o);if(r)r.g_score>e.g_score+s&&(r.g_score=e.g_score+s,r.previous_node=e,t.resort(r));else if(r=new i(o,this.calculate_heuristic(o)),r.g_score=e.g_score+s,r.previous_node=e,n.set(o,r),t.insert(r),this.check_complete(r)){a=r;break}}if(a)break}if(a){let e=[];for(e.total_cost=a.g_score;a;)e.push(a.tile),a=a.previous_node;return e.reverse(),e}}check_complete(e){return!1}get_adjacent(e){return[]}calculate_heuristic(e){return 0}}},function(e,t,n){"use strict";e.exports=class{constructor(e){this.cmp=e,this.arr=[]}is_empty(){return!this.arr.length}insert(e){this.arr.push(e),this.swim(this.arr.length-1)}pop(){if(!this.arr.length)return;let e=this.arr[0];return this.arr[0]=this.arr[this.arr.length-1],this.arr.length--,this.arr.length&&this.sink(0),e}swim(e){let t=Math.floor(.5*(e-1));for(;t>=0&&this.cmp(this.arr[e],this.arr[t])<0;){let n=this.arr[e];this.arr[e]=this.arr[t],this.arr[t]=n,e=t,t=Math.floor(.5*(e-1))}}sink(e){let t=e;do{if(t!=e){let n=this.arr[e];this.arr[e]=this.arr[t],this.arr[t]=n,e=t}let n=2*e+1;t=n>=this.arr.length?-1:n+1>=this.arr.length||this.cmp(this.arr[n],this.arr[n+1])<0?n:n+1}while(t>=0&&this.cmp(this.arr[e],this.arr[t])>0)}resort(e){let t=this.arr.indexOf(e);t<0||(this.swim(t),this.sink(t))}}},function(e,t,n){"use strict";const r=n(63),i=n(40),a=n(7),{Tile:o,Instance:s}=n(7),f=n(32),c=n(22),{draw_box:h}=n(38),{PIPE_TYPE_CABLE:l,PIPE_TYPE_SIMPLE:d,PIPE_TYPE_STRAIGHT:u}=n(62),{turn_dir:p}=n(38);class b extends i{mousedown(e,t,n){if(this.select_tool=t,this.select_mode=n,"replace"==this.select_mode){let e=this.select_tool.get_selection_info(this.dmm);e.tiles.clear(),e.tiles_vis.clear()}this.tile_a=e,this.tile_b=e}mousemove(e){e.dmm==this.dmm&&(this.tile_b=e)}mouseup(){let e=this.select_tool.get_selection_info(this.dmm);e.tiles_vis.clear();let t=Math.min(this.tile_a.z,this.tile_b.z),n=Math.min(this.tile_a.y,this.tile_b.y),r=Math.min(this.tile_a.x,this.tile_b.x),i=Math.max(this.tile_a.z,this.tile_b.z),a=Math.max(this.tile_a.y,this.tile_b.y),o=Math.max(this.tile_a.x,this.tile_b.x);"replace"==this.select_mode&&e.tiles.clear();for(let s=t;s<=i;s++)for(let t=n;t<=a;t++)for(let n=r;n<=o;n++){let r=this.dmm.get_tile(n,t,s);r&&("subtract"==this.select_mode?e.tiles.delete(r):e.tiles.add(r))}}visualize(e){h(e,v,this.tile_a,this.tile_b)}dx(){return this.curr_mouse_tile?this.curr_mouse_tile.x-this.mouse_tile.x:0}dy(){return this.curr_mouse_tile?this.curr_mouse_tile.y-this.mouse_tile.y:0}get_status_text(){let e=this.tile_a.x,t=this.tile_a.y,n=this.tile_a.z,r=this.tile_b.x,i=this.tile_b.y,a=this.tile_b.z;return`${Math.abs(r-e)+1}x${Math.abs(i-t)+1}x${Math.abs(a-n)+1} (${e},${t},${n})-(${r},${i},${a})`}}class m extends i{mousedown(e,t){this.selection_info=t,this.last_tile=e}mousemove(e){if(e.dmm!=this.dmm)return;let t=e.x-this.last_tile.x,n=e.y-this.last_tile.y,r=e.z-this.last_tile.z;this.selection_info.float_offset_x+=t,this.selection_info.float_offset_y+=n,this.selection_info.float_offset_z+=r,this.last_tile=e}}class _ extends r{constructor(e){super(e),this.selection_info_map=new WeakMap}update_is_pixel(){this.is_pixel=!1}get_handler(e,t,n){let r=this.get_selection_info(t.dmm);if(r.tiles.has(t)&&!e.ctrlKey==!e.shiftKey&&r.float(e.ctrlKey&&e.shiftKey?this.editor.objtree_window.hidden_set:null,!0),r.float_dmm){if(r.float_dmm.get_tile(t.x-r.float_offset_x,t.y-r.float_offset_y,t.z-r.float_offset_z))return new m(this.editor,t,n,r)}return r.float_dmm&&r.anchor(),new b(this.editor,t,n,this,e.ctrlKey?"subtract":e.shiftKey?"add":"replace")}visualize(e){let t=this.selection_info_map.get(this.editor.dmm);if(t)if(t.float_dmm){for(let[n,r,i]of t.float_dmm.all_coordinates()){let a=t.float_dmm.get_tile(n,r,i);for(let o of a){let s=o.get_appearance();s&&e.push(new c(s,n+t.float_offset_x,r+t.float_offset_y,i+t.float_offset_z,a,o,!0))}}if(!t.float_tiles_vis.size)for(let e of t.float_tiles){let n=15;for(let r of[1,2,4,8]){let i=e.get_step(r);i&&t.float_tiles.has(i)&&(n&=~r)}t.float_tiles_vis.set(e,n)}for(let[n,r]of t.float_tiles_vis)0!=r&&e.push(new c(v[r],n.x+t.float_offset_x,n.y+t.float_offset_y,n.z+t.float_offset_z))}else{if(!t.tiles_vis.size)for(let e of t.tiles){let n=15;for(let r of[1,2,4,8]){let i=e.get_step(r);i&&t.tiles.has(i)&&(n&=~r)}t.tiles_vis.set(e,n)}for(let[n,r]of t.tiles_vis)0!=r&&e.push(new c(v[r],n.x,n.y,n.z))}}rotate_selection(e,t=0){e.float_dmm||e.float();let n=(Math.round(t/90)%4+4)%4;if(0==n)return;t=90*n;let r,i,o,s=[0,-1,0,1][n],f=[1,0,-1,0][n],c=(e.float_dmm.maxx+1)/2,h=(e.float_dmm.maxy+1)/2;2==n?(r=new a(e.float_dmm.context,void 0,e.float_dmm.maxx,e.float_dmm.maxy,e.float_dmm.maxz,!0),i=c,o=h):(r=new a(e.float_dmm.context,void 0,e.float_dmm.maxy,e.float_dmm.maxx,e.float_dmm.maxz,!0),i=h,o=c);for(let[n,a,l]of e.float_dmm.all_coordinates()){let d=e.float_dmm.get_tile(n,a,l),u=Math.round((n-c)*f-(a-h)*s+i),p=Math.round((n-c)*s+(a-h)*f+o),b=r.get_tile(u,p,l);for(let e of d.contents)e=this.rotate_instance(e,t),b.push(e)}e.float_dmm=r,e.update_float_tiles()}rotate_instance(e,t){if(0==t)return e;let n=this.editor.pipe_manager.get_pipe_type(e);if(e=e.copy(),n==l){let n=e.get_var("icon_state"),r=n.split("-"),i=p(+r[0],t),a=p(+r[1],t);n=`${Math.min(i,a)}-${Math.max(i,a)}`;let o=null;e.type_obj&&(o=e.type_obj.get_var("icon_state")),n==o?e.vars.delete("icon_state"):e.vars.set("icon_state",n)}else{let r=e.get_fastdmm_prop("dir_amount",e.make_eval_context(this.editor.parser))||0;if(!r){r=1;let t=e.get_appearance();if(t.icon){let e=this.editor.map_window.icons.get(t.icon.toLowerCase());if(e){let n=e.icon_states.get(t.icon_state)||e.icon_states.get("")||e.icon_states.get(" ");n&&(r=n.dir_count||1)}}}if(1==r)return e;let i=e.get_var("dir"),a=2;e.type_obj&&(a=e.type_obj.get_var("dir")),i=p(i,t),n!=u&&n!=d||(1==i?i=2:8==i&&(i=4)),i==a?e.vars.delete("dir"):e.vars.set("dir",i)}return e.update_vars(),e.cached_appearance=void 0,e}get_selection_info(e){if(!this.selection_info_map.has(e)){let t=new g(e);return this.selection_info_map.set(e,t),t}return this.selection_info_map.get(e)}handle_hotkey(e){let t=this.editor.dmm,n=this.selection_info_map.get(t);if(n){if("Delete"==e.code)return n.float_dmm||n.float(e.shiftKey?this.editor.objtree_window.hidden_set:null),n.float_dmm=null,this.editor.map_window.draw_dirty=!0,!0;if("KeyC"==e.code&&e.ctrlKey){let t=n.float_dmm;return t||(n.float(e.ctrlKey&&e.shiftKey?this.editor.objtree_window.hidden_set:null,!1),t=n.float_dmm,n.float_dmm=null),t?(navigator.clipboard.writeText(t.toString()),!0):!0}if("KeyX"==e.code&&e.ctrlKey){let t=n.float_dmm;return t||(n.float(e.ctrlKey&&e.shiftKey?this.editor.objtree_window.hidden_set:null,!0),t=n.float_dmm),t?(n.float_dmm=null,navigator.clipboard.writeText(t.toString()),!0):!0}return!1}}handle_global_hotkey(e){return!("KeyV"!=e.code||!e.ctrlKey)&&(navigator.clipboard.readText().then(e=>{let t=this.editor.dmm;if(!t)return;let n=this.get_selection_info(t),r=new a(this.editor.parser,void 0,e);r&&(n.float_dmm&&n.anchor(),n.tiles.clear(),n.tiles_vis.clear(),n.float_dmm=r,n.update_float_tiles(),n.float_offset_x=Math.round(this.editor.map_window.mouse_x||t.mapwindow_x)-Math.floor(r.maxx/2),n.float_offset_y=Math.round(this.editor.map_window.mouse_y||t.mapwindow_y)-Math.floor(r.maxy/2),n.float_offset_z=Math.round(this.editor.map_window.mouse_z||t.mapwindow_z)-r.maxz,this.editor.map_window.draw_dirty=!0,this.editor.placement_mode!=this&&this.editor.set_placement_mode(this))}),!0)}unselect_tool(){for(let e of this.editor.dmm_tabs){let t=this.selection_info_map.get(e);t&&t.anchor()}}}_.fa_icon="fa-vector-square",_.description="Select",_.usage="Click/Drag - Select / Drag Selection\nCtrl-Shift-Click/Drag - Drag selection (visible only)\nShift-Click/Drag - Add To Selection\nCtrl-Click/Drag - Remove From Selection\nCtrl-C - Copy\nCtrl-Shift-C - Copy (visible only)\nCtrl-X - Cut\nCtrl-Shift-X - Cut (visible only)\nCtrl-V - Paste\nDelete - Delete\nShift-Delete - Delete (visible only)",_.uses_instance_panel=!1;class g{constructor(e){this.dmm=e,this.float_dmm=null,this.float_offset_x=0,this.float_offset_y=0,this.float_offset_z=0,this.float_tiles=new Set,this.float_tiles_vis=new Map,this.tiles=new Set,this.tiles_vis=new Map}float(e=null,t=!0){if(this.float_dmm&&this.anchor(),!this.tiles.size)return;let n=1/0,r=1/0,i=1/0,o=0,s=0,f=0;for(let e of this.tiles)n=Math.min(e.x,n),r=Math.min(e.y,r),i=Math.min(e.z,i),o=Math.max(e.x,o),s=Math.max(e.y,s),f=Math.max(e.z,f);this.float_offset_x=n-1,this.float_offset_y=r-1,this.float_offset_z=i-1,this.float_dmm=new a(this.dmm.context,void 0,o-n+1,s-r+1,f-i+1,!0),this.float_dmm.is_crlf=this.dmm.is_crlf,this.float_dmm.format=this.dmm.format;for(let n of this.tiles){let r=this.float_dmm.get_tile(n.x-this.float_offset_x,n.y-this.float_offset_y,n.z-this.float_offset_z);for(let i of[...n.contents])e&&e.has(i.type)||(t&&n.delete(i),r.push(i))}t&&(this.tiles.clear(),this.tiles_vis.clear()),this.update_float_tiles()}update_float_tiles(){if(this.float_tiles.clear(),this.float_tiles_vis.clear(),this.float_dmm)for(let[e,t,n]of this.float_dmm.all_coordinates()){let r=this.float_dmm.get_tile(e,t,n);r.contents.length&&this.float_tiles.add(r)}}anchor(){if(this.float_dmm){for(let[e,t,n]of this.float_dmm.all_coordinates()){let r=this.float_dmm.get_tile(e,t,n),i=this.dmm.get_tile(e+this.float_offset_x,t+this.float_offset_y,n+this.float_offset_z);if(i)for(let e of r)i.place(e.copy())}this.dmm.push_undo(),this.float_dmm=null}}}_.SelectionInfo=g;const v=[];for(let e=0;e<16;e++)v.push(new f({icon:"_fastdmm_interface.dmi",icon_state:"sel"+e,layer:500,plane:1e5}));e.exports=_},function(e){e.exports=JSON.parse('[{"date":"2020-04-27","author":"monster860","desc":"Adds a changelog window that shows up if there\'s new changes. This changelog can be accessed through the Help menu."},{"date":"2020-04-27","author":"monster860","desc":"Adds the ability to pixel_x/y drag items by using the drag mode with Ctrl-Click/Drag"},{"date":"2020-04-27","author":"monster860","desc":"Improves the look of the instances panel so that the vars of instances are neater"},{"date":"2020-04-27","author":"monster860","desc":"Layers can now be toggled with Alt-1/2/3/4 for area/mob/obj/turf respectively"},{"date":"2020-04-27","author":"monster860","desc":"Adds a search box to the VV window"},{"date":"2020-04-27","author":"monster860","desc":"The type of objects can now be changed via the VV window"},{"date":"2020-04-27","author":"monster860","desc":"Adds a coordinates display to the bottom left corner of the screen"},{"date":"2020-04-27","author":"monster860","desc":"Adds ability to pan the map window using arrow keys"},{"date":"2020-04-28","author":"monster860","desc":"Areas are now framed. This can be disabled in the options menu"},{"date":"2020-05-22","author":"monster860","desc":"Adds a confirmation before closing if there are unsaved changes"},{"date":"2020-05-27","author":"monster860","desc":"Fixes Open Local Workspace not working on latest chrome. Requires upgrade to latest chrome version (83)."},{"date":"2020-05-30","author":"monster860","desc":"Fixes saving not working on chrome"},{"date":"2020-06-26","author":"monster860","desc":"Adds the ability to rotate selections using the right-click menu after making a selection"},{"date":"2020-07-03","author":"monster860","desc":"Mip-mapping has been moved to a separate thread"},{"date":"2020-10-01","author":"monster860","desc":"The editor now uses a service worker to cache itself to your disk, meaning you can now use it offline."}]')}]);